!function(){function e(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(){return t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=n(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},t.apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof m?t:m,a=Object.create(r.prototype),s=new P(i||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",p="executing",v="completed",g={};function m(){}function b(){}function y(){}var k={};u(k,s,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,s)&&(k=_);var x=y.prototype=m.prototype=Object.create(k);function T(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,o,a,s){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){l.value=e,a(l)},function(e){return n("throw",e,a,s)})}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(o,o):o()}})}function S(t,n,i){var r=f;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var c=C(s,i);if(c){if(c===g)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=p;var l=h(t,n,i);if("normal"===l.type){if(r=i.done?v:"suspendedYield",l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=v,i.method="throw",i.arg=l.arg)}}}function C(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=h(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,o(x,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},T(A.prototype),u(A.prototype,c,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new A(d(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(x),u(x,l,"Generator"),u(x,s,function(){return this}),u(x,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:I(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function f(e,t,n){return t=w(t),p(e,y()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},m(e)}function b(e,t,n){if(y())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&k(r,n.prototype),r}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var _=Math.pow;(self.webpackChunkmultikart=self.webpackChunkmultikart||[]).push([[107],{29726:function(n,s){var c,u;c=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}),(u=c.en=c.en||{}).dictionary=Object.assign(u.dictionary||{},{"%0 of %1":"%0 of %1","Align center":"Align center","Align left":"Align left","Align right":"Align right",Aquamarine:"Aquamarine",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Circle:"Circle",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Disc:"Disc","Document colors":"Document colors",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Huge:"Huge","Image toolbar":"Image toolbar","image widget":"image widget","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Lower-latin":"Lower-latin","Lower\u2013roman":"Lower\u2013roman","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Square:"Square",Strikethrough:"Strikethrough","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower\u2013latin list style":"Toggle the lower\u2013latin list style","Toggle the lower\u2013roman list style":"Toggle the lower\u2013roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper\u2013latin list style":"Toggle the upper\u2013latin list style","Toggle the upper\u2013roman list style":"Toggle the upper\u2013roman list style",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman",White:"White","Widget toolbar":"Widget toolbar",Yellow:"Yellow"}),window,n.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=112)}([function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i=function(e){function t(e,n,i){var r;return l(this,t),(r=f(this,t,["".concat(e).concat(i?" "+JSON.stringify(i):"").concat(o(e))])).name="CKEditorError",r.context=n,r.data=i,r}return g(t,e),d(t,[{key:"is",value:function(e){return"CKEditorError"===e}}],[{key:"rethrowUnexpectedError",value:function(e,n){if(e.is&&e.is("CKEditorError"))throw e;var i=new t(e.message,n);throw i.stack=e.stack,i}}]),t}(m(Error));function r(e,t){var n;(n=console).warn.apply(n,a(function(e,t){var n=o(e);return t?[e,t,n]:[e,n]}(e,t)))}function o(e){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+e}},function(e,t,n){"use strict";var i,r,o=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}r[e]=t}return r[e]}),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],r=0;r<e.length;r++){var o=e[r],c=t.base?o[0]+t.base:o[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=s(u),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(h)):a.push({identifier:u,updater:g(h,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach(function(e){t.setAttribute(e,i[e])}),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,v=0;function g(e,t){var n,i,r;if(t.singleton){var o=v++;n=p||(p=l(t)),i=h.bind(null,n,o,!1),r=h.bind(null,n,o,!0)}else n=l(t),i=f.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);a[r].references--}for(var o=c(e,t),l=0;l<n.length;l++){var u=s(n[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=o}}}},,function(e,t,n){"use strict";var i=n(8),r="object"==typeof self&&self&&self.Object===Object&&self,o=i.a||r||Function("return this")();t.a=o},function(e,t,n){"use strict";(function(e){var i=n(3),r=n(13),o=s&&!s.nodeType&&s,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===o?i.a.Buffer:void 0;t.a=(c?c.isBuffer:void 0)||r.a}).call(this,n(10)(e))},function(e,t,n){"use strict";(function(e){var i=n(8),r=s&&!s.nodeType&&s,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r&&i.a.process,c=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=c}).call(this,n(10)(e))},function(e,t,n){"use strict";(function(e){var t=n(0),i="object"==typeof window?window:e;if(i.CKEDITOR_VERSION)throw new t.a("ckeditor-duplicated-modules",null);i.CKEDITOR_VERSION="27.1.0"}).call(this,n(11))},function(e,t,n){var i=n(1),r=n(77);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t,n){"use strict";(function(e){t.a="object"==typeof e&&e&&e.Object===Object&&e}).call(this,n(11))},function(e,t,n){"use strict";(function(e){var i=n(3),r=s&&!s.nodeType&&s,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r?i.a.Buffer:void 0,c=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,i=c?c(n):new e.constructor(n);return e.copy(i),i}}).call(this,n(10)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(1),r=n(72);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){var i=n(1),r=n(15);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(e,t,n){var i=n(1),r=n(17);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(e,t,n){var i=n(1),r=n(19);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}'},function(e,t,n){var i=n(1),r=n(21);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(e,t,n){var i=n(1),r=n(23);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}"},function(e,t,n){var i=n(1),r=n(25);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(e,t,n){var i=n(1),r=n(27);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}"},function(e,t,n){var i=n(1),r=n(29);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}"},function(e,t,n){var i=n(1),r=n(31);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}"},function(e,t,n){var i=n(1),r=n(33);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(e,t,n){var i=n(1),r=n(35);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(e,t,n){var i=n(1),r=n(37);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var i=n(1),r=n(39);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(e,t,n){var i=n(1),r=n(41);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(e,t,n){var i=n(1),r=n(43);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}"},function(e,t,n){var i=n(1),r=n(45);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(e,t,n){var i=n(1),r=n(47);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}"},function(e,t,n){var i=n(1),r=n(49);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}'},function(e,t,n){var i=n(1),r=n(51);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(e,t,n){var i=n(1),r=n(53);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(e,t,n){var i=n(1),r=n(55);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var i=n(1),r=n(57);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}"},function(e,t,n){var i=n(1),r=n(59);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(e,t,n){var i=n(1),r=n(61);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}'},function(e,t,n){var i=n(1),r=n(63);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}"},function(e,t,n){var i=n(1),r=n(65);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}'},function(e,t,n){var i=n(1),r=n(67);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}"},function(e,t,n){var i=n(1),r=n(69);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}"},function(e,t,n){var i=n(1),r=n(71);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(e,t,n){var i=n(1),r=n(74);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}"},function(e,t,n){var i=n(1),r=n(76);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}"},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'},function(e,t,n){var i=n(1),r=n(79);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{position:static}"},function(e,t,n){var i=n(1),r=n(81);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}"},function(e,t,n){var i=n(1),r=n(83);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(e,t,n){var i=n(1),r=n(85);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(e,t,n){var i=n(1),r=n(87);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(e,t,n){var i=n(1),r=n(89);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(e,t,n){var i=n(1),r=n(91);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}"},function(e,t,n){var i=n(1),r=n(93);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(e,t,n){var i=n(1),r=n(95);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}"},function(e,t,n){var i=n(1),r=n(97);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{display:grid}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar{background:none;padding:0}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{grid-template-columns:repeat(3,auto);row-gap:var(--ck-spacing-medium);column-gap:var(--ck-spacing-medium);padding:var(--ck-spacing-medium)}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size);padding:0;margin:0;box-sizing:content-box}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button .ck-icon{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size)}"},function(e,t,n){var i=n(1),r=n(99);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'},function(e,t,n){var i=n(1),r=n(101);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}"},function(e,t,n){var i=n(1),r=n(103);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}"},function(e,t,n){var i=n(1),r=n(105);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(e,t,n){var i=n(1),r=n(107);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(e,t,n){var i=n(1),r=n(109);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}'},function(e,t,n){var i=n(1),r=n(111);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]),i(r,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=r.locals||{}},function(e,t){e.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}"},function(n,s,c){"use strict";var u=i().mark(fs),h=i().mark(ps),m=i().mark(Bu);c.r(s),c.d(s,"default",function(){return yb});var y=d(function e(t,n){l(this,e),this.source=t,this.name=n,this.path=[],this.stop=function e(){e.called=!0},this.off=function e(){e.called=!0}}),k=new Array(256).fill().map(function(e,t){return("0"+t.toString(16)).slice(-2)});function x(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0;return"e"+k[e>>0&255]+k[e>>8&255]+k[e>>16&255]+k[e>>24&255]+k[t>>0&255]+k[t>>8&255]+k[t>>16&255]+k[t>>24&255]+k[n>>0&255]+k[n>>8&255]+k[n>>16&255]+k[n>>24&255]+k[i>>0&255]+k[i>>8&255]+k[i>>16&255]+k[i>>24&255]}var T={get:function(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},A=(c(6),c(0)),S=Symbol("listeningTo"),C=Symbol("emitterId"),O={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.listenTo(this,e,t,n)},once:function(e,t,n){var i=!1;this.listenTo(this,e,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];i||(i=!0,e.off(),t.call.apply(t,[this,e].concat(r)))},n)},off:function(e,t){this.stopListening(this,e,t)},listenTo:function(e,t,n){var i,r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this[S]||(this[S]={});var a=this[S];P(e)||E(e);var s,c,l,u,d=P(e);(i=a[d])||(i=a[d]={emitter:e,callbacks:{}}),(r=i.callbacks[t])||(r=i.callbacks[t]=[]),r.push(n),c=t,l=n,u=o,(s=e)._addEventListener?s._addEventListener(c,l,u):this._addEventListener.call(s,c,l,u)},stopListening:function(e,t,n){var i=this[S],r=e&&P(e),o=i&&r&&i[r],a=o&&t&&o.callbacks[t];if(!(!i||e&&!o||t&&!a))if(n)L(this,e,t,n),-1!==a.indexOf(n)&&(1===a.length?delete o.callbacks[t]:L(this,e,t,n));else if(a){for(;n=a.pop();)L(this,e,t,n);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete i[r]}else{for(r in i)this.stopListening(i[r].emitter);delete this[S]}},fire:function(e){try{for(var t=e instanceof y?e:new y(this,e),n=t.name,i=function e(t,n){var i;return t._events&&(i=t._events[n])&&i.callbacks.length?i.callbacks:n.indexOf(":")>-1?e(t,n.substr(0,n.lastIndexOf(":"))):null}(this,n),r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(t.path.push(this),i){var s=[t].concat(o);i=Array.from(i);for(var c=0;c<i.length&&(i[c].callback.apply(this,s),t.off.called&&(delete t.off.called,this._removeEventListener(n,i[c].callback)),!t.stop.called);c++);}if(this._delegations){var l=this._delegations.get(n),u=this._delegations.get("*");l&&N(l,t,o),u&&N(u,t,o)}return t.return}catch(V){A.a.rethrowUnexpectedError(V,this)}},delegate:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return{to:function(t,i){e._delegations||(e._delegations=new Map),n.forEach(function(n){var r=e._delegations.get(n);r?r.set(t,i):e._delegations.set(n,new Map([[t,i]]))})}}},stopDelegating:function(e,t){if(this._delegations)if(e)if(t){var n=this._delegations.get(e);n&&n.delete(t)}else this._delegations.delete(e);else this._delegations.clear()},_addEventListener:function(e,t,n){!function(e,t){var n=I(e);if(!n[t]){for(var i=t,r=null,a=[];""!==i&&!n[i];)n[i]={callbacks:[],childEvents:[]},a.push(n[i]),r&&n[i].childEvents.push(r),r=i,i=i.substr(0,i.lastIndexOf(":"));if(""!==i){var s,c=o(a);try{for(c.s();!(s=c.n()).done;){s.value.callbacks=n[i].callbacks.slice()}}catch(l){c.e(l)}finally{c.f()}n[i].childEvents.push(r)}}}(this,e);var i,r=M(this,e),a=T.get(n.priority),s={callback:t,priority:a},c=o(r);try{for(c.s();!(i=c.n()).done;){for(var l=i.value,u=!1,d=0;d<l.length;d++)if(l[d].priority<a){l.splice(d,0,s),u=!0;break}u||l.push(s)}}catch(h){c.e(h)}finally{c.f()}},_removeEventListener:function(e,t){var n,i=o(M(this,e));try{for(i.s();!(n=i.n()).done;)for(var r=n.value,a=0;a<r.length;a++)r[a].callback==t&&(r.splice(a,1),a--)}catch(s){i.e(s)}finally{i.f()}}};function E(e,t){e[C]||(e[C]=t||x())}function P(e){return e[C]}function I(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function M(e,t){var n=I(e)[t];if(!n)return[];for(var i=[n.callbacks],r=0;r<n.childEvents.length;r++){var o=M(e,n.childEvents[r]);i=i.concat(o)}return i}function N(e,t,n){var i,s=o(e);try{for(s.s();!(i=s.n()).done;){var c=r(i.value,2),l=c[0],u=c[1];u?"function"==typeof u&&(u=u(t.name)):u=t.name;var d=new y(t.source,u);d.path=a(t.path),l.fire.apply(l,[d].concat(a(n)))}}catch(h){s.e(h)}finally{s.f()}}function L(e,t,n,i){t._removeEventListener?t._removeEventListener(n,i):e._removeEventListener.call(t,n,i)}var R,j,D,V,Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},z=c(3),F=z.a.Symbol,q=Object.prototype,B=q.hasOwnProperty,U=q.toString,H=F?F.toStringTag:void 0,W=Object.prototype.toString,Y=F?F.toStringTag:void 0,J=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?function(e){var t=B.call(e,H),n=e[H];try{e[H]=void 0;var i=!0}catch(o){}var r=U.call(e);return i&&(t?e[H]=n:delete e[H]),r}(e):function(e){return W.call(e)}(e)},Q=function(e){if(!Z(e))return!1;var t=J(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},G=z.a["__core-js_shared__"],$=(R=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",K=Function.prototype.toString,X=function(e){if(null!=e){try{return K.call(e)}catch(D){}try{return e+""}catch(D){}}return""},ee=/^\[object .+?Constructor\]$/,te=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Z(e)||function(e){return!!$&&$ in e}(e))&&(Q(e)?te:ee).test(X(e))}(n)?n:void 0},ie=function(){try{var e=ne(Object,"defineProperty");return e({},"",{}),e}catch(D){}}(),re=function(e,t,n){"__proto__"==t&&ie?ie(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},oe=function(e,t){return e===t||e!=e&&t!=t},ae=Object.prototype.hasOwnProperty,se=function(e,t,n){var i=e[t];ae.call(e,t)&&oe(i,n)&&(void 0!==n||t in e)||re(e,t,n)},ce=function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=i?i(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),r?re(n,s,c):se(n,s,c)}return n},le=function(e){return e},ue=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},de=Math.max,he=function(e){return function(){return e}},fe=ie?function(e,t){return ie(e,"toString",{configurable:!0,enumerable:!1,value:he(t),writable:!0})}:le,pe=Date.now,ve=(j=fe,D=0,V=0,function(){var e=pe(),t=16-(e-V);if(V=e,t>0){if(++D>=800)return arguments[0]}else D=0;return j.apply(void 0,arguments)}),ge=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},me=function(e){return null!=e&&ge(e.length)&&!Q(e)},be=/^(?:0|[1-9]\d*)$/,ye=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t},ke=function(e){return function(e,t){return ve(function(e,t,n){return t=de(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=de(i.length-t,0),a=Array(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(a),ue(e,this,s)}}(e,t,le),e+"")}(function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!Z(n))return!1;var i=typeof t;return!!("number"==i?me(n)&&ye(t,n.length):"string"==i&&t in n)&&oe(n[t],e)}(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t})},we=function(e){return null!=e&&"object"==typeof e},_e=function(e){return we(e)&&"[object Arguments]"==J(e)},xe=Object.prototype,Te=xe.hasOwnProperty,Ae=xe.propertyIsEnumerable,Se=_e(function(){return arguments}())?_e:function(e){return we(e)&&Te.call(e,"callee")&&!Ae.call(e,"callee")},Ce=Array.isArray,Oe=c(4),Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object Boolean]"]=Ee["[object DataView]"]=Ee["[object Date]"]=Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object WeakMap]"]=!1;var Pe=function(e){return function(t){return e(t)}},Ie=c(5),Me=Ie.a&&Ie.a.isTypedArray,Ne=Me?Pe(Me):function(e){return we(e)&&ge(e.length)&&!!Ee[J(e)]},Le=Object.prototype.hasOwnProperty,Re=function(e,t){var n=Ce(e),i=!n&&Se(e),r=!n&&!i&&Object(Oe.a)(e),o=!n&&!i&&!r&&Ne(e),a=n||i||r||o,s=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=s.length;for(var l in e)!t&&!Le.call(e,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ye(l,c))||s.push(l);return s},je=Object.prototype,De=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)},Ve=Object.prototype.hasOwnProperty,Ze=function(e){return me(e)?Re(e,!0):function(e){if(!Z(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=De(e),n=[];for(var i in e)("constructor"!=i||!t&&Ve.call(e,i))&&n.push(i);return n}(e)},ze=ke(function(e,t){ce(t,Ze(t),e)}),Fe=Symbol("observableProperties"),qe=Symbol("boundObservables"),Be=Symbol("boundProperties"),Ue=Symbol("decoratedMethods"),He=Symbol("decoratedOriginal"),We={set:function(e,t){var n=this;if(Z(e))Object.keys(e).forEach(function(t){n.set(t,e[t])},this);else{Je(this);var i=this[Fe];if(e in this&&!i.has(e))throw new A.a("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function(){return i.get(e)},set:function(t){var n=i.get(e),r=this.fire("set:"+e,e,t,n);void 0===r&&(r=t),n===r&&i.has(e)||(i.set(e,r),this.fire("change:"+e,e,r,n))}}),this[e]=t}},bind:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length||!$e(n))throw new A.a("observable-bind-wrong-properties",this);if(new Set(n).size!==n.length)throw new A.a("observable-bind-duplicate-properties",this);Je(this);var r=this[Be];n.forEach(function(t){if(r.has(t))throw new A.a("observable-bind-rebind",e)});var o=new Map;return n.forEach(function(e){var t={property:e,to:[]};r.set(e,t),o.set(e,t)}),{to:Qe,toMany:Ge,_observable:this,_bindProperties:n,_to:[],_bindings:o}},unbind:function(){var e=this;if(this[Fe]){for(var t=this[Be],n=this[qe],i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];if(r.length){if(!$e(r))throw new A.a("observable-unbind-wrong-properties",this);r.forEach(function(i){var r,o,a,s,c=t.get(i);c&&(c.to.forEach(function(t){r=t[0],o=t[1],a=n.get(r),(s=a[o]).delete(c),s.size||delete a[o],Object.keys(a).length||(n.delete(r),e.stopListening(r,"change"))}),t.delete(i))})}else n.forEach(function(t,n){e.stopListening(n,"change")}),n.clear(),t.clear()}},decorate:function(e){var t=this,n=this[e];if(!n)throw new A.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,function(e,i){e.return=n.apply(t,i)}),this[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.fire(e,n)},this[e][He]=n,this[Ue]||(this[Ue]=[]),this[Ue].push(e)}};ze(We,O),We.stopListening=function(e,t,n){if(!e&&this[Ue]){var i,r=o(this[Ue]);try{for(r.s();!(i=r.n()).done;){var a=i.value;this[a]=this[a][He]}}catch(s){r.e(s)}finally{r.f()}delete this[Ue]}O.stopListening.call(this,e,t,n)};var Ye=We;function Je(e){e[Fe]||(Object.defineProperty(e,Fe,{value:new Map}),Object.defineProperty(e,qe,{value:new Map}),Object.defineProperty(e,Be,{value:new Map}))}function Qe(){var e,t,n,i=this,r=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new A.a("observable-bind-to-parse-error",null);var i,r={to:[]};return"function"==typeof t[t.length-1]&&(r.callback=t.pop()),t.forEach(function(e){if("string"==typeof e)i.properties.push(e);else{if("object"!=typeof e)throw new A.a("observable-bind-to-parse-error",null);i={observable:e,properties:[]},r.to.push(i)}}),r}).apply(void 0,arguments),o=Array.from(this._bindings.keys()),a=o.length;if(!r.callback&&r.to.length>1)throw new A.a("observable-bind-to-no-callback",this);if(a>1&&r.callback)throw new A.a("observable-bind-to-extra-callback",this);r.to.forEach(function(e){if(e.properties.length&&e.properties.length!==a)throw new A.a("observable-bind-to-properties-length",i);e.properties.length||(e.properties=i._bindProperties)}),this._to=r.to,r.callback&&(this._bindings.get(o[0]).callback=r.callback),e=this._observable,this._to.forEach(function(t){var n,i=e[qe];i.get(t.observable)||e.listenTo(t.observable,"change",function(r,o){(n=i.get(t.observable)[o])&&n.forEach(function(t){Ke(e,t.property)})})}),(t=this)._bindings.forEach(function(e,i){t._to.forEach(function(r){var o,a,s,c,l,u,d;n=r.properties[e.callback?0:t._bindProperties.indexOf(i)],e.to.push([r.observable,n]),o=t._observable,a=e,s=r.observable,c=n,l=o[qe],u=l.get(s),(d=u||{})[c]||(d[c]=new Set),d[c].add(a),u||l.set(s,d)})}),this._bindProperties.forEach(function(e){Ke(i._observable,e)})}function Ge(e,t,n){if(this._bindings.size>1)throw new A.a("observable-bind-to-many-not-one-binding",this);var i,r,o;this.to.apply(this,a((i=e,r=t,o=i.map(function(e){return[e,r]}),Array.prototype.concat.apply([],o))).concat([n]))}function $e(e){return e.every(function(e){return"string"==typeof e})}function Ke(e,t){var n,i=e[Be].get(t);i.callback?n=i.callback.apply(e,i.to.map(function(e){return e[0][e[1]]})):n=(n=i.to[0])[0][n[1]],Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:e.set(t,n)}function Xe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(n){if(!(n in e.prototype)){var i=Object.getOwnPropertyDescriptor(t,n);i.enumerable=!1,Object.defineProperty(e.prototype,n,i)}})})}var et=function(){function e(t){l(this,e),this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set}return d(e,[{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",tt,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",tt),this.isEnabled=!0)}},{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!1}}]),e}();function tt(e){e.return=!1,e.stop()}Xe(et,Ye);var nt=function(){function e(t){var n=this;l(this,e),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){n.refresh()}),this.on("execute",function(e){n.isEnabled||e.stop()},{priority:"high"}),this.listenTo(t,"change:isReadOnly",function(e,t,i){i?n.forceDisabled("readOnlyMode"):n.clearForceDisabled("readOnlyMode")})}return d(e,[{key:"refresh",value:function(){this.isEnabled=!0}},{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",it,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",it),this.refresh())}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),e}();function it(e){e.return=!1,e.stop()}Xe(nt,Ye);var rt=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e]))._childCommands=[],n}return g(t,e),d(t,[{key:"refresh",value:function(){}},{key:"execute",value:function(){for(var e=this._getFirstEnabledCommand(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null!=e&&e.execute(n)}},{key:"registerChildCommand",value:function(e){var t=this;this._childCommands.push(e),e.on("change:isEnabled",function(){return t._checkEnabled()}),this._checkEnabled()}},{key:"_checkEnabled",value:function(){this.isEnabled=!!this._getFirstEnabledCommand()}},{key:"_getFirstEnabledCommand",value:function(){return this._childCommands.find(function(e){return e.isEnabled})}}]),t}(nt),ot=function(e,t){return function(n){return e(t(n))}},at=ot(Object.getPrototypeOf,Object),st=Function.prototype.toString,ct=Object.prototype.hasOwnProperty,lt=st.call(Object),ut=function(e){if(!we(e)||"[object Object]"!=J(e))return!1;var t=at(e);if(null===t)return!0;var n=ct.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&st.call(n)==lt},dt=function(e,t){for(var n=e.length;n--;)if(oe(e[n][0],t))return n;return-1},ht=Array.prototype.splice;function ft(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ft.prototype.clear=function(){this.__data__=[],this.size=0},ft.prototype.delete=function(e){var t=this.__data__,n=dt(t,e);return!(n<0||(n==t.length-1?t.pop():ht.call(t,n,1),--this.size,0))},ft.prototype.get=function(e){var t=this.__data__,n=dt(t,e);return n<0?void 0:t[n][1]},ft.prototype.has=function(e){return dt(this.__data__,e)>-1},ft.prototype.set=function(e,t){var n=this.__data__,i=dt(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var pt=ft,vt=ne(z.a,"Map"),gt=ne(Object,"create"),mt=Object.prototype.hasOwnProperty,bt=Object.prototype.hasOwnProperty;function yt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}yt.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},yt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yt.prototype.get=function(e){var t=this.__data__;if(gt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return mt.call(t,e)?t[e]:void 0},yt.prototype.has=function(e){var t=this.__data__;return gt?void 0!==t[e]:bt.call(t,e)},yt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gt&&void 0===t?"__lodash_hash_undefined__":t,this};var kt=yt,wt=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function _t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}_t.prototype.clear=function(){this.size=0,this.__data__={hash:new kt,map:new(vt||pt),string:new kt}},_t.prototype.delete=function(e){var t=wt(this,e).delete(e);return this.size-=t?1:0,t},_t.prototype.get=function(e){return wt(this,e).get(e)},_t.prototype.has=function(e){return wt(this,e).has(e)},_t.prototype.set=function(e,t){var n=wt(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var xt=_t;function Tt(e){var t=this.__data__=new pt(e);this.size=t.size}Tt.prototype.clear=function(){this.__data__=new pt,this.size=0},Tt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Tt.prototype.get=function(e){return this.__data__.get(e)},Tt.prototype.has=function(e){return this.__data__.has(e)},Tt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof pt){var i=n.__data__;if(!vt||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new xt(i)}return n.set(e,t),this.size=n.size,this};var At=Tt,St=ot(Object.keys,Object),Ct=Object.prototype.hasOwnProperty,Ot=function(e){return me(e)?Re(e):function(e){if(!De(e))return St(e);var t=[];for(var n in Object(e))Ct.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Et=c(9),Pt=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},It=function(){return[]},Mt=Object.prototype.propertyIsEnumerable,Nt=Object.getOwnPropertySymbols,Lt=Nt?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a)&&(o[r++]=a)}return o}(Nt(e),function(t){return Mt.call(e,t)}))}:It,Rt=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},jt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Rt(t,Lt(e)),e=at(e);return t}:It,Dt=function(e,t,n){var i=t(e);return Ce(e)?i:Rt(i,n(e))},Vt=function(e){return Dt(e,Ot,Lt)},Zt=function(e){return Dt(e,Ze,jt)},zt=ne(z.a,"DataView"),Ft=ne(z.a,"Promise"),qt=ne(z.a,"Set"),Bt=ne(z.a,"WeakMap"),Ut=X(zt),Ht=X(vt),Wt=X(Ft),Yt=X(qt),Jt=X(Bt),Qt=J;(zt&&"[object DataView]"!=Qt(new zt(new ArrayBuffer(1)))||vt&&"[object Map]"!=Qt(new vt)||Ft&&"[object Promise]"!=Qt(Ft.resolve())||qt&&"[object Set]"!=Qt(new qt)||Bt&&"[object WeakMap]"!=Qt(new Bt))&&(Qt=function(e){var t=J(e),n="[object Object]"==t?e.constructor:void 0,i=n?X(n):"";if(i)switch(i){case Ut:return"[object DataView]";case Ht:return"[object Map]";case Wt:return"[object Promise]";case Yt:return"[object Set]";case Jt:return"[object WeakMap]"}return t});var Gt=Qt,$t=Object.prototype.hasOwnProperty,Kt=z.a.Uint8Array,Xt=function(e){var t=new e.constructor(e.byteLength);return new Kt(t).set(new Kt(e)),t},en=/\w*$/,tn=F?F.prototype:void 0,nn=tn?tn.valueOf:void 0,rn=function(e,t){var n=t?Xt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},on=Object.create,an=function(){function e(){}return function(t){if(!Z(t))return{};if(on)return on(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),sn=function(e){return"function"!=typeof e.constructor||De(e)?{}:an(at(e))},cn=Ie.a&&Ie.a.isMap,ln=cn?Pe(cn):function(e){return we(e)&&"[object Map]"==Gt(e)},un=Ie.a&&Ie.a.isSet,dn=un?Pe(un):function(e){return we(e)&&"[object Set]"==Gt(e)},hn={};hn["[object Arguments]"]=hn["[object Array]"]=hn["[object ArrayBuffer]"]=hn["[object DataView]"]=hn["[object Boolean]"]=hn["[object Date]"]=hn["[object Float32Array]"]=hn["[object Float64Array]"]=hn["[object Int8Array]"]=hn["[object Int16Array]"]=hn["[object Int32Array]"]=hn["[object Map]"]=hn["[object Number]"]=hn["[object Object]"]=hn["[object RegExp]"]=hn["[object Set]"]=hn["[object String]"]=hn["[object Symbol]"]=hn["[object Uint8Array]"]=hn["[object Uint8ClampedArray]"]=hn["[object Uint16Array]"]=hn["[object Uint32Array]"]=!0,hn["[object Error]"]=hn["[object Function]"]=hn["[object WeakMap]"]=!1;var fn=function e(t,n,i,r,o,a){var s,c=1&n,l=2&n,u=4&n;if(i&&(s=o?i(t,r,o,a):i(t)),void 0!==s)return s;if(!Z(t))return t;var d=Ce(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&$t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!c)return Pt(t,s)}else{var h=Gt(t),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(Oe.a)(t))return Object(Et.a)(t,c);if("[object Object]"==h||"[object Arguments]"==h||f&&!o){if(s=l||f?{}:sn(t),!c)return l?function(e,t){return ce(e,jt(e),t)}(t,function(e,t){return e&&ce(t,Ze(t),e)}(s,t)):function(e,t){return ce(e,Lt(e),t)}(t,function(e,t){return e&&ce(t,Ot(t),e)}(s,t))}else{if(!hn[h])return o?t:{};s=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return Xt(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?Xt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rn(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,en.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return nn?Object(nn.call(e)):{}}(e)}}(t,h,c)}}a||(a=new At);var p=a.get(t);if(p)return p;a.set(t,s),dn(t)?t.forEach(function(r){s.add(e(r,n,i,r,t,a))}):ln(t)&&t.forEach(function(r,o){s.set(o,e(r,n,i,o,t,a))});var v=d?void 0:(u?l?Zt:Vt:l?Ze:Ot)(t);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n););}(v||t,function(r,o){v&&(r=t[o=r]),se(s,o,e(r,n,i,o,t,a))}),s},pn=function(e,t){return fn(e,5,t="function"==typeof t?t:void 0)},vn=function(e){return we(e)&&1===e.nodeType&&!ut(e)},gn=function(){function e(t,n){l(this,e),this._config={},n&&this.define(mn(n)),t&&this._setObjectToTarget(this._config,t)}return d(e,[{key:"set",value:function(e,t){this._setToTarget(this._config,e,t)}},{key:"define",value:function(e,t){this._setToTarget(this._config,e,t,!0)}},{key:"get",value:function(e){return this._getFromSource(this._config,e)}},{key:"names",value:i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=Object.keys(this._config);case 1:if(!(t<n.length)){e.next=8;break}return r=n[t],e.next=5,r;case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}},e,this)})},{key:"_setToTarget",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(ut(t))this._setObjectToTarget(e,t,i);else{var r=t.split(".");t=r.pop();var a,s=o(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;ut(e[c])||(e[c]={}),e=e[c]}}catch(l){s.e(l)}finally{s.f()}if(ut(n))return ut(e[t])||(e[t]={}),void this._setObjectToTarget(e=e[t],n,i);i&&void 0!==e[t]||(e[t]=n)}}},{key:"_getFromSource",value:function(e,t){var n=t.split(".");t=n.pop();var i,r=o(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!ut(e[a])){e=null;break}e=e[a]}}catch(s){r.e(s)}finally{r.f()}return e?mn(e[t]):void 0}},{key:"_setObjectToTarget",value:function(e,t,n){var i=this;Object.keys(t).forEach(function(r){i._setToTarget(e,r,t[r],n)})}}]),e}();function mn(e){return pn(e,bn)}function bn(e){return vn(e)?e:void 0}function yn(e){return!(!e||!e[Symbol.iterator])}var kn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,t);var i=yn(e);if(i||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i){var r,a=o(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}}catch(c){a.e(c)}finally{a.f()}}}return d(t,[{key:"length",get:function(){return this._items.length}},{key:"first",get:function(){return this._items[0]||null}},{key:"last",get:function(){return this._items[this.length-1]||null}},{key:"add",value:function(e,t){return this.addMany([e],t)}},{key:"addMany",value:function(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new A.a("collection-add-item-invalid-index",this);for(var n=0;n<e.length;n++){var i=e[n],r=this._getItemIdBeforeAdding(i),o=t+n;this._items.splice(o,0,i),this._itemMap.set(r,i),this.fire("add",i,o)}return this.fire("change",{added:e,removed:[],index:t}),this}},{key:"get",value:function(e){var t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new A.a("collection-get-invalid-arg",this);t=this._items[e]}return t||null}},{key:"has",value:function(e){return this._itemMap.has("string"==typeof e?e:e[this._idProperty])}},{key:"getIndex",value:function(e){var t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}},{key:"remove",value:function(e){var t=r(this._remove(e),2),n=t[0],i=t[1];return this.fire("change",{added:[],removed:[n],index:i}),n}},{key:"map",value:function(e,t){return this._items.map(e,t)}},{key:"find",value:function(e,t){return this._items.find(e,t)}},{key:"filter",value:function(e,t){return this._items.filter(e,t)}},{key:"clear",value:function(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var e=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}},{key:"bindTo",value:function(e){var t=this;if(this._bindToCollection)throw new A.a("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:function(e){t._setUpBindToBinding(function(t){return new e(t)})},using:function(e){t._setUpBindToBinding("function"==typeof e?function(t){return e(t)}:function(t){return t[e]})}}}},{key:"_setUpBindToBinding",value:function(e){var t,n=this,i=this._bindToCollection,r=function(t,r,a){var s=i._bindToCollection==n,c=i._bindToInternalToExternalMap.get(r);if(s&&c)n._bindToExternalToInternalMap.set(r,c),n._bindToInternalToExternalMap.set(c,r);else{var l=e(r);if(!l)return void n._skippedIndexesFromExternal.push(a);var u,d=a,h=o(n._skippedIndexesFromExternal);try{for(h.s();!(u=h.n()).done;){a>u.value&&d--}}catch(g){h.e(g)}finally{h.f()}var f,p=o(i._skippedIndexesFromExternal);try{for(p.s();!(f=p.n()).done;){d>=f.value&&d++}}catch(g){p.e(g)}finally{p.f()}n._bindToExternalToInternalMap.set(r,l),n._bindToInternalToExternalMap.set(l,r),n.add(l,d);for(var v=0;v<i._skippedIndexesFromExternal.length;v++)d<=i._skippedIndexesFromExternal[v]&&i._skippedIndexesFromExternal[v]++}},a=o(i);try{for(a.s();!(t=a.n()).done;){var s=t.value;r(0,s,i.getIndex(s))}}catch(c){a.e(c)}finally{a.f()}this.listenTo(i,"add",r),this.listenTo(i,"remove",function(e,t,i){var r=n._bindToExternalToInternalMap.get(t);r&&n.remove(r),n._skippedIndexesFromExternal=n._skippedIndexesFromExternal.reduce(function(e,t){return i<t&&e.push(t-1),i>t&&e.push(t),e},[])})}},{key:"_getItemIdBeforeAdding",value:function(e){var t,n=this._idProperty;if(n in e){if("string"!=typeof(t=e[n]))throw new A.a("collection-add-invalid-id",this);if(this.get(t))throw new A.a("collection-add-item-already-exists",this)}else e[n]=t=x();return t}},{key:"_remove",value:function(e){var t,n,i,r=!1,o=this._idProperty;if("string"==typeof e?(n=e,r=!(i=this._itemMap.get(n)),i&&(t=this._items.indexOf(i))):"number"==typeof e?(t=e,r=!(i=this._items[t]),i&&(n=i[o])):(n=(i=e)[o],r=-1==(t=this._items.indexOf(i))||!this._itemMap.get(n)),r)throw new A.a("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);var a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire("remove",i,t),[i,t]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}}]),t}();Xe(kn,O);var wn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];l(this,t),this._context=e,this._plugins=new Map,this._availablePlugins=new Map;var a,s=o(n);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.pluginName&&this._availablePlugins.set(c.pluginName,c)}}catch(v){s.e(v)}finally{s.f()}this._contextPlugins=new Map;var u,d=o(i);try{for(d.s();!(u=d.n()).done;){var h=r(u.value,2),f=h[0],p=h[1];this._contextPlugins.set(f,p),this._contextPlugins.set(p,f),f.pluginName&&this._availablePlugins.set(f.pluginName,f)}}catch(v){d.e(v)}finally{d.f()}}return d(t,[{key:Symbol.iterator,value:i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this._plugins),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(r=n.value,e.t0="function"==typeof r[0],!e.t0){e.next=9;break}return e.next=9,r;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),t.e(e.t1);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,13,16,19]])})},{key:"get",value:function(e){var t=this._plugins.get(e);if(!t){var n=e;throw"function"==typeof e&&(n=e.pluginName||e.name),new A.a("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}},{key:"has",value:function(e){return this._plugins.has(e)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=this,r=this._context;(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;t.forEach(function(t){l(t)&&(n.has(t)||(n.add(t),t.pluginName&&!i._availablePlugins.has(t.pluginName)&&i._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,n)))})})(e),f(e);var s=a(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return t.map(function(e){return l(e)?e:i._availablePlugins.get(e)}).reduce(function(t,i){return n.has(i)?t:(n.add(i),i.requires&&(f(i.requires,i),e(i.requires,n).forEach(function(e){return t.add(e)})),t.add(i))},new Set)}(e.filter(function(e){return!d(e,t)})));!function(e,t){var n,r=o(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("function"!=typeof a)throw new A.a("plugincollection-replace-plugin-invalid-type",null,{pluginItem:a});var s=a.pluginName;if(!s)throw new A.a("plugincollection-replace-plugin-missing-name",null,{pluginItem:a});if(a.requires&&a.requires.length)throw new A.a("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:s});var c=i._availablePlugins.get(s);if(!c)throw new A.a("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:s});var l=e.indexOf(c);if(-1===l){if(i._contextPlugins.has(c))return;throw new A.a("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:s})}if(c.requires&&c.requires.length)throw new A.a("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:s});e.splice(l,1,a),i._availablePlugins.set(s,a)}}catch(u){r.e(u)}finally{r.f()}}(s,n);var c=s.map(function(e){var t=i._contextPlugins.get(e)||new e(r);return i._add(e,t),t});return p(c,"init").then(function(){return p(c,"afterInit")}).then(function(){return c});function l(e){return"function"==typeof e}function u(e){return l(e)&&e.isContextPlugin}function d(e,t){return t.some(function(t){return t===e||h(e)===t||h(t)===e})}function h(e){return l(e)?e.pluginName||e.name:e}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.map(function(e){return l(e)?e:i._availablePlugins.get(e)||e}).forEach(function(e){(function(e,t){if(!l(e))throw t?new A.a("plugincollection-soft-required",r,{missingPlugin:e,requiredBy:h(t)}):new A.a("plugincollection-plugin-not-found",r,{plugin:e})})(e,n),function(e,t){if(u(t)&&!u(e))throw new A.a("plugincollection-context-required",r,{plugin:h(e),requiredBy:h(t)})}(e,n),function(e,n){if(n&&d(e,t))throw new A.a("plugincollection-required",r,{plugin:h(e),requiredBy:h(n)})}(e,n)})}function p(e,t){return e.reduce(function(e,n){return n[t]?i._contextPlugins.has(n)?e:e.then(n[t].bind(n)):e},Promise.resolve())}}},{key:"destroy",value:function(){var e,t=[],n=o(this);try{for(n.s();!(e=n.n()).done;){var i=r(e.value,2)[1];"function"!=typeof i.destroy||this._contextPlugins.has(i)||t.push(i.destroy())}}catch(a){n.e(a)}finally{n.f()}return Promise.all(t)}},{key:"_add",value:function(e,t){this._plugins.set(e,t);var n=e.pluginName;if(n){if(this._plugins.has(n))throw new A.a("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}]),t}();function _n(e){return Array.isArray(e)?e:[e]}Xe(wn,O),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var xn=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function Tn(e){return xn.includes(e)?"rtl":"ltr"}var An=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this.uiLanguage=n.uiLanguage||"en",this.contentLanguage=n.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Tn(this.uiLanguage),this.contentLanguageDirection=Tn(this.contentLanguage),this.t=function(e,n){return t._t(e,n)}}return d(e,[{key:"language",get:function(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}},{key:"_t",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i=_n(i),"string"==typeof e&&(e={string:e}),t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if("number"!=typeof n)throw new A.a("translation-service-quantity-not-a-number",null,{quantity:n});var i=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===i&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var r,o=t.id||t.string;if(0===i||(r=e,!window.CKEDITOR_TRANSLATIONS[r]||!window.CKEDITOR_TRANSLATIONS[r].dictionary[o]))return 1!==n?t.plural:t.string;var a=window.CKEDITOR_TRANSLATIONS[e].dictionary,s=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||function(e){return 1===e?0:1};if("string"==typeof a[o])return a[o];var c=Number(s(n));return a[o][c]}(this.uiLanguage,e,e.plural?i[0]:1),n=i,t.replace(/%(\d+)/g,function(e,t){return t<n.length?n[t]:e})}}]),e}(),Sn=function(){function e(t){l(this,e),this.config=new gn(t,this.constructor.defaultConfig);var n=this.constructor.builtinPlugins;this.config.define("plugins",n),this.plugins=new wn(this,n);var i=this.config.get("language")||{};this.locale=new An({uiLanguage:"string"==typeof i?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new kn,this._contextOwner=null}return d(e,[{key:"initPlugins",value:function(){var e,t=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[],i=o(t.concat(n));try{for(i.s();!(e=i.n()).done;){var r=e.value;if("function"!=typeof r)throw new A.a("context-initplugins-constructor-only",null,{Plugin:r});if(!0!==r.isContextPlugin)throw new A.a("context-initplugins-invalid-plugin",null,{Plugin:r})}}catch(a){i.e(a)}finally{i.f()}return this.plugins.init(t,[],n)}},{key:"destroy",value:function(){var e=this;return Promise.all(Array.from(this.editors,function(e){return e.destroy()})).then(function(){return e.plugins.destroy()})}},{key:"_addEditor",value:function(e,t){if(this._contextOwner)throw new A.a("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}},{key:"_removeEditor",value:function(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}},{key:"_getEditorConfig",value:function(){var e,t={},n=o(this.config.names());try{for(n.s();!(e=n.n()).done;){var i=e.value;["plugins","removePlugins","extraPlugins"].includes(i)||(t[i]=this.config.get(i))}}catch(r){n.e(r)}finally{n.f()}return t}}],[{key:"create",value:function(e){var t=this;return new Promise(function(n){var i=new t(e);n(i.initPlugins().then(function(){return i}))})}}]),e}(),Cn=function(){function e(t){l(this,e),this.context=t}return d(e,[{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!0}}]),e}();function On(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e[i]!=t[i])return i;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}Xe(Cn,Ye);var En=function(e){return fn(e,4)},Pn=function(){function e(t){l(this,e),this.document=t,this.parent=null}return d(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new A.a("view-node-not-found-in-parent",this);return e}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.index),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),i=e.getAncestors(t),r=0;n[r]==i[r]&&n[r];)r++;return 0===r?null:n[r-1]}},{key:"isBefore",value:function(e){if(this==e||this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),i=On(t,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return t[i]<n[i]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}},{key:"toJSON",value:function(){var e=En(this);return delete e.parent,e}},{key:"is",value:function(e){return"node"===e||"view:node"===e}}]),e}();Xe(Pn,O);var In=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e]))._textData=n,i}return g(t,e),d(t,[{key:"is",value:function(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e}},{key:"data",get:function(){return this._textData}},{key:"_data",get:function(){return this.data},set:function(e){this._fireChange("text",this),this._textData=e}},{key:"isSimilar",value:function(e){return e instanceof t&&(this===e||this.data===e.data)}},{key:"_clone",value:function(){return new t(this.document,this.data)}}]),t}(Pn),Mn=function(){function e(t,n,i){if(l(this,e),this.textNode=t,n<0||n>t.data.length)throw new A.a("view-textproxy-wrong-offsetintext",this);if(i<0||n+i>t.data.length)throw new A.a("view-textproxy-wrong-length",this);this.data=t.data.substring(n,n+i),this.offsetInText=n}return d(e,[{key:"offsetSize",get:function(){return this.data.length}},{key:"isPartial",get:function(){return this.data.length!==this.textNode.data.length}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"is",value:function(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this.textNode:this.parent;null!==n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}]),e}();function Nn(e){return yn(e)?new Map(e):function(e){var t=new Map;for(var n in e)t.set(n,e[n]);return t}(e)}var Ln=function(){function e(){l(this,e),this._patterns=[],this.add.apply(this,arguments)}return d(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var o=r[i];("string"==typeof o||o instanceof RegExp)&&(o={name:o}),o.classes&&("string"==typeof o.classes||o.classes instanceof RegExp)&&(o.classes=[o.classes]),this._patterns.push(o)}}},{key:"match",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var a,s=r[i],c=o(this._patterns);try{for(c.s();!(a=c.n()).done;){var l=a.value,u=Rn(s,l);if(u)return{element:s,pattern:l,match:u}}}catch(d){c.e(d)}finally{c.f()}}return null}},{key:"matchAll",value:function(){for(var e=[],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var s,c=a[r],l=o(this._patterns);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=Rn(c,u);d&&e.push({element:c,pattern:u,match:d})}}catch(h){l.e(h)}finally{l.f()}}return e.length>0?e:null}},{key:"getElementName",value:function(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}]),e}();function Rn(e,t){if("function"==typeof t)return t(e);var n,i,r={};return t.name&&(r.name=(i=e.name,(n=t.name)instanceof RegExp?n.test(i):n===i),!r.name)||t.attributes&&(r.attributes=function(e,t){var n=[];for(var i in e){var r=e[i];if(!t.hasAttribute(i))return null;var o=t.getAttribute(i);if(!0===r)n.push(i);else if(r instanceof RegExp){if(!r.test(o))return null;n.push(i)}else{if(o!==r)return null;n.push(i)}}return n}(t.attributes,e),!r.attributes)?null:!(t.classes&&(r.classes=function(e,t){var n,i=[],r=o(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a instanceof RegExp){var s,c=o(t.getClassNames());try{for(c.s();!(s=c.n()).done;){var l=s.value;a.test(l)&&i.push(l)}}catch(u){c.e(u)}finally{c.f()}if(0===i.length)return null}else{if(!t.hasClass(a))return null;i.push(a)}}}catch(u){r.e(u)}finally{r.f()}return i}(t.classes,e),!r.classes))&&!(t.styles&&(r.styles=function(e,t){var n=[];for(var i in e){var r=e[i];if(!t.hasStyle(i))return null;var o=t.getStyle(i);if(r instanceof RegExp){if(!r.test(o))return null;n.push(i)}else{if(o!==r)return null;n.push(i)}}return n}(t.styles,e),!r.styles))&&r}var jn=function(e){return"symbol"==typeof e||we(e)&&"[object Symbol]"==J(e)},Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/;function Zn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Zn.Cache||xt),n}Zn.Cache=xt;var zn=Zn,Fn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qn=/\\(\\)?/g,Bn=function(e){var t=zn(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Fn,function(e,n,i,r){t.push(i?r.replace(qn,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(),Un=F?F.prototype:void 0,Hn=Un?Un.toString:void 0,Wn=function e(t){if("string"==typeof t)return t;if(Ce(t))return function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}(t,e)+"";if(jn(t))return Hn?Hn.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Yn=function(e){return null==e?"":Wn(e)},Jn=function(e,t){return Ce(e)?e:function(e,t){if(Ce(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!jn(e))||Vn.test(e)||!Dn.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:Bn(Yn(e))},Qn=function(e){if("string"==typeof e||jn(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Gn=function(e,t){for(var n=0,i=(t=Jn(t,e)).length;null!=e&&n<i;)e=e[Qn(t[n++])];return n&&n==i?e:void 0},$n=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o},Kn=function(e,t,n){var i=null==e?void 0:Gn(e,t);return void 0===i?n:i},Xn=function(e,t,n){(void 0!==n&&!oe(e[t],n)||void 0===n&&!(t in e))&&re(e,t,n)},ei=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},ti=function e(t,n,i,r,o){t!==n&&function(e,t,n){for(var i=-1,r=Object(e),o=n(e),a=o.length;a--;){var s=o[++i];if(!1===t(r[s],s,r))break}}(n,function(a,s){if(o||(o=new At),Z(a))!function(e,t,n,i,r,o,a){var s=ei(e,n),c=ei(t,n),l=a.get(c);if(l)Xn(e,n,l);else{var u=o?o(s,c,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=Ce(c),f=!h&&Object(Oe.a)(c),p=!h&&!f&&Ne(c);u=c,h||f||p?Ce(s)?u=s:function(e){return we(e)&&me(e)}(s)?u=Pt(s):f?(d=!1,u=Object(Et.a)(c,!0)):p?(d=!1,u=rn(c,!0)):u=[]:ut(c)||Se(c)?(u=s,Se(s)?u=function(e){return ce(e,Ze(e))}(s):Z(s)&&!Q(s)||(u=sn(c))):d=!1}d&&(a.set(c,u),r(u,c,i,o,a),a.delete(c)),Xn(e,n,u)}}(t,n,s,i,e,r,o);else{var c=r?r(ei(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Xn(t,s,c)}},Ze)},ni=ke(function(e,t,n){ti(e,t,n)}),ii=function(){function e(t){l(this,e),this._styles={},this._styleProcessor=t}return d(e,[{key:"isEmpty",get:function(){var e=Object.entries(this._styles);return!Array.from(e).length}},{key:"size",get:function(){return this.isEmpty?0:this.getStyleNames().length}},{key:"setTo",value:function(e){this.clear();for(var t=Array.from(function(e){var t=null,n=0,i=0,r=null,o=new Map;if(""===e)return o;";"!=e.charAt(e.length-1)&&(e+=";");for(var a=0;a<e.length;a++){var s=e.charAt(a);if(null===t)switch(s){case":":r||(r=e.substr(n,a-n),i=a+1);break;case'"':case"'":t=s;break;case";":var c=e.substr(i,a-i);r&&o.set(r.trim(),c.trim()),r=null,n=a+1}else s===t&&(t=null)}return o}(e).entries()),n=0,i=t;n<i.length;n++){var o=r(i[n],2),a=o[0],s=o[1];this._styleProcessor.toNormalizedForm(a,s,this._styles)}}},{key:"has",value:function(e){if(this.isEmpty)return!1;var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(t){return r(t,1)[0]===e});return Array.isArray(t)}},{key:"set",value:function(e,t){if(Z(e))for(var n=0,i=Object.entries(e);n<i.length;n++){var o=r(i[n],2),a=o[0],s=o[1];this._styleProcessor.toNormalizedForm(a,s,this._styles)}else this._styleProcessor.toNormalizedForm(e,t,this._styles)}},{key:"remove",value:function(e){var t=oi(e);(function(e,t){null==e||function(e,t){null==(e=function(e,t){return t.length<2?e:Gn(e,$n(t,0,-1))}(e,t=Jn(t,e)))||delete e[Qn(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]}(e,t)})(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}},{key:"getNormalized",value:function(e){return this._styleProcessor.getNormalized(e,this._styles)}},{key:"toString",value:function(){return this.isEmpty?"":this._getStylesEntries().map(function(e){return e.join(":")}).sort().join(";")+";"}},{key:"getAsString",value:function(e){if(!this.isEmpty){if(this._styles[e]&&!Z(this._styles[e]))return this._styles[e];var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(t){return r(t,1)[0]===e});return Array.isArray(t)?t[1]:void 0}}},{key:"getStyleNames",value:function(){return this.isEmpty?[]:this._getStylesEntries().map(function(e){return r(e,1)[0]})}},{key:"clear",value:function(){this._styles={}}},{key:"_getStylesEntries",value:function(){for(var e=[],t=0,n=Object.keys(this._styles);t<n.length;t++){var i=n[t];e.push.apply(e,a(this._styleProcessor.getReducedForm(i,this._styles)))}return e}},{key:"_cleanEmptyObjectsOnPath",value:function(e){var t=e.split(".");if(t.length>1){var n=t.splice(0,t.length-1).join("."),i=Kn(this._styles,n);!i||!Array.from(Object.keys(i)).length&&this.remove(n)}}}]),e}(),ri=function(){function e(){l(this,e),this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}return d(e,[{key:"toNormalizedForm",value:function(e,t,n){if(Z(t))ai(n,oi(e),t);else if(this._normalizers.has(e)){var i=this._normalizers.get(e)(t);ai(n,i.path,i.value)}else ai(n,e,t)}},{key:"getNormalized",value:function(e,t){if(!e)return ni({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){var n=this._extractors.get(e);if("string"==typeof n)return Kn(t,n);var i=n(e,t);if(i)return i}return Kn(t,oi(e))}},{key:"getReducedForm",value:function(e,t){var n=this.getNormalized(e,t);return void 0===n?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}},{key:"getRelatedStyles",value:function(e){return this._consumables.get(e)||[]}},{key:"setNormalizer",value:function(e,t){this._normalizers.set(e,t)}},{key:"setExtractor",value:function(e,t){this._extractors.set(e,t)}},{key:"setReducer",value:function(e,t){this._reducers.set(e,t)}},{key:"setStyleRelation",value:function(e,t){this._mapStyleNames(e,t);var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._mapStyleNames(r,[e])}}catch(a){i.e(a)}finally{i.f()}}},{key:"_mapStyleNames",value:function(e,t){var n;this._consumables.has(e)||this._consumables.set(e,[]),(n=this._consumables.get(e)).push.apply(n,a(t))}}]),e}();function oi(e){return e.replace("-",".")}function ai(e,t,n){var i=n;Z(n)&&(i=ni({},Kn(e,t),n)),function(e,t,n){null==e||function(e,t,n,i){if(!Z(e))return e;for(var r=-1,o=(t=Jn(t,e)).length,a=o-1,s=e;null!=s&&++r<o;){var c=Qn(t[r]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(r!=a){var u=s[c];void 0===(l=void 0)&&(l=Z(u)?u:ye(t[r+1])?[]:{})}se(s,c,l),s=s[c]}}(e,t,n)}(e,t,i)}var si=function(e){function t(e,n,i,a){var s;if(l(this,t),(s=f(this,t,[e])).name=n,s._attrs=function(e){var t,n=o(e=Nn(e));try{for(n.s();!(t=n.n()).done;){var i=r(t.value,2),a=i[0],s=i[1];null===s?e.delete(a):"string"!=typeof s&&e.set(a,String(s))}}catch(c){n.e(c)}finally{n.f()}return e}(i),s._children=[],a&&s._insertChild(0,a),s._classes=new Set,s._attrs.has("class")){var c=s._attrs.get("class");ci(s._classes,c),s._attrs.delete("class")}return s._styles=new ii(s.document.stylesProcessor),s._attrs.has("style")&&(s._styles.setTo(s._attrs.get("style")),s._attrs.delete("style")),s._customProperties=new Map,s._isAllowedInsideAttributeElement=!1,p(s)}return g(t,e),d(t,[{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this._children.length}},{key:"isAllowedInsideAttributeElement",get:function(){return this._isAllowedInsideAttributeElement}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getAttributeKeys",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._classes.size>0,!e.t0){e.next=4;break}return e.next=4,"class";case 4:if(e.t1=this._styles.isEmpty,e.t1){e.next=8;break}return e.next=8,"style";case 8:return e.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return e.stop()}},e,this)})},{key:"getAttributes",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._attrs.entries(),"t0",1);case 1:if(e.t1=this._classes.size>0,!e.t1){e.next=5;break}return e.next=5,["class",this.getAttribute("class")];case 5:if(e.t2=this._styles.isEmpty,e.t2){e.next=9;break}return e.next=9,["style",this.getAttribute("style")];case 9:case"end":return e.stop()}},e,this)})},{key:"getAttribute",value:function(e){if("class"==e)return this._classes.size>0?a(this._classes).join(" "):void 0;if("style"==e){var t=this._styles.toString();return""==t?void 0:t}return this._attrs.get(e)}},{key:"hasAttribute",value:function(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}},{key:"isSimilar",value:function(e){if(!(e instanceof t))return!1;if(this===e)return!0;if(this.name!=e.name||this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;var n,i=o(this._attrs);try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),s=a[0],c=a[1];if(!e._attrs.has(s)||e._attrs.get(s)!==c)return!1}}catch(v){i.e(v)}finally{i.f()}var l,u=o(this._classes);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(!e._classes.has(d))return!1}}catch(v){u.e(v)}finally{u.f()}var h,f=o(this._styles.getStyleNames());try{for(f.s();!(h=f.n()).done;){var p=h.value;if(!e._styles.has(p)||e._styles.getAsString(p)!==this._styles.getAsString(p))return!1}}catch(v){f.e(v)}finally{f.f()}return!0}},{key:"hasClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var o=r[i];if(!this._classes.has(o))return!1}return!0}},{key:"getClassNames",value:function(){return this._classes.keys()}},{key:"getStyle",value:function(e){return this._styles.getAsString(e)}},{key:"getNormalizedStyle",value:function(e){return this._styles.getNormalized(e)}},{key:"getStyleNames",value:function(){return this._styles.getStyleNames()}},{key:"hasStyle",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var o=r[i];if(!this._styles.has(o))return!1}return!0}},{key:"findAncestor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=b(Ln,t),r=this.parent;r;){if(i.match(r))return r;r=r.parent}return null}},{key:"getCustomProperty",value:function(e){return this._customProperties.get(e)}},{key:"getCustomProperties",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"getIdentity",value:function(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(function(e){return"".concat(e[0],'="').concat(e[1],'"')}).sort().join(" ");return this.name+(""==e?"":' class="'.concat(e,'"'))+(t?' style="'.concat(t,'"'):"")+(""==n?"":" "+n)}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(e){var n,i=o(this.getChildren());try{for(i.s();!(n=i.n()).done;){var r=n.value;t.push(r._clone(e))}}catch(s){i.e(s)}finally{i.f()}}var a=new this.constructor(this.document,this.name,this._attrs,t);return a._classes=new Set(this._classes),a._styles.set(this._styles.getNormalized()),a._customProperties=new Map(this._customProperties),a.getFillerOffset=this.getFillerOffset,a._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,a}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,i,r,a=0,s=o((n=this.document,"string"==typeof(i=t)?[new In(n,i)]:(yn(i)||(i=[i]),Array.from(i).map(function(e){return"string"==typeof e?new In(n,e):e instanceof Mn?new In(n,e.data):e}))));try{for(s.s();!(r=s.n()).done;){var c=r.value;null!==c.parent&&c._remove(),c.parent=this,c.document=this.document,this._children.splice(e,0,c),e++,a++}}catch(l){s.e(l)}finally{s.f()}return a}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_setAttribute",value:function(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?ci(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}},{key:"_removeAttribute",value:function(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}},{key:"_addClass",value:function(e){this._fireChange("attributes",this);var t,n=o(_n(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;this._classes.add(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_removeClass",value:function(e){this._fireChange("attributes",this);var t,n=o(_n(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;this._classes.delete(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_setStyle",value:function(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}},{key:"_removeStyle",value:function(e){this._fireChange("attributes",this);var t,n=o(_n(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;this._styles.remove(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_setCustomProperty",value:function(e,t){this._customProperties.set(e,t)}},{key:"_removeCustomProperty",value:function(e){return this._customProperties.delete(e)}}]),t}(Pn);function ci(e,t){var n=t.split(/\s+/);e.clear(),n.forEach(function(t){return e.add(t)})}var li=function(e){function t(e,n,i,r){var o;return l(this,t),(o=f(this,t,[e,n,i,r])).getFillerOffset=ui,o}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}}]),t}(si);function ui(){var e=a(this.getChildren()),t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;var n,i=o(e);try{for(i.s();!(n=i.n()).done;){if(!n.value.is("uiElement"))return null}}catch(r){i.e(r)}finally{i.f()}return this.childCount}var di=function(e){function t(e,n,i,r){var o;return l(this,t),(o=f(this,t,[e,n,i,r])).set("isReadOnly",!1),o.set("isFocused",!1),o.bind("isReadOnly").to(e),o.bind("isFocused").to(e,"isFocused",function(t){return t&&e.selection.editableElement==v(o)}),o.listenTo(e.selection,"change",function(){o.isFocused=e.isFocused&&e.selection.editableElement==v(o)}),o}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"destroy",value:function(){this.stopListening()}}]),t}(li);Xe(di,Ye);var hi=Symbol("rootName"),fi=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e,n])).rootName="main",i}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"rootName",get:function(){return this.getCustomProperty(hi)},set:function(e){this._setCustomProperty(hi,e)}},{key:"_name",set:function(e){this.name=e}}]),t}(di),pi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l(this,t),!e.boundaries&&!e.startPosition)throw new A.a("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new A.a("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,this.position=vi._createAt(e.startPosition?e.startPosition:e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}return d(t,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,i;do{var r;i=this.position,t=(r=this.next()).done,n=r.value}while(!t&&e(n));t||(this.position=i)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e,t=this.position.clone(),n=this.position,i=t.parent;if(null===i.parent&&t.offset===i.childCount)return{done:!0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};if(i instanceof In){if(t.isAtEnd)return this.position=vi._createAfter(i),this._next();e=i.data[t.offset]}else e=i.getChild(t.offset);if(e instanceof si)return this.shallow?t.offset++:t=new vi(e,0),this.position=t,this._formatReturnValue("elementStart",e,n,t,1);if(e instanceof In){if(this.singleCharacters)return t=new vi(e,0),this.position=t,this._next();var r,o=e.data.length;return e==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new Mn(e,0,o),t=vi._createAfter(r)):(r=new Mn(e,0,e.data.length),t.offset++),this.position=t,this._formatReturnValue("text",r,n,t,o)}if("string"==typeof e){var a;a=this.singleCharacters?1:(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-t.offset;var s=new Mn(i,t.offset,a);return t.offset+=a,this.position=t,this._formatReturnValue("text",s,n,t,a)}return t=vi._createAfter(i),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,n,t)}},{key:"_previous",value:function(){var e,t=this.position.clone(),n=this.position,i=t.parent;if(null===i.parent&&0===t.offset)return{done:!0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};if(i instanceof In){if(t.isAtStart)return this.position=vi._createBefore(i),this._previous();e=i.data[t.offset-1]}else e=i.getChild(t.offset-1);if(e instanceof si)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",e,n,t,1)):(t=new vi(e,e.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",e,n,t));if(e instanceof In){if(this.singleCharacters)return t=new vi(e,e.data.length),this.position=t,this._previous();var r,o=e.data.length;if(e==this._boundaryStartParent){var a=this.boundaries.start.offset;o=(r=new Mn(e,a,e.data.length-a)).data.length,t=vi._createBefore(r)}else r=new Mn(e,0,e.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",r,n,t,o)}if("string"==typeof e){var s;s=this.singleCharacters?1:t.offset-(i===this._boundaryStartParent?this.boundaries.start.offset:0),t.offset-=s;var c=new Mn(i,t.offset,s);return this.position=t,this._formatReturnValue("text",c,n,t,s)}return t=vi._createBefore(i),this.position=t,this._formatReturnValue("elementStart",i,n,t,1)}},{key:"_formatReturnValue",value:function(e,t,n,i,r){return t instanceof Mn&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=vi._createAfter(t.textNode):(i=vi._createAfter(t.textNode),this.position=i)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=vi._createBefore(t.textNode):(i=vi._createBefore(t.textNode),this.position=i))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:i,length:r}}}}]),t}(),vi=function(){function e(t,n){l(this,e),this.parent=t,this.offset=n}return d(e,[{key:"nodeAfter",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}},{key:"nodeBefore",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}},{key:"root",get:function(){return this.parent.root}},{key:"editableElement",get:function(){for(var e=this.parent;!(e instanceof di);){if(!e.parent)return null;e=e.parent}return e}},{key:"getShiftedBy",value:function(t){var n=e._createAt(this),i=n.offset+t;return n.offset=i<0?0:i,n}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new pi(t);return n.skip(e),n.position}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),i=0;t[i]==n[i]&&t[i];)i++;return 0===i?null:t[i-1]}},{key:"is",value:function(e){return"position"===e||"view:position"===e}},{key:"isEqual",value:function(e){return this.parent==e.parent&&this.offset==e.offset}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"compareWith",value:function(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);var i=On(t,n);switch(i){case"prefix":return"before";case"extension":return"after";default:return t[i]<n[i]?"before":"after"}}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.startPosition=this,new pi(e)}},{key:"clone",value:function(){return new e(this.parent,this.offset)}}],[{key:"_createAt",value:function(t,n){if(t instanceof e)return new this(t.parent,t.offset);var i=t;if("end"==n)n=i.is("$text")?i.data.length:i.childCount;else{if("before"==n)return this._createBefore(i);if("after"==n)return this._createAfter(i);if(0!==n&&!n)throw new A.a("view-createpositionat-offset-required",i)}return new e(i,n)}},{key:"_createAfter",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new A.a("view-position-after-root",t,{root:t});return new e(t.parent,t.index+1)}},{key:"_createBefore",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText);if(!t.parent)throw new A.a("view-position-before-root",t,{root:t});return new e(t.parent,t.index)}}]),e}(),gi=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(this,t),this.start=e.clone(),this.end=n?n.clone():e.clone()}return d(t,[{key:Symbol.iterator,value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new pi({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"getEnlarged",value:function(){var e=this.start.getLastMatchingPosition(mi,{direction:"backward"}),n=this.end.getLastMatchingPosition(mi);return e.parent.is("$text")&&e.isAtStart&&(e=vi._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=vi._createAfter(n.parent)),new t(e,n)}},{key:"getTrimmed",value:function(){var e=this.start.getLastMatchingPosition(mi);if(e.isAfter(this.end)||e.isEqual(this.end))return new t(e,e);var n=this.end.getLastMatchingPosition(mi,{direction:"backward"}),i=e.nodeAfter,r=n.nodeBefore;return i&&i.is("$text")&&(e=new vi(i,0)),r&&r.is("$text")&&(n=new vi(r,r.data.length)),new t(e,n)}},{key:"isEqual",value:function(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&i}},{key:"getDifference",value:function(e){var n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new t(this.start,e.start)),this.containsPosition(e.end)&&n.push(new t(e.end,this.end))):n.push(this.clone()),n}},{key:"getIntersection",value:function(e){if(this.isIntersecting(e)){var n=this.start,i=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(i=e.end),new t(n,i)}return null}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new pi(e)}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}},{key:"clone",value:function(){return new t(this.start,this.end)}},{key:"getItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().mark(function n(){var r,a,s,c;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.boundaries=e,t.ignoreElementEnd=!0,r=new pi(t),a=o(r),n.prev=3,a.s();case 5:if((s=a.n()).done){n.next=11;break}return c=s.value,n.next=9,c.item;case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),a.e(n.t0);case 16:return n.prev=16,a.f(),n.finish(16);case 19:case"end":return n.stop()}},n,null,[[3,13,16,19]])})()}},{key:"getPositions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().mark(function n(){var r,a,s,c;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.boundaries=e,r=new pi(t),n.next=4,r.position;case 4:a=o(r),n.prev=5,a.s();case 7:if((s=a.n()).done){n.next=13;break}return c=s.value,n.next=11,c.nextPosition;case 11:n.next=7;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),a.e(n.t0);case 18:return n.prev=18,a.f(),n.finish(18);case 21:case"end":return n.stop()}},n,null,[[5,15,18,21]])})()}},{key:"is",value:function(e){return"range"===e||"view:range"===e}},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}}],[{key:"_createFromParentsAndOffsets",value:function(e,t,n,i){return new this(new vi(e,t),new vi(n,i))}},{key:"_createFromPositionAndShift",value:function(e,t){var n=e,i=e.getShiftedBy(t);return t>0?new this(n,i):new this(i,n)}},{key:"_createIn",value:function(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}},{key:"_createOn",value:function(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(vi._createBefore(e),t)}}]),t}();function mi(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function bi(e){var t,n=0,i=o(e);try{for(i.s();!(t=i.n()).done;){t.value;n++}}catch(r){i.e(r)}finally{i.f()}return n}var yi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;l(this,e),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,n,i)}return d(e,[{key:"isFake",get:function(){return this._isFake}},{key:"fakeSelectionLabel",get:function(){return this._fakeSelectionLabel}},{key:"anchor",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}},{key:"focus",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}},{key:"isCollapsed",get:function(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"editableElement",get:function(){return this.anchor?this.anchor.editableElement:null}},{key:"getRanges",value:i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.clone();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"getFirstRange",value:function(){var e,t=null,n=o(this._ranges);try{for(n.s();!(e=n.n()).done;){var i=e.value;t&&!i.start.isBefore(t.start)||(t=i)}}catch(r){n.e(r)}finally{n.f()}return t?t.clone():null}},{key:"getLastRange",value:function(){var e,t=null,n=o(this._ranges);try{for(n.s();!(e=n.n()).done;){var i=e.value;t&&!i.end.isAfter(t.end)||(t=i)}}catch(r){n.e(r)}finally{n.f()}return t?t.clone():null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"isEqual",value:function(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=o(this._ranges);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,a=!1,s=o(e._ranges);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(r.isEqual(c)){a=!0;break}}}catch(l){s.e(l)}finally{s.f()}if(!a)return!1}}catch(l){n.e(l)}finally{n.f()}return!0}},{key:"isSimilar",value:function(e){if(this.isBackward!=e.isBackward)return!1;var t=bi(this.getRanges());if(t!=bi(e.getRanges()))return!1;if(0==t)return!0;var n,i=o(this.getRanges());try{for(i.s();!(n=i.n()).done;){var r=n.value;r=r.getTrimmed();var a,s=!1,c=o(e.getRanges());try{for(c.s();!(a=c.n()).done;){var l=a.value;if(l=l.getTrimmed(),r.start.isEqual(l.start)&&r.end.isEqual(l.end)){s=!0;break}}}catch(u){c.e(u)}finally{c.f()}if(!s)return!1}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"setTo",value:function(t,n,i){if(null===t)this._setRanges([]),this._setFakeOptions(n);else if(t instanceof e||t instanceof ki)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof gi)this._setRanges([t],n&&n.backward),this._setFakeOptions(n);else if(t instanceof vi)this._setRanges([new gi(t)]),this._setFakeOptions(n);else if(t instanceof Pn){var r,o=!!i&&!!i.backward;if(void 0===n)throw new A.a("view-selection-setto-required-second-parameter",this);r="in"==n?gi._createIn(t):"on"==n?gi._createOn(t):new gi(vi._createAt(t,n)),this._setRanges([r],o),this._setFakeOptions(i)}else{if(!yn(t))throw new A.a("view-selection-setto-not-selectable",this);this._setRanges(t,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new A.a("view-selection-setfocus-no-ranges",this);var n=vi._createAt(e,t);if("same"!=n.compareWith(this.focus)){var i=this.anchor;this._ranges.pop(),"before"==n.compareWith(i)?this._addRange(new gi(n,i),!0):this._addRange(new gi(i,n)),this.fire("change")}}},{key:"is",value:function(e){return"selection"===e||"view:selection"===e}},{key:"_setRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Array.from(e),this._ranges=[];var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._addRange(r)}}catch(a){i.e(a)}finally{i.f()}this._lastRangeBackward=!!t}},{key:"_setFakeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}},{key:"_addRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof gi))throw new A.a("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}},{key:"_pushRange",value:function(e){var t,n=o(this._ranges);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e.isIntersecting(i))throw new A.a("view-selection-range-intersects",this,{addedRange:e,intersectingRange:i})}}catch(r){n.e(r)}finally{n.f()}this._ranges.push(new gi(e.start,e.end))}}]),e}();Xe(yi,O);var ki=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;l(this,e),this._selection=new yi,this._selection.delegate("change").to(this),this._selection.setTo(t,n,i)}return d(e,[{key:"isFake",get:function(){return this._selection.isFake}},{key:"fakeSelectionLabel",get:function(){return this._selection.fakeSelectionLabel}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"editableElement",get:function(){return this._selection.editableElement}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"isEqual",value:function(e){return this._selection.isEqual(e)}},{key:"isSimilar",value:function(e){return this._selection.isSimilar(e)}},{key:"is",value:function(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}}]),e}();Xe(ki,O);var wi=function(e){function t(e,n,i){var r;return l(this,t),(r=f(this,t,[e,n])).startRange=i,r._eventPhase="none",r._currentTarget=null,r}return g(t,e),d(t,[{key:"eventPhase",get:function(){return this._eventPhase}},{key:"currentTarget",get:function(){return this._currentTarget}}]),t}(y),_i=Symbol("bubbling contexts"),xi={fire:function(e){try{var t=e instanceof y?e:new y(this,e),n=Ci(this);if(!n.size)return;for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(Ti(t,"capturing",this),Ai.apply(void 0,[n,"$capture",t].concat(r)))return t.return;var a=t.startRange||this.selection.getFirstRange(),s=a?a.getContainedElement():null,c=!!s&&Boolean(Si(n,s)),l=s||function(e){if(!e)return null;var t=e.start.parent,n=e.end.parent,i=t.getPath(),r=n.getPath();return i.length>r.length?t:n}(a);if(Ti(t,"atTarget",l),!c){if(Ai.apply(void 0,[n,"$text",t].concat(r)))return t.return;Ti(t,"bubbling",l)}for(;l;){if(l.is("rootElement")){if(Ai.apply(void 0,[n,"$root",t].concat(r)))return t.return}else if(l.is("element")&&Ai.apply(void 0,[n,l.name,t].concat(r)))return t.return;if(Ai.apply(void 0,[n,l,t].concat(r)))return t.return;Ti(t,"bubbling",l=l.parent)}return Ti(t,"bubbling",this),Ai.apply(void 0,[n,"$document",t].concat(r)),t.return}catch(V){A.a.rethrowUnexpectedError(V,this)}},_addEventListener:function(e,t,n){var i,r=_n(n.context||"$document"),a=Ci(this),s=o(r);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=a.get(c);l||(l=Object.create(O),a.set(c,l)),this.listenTo(l,e,t,n)}}catch(u){s.e(u)}finally{s.f()}},_removeEventListener:function(e,t){var n,i=o(Ci(this).values());try{for(i.s();!(n=i.n()).done;){var r=n.value;this.stopListening(r,e,t)}}catch(a){i.e(a)}finally{i.f()}}};function Ti(e,t,n){e instanceof wi&&(e._eventPhase=t,e._currentTarget=n)}function Ai(e,t,n){for(var i="string"==typeof t?e.get(t):Si(e,t),r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return!!i&&(i.fire.apply(i,[n].concat(o)),n.stop.called)}function Si(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),s=a[0],c=a[1];if("function"==typeof s&&s(t))return c}}catch(l){i.e(l)}finally{i.f()}return null}function Ci(e){return e[_i]||(e[_i]=new Map),e[_i]}var Oi=function(){function e(t){l(this,e),this.selection=new ki,this.roots=new kn({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}return d(e,[{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"destroy",value:function(){this.roots.map(function(e){return e.destroy()}),this.stopListening()}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,i=o(this._postFixers);try{for(i.s();!(n=i.n()).done;){if(t=(0,n.value)(e))break}}catch(r){i.e(r)}finally{i.f()}}while(t)}}]),e}();Xe(Oi,xi),Xe(Oi,Ye);var Ei=function(e){function n(e,t,i,r){var o;return l(this,n),(o=f(this,n,[e,t,i,r])).getFillerOffset=Pi,o._priority=10,o._id=null,o._clonesGroup=null,o}return g(n,e),d(n,[{key:"priority",get:function(){return this._priority}},{key:"id",get:function(){return this._id}},{key:"getElementsWithSameId",value:function(){if(null===this.id)throw new A.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"isSimilar",value:function(e){return null!==this.id||null!==e.id?this.id===e.id:t(w(n.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority}},{key:"_clone",value:function(e){var i=t(w(n.prototype),"_clone",this).call(this,e);return i._priority=this._priority,i._id=this._id,i}}]),n}(si);function Pi(){if(Ii(this))return null;for(var e=this.parent;e&&e.is("attributeElement");){if(Ii(e)>1)return null;e=e.parent}return!e||Ii(e)>1?null:this.childCount}function Ii(e){return Array.from(e.getChildren()).filter(function(e){return!e.is("uiElement")}).length}Ei.DEFAULT_PRIORITY=10;var Mi=function(e){function t(e,n,i,r){var o;return l(this,t),(o=f(this,t,[e,n,i,r]))._isAllowedInsideAttributeElement=!0,o.getFillerOffset=Ni,o}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof Pn||Array.from(t).length>0))throw new A.a("view-emptyelement-cannot-add",[this,t])}}]),t}(si);function Ni(){return null}var Li=navigator.userAgent.toLowerCase(),Ri=function(e){return e.indexOf("macintosh")>-1}(Li),ji=function(e){return!!e.match(/gecko\/\d+/)}(Li),Di=function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome")}(Li),Vi=function(e){return e.indexOf("android")>-1}(Li),Zi=function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0}(Li);!function(){try{0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(D){}}();var zi={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21e7"},Fi={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},qi=function(){for(var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896},t=65;t<=90;t++)e[String.fromCharCode(t).toLowerCase()]=t;for(var n=48;n<=57;n++)e[n-48]=n;for(var i=112;i<=123;i++)e["f"+(i-111)]=i;return e}(),Bi=Object.fromEntries(Object.entries(qi).map(function(e){var t=r(e,2),n=t[0];return[t[1],n.charAt(0).toUpperCase()+n.slice(1)]}));function Ui(e){var t;if("string"==typeof e){if(!(t=qi[e.toLowerCase()]))throw new A.a("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?qi.alt:0)+(e.ctrlKey?qi.ctrl:0)+(e.shiftKey?qi.shift:0)+(e.metaKey?qi.cmd:0);return t}function Hi(e){return"string"==typeof e&&(e=function(e){return e.split("+").map(function(e){return e.trim()})}(e)),e.map(function(e){return"string"==typeof e?function(e){if(e.endsWith("!"))return Ui(e.slice(0,-1));var t=Ui(e);return Ri&&t==qi.ctrl?qi.cmd:t}(e):e}).reduce(function(e,t){return t+e},0)}function Wi(e){var t=Hi(e);return Object.entries(Ri?zi:Fi).reduce(function(e,n){var i=r(n,2),o=i[0],a=i[1];return 0!=(t&qi[o])&&(t&=~qi[o],e+=a),e},"")+(t?Bi[t]:"")}function Yi(e,t){var n="ltr"===t;switch(e){case qi.arrowleft:return n?"left":"right";case qi.arrowright:return n?"right":"left";case qi.arrowup:return"up";case qi.arrowdown:return"down"}}function Ji(e,t){var n=Yi(e,t);return"down"===n||"right"===n}var Qi=function(e){function t(e,n,i,r){var o;return l(this,t),(o=f(this,t,[e,n,i,r]))._isAllowedInsideAttributeElement=!0,o.getFillerOffset=Gi,o}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof Pn||Array.from(t).length>0))throw new A.a("view-uielement-cannot-add",this)}},{key:"render",value:function(e){return this.toDomElement(e)}},{key:"toDomElement",value:function(e){var t,n=e.createElement(this.name),i=o(this.getAttributeKeys());try{for(i.s();!(t=i.n()).done;){var r=t.value;n.setAttribute(r,this.getAttribute(r))}}catch(a){i.e(a)}finally{i.f()}return n}}]),t}(si);function Gi(){return null}var $i=function(e){function t(e,n,i,r){var o;return l(this,t),(o=f(this,t,[e,n,i,r]))._isAllowedInsideAttributeElement=!0,o.getFillerOffset=Ki,o}return g(t,e),d(t,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof Pn||Array.from(t).length>0))throw new A.a("view-rawelement-cannot-add",[this,t])}}]),t}(si);function Ki(){return null}var Xi=function(e){function t(e,n){l(this,t),this.document=e,this._children=[],n&&this._insertChild(0,n)}return d(t,[{key:Symbol.iterator,value:function(){return this._children[Symbol.iterator]()}},{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"===e||"view:documentFragment"===e}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,i,r,a=0,s=o((n=this.document,"string"==typeof(i=t)?[new In(n,i)]:(yn(i)||(i=[i]),Array.from(i).map(function(e){return"string"==typeof e?new In(n,e):e instanceof Mn?new In(n,e.data):e}))));try{for(s.s();!(r=s.n()).done;){var c=r.value;null!==c.parent&&c._remove(),c.parent=this,this._children.splice(e,0,c),e++,a++}}catch(l){s.e(l)}finally{s.f()}return a}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t)}}]),t}();Xe(Xi,O);var er=function(){function e(t){l(this,e),this.document=t,this._cloneGroups=new Map}return d(e,[{key:"setSelection",value:function(e,t,n){this.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this.document.selection._setFocus(e,t)}},{key:"createDocumentFragment",value:function(e){return new Xi(this.document,e)}},{key:"createText",value:function(e){return new In(this.document,e)}},{key:"createAttributeElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Ei(this.document,e,t);return n.priority&&(i._priority=n.priority),n.id&&(i._id=n.id),i}},{key:"createContainerElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new li(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),i}},{key:"createEditableElement",value:function(e,t){var n=new di(this.document,e,t);return n._document=this.document,n}},{key:"createEmptyElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Mi(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),i}},{key:"createUIElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new Qi(this.document,e,t);return n&&(r.render=n),void 0!==i.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),r}},{key:"createRawElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new $i(this.document,e,t);return r.render=n||function(){},void 0!==i.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),r}},{key:"setAttribute",value:function(e,t,n){n._setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){t._removeAttribute(e)}},{key:"addClass",value:function(e,t){t._addClass(e)}},{key:"removeClass",value:function(e,t){t._removeClass(e)}},{key:"setStyle",value:function(e,t,n){ut(e)&&void 0===n&&(n=t),n._setStyle(e,t)}},{key:"removeStyle",value:function(e,t){t._removeStyle(e)}},{key:"setCustomProperty",value:function(e,t,n){n._setCustomProperty(e,t)}},{key:"removeCustomProperty",value:function(e,t){return t._removeCustomProperty(e)}},{key:"breakAttributes",value:function(e){return e instanceof vi?this._breakAttributes(e):this._breakAttributesRange(e)}},{key:"breakContainer",value:function(e){var t=e.parent;if(!t.is("containerElement"))throw new A.a("view-writer-break-non-container-element",this.document);if(!t.parent)throw new A.a("view-writer-break-root",this.document);if(e.isAtStart)return vi._createBefore(t);if(!e.isAtEnd){var n=t._clone(!1);this.insert(vi._createAfter(t),n);var i=new gi(e,vi._createAt(t,"end")),r=new vi(n,0);this.move(i,r)}return vi._createAfter(t)}},{key:"mergeAttributes",value:function(e){var t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&0===n.childCount){var i=n.parent,r=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new vi(i,r))}var o=n.getChild(t-1),a=n.getChild(t);if(!o||!a)return e;if(o.is("$text")&&a.is("$text"))return or(o,a);if(o.is("attributeElement")&&a.is("attributeElement")&&o.isSimilar(a)){var s=o.childCount;return o._appendChild(a.getChildren()),a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new vi(o,s))}return e}},{key:"mergeContainers",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;if(!(t&&n&&t.is("containerElement")&&n.is("containerElement")))throw new A.a("view-writer-merge-containers-invalid-position",this.document);var i=t.getChild(t.childCount-1),r=vi._createAt(i instanceof In?i:t,"end");return this.move(gi._createIn(n),vi._createAt(t,"end")),this.remove(gi._createOn(n)),r}},{key:"insert",value:function(e,t){!function e(t,n){var i,r=o(t);try{var a=function(){var t=i.value;if(!ar.some(function(e){return t instanceof e}))throw new A.a("view-writer-insert-invalid-node-type",n);t.is("$text")||e(t.getChildren(),n)};for(r.s();!(i=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}}(t=yn(t)?a(t):[t],this.document);var n,i=t.reduce(function(e,t){var n=e[e.length-1],i=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return n&&n.breakAttributes==i?n.nodes.push(t):e.push({breakAttributes:i,nodes:[t]}),e},[]),r=null,s=e,c=o(i);try{for(c.s();!(n=c.n()).done;){var l=n.value,u=l.nodes,d=l.breakAttributes,h=this._insertNodes(s,u,d);r||(r=h.start),s=h.end}}catch(f){c.e(f)}finally{c.f()}return r?new gi(r,s):new gi(e)}},{key:"remove",value:function(e){var t=e instanceof gi?e:gi._createOn(e);if(cr(t,this.document),t.isCollapsed)return new Xi(this.document);var n,i=this._breakAttributesRange(t,!0),r=i.start,a=i.end,s=r.parent._removeChildren(r.offset,a.offset-r.offset),c=o(s);try{for(c.s();!(n=c.n()).done;){var l=n.value;this._removeFromClonedElementsGroup(l)}}catch(d){c.e(d)}finally{c.f()}var u=this.mergeAttributes(r);return t.start=u,t.end=u.clone(),new Xi(this.document,s)}},{key:"clear",value:function(e,t){cr(e,this.document);var n,i=o(e.getWalker({direction:"backward",ignoreElementEnd:!0}));try{for(i.s();!(n=i.n()).done;){var r=n.value,a=r.item,s=void 0;if(a.is("element")&&t.isSimilar(a))s=gi._createOn(a);else if(!r.nextPosition.isAfter(e.start)&&a.is("$textProxy")){var c=a.getAncestors().find(function(e){return e.is("element")&&t.isSimilar(e)});c&&(s=gi._createIn(c))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}catch(l){i.e(l)}finally{i.f()}}},{key:"move",value:function(e,t){var n;if(t.isAfter(e.end)){var i=(t=this._breakAttributes(t,!0)).parent,r=i.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=i.childCount-r}else n=this.remove(e);return this.insert(t,n)}},{key:"wrap",value:function(e,t){if(!(t instanceof Ei))throw new A.a("view-writer-wrap-invalid-attribute",this.document);if(cr(e,this.document),e.isCollapsed){var n=e.start;n.parent.is("element")&&!Array.from(n.parent.getChildren()).some(function(e){return!e.is("uiElement")})&&(n=n.getLastMatchingPosition(function(e){return e.item.is("uiElement")})),n=this._wrapPosition(n,t);var i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new gi(n)}return this._wrapRange(e,t)}},{key:"unwrap",value:function(e,t){if(!(t instanceof Ei))throw new A.a("view-writer-unwrap-invalid-attribute",this.document);if(cr(e,this.document),e.isCollapsed)return e;var n=this._breakAttributesRange(e,!0),i=n.start,r=n.end,o=this._unwrapChildren(i.parent,i.offset,r.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;var s=this.mergeAttributes(o.end);return new gi(a,s)}},{key:"rename",value:function(e,t){var n=new li(this.document,e,t.getAttributes());return this.insert(vi._createAfter(t),n),this.move(gi._createIn(t),vi._createAt(n,0)),this.remove(gi._createOn(t)),n}},{key:"clearClonedElementsGroup",value:function(e){this._cloneGroups.delete(e)}},{key:"createPositionAt",value:function(e,t){return vi._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return vi._createAfter(e)}},{key:"createPositionBefore",value:function(e){return vi._createBefore(e)}},{key:"createRange",value:function(e,t){return new gi(e,t)}},{key:"createRangeOn",value:function(e){return gi._createOn(e)}},{key:"createRangeIn",value:function(e){return gi._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new yi(e,t,n)}},{key:"_insertNodes",value:function(e,t,n){var i,r;if(!(i=n?tr(e):e.parent.is("$text")?e.parent.parent:e.parent))throw new A.a("view-writer-invalid-position-container",this.document);r=n?this._breakAttributes(e,!0):e.parent.is("$text")?rr(e):e;var a,s=i._insertChild(r.offset,t),c=o(t);try{for(c.s();!(a=c.n()).done;){var l=a.value;this._addToClonedElementsGroup(l)}}catch(f){c.e(f)}finally{c.f()}var u=r.getShiftedBy(s),d=this.mergeAttributes(r);d.isEqual(r)||u.offset--;var h=this.mergeAttributes(u);return new gi(d,h)}},{key:"_wrapChildren",value:function(e,t,n,i){for(var r=t,o=[];r<n;){var a=e.getChild(r),s=a.is("$text"),c=a.is("attributeElement"),l=a.isAllowedInsideAttributeElement;if(c&&this._wrapAttributeElement(i,a))o.push(new vi(e,r));else if(s||l||c&&nr(i,a)){var u=i._clone();a._remove(),u._appendChild(a),e._insertChild(r,u),this._addToClonedElementsGroup(u),o.push(new vi(e,r))}else c&&this._wrapChildren(a,0,a.childCount,i);r++}for(var d=0,h=0,f=o;h<f.length;h++){var p=f[h];p.offset-=d,p.offset!=t&&(this.mergeAttributes(p).isEqual(p)||(d++,n--))}return gi._createFromParentsAndOffsets(e,t,e,n)}},{key:"_unwrapChildren",value:function(e,t,n,i){for(var r=t,o=[];r<n;){var a=e.getChild(r);if(a.is("attributeElement"))if(a.isSimilar(i)){var s=a.getChildren(),c=a.childCount;a._remove(),e._insertChild(r,s),this._removeFromClonedElementsGroup(a),o.push(new vi(e,r),new vi(e,r+c)),r+=c,n+=c-1}else this._unwrapAttributeElement(i,a)?(o.push(new vi(e,r),new vi(e,r+1)),r++):(this._unwrapChildren(a,0,a.childCount,i),r++);else r++}for(var l=0,u=0,d=o;u<d.length;u++){var h=d[u];h.offset-=l,h.offset!=t&&h.offset!=n&&(this.mergeAttributes(h).isEqual(h)||(l++,n--))}return gi._createFromParentsAndOffsets(e,t,e,n)}},{key:"_wrapRange",value:function(e,t){var n=this._breakAttributesRange(e,!0),i=n.start,r=n.end,o=this._wrapChildren(i.parent,i.offset,r.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;var s=this.mergeAttributes(o.end);return new gi(a,s)}},{key:"_wrapPosition",value:function(e,t){if(t.isSimilar(e.parent))return ir(e.clone());e.parent.is("$text")&&(e=rr(e));var n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=function(){return!1},e.parent._insertChild(e.offset,n);var i=new gi(e,e.getShiftedBy(1));this.wrap(i,t);var r=new vi(n.parent,n.index);n._remove();var o=r.nodeBefore,a=r.nodeAfter;return o instanceof In&&a instanceof In?or(o,a):ir(r)}},{key:"_wrapAttributeElement",value:function(e,t){if(!lr(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;var n,i=o(e.getAttributeKeys());try{for(i.s();!(n=i.n()).done;){var r=n.value;if("class"!==r&&"style"!==r&&t.hasAttribute(r)&&t.getAttribute(r)!==e.getAttribute(r))return!1}}catch(b){i.e(b)}finally{i.f()}var a,s=o(e.getStyleNames());try{for(s.s();!(a=s.n()).done;){var c=a.value;if(t.hasStyle(c)&&t.getStyle(c)!==e.getStyle(c))return!1}}catch(b){s.e(b)}finally{s.f()}var l,u=o(e.getAttributeKeys());try{for(u.s();!(l=u.n()).done;){var d=l.value;"class"!==d&&"style"!==d&&(t.hasAttribute(d)||this.setAttribute(d,e.getAttribute(d),t))}}catch(b){u.e(b)}finally{u.f()}var h,f=o(e.getStyleNames());try{for(f.s();!(h=f.n()).done;){var p=h.value;t.hasStyle(p)||this.setStyle(p,e.getStyle(p),t)}}catch(b){f.e(b)}finally{f.f()}var v,g=o(e.getClassNames());try{for(g.s();!(v=g.n()).done;){var m=v.value;t.hasClass(m)||this.addClass(m,t)}}catch(b){g.e(b)}finally{g.f()}return!0}},{key:"_unwrapAttributeElement",value:function(e,t){if(!lr(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;var n,i=o(e.getAttributeKeys());try{for(i.s();!(n=i.n()).done;){var r=n.value;if("class"!==r&&"style"!==r&&(!t.hasAttribute(r)||t.getAttribute(r)!==e.getAttribute(r)))return!1}}catch(f){i.e(f)}finally{i.f()}if(!t.hasClass.apply(t,a(e.getClassNames())))return!1;var s,c=o(e.getStyleNames());try{for(c.s();!(s=c.n()).done;){var l=s.value;if(!t.hasStyle(l)||t.getStyle(l)!==e.getStyle(l))return!1}}catch(f){c.e(f)}finally{c.f()}var u,d=o(e.getAttributeKeys());try{for(d.s();!(u=d.n()).done;){var h=u.value;"class"!==h&&"style"!==h&&this.removeAttribute(h,t)}}catch(f){d.e(f)}finally{d.f()}return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}},{key:"_breakAttributesRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.start,i=e.end;if(cr(e,this.document),e.isCollapsed){var r=this._breakAttributes(e.start,t);return new gi(r,r)}var o=this._breakAttributes(i,t),a=o.parent.childCount,s=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-a,new gi(s,o)}},{key:"_breakAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.offset,i=e.parent;if(e.parent.is("emptyElement"))throw new A.a("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new A.a("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new A.a("view-writer-cannot-break-raw-element",this.document);if(!t&&i.is("$text")&&sr(i.parent)||sr(i))return e.clone();if(i.is("$text"))return this._breakAttributes(rr(e),t);if(n==i.childCount){var r=new vi(i.parent,i.index+1);return this._breakAttributes(r,t)}if(0===n){var o=new vi(i.parent,i.index);return this._breakAttributes(o,t)}var a=i.index+1,s=i._clone();i.parent._insertChild(a,s),this._addToClonedElementsGroup(s);var c=i._removeChildren(n,i.childCount-n);s._appendChild(c);var l=new vi(i.parent,a);return this._breakAttributes(l,t)}},{key:"_addToClonedElementsGroup",value:function(e){if(e.root.is("rootElement")){if(e.is("element")){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;this._addToClonedElementsGroup(i)}}catch(s){n.e(s)}finally{n.f()}}var r=e.id;if(r){var a=this._cloneGroups.get(r);a||(a=new Set,this._cloneGroups.set(r,a)),a.add(e),e._clonesGroup=a}}}},{key:"_removeFromClonedElementsGroup",value:function(e){if(e.is("element")){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;this._removeFromClonedElementsGroup(i)}}catch(s){n.e(s)}finally{n.f()}}var r=e.id;if(r){var a=this._cloneGroups.get(r);a&&a.delete(e)}}}]),e}();function tr(e){for(var t=e.parent;!sr(t);){if(!t)return;t=t.parent}return t}function nr(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function ir(e){var t=e.nodeBefore;if(t&&t.is("$text"))return new vi(t,t.data.length);var n=e.nodeAfter;return n&&n.is("$text")?new vi(n,0):e}function rr(e){if(e.offset==e.parent.data.length)return new vi(e.parent.parent,e.parent.index+1);if(0===e.offset)return new vi(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new In(e.root.document,t)),new vi(e.parent.parent,e.parent.index+1)}function or(e,t){var n=e.data.length;return e._data+=t.data,t._remove(),new vi(e,n)}var ar=[In,Ei,li,Mi,$i,Qi];function sr(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function cr(e,t){var n=tr(e.start),i=tr(e.end);if(!n||!i||n!==i)throw new A.a("view-writer-invalid-range-container",t)}function lr(e,t){return null===e.id&&null===t.id}function ur(e){return"[object Text]"==Object.prototype.toString.call(e)}var dr=function(e){return e.createTextNode("\xa0")},hr=function(e){var t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML="\xa0",t},fr=function(e){var t=e.createElement("br");return t.dataset.ckeFiller=!0,t},pr="\u2060".repeat(7);function vr(e){return ur(e)&&e.data.substr(0,7)===pr}function gr(e){return 7==e.data.length&&vr(e)}function mr(e){return vr(e)?e.data.slice(7):e.data}function br(e,t){if(t.keyCode==qi.arrowleft){var n=t.domTarget.ownerDocument.defaultView.getSelection();if(1==n.rangeCount&&n.getRangeAt(0).collapsed){var i=n.getRangeAt(0).startContainer,r=n.getRangeAt(0).startOffset;vr(i)&&r<=7&&n.collapse(i,0)}}}function yr(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||function(e,t){return e===t},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));var r,o,a,s,c,l,u=function(e,t,n){var i=kr(e,t,n);if(-1===i)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var r=kr(wr(e,i),wr(t,i),n);return{firstIndex:i,lastIndexOld:e.length-r,lastIndexNew:t.length-r}}(e,t,n);return i?function(e,t){var n=e.firstIndex,i=e.lastIndexOld,r=e.lastIndexNew;if(-1===n)return Array(t).fill("equal");var o=[];return n>0&&(o=o.concat(Array(n).fill("equal"))),r-n>0&&(o=o.concat(Array(r-n).fill("insert"))),i-n>0&&(o=o.concat(Array(i-n).fill("delete"))),r<t&&(o=o.concat(Array(t-r).fill("equal"))),o}(u,t.length):(r=t,a=[],s=(o=u).firstIndex,c=o.lastIndexOld,(l=o.lastIndexNew)-s>0&&a.push({index:s,type:"insert",values:r.slice(s,l)}),c-s>0&&a.push({index:s+(l-s),type:"delete",howMany:c-s}),a)}function kr(e,t,n){for(var i=0;i<Math.max(e.length,t.length);i++)if(void 0===e[i]||void 0===t[i]||!n(e[i],t[i]))return i;return-1}function wr(e,t){return e.slice(t).reverse()}function _r(e,t,n){n=n||function(e,t){return e===t};var i,r,o=e.length,a=t.length;if(o>200||a>200||o+a>300)return _r.fastDiff(e,t,n,!0);if(a<o){var s=e;e=t,t=s,i="delete",r="insert"}else i="insert",r="delete";var c=e.length,l=t.length,u=l-c,d={},h={};function f(o){var a=(void 0!==h[o-1]?h[o-1]:-1)+1,s=void 0!==h[o+1]?h[o+1]:-1,u=a>s?-1:1;d[o+u]&&(d[o]=d[o+u].slice(0)),d[o]||(d[o]=[]),d[o].push(a>s?i:r);for(var f=Math.max(a,s),p=f-o;p<c&&f<l&&n(e[p],t[f]);)p++,f++,d[o].push("equal");return f}var p,v=0;do{for(p=-v;p<u;p++)h[p]=f(p);for(p=u+v;p>u;p--)h[p]=f(p);h[u]=f(u),v++}while(h[u]!==l);return d[u].slice(1)}function xr(e,t,n){e.insertBefore(n,e.childNodes[t]||null)}function Tr(e){var t=e.parentNode;t&&t.removeChild(e)}function Ar(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}_r.fastDiff=yr;var Sr=function(){function e(t,n){l(this,e),this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=n,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}return d(e,[{key:"markToSync",value:function(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new A.a("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}},{key:"render",value:function(){var e,t,n=o(this.markedChildren);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._updateChildrenMappings(i)}}catch(g){n.e(g)}finally{n.f()}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var r,a=o(this.markedAttributes);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._updateAttrs(s)}}catch(g){a.e(g)}finally{a.f()}var c,l=o(this.markedChildren);try{for(l.s();!(c=l.n()).done;){var u=c.value;this._updateChildren(u,{inlineFillerPosition:e})}}catch(g){l.e(g)}finally{l.f()}var d,h=o(this.markedTexts);try{for(h.s();!(d=h.n()).done;){var f=d.value;!this.markedChildren.has(f.parent)&&this.domConverter.mapViewToDom(f.parent)&&this._updateText(f,{inlineFillerPosition:e})}}catch(g){h.e(g)}finally{h.f()}if(e){var p=this.domConverter.viewPositionToDom(e),v=p.parent.ownerDocument;this._inlineFiller=vr(p.parent)?p.parent:Cr(v,p.parent,p.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}},{key:"_updateChildrenMappings",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n=this.domConverter.mapViewToDom(e).childNodes,i=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),r=this._diffNodeLists(n,i),a=this._findReplaceActions(r,n,i);if(-1!==a.indexOf("replace")){var s,c={equal:0,insert:0,delete:0},l=o(a);try{for(l.s();!(s=l.n()).done;){var u=s.value;if("replace"===u){var d=c.equal+c.insert,h=c.equal+c.delete,f=e.getChild(d);!f||f.is("uiElement")||f.is("rawElement")||this._updateElementMappings(f,n[h]),Tr(i[d]),c.equal++}else c[u]++}}catch(p){l.e(p)}finally{l.f()}}}}},{key:"_updateElementMappings",value:function(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}},{key:"_getInlineFillerPosition",value:function(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?vi._createBefore(this.selection.getFirstPosition().parent):e}},{key:"_isSelectionInInlineFiller",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&ur(t.parent)&&vr(t.parent))}},{key:"_removeInlineFiller",value:function(){var e=this._inlineFiller;if(!vr(e))throw new A.a("view-renderer-filler-was-lost",this);gr(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}},{key:"_needsInlineFillerAtSelection",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;return!!(this.domConverter.mapViewToDom(t.root)&&t.is("element")&&function(e){if("false"==e.getAttribute("contenteditable"))return!1;var t=e.findAncestor(function(e){return e.hasAttribute("contenteditable")});return!t||"true"==t.getAttribute("contenteditable")}(t)&&n!==t.getFillerOffset())&&!(e.nodeBefore instanceof In||e.nodeAfter instanceof In)}},{key:"_updateText",value:function(e,t){var n=this.domConverter.findCorrespondingDomText(e),i=this.domConverter.viewToDom(e,n.ownerDocument),r=n.data,a=i.data,s=t.inlineFillerPosition;if(s&&s.parent==e.parent&&s.offset==e.index&&(a=pr+a),r!=a){var c,l=o(yr(r,a));try{for(l.s();!(c=l.n()).done;){var u=c.value;"insert"===u.type?n.insertData(u.index,u.values.join("")):n.deleteData(u.index,u.howMany)}}catch(d){l.e(d)}finally{l.f()}}}},{key:"_updateAttrs",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n,i=Array.from(t.attributes).map(function(e){return e.name}),r=o(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var a=n.value;t.setAttribute(a,e.getAttribute(a))}}catch(u){r.e(u)}finally{r.f()}var s,c=o(i);try{for(c.s();!(s=c.n()).done;){var l=s.value;e.hasAttribute(l)||t.removeAttribute(l)}}catch(u){c.e(u)}finally{c.f()}}}},{key:"_updateChildren",value:function(e,t){var n=this.domConverter.mapViewToDom(e);if(n){var i=t.inlineFillerPosition,r=this.domConverter.mapViewToDom(e).childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{bind:!0,inlineFillerPosition:i}));i&&i.parent===e&&Cr(n.ownerDocument,a,i.offset);var s,c=this._diffNodeLists(r,a),l=0,u=new Set,d=o(c);try{for(d.s();!(s=d.n()).done;){var h=s.value;"delete"===h?(u.add(r[l]),Tr(r[l])):"equal"===h&&l++}}catch(y){d.e(y)}finally{d.f()}l=0;var f,p=o(c);try{for(p.s();!(f=p.n()).done;){var v=f.value;"insert"===v?(xr(n,l,a[l]),l++):"equal"===v&&(this._markDescendantTextToSync(this.domConverter.domToView(a[l])),l++)}}catch(y){p.e(y)}finally{p.f()}var g,m=o(u);try{for(m.s();!(g=m.n()).done;){var b=g.value;b.parentNode||this.domConverter.unbindDomElement(b)}}catch(y){m.e(y)}finally{m.f()}}}},{key:"_diffNodeLists",value:function(e,t){return _r((n=e,i=this._fakeSelectionContainer,0==(r=Array.from(n)).length||!i||r[r.length-1]==i&&r.pop(),e=r),t,Er.bind(null,this.domConverter));var n,i,r}},{key:"_findReplaceActions",value:function(e,t,n){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var i,r=[],a=[],s=[],c={equal:0,insert:0,delete:0},l=o(e);try{for(l.s();!(i=l.n()).done;){var u=i.value;"insert"===u?s.push(n[c.equal+c.insert]):"delete"===u?a.push(t[c.equal+c.delete]):((r=r.concat(_r(a,s,Or).map(function(e){return"equal"===e?"replace":e}))).push("equal"),a=[],s=[]),c[u]++}}catch(d){l.e(d)}finally{l.f()}return r.concat(_r(a,s,Or).map(function(e){return"equal"===e?"replace":e}))}},{key:"_markDescendantTextToSync",value:function(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element")){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;this._markDescendantTextToSync(i)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"_updateSelection",value:function(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}},{key:"_updateFakeSelection",value:function(e){var t,n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=((t=n.createElement("div")).className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent="\xa0",t));var i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),this._fakeSelectionNeedsUpdate(e)){i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xa0";var r=n.getSelection(),o=n.createRange();r.removeAllRanges(),o.selectNodeContents(i),r.addRange(o)}}},{key:"_updateDomSelection",value:function(e){var t=e.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(t)){var n=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(n.parent,n.offset),t.extend(i.parent,i.offset),ji&&function(e,t){var n=e.parent;if(n.nodeType==Node.ELEMENT_NODE&&e.offset==n.childNodes.length-1){var i=n.childNodes[e.offset];i&&"BR"==i.tagName&&t.addRange(t.getRangeAt(0))}}(i,t)}}},{key:"_domSelectionNeedsUpdate",value:function(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}},{key:"_fakeSelectionNeedsUpdate",value:function(e){var t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}},{key:"_removeDomSelection",value:function(){var e,t=o(this.domDocuments);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.getSelection().rangeCount){var i=n.activeElement,r=this.domConverter.mapDomToView(i);i&&r&&n.getSelection().removeAllRanges()}}}catch(a){t.e(a)}finally{t.f()}}},{key:"_removeFakeSelection",value:function(){var e=this._fakeSelectionContainer;e&&e.remove()}},{key:"_updateFocus",value:function(){if(this.isFocused){var e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}]),e}();function Cr(e,t,n){var i=t instanceof Array?t:t.childNodes,r=i[n];if(ur(r))return r.data=pr+r.data,r;var o=e.createTextNode(pr);return Array.isArray(t)?i.splice(n,0,o):xr(t,n,o),o}function Or(e,t){return Ar(e)&&Ar(t)&&!ur(e)&&!ur(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}function Er(e,t,n){return t===n||(ur(t)&&ur(n)?t.data===n.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(n)))}Xe(Sr,Ye);var Pr={window:window,document:document};function Ir(e){for(var t=0;e.previousSibling;)e=e.previousSibling,t++;return t}function Mr(e){for(var t=[];e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}var Nr=fr(document),Lr=dr(document),Rr=hr(document),jr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.document=t,this.blockFillerMode=n.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption","td","th"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ln,this._encounteredRawContentDomNodes=new WeakSet}return d(e,[{key:"bindFakeSelection",value:function(e,t){this._fakeSelectionMapping.set(e,new yi(t))}},{key:"fakeSelectionToView",value:function(e){return this._fakeSelectionMapping.get(e)}},{key:"bindElements",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"unbindDomElement",value:function(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);var n,i=o(e.childNodes);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.unbindDomElement(r)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"bindDocumentFragments",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"viewToDom",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.is("$text")){var r=this._processDataFromViewText(e);return t.createTextNode(r)}if(this.mapViewToDom(e))return this.mapViewToDom(e);if(e.is("documentFragment"))n=t.createDocumentFragment(),i.bind&&this.bindDocumentFragments(n,e);else{if(e.is("uiElement"))return n=e.render(t),i.bind&&this.bindElements(n,e),n;n=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(n),i.bind&&this.bindElements(n,e);var a,s=o(e.getAttributeKeys());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.setAttribute(c,e.getAttribute(c))}}catch(h){s.e(h)}finally{s.f()}}if(!1!==i.withChildren){var l,u=o(this.viewChildrenToDom(e,t,i));try{for(u.s();!(l=u.n()).done;){var d=l.value;n.appendChild(d)}}catch(h){u.e(h)}finally{u.f()}}return n}},{key:"viewChildrenToDom",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i().mark(function a(){var s,c,l,u,d;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:s=e.getFillerOffset&&e.getFillerOffset(),c=0,l=o(e.getChildren()),i.prev=3,l.s();case 5:if((u=l.n()).done){i.next=16;break}if(d=u.value,i.t0=s===c,!i.t0){i.next=11;break}return i.next=11,n._getBlockFiller(t);case 11:return i.next=13,n.viewToDom(d,t,r);case 13:c++;case 14:i.next=5;break;case 16:i.next=21;break;case 18:i.prev=18,i.t1=i.catch(3),l.e(i.t1);case 21:return i.prev=21,l.f(),i.finish(21);case 24:if(i.t2=s===c,!i.t2){i.next=28;break}return i.next=28,n._getBlockFiller(t);case 28:case"end":return i.stop()}},a,null,[[3,18,21,24]])})()}},{key:"viewRangeToDom",value:function(e){var t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),i=document.createRange();return i.setStart(t.parent,t.offset),i.setEnd(n.parent,n.offset),i}},{key:"viewPositionToDom",value:function(e){var t,n,i,r=e.parent;if(r.is("$text")){var o=this.findCorrespondingDomText(r);if(!o)return null;var a=e.offset;return vr(o)&&(a+=7),{parent:o,offset:a}}if(0===e.offset){if(!(t=this.mapViewToDom(r)))return null;i=t.childNodes[0]}else{var s=e.nodeBefore;if(!(n=s.is("$text")?this.findCorrespondingDomText(s):this.mapViewToDom(e.nodeBefore)))return null;t=n.parentNode,i=n.nextSibling}return ur(i)&&vr(i)?{parent:i,offset:7}:{parent:t,offset:n?Ir(n)+1:0}}},{key:"domToView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isBlockFiller(e))return null;var n,i=this.getHostViewElement(e);if(i)return i;if(ur(e)){if(gr(e))return null;var r=this._processDataFromDomText(e);return""===r?null:new In(this.document,r)}if(this.isComment(e))return null;if(this.mapDomToView(e))return this.mapDomToView(e);if(this.isDocumentFragment(e))n=new Xi(this.document),t.bind&&this.bindDocumentFragments(e,n);else{var a=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();n=new si(this.document,a),t.bind&&this.bindElements(e,n);for(var s=e.attributes,c=s.length-1;c>=0;c--)n._setAttribute(s[c].name,s[c].value);if(!1!==t.withChildren&&this._rawContentElementMatcher.match(n))return n._setCustomProperty("$rawContent",e.innerHTML),this._encounteredRawContentDomNodes.add(e),n}if(!1!==t.withChildren){var l,u=o(this.domChildrenToView(e,t));try{for(u.s();!(l=u.n()).done;){var d=l.value;n._appendChild(d)}}catch(h){u.e(h)}finally{u.f()}}return n}},{key:"domChildrenToView",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().mark(function r(){var o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o=0;case 1:if(!(o<e.childNodes.length)){i.next=10;break}if(a=t.domToView(e.childNodes[o],n),i.t0=null!==a,!i.t0){i.next=7;break}return i.next=7,a;case 7:o++,i.next=1;break;case 10:case"end":return i.stop()}},r)})()}},{key:"domSelectionToView",value:function(e){if(1===e.rangeCount){var t=e.getRangeAt(0).startContainer;ur(t)&&(t=t.parentNode);var n=this.fakeSelectionToView(t);if(n)return n}for(var i=this.isDomSelectionBackward(e),r=[],o=0;o<e.rangeCount;o++){var a=e.getRangeAt(o),s=this.domRangeToView(a);s&&r.push(s)}return new yi(r,{backward:i})}},{key:"domRangeToView",value:function(e){var t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new gi(t,n):null}},{key:"domPositionToView",value:function(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Ir(e));var n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return vi._createBefore(n);if(ur(e)){if(gr(e))return this.domPositionToView(e.parentNode,Ir(e));var i=this.findCorrespondingViewText(e),r=t;return i?(vr(e)&&(r=(r-=7)<0?0:r),new vi(i,r)):null}if(0===t){var o=this.mapDomToView(e);if(o)return new vi(o,0)}else{var a=e.childNodes[t-1],s=ur(a)?this.findCorrespondingViewText(a):this.mapDomToView(a);if(s&&s.parent)return new vi(s.parent,s.index+1)}return null}},{key:"mapDomToView",value:function(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}},{key:"findCorrespondingViewText",value:function(e){if(gr(e))return null;var t=this.getHostViewElement(e);if(t)return t;var n=e.previousSibling;if(n){if(!this.isElement(n))return null;var i=this.mapDomToView(n);if(i)return i.nextSibling instanceof In?i.nextSibling:null}else{var r=this.mapDomToView(e.parentNode);if(r){var o=r.getChild(0);return o instanceof In?o:null}}return null}},{key:"mapViewToDom",value:function(e){return this._viewToDomMapping.get(e)}},{key:"findCorrespondingDomText",value:function(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}},{key:"focus",value:function(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var n=Pr.window,i=n.scrollX,o=n.scrollY,a=[];Vr(t,function(e){var t=e.scrollLeft,n=e.scrollTop;a.push([t,n])}),t.focus(),Vr(t,function(e){var t=r(a.shift(),2),n=t[0],i=t[1];e.scrollLeft=n,e.scrollTop=i}),Pr.window.scrollTo(i,o)}}},{key:"isElement",value:function(e){return e&&e.nodeType==Node.ELEMENT_NODE}},{key:"isDocumentFragment",value:function(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}},{key:"isComment",value:function(e){return e&&e.nodeType==Node.COMMENT_NODE}},{key:"isBlockFiller",value:function(e){return"br"==this.blockFillerMode?e.isEqualNode(Nr):!("BR"!==e.tagName||!Zr(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(Rr)||function(e,t){return e.isEqualNode(Lr)&&Zr(e,t)&&1===e.parentNode.childNodes.length}(e,this.blockElements)}},{key:"isDomSelectionBackward",value:function(e){if(e.isCollapsed)return!1;var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var n=t.collapsed;return t.detach(),n}},{key:"getHostViewElement",value:function(e){var t=Mr(e);for(t.pop();t.length;){var n=t.pop(),i=this._domToViewMapping.get(n);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}},{key:"isDomSelectionCorrect",value:function(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}},{key:"registerRawContentMatcher",value:function(e){this._rawContentElementMatcher.add(e)}},{key:"_getBlockFiller",value:function(e){switch(this.blockFillerMode){case"nbsp":return dr(e);case"markedNbsp":return hr(e);case"br":return fr(e)}}},{key:"_isDomSelectionPositionCorrect",value:function(e,t){if(ur(e)&&vr(e)&&t<7||this.isElement(e)&&vr(e.childNodes[t]))return!1;var n=this.mapDomToView(e);return!n||!n.is("uiElement")&&!n.is("rawElement")}},{key:"_processDataFromViewText",value:function(e){var t=this,n=e.data;if(e.getAncestors().some(function(e){return t.preElements.includes(e.name)}))return n;if(" "==n.charAt(0)){var i=this._getTouchingViewTextNode(e,!1);(!i||!this._nodeEndsWithSpace(i))&&i||(n="\xa0"+n.substr(1))}if(" "==n.charAt(n.length-1)){var r=this._getTouchingViewTextNode(e,!0);" "!=n.charAt(n.length-2)&&r&&" "!=r.data.charAt(0)||(n=n.substr(0,n.length-1)+"\xa0")}return n.replace(/ {2}/g," \xa0")}},{key:"_nodeEndsWithSpace",value:function(e){var t=this;if(e.getAncestors().some(function(e){return t.preElements.includes(e.name)}))return!1;var n=this._processDataFromViewText(e);return" "==n.charAt(n.length-1)}},{key:"_processDataFromDomText",value:function(e){var t=e.data;if(Dr(e,this.preElements))return mr(e);t=t.replace(/[ \n\t\r]{1,}/g," ");var n=this._getTouchingInlineDomNode(e,!1),i=this._getTouchingInlineDomNode(e,!0),r=this._checkShouldLeftTrimDomText(e,n),o=this._checkShouldRightTrimDomText(e,i);return r&&(t=t.replace(/^ /,"")),o&&(t=t.replace(/ $/,"")),t=(t=mr(new Text(t))).replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(t)||!i||i.data&&" "==i.data.charAt(0))&&(t=t.replace(/\u00A0$/," ")),r&&(t=t.replace(/^\u00A0/," ")),t}},{key:"_checkShouldLeftTrimDomText",value:function(e,t){return!t||!!vn(t)||!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1))}},{key:"_checkShouldRightTrimDomText",value:function(e,t){return!t&&!vr(e)}},{key:"_getTouchingViewTextNode",value:function(e,t){var n,i=o(new pi({startPosition:t?vi._createAfter(e):vi._createBefore(e),direction:t?"forward":"backward"}));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.item.is("containerElement")||r.item.is("element","br"))return null;if(r.item.is("$textProxy"))return r.item}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"_getTouchingInlineDomNode",value:function(e,t){if(!e.parentNode)return null;var n=t?"nextNode":"previousNode",i=e.ownerDocument,r=Mr(e)[0],o=i.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return ur(e)||"BR"==e.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});o.currentNode=e;var a=o[n]();if(null!==a){var s=function(e,t){for(var n=Mr(e),i=Mr(t),r=0;n[r]==i[r]&&n[r];)r++;return 0===r?null:n[r-1]}(e,a);if(s&&!Dr(e,this.blockElements,s)&&!Dr(a,this.blockElements,s))return a}return null}}]),e}();function Dr(e,t,n){var i=Mr(e);return n&&(i=i.slice(i.indexOf(n)+1)),i.some(function(e){return e.tagName&&t.includes(e.tagName.toLowerCase())})}function Vr(e,t){for(;e&&e!=Pr.document;)t(e),e=e.parentNode}function Zr(e,t){var n=e.parentNode;return n&&n.tagName&&t.includes(n.tagName.toLowerCase())}function zr(e){var t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}var Fr=ze({},O,{listenTo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(Ar(e)||zr(e)){var o=this._getProxyEmitter(e)||new qr(e);o.attach.apply(o,i),e=o}(t=O.listenTo).call.apply(t,[this,e].concat(i))},stopListening:function(e,t,n){if(Ar(e)||zr(e)){var i=this._getProxyEmitter(e);if(!i)return;e=i}O.stopListening.call(this,e,t,n),e instanceof qr&&e.detach(t)},_getProxyEmitter:function(e){return t=this,n=Br(e),t[S]&&t[S][n]?t[S][n].emitter:null;var t,n}}),qr=d(function e(t){l(this,e),E(this,Br(t)),this._domNode=t});function Br(e){return e["data-ck-expando"]||(e["data-ck-expando"]=x())}ze(qr.prototype,O,{attach:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._domListeners||!this._domListeners[e]){var i={capture:!!n.useCapture,passive:!!n.usePassive},r=this._createDomListener(e,i);this._domNode.addEventListener(e,r,i),this._domListeners||(this._domListeners={}),this._domListeners[e]=r}},detach:function(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener:function(e,t){var n=this,i=function(t){n.fire(e,t)};return i.removeListener=function(){n._domNode.removeEventListener(e,i,t),delete n._domListeners[e]},i}});var Ur=function(){function e(t){l(this,e),this.view=t,this.document=t.document,this.isEnabled=!1}return d(e,[{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1}},{key:"destroy",value:function(){this.disable(),this.stopListening()}},{key:"checkShouldIgnoreEventFromTarget",value:function(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}]),e}();function Hr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xt;++t<n;)this.add(e[t])}Xe(Ur,Fr),Hr.prototype.add=Hr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Hr.prototype.has=function(e){return this.__data__.has(e)};var Wr=Hr,Yr=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},Jr=function(e,t){return e.has(t)},Qr=function(e,t,n,i,r,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,f=2&n?new Wr:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],v=t[d];if(i)var g=a?i(v,p,d,t,e,o):i(p,v,d,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!Yr(t,function(e,t){if(!Jr(f,t)&&(p===e||r(p,e,n,i,o)))return f.push(t)})){h=!1;break}}else if(p!==v&&!r(p,v,n,i,o)){h=!1;break}}return o.delete(e),o.delete(t),h},Gr=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n},$r=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},Kr=F?F.prototype:void 0,Xr=Kr?Kr.valueOf:void 0,eo=Object.prototype.hasOwnProperty,to=Object.prototype.hasOwnProperty,no=function e(t,n,i,r,o){return t===n||(null==t||null==n||!we(t)&&!we(n)?t!=t&&n!=n:function(e,t,n,i,r,o){var a=Ce(e),s=Ce(t),c=a?"[object Array]":Gt(e),l=s?"[object Array]":Gt(t),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h=c==l;if(h&&Object(Oe.a)(e)){if(!Object(Oe.a)(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new At),a||Ne(e)?Qr(e,t,n,i,r,o):function(e,t,n,i,r,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Kt(e),new Kt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return oe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Gr;case"[object Set]":if(s||(s=$r),e.size!=t.size&&!(1&i))return!1;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var l=Qr(s(e),s(t),i,r,o,a);return a.delete(e),l;case"[object Symbol]":if(Xr)return Xr.call(e)==Xr.call(t)}return!1}(e,t,c,n,i,r,o);if(!(1&n)){var f=u&&to.call(e,"__wrapped__"),p=d&&to.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,g=p?t.value():t;return o||(o=new At),r(v,g,n,i,o)}}return!!h&&(o||(o=new At),function(e,t,n,i,r,o){var a=1&n,s=Vt(e),c=s.length;if(c!=Vt(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:eo.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<c;){var v=e[u=s[l]],g=t[u];if(i)var m=a?i(g,v,u,t,e,o):i(v,g,u,e,t,o);if(!(void 0===m?v===g||r(v,g,n,i,o):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,i,r,o))}(t,n,i,r,e,o))},io=function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?no(e,t,void 0,n):!!i},ro=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e]))._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},t.domConverter=e.domConverter,t.renderer=e._renderer,t._domElements=[],t._mutationObserver=new window.MutationObserver(t._onMutations.bind(v(t))),t}return g(n,e),d(n,[{key:"flush",value:function(){this._onMutations(this._mutationObserver.takeRecords())}},{key:"observe",value:function(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}},{key:"enable",value:function(){t(w(n.prototype),"enable",this).call(this);var e,i=o(this._domElements);try{for(i.s();!(e=i.n()).done;){var r=e.value;this._mutationObserver.observe(r,this._config)}}catch(a){i.e(a)}finally{i.f()}}},{key:"disable",value:function(){t(w(n.prototype),"disable",this).call(this),this._mutationObserver.disconnect()}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),this._mutationObserver.disconnect()}},{key:"_onMutations",value:function(e){if(0!==e.length){var t,n=this.domConverter,i=new Map,r=new Set,a=o(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if("childList"===s.type){var c=n.mapDomToView(s.target);if(c&&(c.is("uiElement")||c.is("rawElement")))continue;c&&!this._isBogusBrMutation(s)&&r.add(c)}}}catch(E){a.e(E)}finally{a.f()}var l,u=o(e);try{for(u.s();!(l=u.n()).done;){var d=l.value,h=n.mapDomToView(d.target);if((!h||!h.is("uiElement")&&!h.is("rawElement"))&&"characterData"===d.type){var f=n.findCorrespondingViewText(d.target);f&&!r.has(f.parent)?i.set(f,{type:"text",oldText:f.data,newText:mr(d.target),node:f}):!f&&vr(d.target)&&r.add(n.mapDomToView(d.target.parentNode))}}}catch(E){u.e(E)}finally{u.f()}var p,v=[],g=o(i.values());try{for(g.s();!(p=g.n()).done;){var m=p.value;this.renderer.markToSync("text",m.node),v.push(m)}}catch(E){g.e(E)}finally{g.f()}var b,y=o(r);try{for(y.s();!(b=y.n()).done;){var k=b.value,w=n.mapViewToDom(k),_=Array.from(k.getChildren()),x=Array.from(n.domChildrenToView(w,{withChildren:!1}));io(_,x,O)||(this.renderer.markToSync("children",k),v.push({type:"children",oldChildren:_,newChildren:x,node:k}))}}catch(E){y.e(E)}finally{y.f()}var T=e[0].target.ownerDocument.getSelection(),A=null;if(T&&T.anchorNode){var S=n.domPositionToView(T.anchorNode,T.anchorOffset),C=n.domPositionToView(T.focusNode,T.focusOffset);S&&C&&(A=new yi(S)).setFocus(C)}v.length&&(this.document.fire("mutations",v,A),this.view.forceRender())}function O(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}}},{key:"_isBogusBrMutation",value:function(e){var t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}]),n}(Ur),oo=function(){function e(t,n,i){l(this,e),this.view=t,this.document=t.document,this.domEvent=n,this.domTarget=n.target,ze(this,i)}return d(e,[{key:"target",get:function(){return this.view.domConverter.mapDomToView(this.domTarget)}},{key:"preventDefault",value:function(){this.domEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.domEvent.stopPropagation()}}]),e}(),ao=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).useCapture=!1,n}return g(t,e),d(t,[{key:"observe",value:function(e){var t=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(n){t.listenTo(e,n,function(e,n){t.isEnabled&&!t.checkShouldIgnoreEventFromTarget(n.target)&&t.onDomEvent(n)},{useCapture:t.useCapture})})}},{key:"fire",value:function(e,t,n){this.isEnabled&&this.document.fire(e,new oo(this.view,t,n))}}]),t}(Ur),so=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).domEventType=["keydown","keyup"],n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Ui(this)}})}}]),t}(ao),co=function(){return z.a.Date.now()},lo=/\s/,uo=/^\s+/,ho=/^[-+]0x[0-9a-f]+$/i,fo=/^0b[01]+$/i,po=/^0o[0-7]+$/i,vo=parseInt,go=function(e){if("number"==typeof e)return e;if(jn(e))return NaN;if(Z(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Z(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&lo.test(e.charAt(t)););return t}(e)+1).replace(uo,"")}(e);var n=fo.test(e);return n||po.test(e)?vo(e.slice(2),n?2:8):ho.test(e)?NaN:+e},mo=Math.max,bo=Math.min,yo=function(e,t,n){var i,r,o,a,s,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,o=r;return i=r=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(g,t),u?f(e):a}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function g(){var e,n,i=co();if(v(i))return m(i);s=setTimeout(g,(n=t-((e=i)-c),d?bo(n,o-(e-l)):n))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,a)}function b(){var e=co(),n=v(e);if(i=arguments,r=this,c=e,n){if(void 0===s)return p(c);if(d)return clearTimeout(s),s=setTimeout(g,t),f(c)}return void 0===s&&(s=setTimeout(g,t)),a}return t=go(t)||0,Z(n)&&(u=!!n.leading,o=(d="maxWait"in n)?mo(go(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=r=s=void 0},b.flush=function(){return void 0===s?a:m(co())},b},ko=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e]))._fireSelectionChangeDoneDebounced=yo(function(e){return t.document.fire("selectionChangeDone",e)},200),t}return g(n,e),d(n,[{key:"observe",value:function(){var e=this,t=this.document;t.on("arrowKey",function(n,i){t.selection.isFake&&e.isEnabled&&i.preventDefault()},{context:"$capture"}),t.on("arrowKey",function(n,i){t.selection.isFake&&e.isEnabled&&e._handleSelectionMove(i.keyCode)},{priority:"lowest"})}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionMove",value:function(e){var t=this.document.selection,n=new yi(t.getRanges(),{backward:t.isBackward,fake:!1});e!=qi.arrowleft&&e!=qi.arrowup||n.setTo(n.getFirstPosition()),e!=qi.arrowright&&e!=qi.arrowdown||n.setTo(n.getLastPosition());var i={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}]),n}(Ur),wo=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e])).mutationObserver=e.getObserver(ro),t.selection=t.document.selection,t.domConverter=e.domConverter,t._documents=new WeakSet,t._fireSelectionChangeDoneDebounced=yo(function(e){return t.document.fire("selectionChangeDone",e)},200),t._clearInfiniteLoopInterval=setInterval(function(){return t._clearInfiniteLoop()},1e3),t._loopbackCounter=0,t}return g(n,e),d(n,[{key:"observe",value:function(e){var t=this,n=e.ownerDocument;this._documents.has(n)||(this.listenTo(n,"selectionchange",function(e,i){t._handleSelectionChange(i,n)}),this._documents.add(n))}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionChange",value:function(e,t){if(this.isEnabled){var n=t.defaultView.getSelection();if(!this.checkShouldIgnoreEventFromTarget(n.anchorNode)){this.mutationObserver.flush();var i=this.domConverter.domSelectionToView(n);if(0!=i.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(i))this.view.forceRender();else{var r={oldSelection:this.selection,newSelection:i,domSelection:n};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}else this.view.hasDomSelection=!1}}}},{key:"_clearInfiniteLoop",value:function(){this._loopbackCounter=0}}]),n}(Ur),_o=function(e){function n(e){var t;l(this,n),(t=f(this,n,[e])).domEventType=["focus","blur"],t.useCapture=!0;var i=t.document;return i.on("focus",function(){i.isFocused=!0,t._renderTimeoutId=setTimeout(function(){return e.forceRender()},50)}),i.on("blur",function(t,n){var r=i.selection.editableElement;null!==r&&r!==n.target||(i.isFocused=!1,e.forceRender())}),t}return g(n,e),d(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}},{key:"destroy",value:function(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),t(w(n.prototype),"destroy",this).call(this)}}]),n}(ao),xo=function(e){function t(e){var n;l(this,t),(n=f(this,t,[e])).domEventType=["compositionstart","compositionupdate","compositionend"];var i=n.document;return i.on("compositionstart",function(){i.isComposing=!0}),i.on("compositionend",function(){i.isComposing=!1}),n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),t}(ao),To=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).domEventType=["beforeinput"],n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),t}(ao),Ao=function(e){return"string"==typeof e||!Ce(e)&&we(e)&&"[object String]"==J(e)};function So(e){return"[object Range]"==Object.prototype.toString.apply(e)}function Co(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}var Oo=["top","right","bottom","left","width","height"],Eo=function(){function e(t){l(this,e);var n=So(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),vn(t)||n)if(n){var i=e.getDomRangeRects(t);Po(this,e.getBoundingRect(i))}else Po(this,t.getBoundingClientRect());else if(zr(t)){var r=t.innerWidth,o=t.innerHeight;Po(this,{top:0,right:r,bottom:o,left:0,width:r,height:o})}else Po(this,t)}return d(e,[{key:"clone",value:function(){return new e(this)}},{key:"moveTo",value:function(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}},{key:"moveBy",value:function(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}},{key:"getIntersection",value:function(t){var n={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0?null:new e(n)}},{key:"getIntersectionArea",value:function(e){var t=this.getIntersection(e);return t?t.getArea():0}},{key:"getArea",value:function(){return this.width*this.height}},{key:"getVisible",value:function(){var t=this._source,n=this.clone();if(!Io(t))for(var i=t.parentNode||t.commonAncestorContainer;i&&!Io(i);){var r=new e(i),o=n.getIntersection(r);if(!o)return null;o.getArea()<n.getArea()&&(n=o),i=i.parentNode}return n}},{key:"isEqual",value:function(e){for(var t=0,n=Oo;t<n.length;t++){var i=n[t];if(this[i]!==e[i])return!1}return!0}},{key:"contains",value:function(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e))}},{key:"excludeScrollbarsAndBorders",value:function(){var e,t,n,i=this._source;if(zr(i))e=i.innerWidth-i.document.documentElement.clientWidth,t=i.innerHeight-i.document.documentElement.clientHeight,n=i.getComputedStyle(i.document.documentElement).direction;else{var r=Co(this._source);e=i.offsetWidth-i.clientWidth-r.left-r.right,t=i.offsetHeight-i.clientHeight-r.top-r.bottom,n=i.ownerDocument.defaultView.getComputedStyle(i).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===n?this.right-=e:this.left+=e,this.height-=t,this.bottom-=t,this}}],[{key:"getDomRangeRects",value:function(t){var n=[],i=Array.from(t.getClientRects());if(i.length){var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;n.push(new e(s))}}catch(u){a.e(u)}finally{a.f()}}else{var c=t.startContainer;ur(c)&&(c=c.parentNode);var l=new e(c.getBoundingClientRect());l.right=l.left,l.width=0,n.push(l)}return n}},{key:"getBoundingRect",value:function(t){var n,i={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY},r=0,a=o(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;r++,i.left=Math.min(i.left,s.left),i.top=Math.min(i.top,s.top),i.right=Math.max(i.right,s.right),i.bottom=Math.max(i.bottom,s.bottom)}}catch(c){a.e(c)}finally{a.f()}return 0==r?null:(i.width=i.right-i.left,i.height=i.bottom-i.top,new e(i))}}]),e}();function Po(e,t){var n,i=o(Oo);try{for(i.s();!(n=i.n()).done;){var r=n.value;e[r]=t[r]}}catch(a){i.e(a)}finally{i.f()}}function Io(e){return!!vn(e)&&e===e.ownerDocument.body}var Mo=function(){function e(t,n){l(this,e),e._observerInstance||e._createObserver(),this._element=t,this._callback=n,e._addElementCallback(t,n),e._observerInstance.observe(t)}return d(e,[{key:"destroy",value:function(){e._deleteElementCallback(this._element,this._callback)}}],[{key:"_addElementCallback",value:function(t,n){e._elementCallbacks||(e._elementCallbacks=new Map);var i=e._elementCallbacks.get(t);i||(i=new Set,e._elementCallbacks.set(t,i)),i.add(n)}},{key:"_deleteElementCallback",value:function(t,n){var i=e._getElementCallbacks(t);i&&(i.delete(n),i.size||(e._elementCallbacks.delete(t),e._observerInstance.unobserve(t))),e._elementCallbacks&&!e._elementCallbacks.size&&(e._observerInstance=null,e._elementCallbacks=null)}},{key:"_getElementCallbacks",value:function(t){return e._elementCallbacks?e._elementCallbacks.get(t):null}},{key:"_createObserver",value:function(){var t;t="function"==typeof Pr.window.ResizeObserver?Pr.window.ResizeObserver:No,e._observerInstance=new t(function(t){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=e._getElementCallbacks(r.target);if(a){var s,c=o(a);try{for(c.s();!(s=c.n()).done;){(0,s.value)(r)}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){i.e(l)}finally{i.f()}})}}]),e}();Mo._observerInstance=null,Mo._elementCallbacks=null;var No=function(){function e(t){l(this,e),this._callback=t,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}return d(e,[{key:"observe",value:function(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}},{key:"unobserve",value:function(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}},{key:"_startPeriodicCheck",value:function(){var e=this;this.listenTo(Pr.window,"resize",function(){e._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(function t(){e._checkElementRectsAndExecuteCallback(),e._periodicCheckTimeout=setTimeout(t,100)},100)}},{key:"_stopPeriodicCheck",value:function(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}},{key:"_checkElementRectsAndExecuteCallback",value:function(){var e,t=[],n=o(this._elements);try{for(n.s();!(e=n.n()).done;){var i=e.value;this._hasRectChanged(i)&&t.push({target:i,contentRect:this._previousRects.get(i)})}}catch(r){n.e(r)}finally{n.f()}t.length&&this._callback(t)}},{key:"_hasRectChanged",value:function(e){if(!e.ownerDocument.body.contains(e))return!1;var t=new Eo(e),n=this._previousRects.get(e),i=!n||!n.isEqual(t);return this._previousRects.set(e,t),i}}]),e}();function Lo(e){return function(t){return t+e}}function Ro(e){var t=e.next();return t.done?null:t.value}Xe(No,Fr);var jo=function(){function e(){l(this,e),this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}return d(e,[{key:"add",value:function(e){var t=this;if(this._elements.has(e))throw new A.a("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",function(){return t._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",function(){return t._blur()},{useCapture:!0}),this._elements.add(e)}},{key:"remove",value:function(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}},{key:"destroy",value:function(){this.stopListening()}},{key:"_focus",value:function(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}},{key:"_blur",value:function(){var e=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){e.focusedElement=null,e.isFocused=!1},0)}}]),e}();Xe(jo,Fr),Xe(jo,Ye);var Do=function(){function e(){l(this,e),this._listener=Object.create(Fr)}return d(e,[{key:"listenTo",value:function(e){var t=this;this._listener.listenTo(e,"keydown",function(e,n){t._listener.fire("_keydown:"+Ui(n),n)})}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Hi(e);this._listener.listenTo(this._listener,"_keydown:"+i,function(e,n){t(n,function(){n.preventDefault(),n.stopPropagation(),e.stop()}),e.return=!0},{priority:n.priority})}},{key:"press",value:function(e){return!!this._listener.fire("_keydown:"+Ui(e),e)}},{key:"destroy",value:function(){this._listener.stopListening()}}]),e}(),Vo=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).document.on("keydown",function(e,t){if(n.isEnabled&&((r=t.keyCode)==qi.arrowright||r==qi.arrowleft||r==qi.arrowup||r==qi.arrowdown)){var i=new wi(n.document,"arrowKey",n.document.selection.getFirstRange());n.document.fire(i,t),i.stop.called&&e.stop()}var r}),n}return g(t,e),d(t,[{key:"observe",value:function(){}}]),t}(Ur);function Zo(e){for(var t=e.target,n=e.viewportOffset,i=void 0===n?0:n,r=Wo(t),o=r,a=null;o;){Fo(Yo(o==r?t:a),function(){return Jo(t,o)});var s=Jo(t,o);if(zo(o,s,i),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function zo(e,t,n){var i=t.clone().moveBy(0,n),r=t.clone().moveBy(0,-n),o=new Eo(e).excludeScrollbarsAndBorders();if(![r,i].every(function(e){return o.contains(e)})){var a=e.scrollX,s=e.scrollY;Bo(r,o)?s-=o.top-t.top+n:qo(i,o)&&(s+=t.bottom-o.bottom+n),Uo(t,o)?a-=o.left-t.left+n:Ho(t,o)&&(a+=t.right-o.right+n),e.scrollTo(a,s)}}function Fo(e,t){for(var n,i,r=Wo(e);e!=r.document.body;)i=t(),(n=new Eo(e).excludeScrollbarsAndBorders()).contains(i)||(Bo(i,n)?e.scrollTop-=n.top-i.top:qo(i,n)&&(e.scrollTop+=i.bottom-n.bottom),Uo(i,n)?e.scrollLeft-=n.left-i.left:Ho(i,n)&&(e.scrollLeft+=i.right-n.right)),e=e.parentNode}function qo(e,t){return e.bottom>t.bottom}function Bo(e,t){return e.top<t.top}function Uo(e,t){return e.left<t.left}function Ho(e,t){return e.right>t.right}function Wo(e){return So(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function Yo(e){if(So(e)){var t=e.commonAncestorContainer;return ur(t)&&(t=t.parentNode),t}return e.parentNode}function Jo(e,t){var n=Wo(e),i=new Eo(e);if(n===t)return i;for(var r=n;r!=t;){var o=new Eo(r.frameElement).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),r=r.parent}return i}Object.assign({},{scrollViewportToShowTarget:Zo,scrollAncestorsToShowTarget:function(e){Fo(Yo(e),function(){return new Eo(e)})}});var Qo=function(){function e(t){var n=this;l(this,e),this.document=new Oi(t),this.domConverter=new jr(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Sr(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new er(this.document),this.addObserver(ro),this.addObserver(wo),this.addObserver(_o),this.addObserver(so),this.addObserver(ko),this.addObserver(xo),this.addObserver(Vo),Vi&&this.addObserver(To),this.document.on("arrowKey",br,{priority:"low"}),function(e){e.document.on("arrowKey",function(t,n){return function(e,t,n){if(t.keyCode==qi.arrowright){var i=t.domTarget.ownerDocument.defaultView.getSelection(),r=1==i.rangeCount&&i.getRangeAt(0).collapsed;if(r||t.shiftKey){var o=n.domPositionToView(i.focusNode,i.focusOffset);if(null===o)return;var a=!1,s=o.getLastMatchingPosition(function(e){return e.item.is("uiElement")&&(a=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"))});if(a){var c=n.viewPositionToDom(s);r?i.collapse(c.parent,c.offset):i.extend(c.parent,c.offset)}}}}(0,n,e.domConverter)},{priority:"low"})}(this),this.on("render",function(){n._render(),n.document.fire("layoutChanged"),n._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",function(){n._hasChangedSinceTheLastRendering=!0})}return d(e,[{key:"attachDomRoot",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",i=this.document.getRoot(n);i._name=e.tagName.toLowerCase();for(var r={},a=0,s=Array.from(e.attributes);a<s.length;a++){var c=s[a],l=c.name,u=c.value;r[l]=u,"class"===l?this._writer.addClass(u.split(" "),i):this._writer.setAttribute(l,u,i)}this._initialDomRootAttributes.set(e,r);var d=function(){t._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?t._writer.addClass("ck-read-only",i):t._writer.removeClass("ck-read-only",i)};d(),this.domRoots.set(n,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",function(e,n){return t._renderer.markToSync("children",n)}),i.on("change:attributes",function(e,n){return t._renderer.markToSync("attributes",n)}),i.on("change:text",function(e,n){return t._renderer.markToSync("text",n)}),i.on("change:isReadOnly",function(){return t.change(d)}),i.on("change",function(){t._hasChangedSinceTheLastRendering=!0});var h,f=o(this._observers.values());try{for(f.s();!(h=f.n()).done;){var p=h.value;p.observe(e,n)}}catch(v){f.e(v)}finally{f.f()}}},{key:"detachDomRoot",value:function(e){var t=this.domRoots.get(e);Array.from(t.attributes).forEach(function(e){var n=e.name;return t.removeAttribute(n)});var n=this._initialDomRootAttributes.get(t);for(var i in n)t.setAttribute(i,n[i]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}},{key:"getDomRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.domRoots.get(e)}},{key:"addObserver",value:function(e){var t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);var n,i=o(this.domRoots);try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),s=a[0],c=a[1];t.observe(c,s)}}catch(l){i.e(l)}finally{i.f()}return t.enable(),t}},{key:"getObserver",value:function(e){return this._observers.get(e)}},{key:"disableObservers",value:function(){var e,t=o(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.disable()}}catch(n){t.e(n)}finally{t.f()}}},{key:"enableObservers",value:function(){var e,t=o(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.enable()}}catch(n){t.e(n)}finally{t.f()}}},{key:"scrollToTheSelection",value:function(){var e=this.document.selection.getFirstRange();e&&Zo({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}},{key:"focus",value:function(){if(!this.document.isFocused){var e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}},{key:"change",value:function(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new A.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(V){A.a.rethrowUnexpectedError(V,this)}}},{key:"forceRender",value:function(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){})}},{key:"destroy",value:function(){var e,t=o(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.document.destroy(),this.stopListening()}},{key:"createPositionAt",value:function(e,t){return vi._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return vi._createAfter(e)}},{key:"createPositionBefore",value:function(e){return vi._createBefore(e)}},{key:"createRange",value:function(e,t){return new gi(e,t)}},{key:"createRangeOn",value:function(e){return gi._createOn(e)}},{key:"createRangeIn",value:function(e){return gi._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new yi(e,t,n)}},{key:"_disableRendering",value:function(e){this._renderingDisabled=e,0==e&&this.change(function(){})}},{key:"_render",value:function(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}]),e}();Xe(Qo,Ye);var Go=function(){function e(t){l(this,e),this.parent=null,this._attrs=Nn(t)}return d(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new A.a("model-node-not-found-in-parent",this);return e}},{key:"startOffset",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new A.a("model-node-not-found-in-parent",this);return e}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),i=e.getAncestors(t),r=0;n[r]==i[r]&&n[r];)r++;return 0===r?null:n[r-1]}},{key:"isBefore",value:function(e){if(this==e||this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),i=On(t,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return t[i]<n[i]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(function(e,t){return e[t[0]]=t[1],e},{})),e}},{key:"is",value:function(e){return"node"===e||"model:node"===e}},{key:"_clone",value:function(){return new e(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(e,t){this._attrs.set(e,t)}},{key:"_setAttributesTo",value:function(e){this._attrs=Nn(e)}},{key:"_removeAttribute",value:function(e){return this._attrs.delete(e)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}}]),e}(),$o=function(e){function n(e,t){var i;return l(this,n),(i=f(this,n,[t]))._data=e||"",i}return g(n,e),d(n,[{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}},{key:"is",value:function(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.data=this.data,e}},{key:"_clone",value:function(){return new n(this.data,this.getAttributes())}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.attributes)}}]),n}(Go),Ko=function(){function e(t,n,i){if(l(this,e),this.textNode=t,n<0||n>t.offsetSize)throw new A.a("model-textproxy-wrong-offsetintext",this);if(i<0||n+i>t.offsetSize)throw new A.a("model-textproxy-wrong-length",this);this.data=t.data.substring(n,n+i),this.offsetInText=n}return d(e,[{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"is",value:function(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}},{key:"getPath",value:function(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"hasAttribute",value:function(e){return this.textNode.hasAttribute(e)}},{key:"getAttribute",value:function(e){return this.textNode.getAttribute(e)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}}]),e}(),Xo=function(e){function t(e){l(this,t),this._nodes=[],e&&this._insertNodes(0,e)}return d(t,[{key:Symbol.iterator,value:function(){return this._nodes[Symbol.iterator]()}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce(function(e,t){return e+t.offsetSize},0)}},{key:"getNode",value:function(e){return this._nodes[e]||null}},{key:"getNodeIndex",value:function(e){var t=this._nodes.indexOf(e);return-1==t?null:t}},{key:"getNodeStartOffset",value:function(e){var t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce(function(e,t){return e+t.offsetSize},0)}},{key:"indexToOffset",value:function(e){if(e==this._nodes.length)return this.maxOffset;var t=this._nodes[e];if(!t)throw new A.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(e){var t,n=0,i=o(this._nodes);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(e>=n&&e<n+r.offsetSize)return this.getNodeIndex(r);n+=r.offsetSize}}catch(a){i.e(a)}finally{i.f()}if(n!=e)throw new A.a("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}},{key:"_insertNodes",value:function(e,t){var n,i,r=o(t);try{for(r.s();!(i=r.n()).done;){if(!(i.value instanceof Go))throw new A.a("model-nodelist-insertnodes-not-node",this)}}catch(s){r.e(s)}finally{r.f()}(n=this._nodes).splice.apply(n,[e,0].concat(a(t)))}},{key:"_removeNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._nodes.splice(e,t)}},{key:"toJSON",value:function(){return this._nodes.map(function(e){return e.toJSON()})}}]),t}(),ea=function(e){function n(e,t,i){var r;return l(this,n),(r=f(this,n,[t])).name=e,r._children=new Xo,i&&r._insertChild(0,i),r}return g(n,e),d(n,[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"getNodeByPath",value:function(e){var t,n=this,i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=n.getChild(n.offsetToIndex(r))}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"findAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeSelf:!1},n=t.includeSelf?this:this.parent;n;){if(n.name===e)return n;n=n.parent}return null}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var i,r=o(this._children);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.children.push(a.toJSON())}}catch(s){r.e(s)}finally{r.f()}}return e}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?Array.from(this._children).map(function(e){return e._clone(!0)}):null;return new n(this.name,this.getAttributes(),t)}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,i,r="string"==typeof(n=t)?[new $o(n)]:(yn(n)||(n=[n]),Array.from(n).map(function(e){return"string"==typeof e?new $o(e):e instanceof Ko?new $o(e.data,e.getAttributes()):e})),a=o(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;null!==s.parent&&s._remove(),s.parent=this}}catch(c){a.e(c)}finally{a.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this._children._removeNodes(e,n),r=o(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.parent=null}}catch(s){r.e(s)}finally{r.f()}return i}}],[{key:"fromJSON",value:function(e){var t=null;if(e.children){t=[];var i,r=o(e.children);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.push(a.name?n.fromJSON(a):$o.fromJSON(a))}}catch(s){r.e(s)}finally{r.f()}}return new n(e.name,e.attributes,t)}}]),n}(Go),ta=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l(this,t),!e.boundaries&&!e.startPosition)throw new A.a("model-tree-walker-no-start-position",null);var n=e.direction||"forward";if("forward"!=n&&"backward"!=n)throw new A.a("model-tree-walker-unknown-direction",e,{direction:n});this.direction=n,this.boundaries=e.boundaries||null,this.position=e.startPosition?e.startPosition.clone():ia._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}return d(t,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,i,r;do{var o;i=this.position,r=this._visitedParent,t=(o=this.next()).done,n=o.value}while(!t&&e(n));t||(this.position=i,this._visitedParent=r)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&t.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var i=t.parent,r=ra(t,i),o=r||oa(t,i,r);if(o instanceof ea)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=o),this.position=t,na("elementStart",o,e,t,1);if(o instanceof $o){var a;if(this.singleCharacters)a=1;else{var s=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<s&&(s=this.boundaries.end.offset),a=s-t.offset}var c=new Ko(o,t.offset-o.startOffset,a);return t.offset+=a,this.position=t,na("text",c,e,t,a)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():na("elementEnd",n,e,t)}},{key:"_previous",value:function(){var e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var i=t.parent,r=ra(t,i),o=r||aa(t,i,r);if(o instanceof ea)return t.offset--,this.shallow?(this.position=t,na("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this.position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():na("elementEnd",o,e,t));if(o instanceof $o){var a;if(this.singleCharacters)a=1;else{var s=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>s&&(s=this.boundaries.start.offset),a=t.offset-s}var c=new Ko(o,t.offset-o.startOffset-a,a);return t.offset-=a,this.position=t,na("text",c,e,t,a)}return t.path.pop(),this.position=t,this._visitedParent=n.parent,na("elementStart",n,e,t,1)}}]),t}();function na(e,t,n,i,r){return{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:i,length:r}}}var ia=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(l(this,e),!t.is("element")&&!t.is("documentFragment"))throw new A.a("model-position-root-invalid",t);if(!(n instanceof Array)||0===n.length)throw new A.a("model-position-path-incorrect-format",t,{path:n});t.is("rootElement")?n=n.slice():(n=[].concat(a(t.getPath()),a(n)),t=t.root),this.root=t,this.path=n,this.stickiness=i}return d(e,[{key:"offset",get:function(){return this.path[this.path.length-1]},set:function(e){this.path[this.path.length-1]=e}},{key:"parent",get:function(){for(var e=this.root,t=0;t<this.path.length-1;t++)if(!(e=e.getChild(e.offsetToIndex(this.path[t]))))throw new A.a("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new A.a("model-position-path-incorrect",this,{position:this});return e}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){return ra(this,this.parent)}},{key:"nodeAfter",get:function(){var e=this.parent;return oa(this,e,ra(this,e))}},{key:"nodeBefore",get:function(){var e=this.parent;return aa(this,e,ra(this,e))}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}},{key:"compareWith",value:function(e){if(this.root!=e.root)return"different";var t=On(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new ta(t);return n.skip(e),n.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}},{key:"findAncestor",value:function(e){var t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}},{key:"getCommonPath",value:function(e){if(this.root!=e.root)return[];var t=On(this.path,e.path),n="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),i=0;t[i]==n[i]&&t[i];)i++;return 0===i?null:t[i-1]}},{key:"getShiftedBy",value:function(e){var t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isEqual",value:function(e){return"same"==this.compareWith(e)}},{key:"isTouching",value:function(t){var n=null,i=null;switch(this.compareWith(t)){case"same":return!0;case"before":n=e._createAt(this),i=e._createAt(t);break;case"after":n=e._createAt(t),i=e._createAt(this);break;default:return!1}for(var r=n.parent;n.path.length+i.path.length;){if(n.isEqual(i))return!0;if(n.path.length>i.path.length){if(n.offset!==r.maxOffset)return!1;n.path=n.path.slice(0,-1),r=r.parent,n.offset++}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1)}}}},{key:"is",value:function(e){return"position"===e||"model:position"===e}},{key:"hasSameParentAs",value:function(e){return this.root===e.root&&"same"==On(this.getParentPath(),e.getParentPath())}},{key:"getTransformedByOperation",value:function(t){var n;switch(t.type){case"insert":n=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(t);break;case"split":n=this._getTransformedBySplitOperation(t);break;case"merge":n=this._getTransformedByMergeOperation(t);break;default:n=e._createAt(this)}return n}},{key:"_getTransformedByInsertOperation",value:function(e){return this._getTransformedByInsertion(e.position,e.howMany)}},{key:"_getTransformedByMoveOperation",value:function(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}},{key:"_getTransformedBySplitOperation",value:function(e){var t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}},{key:"_getTransformedByMergeOperation",value:function(t){var n,i=t.movedRange;return i.containsPosition(this)||i.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?e._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}},{key:"_getTransformedByDeletion",value:function(t,n){var i=e._createAt(this);if(this.root!=t.root)return i;if("same"==On(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+n>this.offset)return null;i.offset-=n}}else if("prefix"==On(t.getParentPath(),this.getParentPath())){var r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+n>this.path[r])return null;i.path[r]-=n}}return i}},{key:"_getTransformedByInsertion",value:function(t,n){var i=e._createAt(this);if(this.root!=t.root)return i;if("same"==On(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=n);else if("prefix"==On(t.getParentPath(),this.getParentPath())){var r=t.path.length-1;t.offset<=this.path[r]&&(i.path[r]+=n)}return i}},{key:"_getTransformedByMove",value:function(t,n,i){if(n=n._getTransformedByDeletion(t,i),t.isEqual(n))return e._createAt(this);var r=this._getTransformedByDeletion(t,i);return null===r||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,n):r._getTransformedByInsertion(n,i)}},{key:"_getCombined",value:function(t,n){var i=t.path.length-1,r=e._createAt(n);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-t.offset,r.path=[].concat(a(r.path),a(this.path.slice(i+1))),r}},{key:"toJSON",value:function(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}},{key:"clone",value:function(){return new this.constructor(this.root,this.path,this.stickiness)}}],[{key:"_createAt",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(t instanceof e)return new e(t.root,t.path,t.stickiness);var r=t;if("end"==n)n=r.maxOffset;else{if("before"==n)return this._createBefore(r,i);if("after"==n)return this._createAfter(r,i);if(0!==n&&!n)throw new A.a("model-createpositionat-offset-required",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new A.a("model-position-parent-incorrect",[this,t]);var o=r.getPath();return o.push(n),new this(r.root,o,i)}},{key:"_createAfter",value:function(e,t){if(!e.parent)throw new A.a("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}},{key:"_createBefore",value:function(e,t){if(!e.parent)throw new A.a("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}},{key:"fromJSON",value:function(t,n){if("$graveyard"===t.root){var i=new e(n.graveyard,t.path);return i.stickiness=t.stickiness,i}if(!n.getRoot(t.root))throw new A.a("model-position-fromjson-no-root",n,{rootName:t.root});return new e(n.getRoot(t.root),t.path,t.stickiness)}}]),e}();function ra(e,t){var n=t.getChild(t.offsetToIndex(e.offset));return n&&n.is("$text")&&n.startOffset<e.offset?n:null}function oa(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset))}function aa(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset)-1)}var sa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(this,t),this.start=ia._createAt(e),this.end=ia._createAt(n||e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}return d(t,[{key:Symbol.iterator,value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new ta({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return"same"==On(this.start.getParentPath(),this.end.getParentPath())}},{key:"root",get:function(){return this.start.root}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&i}},{key:"containsItem",value:function(e){var t=ia._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}},{key:"is",value:function(e){return"range"===e||"model:range"===e}},{key:"isEqual",value:function(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}},{key:"getDifference",value:function(e){var n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new t(this.start,e.start)),this.containsPosition(e.end)&&n.push(new t(e.end,this.end))):n.push(new t(this.start,this.end)),n}},{key:"getIntersection",value:function(e){if(this.isIntersecting(e)){var n=this.start,i=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(i=e.end),new t(n,i)}return null}},{key:"getJoined",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?n?this.end.isTouching(e.start):this.end.isEqual(e.start):n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;var r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new t(r,o)}},{key:"getMinimalFlatRanges",value:function(){for(var e=[],n=this.start.getCommonPath(this.end).length,i=ia._createAt(this.start),r=i.parent;i.path.length>n+1;){var o=r.maxOffset-i.offset;0!==o&&e.push(new t(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){var a=this.end.path[i.path.length-1],s=a-i.offset;0!==s&&e.push(new t(i,i.getShiftedBy(s))),i.offset=a,i.path.push(0)}return e}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new ta(e)}},{key:"getItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().mark(function n(){var r,a,s,c;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.boundaries=e,t.ignoreElementEnd=!0,r=new ta(t),a=o(r),n.prev=3,a.s();case 5:if((s=a.n()).done){n.next=11;break}return c=s.value,n.next=9,c.item;case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),a.e(n.t0);case 16:return n.prev=16,a.f(),n.finish(16);case 19:case"end":return n.stop()}},n,null,[[3,13,16,19]])})()}},{key:"getPositions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().mark(function n(){var r,a,s,c;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.boundaries=e,r=new ta(t),n.next=4,r.position;case 4:a=o(r),n.prev=5,a.s();case 7:if((s=a.n()).done){n.next=13;break}return c=s.value,n.next=11,c.nextPosition;case 11:n.next=7;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),a.e(n.t0);case 18:return n.prev=18,a.f(),n.finish(18);case 21:case"end":return n.stop()}},n,null,[[5,15,18,21]])})()}},{key:"getTransformedByOperation",value:function(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new t(this.start,this.end)]}},{key:"getTransformedByOperations",value:function(e){var n,i=[new t(this.start,this.end)],r=o(e);try{for(r.s();!(n=r.n()).done;)for(var s=n.value,c=0;c<i.length;c++){var l=i[c].getTransformedByOperation(s);i.splice.apply(i,[c,1].concat(a(l))),c+=l.length-1}}catch(p){r.e(p)}finally{r.f()}for(var u=0;u<i.length;u++)for(var d=i[u],h=u+1;h<i.length;h++){var f=i[h];(d.containsRange(f)||f.containsRange(d)||d.isEqual(f))&&i.splice(h,1)}return i}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"clone",value:function(){return new this.constructor(this.start,this.end)}},{key:"_getTransformedByInsertOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByInsertion(e.position,e.howMany,t)}},{key:"_getTransformedByMoveOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,t)}},{key:"_getTransformedBySplitOperation",value:function(e){var n=this.start._getTransformedBySplitOperation(e),i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),n.root!=i.root&&(i=this.end.getShiftedBy(-1)),new t(n,i)}},{key:"_getTransformedByMergeOperation",value:function(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new t(this.start);var n=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return n.root!=i.root&&(i=this.end.getShiftedBy(-1)),n.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(n=ia._createAt(i)).offset=0:(e.deletionPosition.isEqual(n)||(i=e.deletionPosition),n=e.targetPosition),new t(n,i)):new t(n,i)}},{key:"_getTransformedByInsertion",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i&&this.containsPosition(e))return[new t(this.start,e),new t(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];var r=new t(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,n),r.end=r.end._getTransformedByInsertion(e,n),[r]}},{key:"_getTransformedByMove",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.isCollapsed){var o=this.start._getTransformedByMove(e,n,i);return[new t(o)]}var a,s=t._createFromPositionAndShift(e,i),c=n._getTransformedByDeletion(e,i);if(this.containsPosition(n)&&!r&&(s.containsPosition(this.start)||s.containsPosition(this.end))){var l=this.start._getTransformedByMove(e,n,i),u=this.end._getTransformedByMove(e,n,i);return[new t(l,u)]}var d=this.getDifference(s),h=null,f=this.getIntersection(s);if(1==d.length?h=new t(d[0].start._getTransformedByDeletion(e,i),d[0].end._getTransformedByDeletion(e,i)):2==d.length&&(h=new t(this.start,this.end._getTransformedByDeletion(e,i))),a=h?h._getTransformedByInsertion(c,i,null!==f||r):[],f){var p=new t(f.start._getCombined(s.start,c),f.end._getCombined(s.start,c));2==a.length?a.splice(1,0,p):a.push(p)}return a}},{key:"_getTransformedByDeletion",value:function(e,n){var i=this.start._getTransformedByDeletion(e,n),r=this.end._getTransformedByDeletion(e,n);return null==i&&null==r?null:(null==i&&(i=e),null==r&&(r=e),new t(i,r))}}],[{key:"_createFromPositionAndShift",value:function(e,t){var n=e,i=e.getShiftedBy(t);return t>0?new this(n,i):new this(i,n)}},{key:"_createIn",value:function(e){return new this(ia._createAt(e,0),ia._createAt(e,e.maxOffset))}},{key:"_createOn",value:function(e){return this._createFromPositionAndShift(ia._createBefore(e),e.offsetSize)}},{key:"_createFromRanges",value:function(e){if(0===e.length)throw new A.a("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();var t=e[0];e.sort(function(e,t){return e.start.isAfter(t.start)?1:-1});var n=e.indexOf(t),i=new this(t.start,t.end);if(n>0)for(var r=n-1;e[r].end.isEqual(i.start);r++)i.start=ia._createAt(e[r].start);for(var o=n+1;o<e.length&&e[o].start.isEqual(i.end);o++)i.end=ia._createAt(e[o].end);return i}},{key:"fromJSON",value:function(e,t){return new this(ia.fromJSON(e.start,t),ia.fromJSON(e.end,t))}}]),t}(),ca=function(){function e(){var t=this;l(this,e),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",function(e,n){if(!n.viewPosition){var i=t._modelToViewMapping.get(n.modelPosition.parent);n.viewPosition=t.findPositionIn(i,n.modelPosition.offset)}},{priority:"low"}),this.on("viewToModelPosition",function(e,n){if(!n.modelPosition){var i=t.findMappedViewAncestor(n.viewPosition),r=t._viewToModelMapping.get(i),o=t._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,i);n.modelPosition=ia._createAt(r,o)}},{priority:"low"})}return d(e,[{key:"bindElements",value:function(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}},{key:"unbindViewElement",value:function(e){var t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e)){var n,i=o(this._elementToMarkerNames.get(e));try{for(i.s();!(n=i.n()).done;){var r=n.value;this._unboundMarkerNames.add(r)}}catch(a){i.e(a)}finally{i.f()}}this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}},{key:"unbindModelElement",value:function(e){var t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}},{key:"bindElementToMarker",value:function(e,t){var n=this._markerNameToElements.get(t)||new Set;n.add(e);var i=this._elementToMarkerNames.get(e)||new Set;i.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,i)}},{key:"unbindElementFromMarkerName",value:function(e,t){var n=this._markerNameToElements.get(t);n&&(n.delete(e),0==n.size&&this._markerNameToElements.delete(t));var i=this._elementToMarkerNames.get(e);i&&(i.delete(t),0==i.size&&this._elementToMarkerNames.delete(e))}},{key:"flushUnboundMarkerNames",value:function(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}},{key:"clearBindings",value:function(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}},{key:"toModelElement",value:function(e){return this._viewToModelMapping.get(e)}},{key:"toViewElement",value:function(e){return this._modelToViewMapping.get(e)}},{key:"toModelRange",value:function(e){return new sa(this.toModelPosition(e.start),this.toModelPosition(e.end))}},{key:"toViewRange",value:function(e){return new gi(this.toViewPosition(e.start),this.toViewPosition(e.end))}},{key:"toModelPosition",value:function(e){var t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}},{key:"toViewPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPhantom:!1},n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}},{key:"markerNameToElements",value:function(e){var t=this._markerNameToElements.get(e);if(!t)return null;var n,i=new Set,r=o(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is("attributeElement")){var s,c=o(a.getElementsWithSameId());try{for(c.s();!(s=c.n()).done;){var l=s.value;i.add(l)}}catch(u){c.e(u)}finally{c.f()}}else i.add(a)}}catch(u){r.e(u)}finally{r.f()}return i}},{key:"registerViewToModelLength",value:function(e,t){this._viewToModelLengthCallbacks.set(e,t)}},{key:"findMappedViewAncestor",value:function(e){for(var t=e.parent;!this._viewToModelMapping.has(t);)t=t.parent;return t}},{key:"_toModelOffset",value:function(e,t,n){if(n!=e)return this._toModelOffset(e.parent,e.index,n)+this._toModelOffset(e,t,e);if(e.is("$text"))return t;for(var i=0,r=0;r<t;r++)i+=this.getModelLength(e.getChild(r));return i}},{key:"getModelLength",value:function(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;var t,n=0,i=o(e.getChildren());try{for(i.s();!(t=i.n()).done;){var r=t.value;n+=this.getModelLength(r)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"findPositionIn",value:function(e,t){var n,i=0,r=0,o=0;if(e.is("$text"))return new vi(e,t);for(;r<t;)n=e.getChild(o),r+=i=this.getModelLength(n),o++;return r==t?this._moveViewPositionToTextNode(new vi(e,o)):this.findPositionIn(n,t-(r-i))}},{key:"_moveViewPositionToTextNode",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;return t instanceof In?new vi(t,t.data.length):n instanceof In?new vi(n,0):e}}]),e}();Xe(ca,O);var la=function(){function e(){l(this,e),this._consumable=new Map,this._textProxyRegistry=new Map}return d(e,[{key:"add",value:function(e,t){t=ua(t),e instanceof Ko&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}},{key:"consume",value:function(e,t){return t=ua(t),e instanceof Ko&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}},{key:"test",value:function(e,t){t=ua(t),e instanceof Ko&&(e=this._getSymbolForTextProxy(e));var n=this._consumable.get(e);if(void 0===n)return null;var i=n.get(t);return void 0===i?null:i}},{key:"revert",value:function(e,t){t=ua(t),e instanceof Ko&&(e=this._getSymbolForTextProxy(e));var n=this.test(e,t);return!1===n?(this._consumable.get(e).set(t,!0),!0):!0!==n&&null}},{key:"_getSymbolForTextProxy",value:function(e){var t=null,n=this._textProxyRegistry.get(e.startOffset);if(n){var i=n.get(e.endOffset);i&&(t=i.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}},{key:"_addSymbolForTextProxy",value:function(e,t,n){var i,r,o=Symbol("textProxySymbol");return(i=this._textProxyRegistry.get(e))||(i=new Map,this._textProxyRegistry.set(e,i)),(r=i.get(t))||(r=new Map,i.set(t,r)),r.set(n,o),o}}]),e}();function ua(e){var t=e.split(":");return t.length>1?t[0]+":"+t[1]:t[0]}var da=function(){function e(t){l(this,e),this.conversionApi=Object.assign({dispatcher:this},t),this._reconversionEventsMapping=new Map}return d(e,[{key:"convertChanges",value:function(e,t,n){var i,r=o(e.getMarkersToRemove());try{for(r.s();!(i=r.n()).done;){var a=i.value;this.convertMarkerRemove(a.name,a.range,n)}}catch(m){r.e(m)}finally{r.f()}var s,c=o(this._mapChangesWithAutomaticReconversion(e));try{for(c.s();!(s=c.n()).done;){var l=s.value;"insert"===l.type?this.convertInsert(sa._createFromPositionAndShift(l.position,l.length),n):"remove"===l.type?this.convertRemove(l.position,l.length,l.name,n):"reconvert"===l.type?this.reconvertElement(l.element,n):this.convertAttribute(l.range,l.attributeKey,l.attributeOldValue,l.attributeNewValue,n)}}catch(m){c.e(m)}finally{c.f()}var u,d=o(this.conversionApi.mapper.flushUnboundMarkerNames());try{for(d.s();!(u=d.n()).done;){var h=u.value,f=t.get(h).getRange();this.convertMarkerRemove(h,f,n),this.convertMarkerAdd(h,f,n)}}catch(m){d.e(m)}finally{d.f()}var p,v=o(e.getMarkersToAdd());try{for(v.s();!(p=v.n()).done;){var g=p.value;this.convertMarkerAdd(g.name,g.range,n)}}catch(m){v.e(m)}finally{v.f()}}},{key:"convertInsert",value:function(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);var n,i=o(Array.from(e).map(fa));try{for(i.s();!(n=i.n()).done;){var r=n.value;this._convertInsertWithAttributes(r)}}catch(a){i.e(a)}finally{i.f()}this._clearConversionApi()}},{key:"convertRemove",value:function(e,t,n,i){this.conversionApi.writer=i,this.fire("remove:"+n,{position:e,length:t},this.conversionApi),this._clearConversionApi()}},{key:"convertAttribute",value:function(e,t,n,i,r){this.conversionApi.writer=r,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+t);var a,s=o(e);try{for(s.s();!(a=s.n()).done;){var c=a.value,l={item:c.item,range:sa._createFromPositionAndShift(c.previousPosition,c.length),attributeKey:t,attributeOldValue:n,attributeNewValue:i};this._testAndFire("attribute:"+t,l)}}catch(u){s.e(u)}finally{s.f()}this._clearConversionApi()}},{key:"reconvertElement",value:function(e,t){var n=sa._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(n);var i=this.conversionApi.mapper,r=i.toViewElement(e);t.remove(r),this._convertInsertWithAttributes({item:e,range:n});var a,s=i.toViewElement(e),c=o(sa._createIn(e));try{for(c.s();!(a=c.n()).done;){var l=a.value,u=l.item,d=pa(u,i);d?d.root!==s.root&&t.move(t.createRangeOn(d),i.toViewPosition(ia._createBefore(u))):this._convertInsertWithAttributes(fa(l))}}catch(h){c.e(h)}finally{c.f()}i.unbindViewElement(r),this._clearConversionApi()}},{key:"convertSelection",value:function(e,t,n){var i=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(e,i),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=s.getRange();if(ha(e.getFirstPosition(),s,this.conversionApi.mapper)){var l={item:e,markerName:s.name,markerRange:c};this.conversionApi.consumable.test(e,"addMarker:"+s.name)&&this.fire("addMarker:"+s.name,l,this.conversionApi)}}}catch(p){a.e(p)}finally{a.f()}var u,d=o(e.getAttributeKeys());try{for(d.s();!(u=d.n()).done;){var h=u.value,f={item:e,range:e.getFirstRange(),attributeKey:h,attributeOldValue:null,attributeNewValue:e.getAttribute(h)};this.conversionApi.consumable.test(e,"attribute:"+f.attributeKey)&&this.fire("attribute:"+f.attributeKey+":$text",f,this.conversionApi)}}catch(p){d.e(p)}finally{d.f()}this._clearConversionApi()}}},{key:"convertMarkerAdd",value:function(e,t,n){if("$graveyard"!=t.root.rootName){this.conversionApi.writer=n;var i="addMarker:"+e,r=new la;if(r.add(t,i),this.conversionApi.consumable=r,this.fire(i,{markerName:e,markerRange:t},this.conversionApi),r.test(t,i)){this.conversionApi.consumable=this._createConsumableForRange(t,i);var a,s=o(t.getItems());try{for(s.s();!(a=s.n()).done;){var c=a.value;if(this.conversionApi.consumable.test(c,i)){var l={item:c,range:sa._createOn(c),markerName:e,markerRange:t};this.fire(i,l,this.conversionApi)}}}catch(u){s.e(u)}finally{s.f()}this._clearConversionApi()}}}},{key:"convertMarkerRemove",value:function(e,t,n){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}},{key:"_mapReconversionTriggerEvent",value:function(e,t){this._reconversionEventsMapping.set(t,e)}},{key:"_createInsertConsumable",value:function(e){var t,n=new la,i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value.item;n.add(r,"insert");var a,s=o(r.getAttributeKeys());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.add(r,"attribute:"+c)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return n}},{key:"_createConsumableForRange",value:function(e,t){var n,i=new la,r=o(e.getItems());try{for(r.s();!(n=r.n()).done;){var a=n.value;i.add(a,t)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_createSelectionConsumable",value:function(e,t){var n=new la;n.add(e,"selection");var i,r=o(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;n.add(e,"addMarker:"+a.name)}}catch(u){r.e(u)}finally{r.f()}var s,c=o(e.getAttributeKeys());try{for(c.s();!(s=c.n()).done;){var l=s.value;n.add(e,"attribute:"+l)}}catch(u){c.e(u)}finally{c.f()}return n}},{key:"_testAndFire",value:function(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire("".concat(e,":").concat(t.item.name||"$text"),t,this.conversionApi)}},{key:"_clearConversionApi",value:function(){delete this.conversionApi.writer,delete this.conversionApi.consumable}},{key:"_convertInsertWithAttributes",value:function(e){this._testAndFire("insert",e);var t,n=o(e.item.getAttributeKeys());try{for(n.s();!(t=n.n()).done;){var i=t.value;e.attributeKey=i,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(i),this._testAndFire("attribute:"+i,e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_mapChangesWithAutomaticReconversion",value:function(e){var t,n=new Set,i=[],r=o(e.getChanges());try{for(r.s();!(t=r.n()).done;){var a=t.value,s=a.position||a.range.start,c=s.parent;if(ra(s,c))i.push(a);else{var l="attribute"===a.type?oa(s,c,null):c;if(l.is("$text"))i.push(a);else{var u;if(u="attribute"===a.type?"attribute:".concat(a.attributeKey,":").concat(l.name):"".concat(a.type,":").concat(a.name),this._isReconvertTriggerEvent(u,l.name)){if(n.has(l))continue;n.add(l),i.push({type:"reconvert",element:l})}else i.push(a)}}}}catch(d){r.e(d)}finally{r.f()}return i}},{key:"_isReconvertTriggerEvent",value:function(e,t){return this._reconversionEventsMapping.get(e)===t}}]),e}();function ha(e,t,n){var i=t.getRange(),r=Array.from(e.getAncestors());return r.shift(),r.reverse(),!r.some(function(e){if(i.containsItem(e))return!!n.toViewElement(e).getCustomProperty("addHighlight")})}function fa(e){return{item:e.item,range:sa._createFromPositionAndShift(e.previousPosition,e.length)}}function pa(e,t){if(e.is("textProxy")){var n=t.toViewPosition(ia._createBefore(e)).parent;return n.is("$text")?n:null}return t.toViewElement(e)}Xe(da,O);var va=function(){function e(t,n,i){l(this,e),this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setTo(t,n,i)}return d(e,[{key:"anchor",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}},{key:"focus",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"isEqual",value:function(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=o(this._ranges);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,a=!1,s=o(e._ranges);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(r.isEqual(c)){a=!0;break}}}catch(l){s.e(l)}finally{s.f()}if(!a)return!1}}catch(l){n.e(l)}finally{n.f()}return!0}},{key:"getRanges",value:i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,new sa(r.start,r.end);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"getFirstRange",value:function(){var e,t=null,n=o(this._ranges);try{for(n.s();!(e=n.n()).done;){var i=e.value;t&&!i.start.isBefore(t.start)||(t=i)}}catch(r){n.e(r)}finally{n.f()}return t?new sa(t.start,t.end):null}},{key:"getLastRange",value:function(){var e,t=null,n=o(this._ranges);try{for(n.s();!(e=n.n()).done;){var i=e.value;t&&!i.end.isAfter(t.end)||(t=i)}}catch(r){n.e(r)}finally{n.f()}return t?new sa(t.start,t.end):null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"setTo",value:function(t,n,i){if(null===t)this._setRanges([]);else if(t instanceof e)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof sa)this._setRanges([t],!!n&&!!n.backward);else if(t instanceof ia)this._setRanges([new sa(t)]);else if(t instanceof Go){var r,o=!!i&&!!i.backward;if("in"==n)r=sa._createIn(t);else if("on"==n)r=sa._createOn(t);else{if(void 0===n)throw new A.a("model-selection-setto-required-second-parameter",[this,t]);r=new sa(ia._createAt(t,n))}this._setRanges([r],o)}else{if(!yn(t))throw new A.a("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,n&&!!n.backward)}}},{key:"_setRanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(e=Array.from(e)).some(function(n){if(!(n instanceof sa))throw new A.a("model-selection-set-ranges-not-range",[t,e]);return t._ranges.every(function(e){return!e.isEqual(n)})});if(e.length!==this._ranges.length||i){this._removeAllRanges();var r,a=o(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._pushRange(s)}}catch(c){a.e(c)}finally{a.f()}this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0})}}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new A.a("model-selection-setfocus-no-ranges",[this,e]);var n=ia._createAt(e,t);if("same"!=n.compareWith(this.focus)){var i=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(i)?(this._pushRange(new sa(n,i)),this._lastRangeBackward=!0):(this._pushRange(new sa(i,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"removeAttribute",value:function(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"setAttribute",value:function(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"is",value:function(e){return"selection"===e||"model:selection"===e}},{key:"getSelectedBlocks",value:i().mark(function e(){var t,n,r,a,s,c,l,u,d,h;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new WeakSet,n=o(this.getRanges()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=38;break}if(a=r.value,s=ba(a.start,t),e.t0=s&&ya(s,a),!e.t0){e.next=11;break}return e.next=11,s;case 11:c=o(a.getWalker()),e.prev=12,c.s();case 14:if((l=c.n()).done){e.next=23;break}if(u=l.value,d=u.item,e.t1="elementEnd"==u.type&&ma(d,t,a),!e.t1){e.next=21;break}return e.next=21,d;case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(12),c.e(e.t2);case 28:return e.prev=28,c.f(),e.finish(28);case 31:if(h=ba(a.end,t),e.t3=h&&!a.end.isTouching(ia._createAt(h,0))&&ya(h,a),!e.t3){e.next=36;break}return e.next=36,h;case 36:e.next=4;break;case 38:e.next=43;break;case 40:e.prev=40,e.t4=e.catch(2),n.e(e.t4);case 43:return e.prev=43,n.f(),e.finish(43);case 46:case"end":return e.stop()}},e,this,[[2,40,43,46],[12,25,28,31]])})},{key:"containsEntireContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.anchor.root,t=ia._createAt(e,0),n=ia._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}},{key:"_pushRange",value:function(e){this._checkRange(e),this._ranges.push(new sa(e.start,e.end))}},{key:"_checkRange",value:function(e){for(var t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new A.a("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}},{key:"_removeAllRanges",value:function(){for(;this._ranges.length>0;)this._popRange()}},{key:"_popRange",value:function(){this._ranges.pop()}}]),e}();function ga(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent)}function ma(e,t,n){return ga(e,t)&&ya(e,n)}function ba(e,t){var n=e.parent.root.document.model.schema,i=e.parent.getAncestors({parentFirst:!0,includeSelf:!0}),r=!1,o=i.find(function(e){return!r&&(!(r=n.isLimit(e))&&ga(e,t))});return i.forEach(function(e){return t.add(e)}),o}function ya(e,t){var n=function(e){for(var t=e.root.document.model.schema,n=e.parent;n;){if(t.isBlock(n))return n;n=n.parent}}(e);return!n||!t.containsRange(sa._createOn(n),!0)}Xe(va,O);var ka=function(e){function t(e,n){var i;return l(this,t),i=f(this,t,[e,n]),wa.call(v(i)),i}return g(t,e),d(t,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}},{key:"toRange",value:function(){return new sa(this.start,this.end)}}],[{key:"fromRange",value:function(e){return new t(e.start,e.end)}}]),t}(sa);function wa(){var e=this;this.listenTo(this.root.document.model,"applyOperation",function(t,n){var i=n[0];i.isDocumentOperation&&_a.call(e,i)},{priority:"low"})}function _a(e){var t=this.getTransformedByOperation(e),n=sa._createFromRanges(t),i=!n.isEqual(this),r=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}(this,e),o=null;if(i){"$graveyard"==n.root.rootName&&(o="remove"==e.type?e.sourcePosition:e.deletionPosition);var a=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",a,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}Xe(ka,O);var xa=function(){function e(t){l(this,e),this._selection=new Ta(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}return d(e,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"markers",get:function(){return this._selection.markers}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(e){return this._selection.containsEntireContent(e)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(e){return this._selection.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this._selection.hasAttribute(e)}},{key:"refresh",value:function(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}},{key:"observeMarkers",value:function(e){this._selection.observeMarkers(e)}},{key:"is",value:function(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setAttribute",value:function(e,t){this._selection.setAttribute(e,t)}},{key:"_removeAttribute",value:function(e){this._selection.removeAttribute(e)}},{key:"_getStoredAttributes",value:function(){return this._selection._getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(e){this._selection.restoreGravity(e)}}],[{key:"_getStoreAttributeKey",value:function(e){return"selection:"+e}},{key:"_isStoreAttributeKey",value:function(e){return e.startsWith("selection:")}}]),e}();Xe(xa,O);var Ta=function(e){function n(e){var t;return l(this,n),(t=f(this,n)).markers=new kn({idProperty:"name"}),t._model=e.model,t._document=e,t._attributePriority=new Map,t._selectionRestorePosition=null,t._hasChangedRange=!1,t._overriddenGravityRegister=new Set,t._observedMarkers=new Set,t.listenTo(t._model,"applyOperation",function(e,n){var i=n[0];i.isDocumentOperation&&"marker"!=i.type&&"rename"!=i.type&&"noop"!=i.type&&(0==t._ranges.length&&t._selectionRestorePosition&&t._fixGraveyardSelection(t._selectionRestorePosition),t._selectionRestorePosition=null,t._hasChangedRange&&(t._hasChangedRange=!1,t.fire("change:range",{directChange:!1})))},{priority:"lowest"}),t.on("change:range",function(){var e,n=o(t.getRanges());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!t._document._validateSelectionRange(i))throw new A.a("document-selection-wrong-position",v(t),{range:i})}}catch(r){n.e(r)}finally{n.f()}}),t.listenTo(t._model.markers,"update",function(e,n,i,r){t._updateMarker(n,r)}),t.listenTo(t._document,"change",function(e,n){!function(e,t){var n,i=o(e.document.differ.getChanges());try{var r=function(){var i=n.value;if("insert"!=i.type)return 1;var r=i.position.parent;i.length===r.maxOffset&&e.enqueueChange(t,function(e){var t,n=Array.from(r.getAttributeKeys()).filter(function(e){return e.startsWith("selection:")}),i=o(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.removeAttribute(a,r)}}catch(s){i.e(s)}finally{i.f()}})};for(i.s();!(n=i.n()).done;)r()}catch(a){i.e(a)}finally{i.f()}}(t._model,n)}),t}return g(n,e),d(n,[{key:"isCollapsed",get:function(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:t(w(n.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return t(w(n.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return t(w(n.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}},{key:"getRanges",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ranges.length){e.next=4;break}return e.delegateYield(t(w(n.prototype),"getRanges",this).call(this),"t0",2);case 2:e.next=6;break;case 4:return e.next=6,this._document._getDefaultRange();case 6:case"end":return e.stop()}},e,this)})},{key:"getFirstRange",value:function(){return t(w(n.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return t(w(n.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(e,i,r){t(w(n.prototype),"setTo",this).call(this,e,i,r),this._updateAttributes(!0),this._updateMarkers()}},{key:"setFocus",value:function(e,i){t(w(n.prototype),"setFocus",this).call(this,e,i),this._updateAttributes(!0),this._updateMarkers()}},{key:"setAttribute",value:function(e,t){this._setAttribute(e,t)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}},{key:"removeAttribute",value:function(e){this._removeAttribute(e)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}},{key:"overrideGravity",value:function(){var e=x();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}},{key:"restoreGravity",value:function(e){if(!this._overriddenGravityRegister.has(e))throw new A.a("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}},{key:"observeMarkers",value:function(e){this._observedMarkers.add(e),this._updateMarkers()}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(e){var t=this._prepareRange(e);t&&this._ranges.push(t)}},{key:"_prepareRange",value:function(e){var t=this;if(this._checkRange(e),e.root!=this._document.graveyard){var n=ka.fromRange(e);return n.on("change:range",function(e,i,r){if(t._hasChangedRange=!0,n.root==t._document.graveyard){t._selectionRestorePosition=r.deletionPosition;var o=t._ranges.indexOf(n);t._ranges.splice(o,1),n.detach()}}),n}}},{key:"_updateMarkers",value:function(){if(this._observedMarkers.size){var e,t=[],n=!1,i=o(this._model.markers);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=r.name.split(":",1)[0];if(this._observedMarkers.has(a)){var s,c=r.getRange(),l=o(this.getRanges());try{for(l.s();!(s=l.n()).done;){var u=s.value;c.containsRange(u,!u.isCollapsed)&&t.push(r)}}catch(b){l.e(b)}finally{l.f()}}}}catch(b){i.e(b)}finally{i.f()}for(var d=Array.from(this.markers),h=0,f=t;h<f.length;h++){var p=f[h];this.markers.has(p)||(this.markers.add(p),n=!0)}for(var v=0,g=Array.from(this.markers);v<g.length;v++){var m=g[v];t.includes(m)||(this.markers.remove(m),n=!0)}n&&this.fire("change:marker",{oldMarkers:d,directChange:!1})}}},{key:"_updateMarker",value:function(e,t){var n=e.name.split(":",1)[0];if(this._observedMarkers.has(n)){var i=!1,r=Array.from(this.markers),a=this.markers.has(e);if(t){var s,c=!1,l=o(this.getRanges());try{for(l.s();!(s=l.n()).done;){var u=s.value;if(t.containsRange(u,!u.isCollapsed)){c=!0;break}}}catch(d){l.e(d)}finally{l.f()}c&&!a?(this.markers.add(e),i=!0):!c&&a&&(this.markers.remove(e),i=!0)}else a&&(this.markers.remove(e),i=!0);i&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}}},{key:"_updateAttributes",value:function(e){var t=Nn(this._getSurroundingAttributes()),n=Nn(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else{var i,a=o(this._attributePriority);try{for(a.s();!(i=a.n()).done;){var s=r(i.value,2),c=s[0];"low"==s[1]&&(this._attrs.delete(c),this._attributePriority.delete(c))}}catch(b){a.e(b)}finally{a.f()}}this._setAttributesTo(t);var l,u=[],d=o(this.getAttributes());try{for(d.s();!(l=d.n()).done;){var h=r(l.value,2),f=h[0],p=h[1];n.has(f)&&n.get(f)===p||u.push(f)}}catch(b){d.e(b)}finally{d.f()}var v,g=o(n);try{for(g.s();!(v=g.n()).done;){var m=r(v.value,1)[0];this.hasAttribute(m)||u.push(m)}}catch(b){g.e(b)}finally{g.f()}u.length>0&&this.fire("change:attribute",{attributeKeys:u,directChange:!1})}},{key:"_setAttribute",value:function(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r?"normal":"low";return("low"!=o||"normal"!=this._attributePriority.get(e))&&t(w(n.prototype),"getAttribute",this).call(this,e)!==i&&(this._attrs.set(e,i),this._attributePriority.set(e,o),!0)}},{key:"_removeAttribute",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i?"normal":"low";return!("low"==r&&"normal"==this._attributePriority.get(e)||(this._attributePriority.set(e,r),!t(w(n.prototype),"hasAttribute",this).call(this,e)||(this._attrs.delete(e),0)))}},{key:"_setAttributesTo",value:function(e){var t,n=new Set,i=o(this.getAttributes());try{for(i.s();!(t=i.n()).done;){var a=r(t.value,2),s=a[0],c=a[1];e.get(s)!==c&&this._removeAttribute(s,!1)}}catch(p){i.e(p)}finally{i.f()}var l,u=o(e);try{for(u.s();!(l=u.n()).done;){var d=r(l.value,2),h=d[0],f=d[1];this._setAttribute(h,f,!1)&&n.add(h)}}catch(p){u.e(p)}finally{u.f()}return n}},{key:"_getStoredAttributes",value:i().mark(function e(){var t,n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getFirstPosition().parent,!this.isCollapsed||!t.isEmpty){e.next=21;break}n=o(t.getAttributeKeys()),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=13;break}if(a=r.value,e.t0=a.startsWith("selection:"),!e.t0){e.next=11;break}return e.next=11,[a.substr("selection:".length),t.getAttribute(a)];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(3),n.e(e.t1);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[3,15,18,21]])})},{key:"_getSurroundingAttributes",value:function(){var e=this.getFirstPosition(),t=this._model.schema,n=null;if(this.isCollapsed){var i=e.textNode?e.textNode:e.nodeBefore,r=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Aa(i)),n||(n=Aa(r)),!this.isGravityOverridden&&!n)for(var a=i;a&&!t.isInline(a)&&!n;)n=Aa(a=a.previousSibling);if(!n)for(var s=r;s&&!t.isInline(s)&&!n;)n=Aa(s=s.nextSibling);n||(n=this._getStoredAttributes())}else{var c,l=o(this.getFirstRange());try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.item.is("element")&&t.isObject(u.item))break;if("text"==u.type){n=u.item.getAttributes();break}}}catch(d){l.e(d)}finally{l.f()}}return n}},{key:"_fixGraveyardSelection",value:function(e){var t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}]),n}(va);function Aa(e){return e instanceof Ko||e instanceof $o?e.getAttributes():null}var Sa=function(){function e(t){l(this,e),this._dispatchers=t}return d(e,[{key:"add",value:function(e){var t,n=o(this._dispatchers);try{for(n.s();!(t=n.n()).done;){e(t.value)}}catch(i){n.e(i)}finally{n.f()}return this}}]),e}(),Ca=function(e){return fn(e,5)},Oa=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"elementToElement",value:function(e){return this.add(function(e){return(e=Ca(e)).view=Ia(e.view,"container"),function(t){var n;if(t.on("insert:"+e.model,(n=e.view,function(e,t,i){var r=n(t.item,i);if(r&&i.consumable.consume(t.item,"insert")){var o=i.mapper.toViewPosition(t.range.start);i.mapper.bindElements(t.item,r),i.writer.insert(o,r)}}),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes){var i,r=o(e.triggerBy.attributes);try{for(r.s();!(i=r.n()).done;){var a=i.value;t._mapReconversionTriggerEvent(e.model,"attribute:".concat(a,":").concat(e.model))}}catch(u){r.e(u)}finally{r.f()}}if(e.triggerBy.children){var s,c=o(e.triggerBy.children);try{for(c.s();!(s=c.n()).done;){var l=s.value;t._mapReconversionTriggerEvent(e.model,"insert:"+l),t._mapReconversionTriggerEvent(e.model,"remove:"+l)}}catch(u){c.e(u)}finally{c.f()}}}}}(e))}},{key:"attributeToElement",value:function(e){return this.add(function(e){var t="attribute:"+((e=Ca(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,i=o(e.model.values);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.view[r]=Ia(e.view[r],"attribute")}}catch(s){i.e(s)}finally{i.f()}}else e.view=Ia(e.view,"attribute");var a=Ma(e);return function(n){var i;n.on(t,(i=a,function(e,t,n){var r=i(t.attributeOldValue,n),o=i(t.attributeNewValue,n);if((r||o)&&n.consumable.consume(t.item,e.name)){var a=n.writer;if(t.item instanceof va||t.item instanceof xa)a.wrap(a.document.selection.getFirstRange(),o);else{var s=n.mapper.toViewRange(t.range);null!==t.attributeOldValue&&r&&(s=a.unwrap(s,r)),null!==t.attributeNewValue&&o&&a.wrap(s,o)}}}),{priority:e.converterPriority||"normal"})}}(e))}},{key:"attributeToAttribute",value:function(e){return this.add(function(e){var t="attribute:"+((e=Ca(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,i=o(e.model.values);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.view[r]=Na(e.view[r])}}catch(s){i.e(s)}finally{i.f()}}else e.view=Na(e.view);var a=Ma(e);return function(n){var i;n.on(t,(i=a,function(e,t,n){var r=i(t.attributeOldValue,n),a=i(t.attributeNewValue,n);if((r||a)&&n.consumable.consume(t.item,e.name)){var c=n.mapper.toViewElement(t.item),l=n.writer;if(!c)throw new A.a("conversion-attribute-to-attribute-on-text",[t,n]);if(null!==t.attributeOldValue&&r)if("class"==r.key){var u,d=o(_n(r.value));try{for(d.s();!(u=d.n()).done;){var h=u.value;l.removeClass(h,c)}}catch(s){d.e(s)}finally{d.f()}}else if("style"==r.key)for(var f=0,p=Object.keys(r.value);f<p.length;f++){var v=p[f];l.removeStyle(v,c)}else l.removeAttribute(r.key,c);if(null!==t.attributeNewValue&&a)if("class"==a.key){var g,m=o(_n(a.value));try{for(m.s();!(g=m.n()).done;){var b=g.value;l.addClass(b,c)}}catch(s){m.e(s)}finally{m.f()}}else if("style"==a.key)for(var y=0,k=Object.keys(a.value);y<k.length;y++){var w=k[y];l.setStyle(w,a.value[w],c)}else l.setAttribute(a.key,a.value,c)}}),{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToElement",value:function(e){return this.add(function(e){return(e=Ca(e)).view=Ia(e.view,"ui"),function(t){var n;t.on("addMarker:"+e.model,(n=e.view,function(e,t,i){t.isOpening=!0;var r=n(t,i);t.isOpening=!1;var a=n(t,i);if(r&&a){var s=t.markerRange;if(!s.isCollapsed||i.consumable.consume(s,e.name)){var c,l=o(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(!i.consumable.consume(u.item,e.name))return}}catch(f){l.e(f)}finally{l.f()}var d=i.mapper,h=i.writer;h.insert(d.toViewPosition(s.start),r),i.mapper.bindElementToMarker(r,t.markerName),s.isCollapsed||(h.insert(d.toViewPosition(s.end),a),i.mapper.bindElementToMarker(a,t.markerName)),e.stop()}}}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e,t,n){var i=n.mapper.markerNameToElements(t.markerName);if(i){var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;n.mapper.unbindElementFromMarkerName(s,t.markerName),n.writer.clear(n.writer.createRangeOn(s),s)}}catch(c){a.e(c)}finally{a.f()}n.writer.clearClonedElementsGroup(t.markerName),e.stop()}},{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToHighlight",value:function(e){return this.add(function(e){return function(t){var n,i;t.on("addMarker:"+e.model,(n=e.view,function(e,t,i){if(t.item&&(t.item instanceof va||t.item instanceof xa||t.item.is("$textProxy"))){var r=La(n,t,i);if(r&&i.consumable.consume(t.item,e.name)){var a=i.writer,s=Ea(a,r),c=a.document.selection;if(t.item instanceof va||t.item instanceof xa)a.wrap(c.getFirstRange(),s,c);else{var l,u=i.mapper.toViewRange(t.range),d=o(a.wrap(u,s).getItems());try{for(d.s();!(l=d.n()).done;){var h=l.value;if(h.is("attributeElement")&&h.isSimilar(s)){i.mapper.bindElementToMarker(h,t.markerName);break}}}catch(f){d.e(f)}finally{d.f()}}}}}),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,(i=e.view,function(e,t,n){if(t.item&&t.item instanceof ea){var r=La(i,t,n);if(r&&n.consumable.test(t.item,e.name)){var a=n.mapper.toViewElement(t.item);if(a&&a.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);var s,c=o(sa._createIn(t.item));try{for(c.s();!(s=c.n()).done;){var l=s.value;n.consumable.consume(l.item,e.name)}}catch(u){c.e(u)}finally{c.f()}a.getCustomProperty("addHighlight")(a,r,n.writer),n.mapper.bindElementToMarker(a,t.markerName)}}}}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return function(t,n,i){if(!n.markerRange.isCollapsed){var r=La(e,n,i);if(r){var a=Ea(i.writer,r),s=i.mapper.markerNameToElements(n.markerName);if(s){var c,l=o(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;i.mapper.unbindElementFromMarkerName(u,n.markerName),u.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(u),a):u.getCustomProperty("removeHighlight")(u,r.id,i.writer)}}catch(d){l.e(d)}finally{l.f()}i.writer.clearClonedElementsGroup(n.markerName),t.stop()}}}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToData",value:function(e){return this.add(function(e){var t=(e=Ca(e)).model;return e.view||(e.view=function(n){return{group:t,name:n.substr(e.model.length+1)}}),function(n){var i,r;n.on("addMarker:"+t,(i=e.view,function(e,t,n){var r=i(t.markerName,n);if(r){var o=t.markerRange;n.consumable.consume(o,e.name)&&(Pa(o,!1,n,t,r),Pa(o,!0,n,t,r),e.stop())}}),{priority:e.converterPriority||"normal"}),n.on("removeMarker:"+t,(r=e.view,function(e,t,n){var i=r(t.markerName,n);if(i){var a=n.mapper.markerNameToElements(t.markerName);if(a){var s,c=o(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;n.mapper.unbindElementFromMarkerName(l,t.markerName),l.is("containerElement")?(u("data-".concat(i.group,"-start-before"),l),u("data-".concat(i.group,"-start-after"),l),u("data-".concat(i.group,"-end-before"),l),u("data-".concat(i.group,"-end-after"),l)):n.writer.clear(n.writer.createRangeOn(l),l)}}catch(d){c.e(d)}finally{c.f()}n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}function u(e,t){if(t.hasAttribute(e)){var r=new Set(t.getAttribute(e).split(","));r.delete(i.name),0==r.size?n.writer.removeAttribute(e,t):n.writer.setAttribute(e,Array.from(r).join(","),t)}}}),{priority:e.converterPriority||"normal"})}}(e))}}]),t}(Sa);function Ea(e,t){var n=e.createAttributeElement("span",t.attributes);return t.classes&&n._addClass(t.classes),t.priority&&(n._priority=t.priority),n._id=t.id,n}function Pa(e,t,n,i,r){var o,a,s,c,l,u,d,h,f,p,v=t?e.start:e.end;n.schema.checkChild(v,"$text")?function(e,t,n,i,r){var o=n.writer.createUIElement("".concat(r.group,"-").concat(t?"start":"end"),r.name?{name:r.name}:null);n.writer.insert(e,o),n.mapper.bindElementToMarker(o,i.markerName)}(n.mapper.toViewPosition(v),t,n,i,r):(t&&v.nodeAfter||!t&&!v.nodeBefore?(o=v.nodeAfter,a=!0):(o=v.nodeBefore,a=!1),s=n.mapper.toViewElement(o),c=t,l=a,u=n,d=i,f="data-".concat((h=r).group,"-").concat(c?"start":"end","-").concat(l?"before":"after"),(p=s.hasAttribute(f)?s.getAttribute(f).split(","):[]).unshift(h.name),u.writer.setAttribute(f,p.join(","),s),u.mapper.bindElementToMarker(s,d.markerName))}function Ia(e,t){return"function"==typeof e?e:function(n,i){return function(e,t,n){var i;"string"==typeof e&&(e={name:e});var r=t.writer,a=Object.assign({},e.attributes);if(i="container"==n?r.createContainerElement(e.name,a):"attribute"==n?r.createAttributeElement(e.name,a,{priority:e.priority||Ei.DEFAULT_PRIORITY}):r.createUIElement(e.name,a),e.styles)for(var s=0,c=Object.keys(e.styles);s<c.length;s++){var l=c[s];r.setStyle(l,e.styles[l],i)}if(e.classes){var u=e.classes;if("string"==typeof u)r.addClass(u,i);else{var d,h=o(u);try{for(h.s();!(d=h.n()).done;){var f=d.value;r.addClass(f,i)}}catch(p){h.e(p)}finally{h.f()}}}return i}(e,i,t)}}function Ma(e){return e.model.values?function(t,n){var i=e.view[t];return i?i(t,n):null}:e.view}function Na(e){return"string"==typeof e?function(t){return{key:e,value:t}}:"object"==typeof e?e.value?function(){return e}:function(t){return{key:e.key,value:t}}:e}function La(e,t,n){var i="function"==typeof e?e(t,n):e;return i?(i.priority||(i.priority=10),i.id||(i.id=t.markerName),i):null}function Ra(e){var t,n=e.model,i=n.schema,r=n.document,a=o(r.getRootNames());try{for(a.s();!(t=a.n()).done;){var s=t.value,c=r.getRoot(s);if(c.isEmpty&&!i.checkChild(c,"$text")&&i.checkChild(c,"paragraph"))return e.insertElement("paragraph",c),!0}}catch(l){a.e(l)}finally{a.f()}return!1}function ja(e,t,n){var i=n.createContext(e);return!!n.checkChild(i,"paragraph")&&!!n.checkChild(i.push("paragraph"),t)}function Da(e,t){var n=t.createElement("paragraph");return t.insert(n,e),t.createPositionAt(n,0)}var Va=function(t){function n(){return l(this,n),f(this,n,arguments)}return g(n,t),d(n,[{key:"elementToElement",value:function(e){return this.add(Za(e))}},{key:"elementToAttribute",value:function(e){return this.add(function(e){qa(e=Ca(e));var t=Ba(e,!1),n=za(e.view),i=n?"element:"+n:"element";return function(n){n.on(i,t,{priority:e.converterPriority||"low"})}}(e))}},{key:"attributeToAttribute",value:function(t){return this.add(function(t){var n=null;("string"==typeof(t=Ca(t)).view||t.view.key)&&(n=function(t){"string"==typeof t.view&&(t.view={key:t.view});var n,i=t.view.key;return n="class"==i||"style"==i?e({},"class"==i?"classes":"styles",t.view.value):{attributes:e({},i,void 0===t.view.value?/[\s\S]*/:t.view.value)},t.view.name&&(n.name=t.view.name),t.view=n,i}(t)),qa(t,n);var i=Ba(t,!0);return function(e){e.on("element",i,{priority:t.converterPriority||"low"})}}(t))}},{key:"elementToMarker",value:function(e){return Object(A.b)("upcast-helpers-element-to-marker-deprecated"),this.add(function(e){return t=e=Ca(e),n=t.model,t.model=function(e,t){var i="string"==typeof n?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})},Za(e);var t,n}(e))}},{key:"dataToMarker",value:function(e){return this.add(function(e){(e=Ca(e)).model||(e.model=function(t){return t?e.view+":"+t:e.view});var t=Fa(Ua(e,"start")),n=Fa(Ua(e,"end"));return function(i){i.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),i.on("element:"+e.view+"-end",n,{priority:e.converterPriority||"normal"});var r,a=T.get("low"),s=T.get("highest"),c=T.get(e.converterPriority)/s;i.on("element",(r=e,function(e,t,n){var i="data-"+r.view;function a(e,i){var a,s=o(i);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=r.model(c,n),u=n.writer.createElement("$marker",{"data-name":l});n.writer.insert(u,e),t.modelCursor=t.modelCursor.isEqual(e)?t.modelCursor.getShiftedBy(1):t.modelCursor._getTransformedByInsertion(e,1),t.modelRange=t.modelRange._getTransformedByInsertion(e,1)[0]}}catch(d){s.e(d)}finally{s.f()}}t.modelRange||(t=Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor))),n.consumable.consume(t.viewItem,{attributes:i+"-end-after"})&&a(t.modelRange.end,t.viewItem.getAttribute(i+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:i+"-start-after"})&&a(t.modelRange.end,t.viewItem.getAttribute(i+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:i+"-end-before"})&&a(t.modelRange.start,t.viewItem.getAttribute(i+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:i+"-start-before"})&&a(t.modelRange.start,t.viewItem.getAttribute(i+"-start-before").split(","))}),{priority:a+c})}}(e))}}]),n}(Sa);function Za(e){var t=Fa(e=Ca(e)),n=za(e.view),i=n?"element:"+n:"element";return function(n){n.on(i,t,{priority:e.converterPriority||"normal"})}}function za(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function Fa(e){var t=new Ln(e.view);return function(n,i,r){var o=t.match(i.viewItem);if(o){var a=o.match;if(a.name=!0,r.consumable.test(i.viewItem,a)){var s,c,l=(c=r,(s=e.model)instanceof Function?s(i.viewItem,c):c.writer.createElement(s));l&&r.safeInsert(l,i.modelCursor)&&(r.consumable.consume(i.viewItem,a),r.convertChildren(i.viewItem,l),r.updateConversionResult(l,i))}}}}function qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.model={key:"object"!=typeof e.model?e.model:e.model.key,value:"object"!=typeof e.model||void 0===e.model.value?null===t||function(e){return e.getAttribute(t)}:e.model.value}}function Ba(e,t){var n=new Ln(e.view);return function(i,r,o){var a=n.match(r.viewItem);if(a){var s,c,l,u=e.model.key,d="function"==typeof e.model.value?e.model.value(r.viewItem,o):e.model.value;null!==d&&(s=e.view,c=r.viewItem,"object"==typeof(l="function"==typeof s?s(c):s)&&!za(l)||l.classes||l.attributes||l.styles?delete a.match.name:a.match.name=!0,o.consumable.test(r.viewItem,a.match)&&(r.modelRange||(r=Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor))),function(e,t,n,i){for(var r=!1,o=0,a=Array.from(e.getItems({shallow:n}));o<a.length;o++){var s=a[o];i.schema.checkAttribute(s,t.key)&&(r=!0,s.hasAttribute(t.key)||i.writer.setAttribute(t.key,t.value,s))}return r}(r.modelRange,{key:u,value:d},t,o)&&o.consumable.consume(r.viewItem,a.match)))}}}function Ua(e,t){var n={};return n.view=e.view+"-"+t,n.model=function(t,n){var i=t.getAttribute("name"),r=e.model(i,n);return n.writer.createElement("$marker",{"data-name":r})},n}var Ha=function(){function e(t,n){var i=this;l(this,e),this.model=t,this.view=new Qo(n),this.mapper=new ca,this.downcastDispatcher=new da({mapper:this.mapper,schema:t.schema});var r,a,s=this.model.document,c=s.selection,u=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){i.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){i.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",function(){i.view.change(function(e){i.downcastDispatcher.convertChanges(s.differ,u,e),i.downcastDispatcher.convertSelection(c,u,e)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",(r=this.model,a=this.mapper,function(e,t){var n,i=t.newSelection,s=[],c=o(i.getRanges());try{for(c.s();!(n=c.n()).done;){var l=n.value;s.push(a.toModelRange(l))}}catch(d){c.e(d)}finally{c.f()}var u=r.createSelection(s,{backward:i.isBackward});u.isEqual(r.document.selection)||r.change(function(e){e.setSelection(u)})})),this.downcastDispatcher.on("insert:$text",function(e,t,n){if(n.consumable.consume(t.item,"insert")){var i=n.writer,r=n.mapper.toViewPosition(t.range.start),o=i.createText(t.item.data);i.insert(r,o)}},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(e,t,n){var i,r=n.mapper.toViewPosition(t.position),a=t.position.getShiftedBy(t.length),s=n.mapper.toViewPosition(a,{isPhantom:!0}),c=n.writer.createRange(r,s),l=n.writer.remove(c.getTrimmed()),u=o(n.writer.createRangeIn(l).getItems());try{for(u.s();!(i=u.n()).done;){var d=i.value;n.mapper.unbindViewElement(d)}}catch(h){u.e(h)}finally{u.f()}},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,n){var i,r=n.writer,a=o(r.document.selection.getRanges());try{for(a.s();!(i=a.n()).done;){var s=i.value;s.isCollapsed&&s.end.parent.isAttached()&&n.writer.mergeAttributes(s.start)}}catch(c){a.e(c)}finally{a.f()}r.setSelection(null)},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,n){var i=t.selection;if(!i.isCollapsed&&n.consumable.consume(i,"selection")){var r,a=[],s=o(i.getRanges());try{for(s.s();!(r=s.n()).done;){var c=r.value,l=n.mapper.toViewRange(c);a.push(l)}}catch(u){s.e(u)}finally{s.f()}n.writer.setSelection(a,{backward:i.isBackward})}},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,n){var i=t.selection;if(i.isCollapsed&&n.consumable.consume(i,"selection")){var r=n.writer,o=i.getFirstPosition(),a=n.mapper.toViewPosition(o),s=r.breakAttributes(a);r.setSelection(s)}},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(e){if("$graveyard"==e.rootName)return null;var t=new fi(i.view.document,e.name);return t.rootName=e.rootName,i.mapper.bindElements(e,t),t})}return d(e,[{key:"destroy",value:function(){this.view.destroy(),this.stopListening()}}]),e}();Xe(Ha,Ye);var Wa=function(e){function t(){l(this,t),this._commands=new Map}return d(t,[{key:"add",value:function(e,t){this._commands.set(e,t)}},{key:"get",value:function(e){return this._commands.get(e)}},{key:"execute",value:function(e){var t=this.get(e);if(!t)throw new A.a("commandcollection-command-not-found",this,{commandName:e});for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.execute.apply(t,i)}},{key:"names",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"commands",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:e,value:function(){return this._commands[Symbol.iterator]()}},{key:"destroy",value:function(){var e,t=o(this.commands());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}}}]),t}(Symbol.iterator),Ya=function(){function e(){l(this,e),this._consumables=new Map}return d(e,[{key:"add",value:function(e,t){var n;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?n=this._consumables.get(e):(n=new Ja(e),this._consumables.set(e,n)),n.add(t))}},{key:"test",value:function(e,t){var n=this._consumables.get(e);return void 0===n?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}},{key:"consume",value:function(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}},{key:"revert",value:function(e,t){var n=this._consumables.get(e);void 0!==n&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}}],[{key:"consumablesFromElement",value:function(e){var t,n={element:e,name:!0,attributes:[],classes:[],styles:[]},i=o(e.getAttributeKeys());try{for(i.s();!(t=i.n()).done;){var r=t.value;"style"!=r&&"class"!=r&&n.attributes.push(r)}}catch(h){i.e(h)}finally{i.f()}var a,s=o(e.getClassNames());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.classes.push(c)}}catch(h){s.e(h)}finally{s.f()}var l,u=o(e.getStyleNames());try{for(u.s();!(l=u.n()).done;){var d=l.value;n.styles.push(d)}}catch(h){u.e(h)}finally{u.f()}return n}},{key:"createFrom",value:function(t,n){if(n||(n=new e(t)),t.is("$text"))return n.add(t),n;t.is("element")&&n.add(t,e.consumablesFromElement(t)),t.is("documentFragment")&&n.add(t);var i,r=o(t.getChildren());try{for(r.s();!(i=r.n()).done;){var a=i.value;n=e.createFrom(a,n)}}catch(s){r.e(s)}finally{r.f()}return n}}]),e}(),Ja=function(){function e(t){l(this,e),this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}return d(e,[{key:"add",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._add(t,e[t])}},{key:"test",value:function(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var t in this._consumables)if(t in e){var n=this._test(t,e[t]);if(!0!==n)return n}return!0}},{key:"consume",value:function(e){for(var t in e.name&&(this._canConsumeName=!1),this._consumables)t in e&&this._consume(t,e[t])}},{key:"revert",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._revert(t,e[t])}},{key:"_add",value:function(e,t){var n,i=Ce(t)?t:[t],r=this._consumables[e],a=o(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("attributes"===e&&("class"===s||"style"===s))throw new A.a("viewconsumable-invalid-attribute",this);if(r.set(s,!0),"styles"===e){var c,l=o(this.element.document.stylesProcessor.getRelatedStyles(s));try{for(l.s();!(c=l.n()).done;){var u=c.value;r.set(u,!0)}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){a.e(d)}finally{a.f()}}},{key:"_test",value:function(e,t){var n,i=Ce(t)?t:[t],r=this._consumables[e],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("attributes"!==e||"class"!==c&&"style"!==c){var l=r.get(c);if(void 0===l)return null;if(!l)return!1}else{var u="class"==c?"classes":"styles",d=this._test(u,a(this._consumables[u].keys()));if(!0!==d)return d}}}catch(h){s.e(h)}finally{s.f()}return!0}},{key:"_consume",value:function(e,t){var n,i=Ce(t)?t:[t],r=this._consumables[e],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("attributes"!==e||"class"!==c&&"style"!==c){if(r.set(c,!1),"styles"==e){var l,u=o(this.element.document.stylesProcessor.getRelatedStyles(c));try{for(u.s();!(l=u.n()).done;){var d=l.value;r.set(d,!1)}}catch(f){u.e(f)}finally{u.f()}}}else{var h="class"==c?"classes":"styles";this._consume(h,a(this._consumables[h].keys()))}}}catch(f){s.e(f)}finally{s.f()}}},{key:"_revert",value:function(e,t){var n,i=Ce(t)?t:[t],r=this._consumables[e],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("attributes"!==e||"class"!==c&&"style"!==c)!1===r.get(c)&&r.set(c,!0);else{var l="class"==c?"classes":"styles";this._revert(l,a(this._consumables[l].keys()))}}}catch(u){s.e(u)}finally{s.f()}}}]),e}(),Qa=function(){function e(){var t=this;l(this,e),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(e,t){t[0]=new Ga(t[0])},{priority:"highest"}),this.on("checkChild",function(e,n){n[0]=new Ga(n[0]),n[1]=t.getDefinition(n[1])},{priority:"highest"})}return d(e,[{key:"register",value:function(e,t){if(this._sourceDefinitions[e])throw new A.a("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}},{key:"extend",value:function(e,t){if(!this._sourceDefinitions[e])throw new A.a("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}},{key:"getDefinitions",value:function(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}},{key:"getDefinition",value:function(e){var t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}},{key:"isRegistered",value:function(e){return!!this.getDefinition(e)}},{key:"isBlock",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isBlock)}},{key:"isLimit",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isLimit&&!t.isObject)}},{key:"isObject",value:function(e){var t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}},{key:"isInline",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isInline)}},{key:"isSelectable",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isSelectable&&!t.isObject)}},{key:"isContent",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isContent&&!t.isObject)}},{key:"checkChild",value:function(e,t){return!!t&&this._checkContextMatch(t,e)}},{key:"checkAttribute",value:function(e,t){var n=this.getDefinition(e.last);return!!n&&n.allowAttributes.includes(t)}},{key:"checkMerge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e instanceof ia){var n=e.nodeBefore,i=e.nodeAfter;if(!(n instanceof ea))throw new A.a("schema-check-merge-no-element-before",this);if(!(i instanceof ea))throw new A.a("schema-check-merge-no-element-after",this);return this.checkMerge(n,i)}var r,a=o(t.getChildren());try{for(a.s();!(r=a.n()).done;){var s=r.value;if(!this.checkChild(e,s))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}},{key:"addChildCheck",value:function(e){this.on("checkChild",function(t,n){var i=r(n,2),o=i[0],a=i[1];if(a){var s=e(o,a);"boolean"==typeof s&&(t.stop(),t.return=s)}},{priority:"high"})}},{key:"addAttributeCheck",value:function(e){this.on("checkAttribute",function(t,n){var i=r(n,2),o=i[0],a=i[1],s=e(o,a);"boolean"==typeof s&&(t.stop(),t.return=s)},{priority:"high"})}},{key:"setAttributeProperties",value:function(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}},{key:"getAttributeProperties",value:function(e){return this._attributeProperties[e]||{}}},{key:"getLimitElement",value:function(e){var t;for(t=e instanceof ia?e.parent:(e instanceof sa?[e]:Array.from(e.getRanges())).reduce(function(e,t){var n=t.getCommonAncestor();return e?e.getCommonAncestor(n,{includeSelf:!0}):n},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}},{key:"checkAttributeInSelection",value:function(e,t){if(e.isCollapsed){var n=[].concat(a(e.getFirstPosition().getAncestors()),[new $o("",e.getAttributes())]);return this.checkAttribute(n,t)}var i,r=o(e.getRanges());try{for(r.s();!(i=r.n()).done;){var s,c=o(i.value);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(this.checkAttribute(l.item,t))return!0}}catch(u){c.e(u)}finally{c.f()}}}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"getValidRanges",value:i().mark(function e(t,n){var r,a,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i().mark(function e(t){var n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=8;break}return a=r.value,e.delegateYield(a.getMinimalFlatRanges(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[1,10,13,16]])})(t),r=o(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=9;break}return s=a.value,e.delegateYield(this._getValidRangesForRange(s,n),"t0",7);case 7:e.next=4;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[2,11,14,17]])})},{key:"getNearestSelectionRange",value:function(e){var t,n,r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";if(this.checkChild(e,"$text"))return new sa(e);var s=e.getAncestors().reverse().find(function(e){return r.isLimit(e)})||e.root;"both"!=a&&"backward"!=a||(t=new ta({boundaries:sa._createIn(s),startPosition:e,direction:"backward"})),"both"!=a&&"forward"!=a||(n=new ta({boundaries:sa._createIn(s),startPosition:e}));var c,l=o(i().mark(function e(t,n){var r,o,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!1;case 1:if(r){e.next=18;break}if(r=!0,!t){e.next=9;break}if(o=t.next(),e.t0=o.done,e.t0){e.next=9;break}return r=!1,e.next=9,{walker:t,value:o.value};case 9:if(!n){e.next=16;break}if(a=n.next(),e.t1=a.done,e.t1){e.next=16;break}return r=!1,e.next=16,{walker:n,value:a.value};case 16:e.next=1;break;case 18:case"end":return e.stop()}},e)})(t,n));try{for(l.s();!(c=l.n()).done;){var u=c.value,d=u.value;if(d.type==(u.walker==t?"elementEnd":"elementStart")&&this.isObject(d.item))return sa._createOn(d.item);if(this.checkChild(d.nextPosition,"$text"))return new sa(d.nextPosition)}}catch(h){l.e(h)}finally{l.f()}return null}},{key:"findAllowedParent",value:function(e,t){for(var n=e.parent;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}},{key:"removeDisallowedAttributes",value:function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.is("$text"))ss(this,r,t);else{var a,s=o(sa._createIn(r).getPositions());try{for(s.s();!(a=s.n()).done;){var c=a.value;ss(this,c.nodeBefore||c.parent,t)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}}},{key:"createContext",value:function(e){return new Ga(e)}},{key:"_clearCache",value:function(){this._compiledDefinitions=null}},{key:"_compile",value:function(){for(var e={},t=this._sourceDefinitions,n=Object.keys(t),i=0,r=n;i<r.length;i++){var o=r[i];e[o]=$a(t[o],o)}for(var a=0,s=n;a<s.length;a++){Ka(e,s[a])}for(var c=0,l=n;c<l.length;c++){Xa(e,l[c])}for(var u=0,d=n;u<d.length;u++){var h=d[u];es(e,h),ts(e,h)}for(var f=0,p=n;f<p.length;f++){var v=p[f];ns(e,v),is(e,v)}this._compiledDefinitions=e}},{key:"_checkContextMatch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1,i=t.getItem(n);if(e.allowIn.includes(i.name)){if(0==n)return!0;var r=this.getDefinition(i);return this._checkContextMatch(r,t,n-1)}return!1}},{key:"_getValidRangesForRange",value:i().mark(function e(t,n){var r,a,s,c,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.start,a=t.start,s=o(t.getItems({shallow:!0})),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=19;break}if(l=c.value,e.t0=l.is("element"),!e.t0){e.next=9;break}return e.delegateYield(this._getValidRangesForRange(sa._createIn(l),n),"t1",9);case 9:if(e.t2=this.checkAttribute(l,n),e.t2){e.next=16;break}if(e.t3=r.isEqual(a),e.t3){e.next=15;break}return e.next=15,new sa(r,a);case 15:r=ia._createAfter(l);case 16:a=ia._createAfter(l);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t4=e.catch(2),s.e(e.t4);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(e.t5=r.isEqual(a),e.t5){e.next=31;break}return e.next=31,new sa(r,a);case 31:case"end":return e.stop()}},e,this,[[2,21,24,27]])})}]),e}();Xe(Qa,Ye);var Ga=function(e){function t(e){if(l(this,t),e instanceof t)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(as)}return d(t,[{key:"length",get:function(){return this._items.length}},{key:"last",get:function(){return this._items[this._items.length-1]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}},{key:"push",value:function(e){var n=new t([e]);return n._items=[].concat(a(this._items),a(n._items)),n}},{key:"getItem",value:function(e){return this._items[e]}},{key:"getNames",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._items.map(function(e){return e.name}),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"endsWith",value:function(e){return Array.from(this.getNames()).join(" ").endsWith(e)}},{key:"startsWith",value:function(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}]),t}();function $a(e,t){var n={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r,a=n.value,s=Object.keys(a).filter(function(e){return e.startsWith("is")}),c=o(s);try{for(c.s();!(r=c.n()).done;){var l=r.value;t[l]=a[l]}}catch(u){c.e(u)}finally{c.f()}}}catch(u){i.e(u)}finally{i.f()}}(e,n),rs(e,n,"allowIn"),rs(e,n,"allowContentOf"),rs(e,n,"allowWhere"),rs(e,n,"allowAttributes"),rs(e,n,"allowAttributesOf"),rs(e,n,"inheritTypesFrom"),function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value.inheritAllFrom;r&&(t.allowContentOf.push(r),t.allowWhere.push(r),t.allowAttributesOf.push(r),t.inheritTypesFrom.push(r))}}catch(a){i.e(a)}finally{i.f()}}(e,n),n}function Ka(e,t){var n,i=o(e[t].allowContentOf);try{for(i.s();!(n=i.n()).done;){var r=n.value;e[r]&&os(e,r).forEach(function(e){e.allowIn.push(t)})}}catch(a){i.e(a)}finally{i.f()}delete e[t].allowContentOf}function Xa(e,t){var n,i=o(e[t].allowWhere);try{for(i.s();!(n=i.n()).done;){var r,s=e[n.value];s&&(r=e[t].allowIn).push.apply(r,a(s.allowIn))}}catch(c){i.e(c)}finally{i.f()}delete e[t].allowWhere}function es(e,t){var n,i=o(e[t].allowAttributesOf);try{for(i.s();!(n=i.n()).done;){var r,s=e[n.value];s&&(r=e[t].allowAttributes).push.apply(r,a(s.allowAttributes))}}catch(c){i.e(c)}finally{i.f()}delete e[t].allowAttributesOf}function ts(e,t){var n,i=e[t],r=o(i.inheritTypesFrom);try{for(r.s();!(n=r.n()).done;){var a=e[n.value];if(a){var s,c=Object.keys(a).filter(function(e){return e.startsWith("is")}),l=o(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;u in i||(i[u]=a[u])}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){r.e(d)}finally{r.f()}delete i.inheritTypesFrom}function ns(e,t){var n=e[t],i=n.allowIn.filter(function(t){return e[t]});n.allowIn=Array.from(new Set(i))}function is(e,t){var n=e[t];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function rs(e,t,n){var i,r=o(e);try{for(r.s();!(i=r.n()).done;){var s,c=i.value;"string"==typeof c[n]?t[n].push(c[n]):Array.isArray(c[n])&&(s=t[n]).push.apply(s,a(c[n]))}}catch(l){r.e(l)}finally{r.f()}}function os(e,t){var n,i=e[t];return(n=e,Object.keys(n).map(function(e){return n[e]})).filter(function(e){return e.allowIn.includes(i.name)})}function as(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",getAttributeKeys:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}),getAttribute:function(){}}:{name:e.is("element")?e.name:"$text",getAttributeKeys:i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return t.stop()}},t)}),getAttribute:function(t){return e.getAttribute(t)}}}function ss(e,t,n){var i,r=o(t.getAttributeKeys());try{for(r.s();!(i=r.n()).done;){var a=i.value;e.checkAttribute(t,a)||n.removeAttribute(a,t)}}catch(s){r.e(s)}finally{r.f()}}var cs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}return d(e,[{key:"convert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(e,t){var n,i,r=o(new Ga(e));try{for(r.s();!(i=r.n()).done;){var a,s=i.value,c={},l=o(s.getAttributeKeys());try{for(l.s();!(a=l.n()).done;){var u=a.value;c[u]=s.getAttribute(u)}}catch(h){l.e(h)}finally{l.f()}var d=t.createElement(s.name,c);n&&t.append(d,n),n=ia._createAt(d,0)}}catch(h){r.e(h)}finally{r.f()}return n}(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=Ya.createFrom(e),this.conversionApi.store={};var i=this._convertItem(e,this._modelCursor),r=i.modelRange,a=t.createDocumentFragment();if(r){this._removeEmptyElements();for(var s=0,c=Array.from(this._modelCursor.parent.getChildren());s<c.length;s++){var l=c[s];t.append(l,a)}a.markers=function(e,t){var n,i=new Set,r=new Map,a=o(sa._createIn(e).getItems());try{for(a.s();!(n=a.n()).done;){var s=n.value;"$marker"==s.name&&i.add(s)}}catch(f){a.e(f)}finally{a.f()}var c,l=o(i);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=u.getAttribute("data-name"),h=t.createPositionBefore(u);r.has(d)?r.get(d).end=h.clone():r.set(d,new sa(h.clone())),t.remove(u)}}catch(f){l.e(f)}finally{l.f()}return r}(a,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,a}},{key:"_convertItem",value:function(e,t){var n=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof sa))throw new A.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}},{key:"_convertChildren",value:function(e,t){for(var n=t.is("position")?t:ia._createAt(t,0),i=new sa(n),r=0,o=Array.from(e.getChildren());r<o.length;r++){var a=o[r],s=this._convertItem(a,n);s.modelRange instanceof sa&&(i.end=s.modelRange.end,n=s.modelCursor)}return{modelRange:i,modelCursor:n}}},{key:"_safeInsert",value:function(e,t){var n=this._splitToAllowedParent(e,t);return!!n&&(this.conversionApi.writer.insert(e,n.position),!0)}},{key:"_updateConversionResult",value:function(e,t){var n=this._getSplitParts(e),i=this.conversionApi.writer;t.modelRange||(t.modelRange=i.createRange(i.createPositionBefore(e),i.createPositionAfter(n[n.length-1])));var r=this._cursorParents.get(e);t.modelCursor=r?i.createPositionAt(r,0):t.modelRange.end}},{key:"_splitToAllowedParent",value:function(e,t){var n=this.conversionApi,i=n.schema,r=n.writer,a=i.findAllowedParent(t,e);if(a){if(a===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(a)&&(a=null)}if(!a)return ja(t,e,i)?{position:Da(t,r)}:null;var s,c=this.conversionApi.writer.split(t,a),l=[],u=o(c.range.getWalker());try{for(u.s();!(s=u.n()).done;){var d=s.value;if("elementEnd"==d.type)l.push(d.item);else{var h=l.pop();this._registerSplitPair(h,d.item)}}}catch(p){u.e(p)}finally{u.f()}var f=c.range.end.parent;return this._cursorParents.set(e,f),{position:c.position,cursorParent:f}}},{key:"_registerSplitPair",value:function(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);var n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}},{key:"_getSplitParts",value:function(e){return this._splitParts.has(e)?this._splitParts.get(e):[e]}},{key:"_removeEmptyElements",value:function(){var e,t=!1,n=o(this._splitParts.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isEmpty&&(this.conversionApi.writer.remove(i),this._splitParts.delete(i),t=!0)}}catch(r){n.e(r)}finally{n.f()}t&&this._removeEmptyElements()}}]),e}();Xe(cs,O);var ls=function(){function e(){l(this,e)}return d(e,[{key:"getHtml",value:function(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}]),e}(),us=function(){function e(t){l(this,e),this._domParser=new DOMParser,this._domConverter=new jr(t,{blockFillerMode:"nbsp"}),this._htmlWriter=new ls}return d(e,[{key:"toData",value:function(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}},{key:"toView",value:function(e){var t=this._toDom(e);return this._domConverter.domToView(t)}},{key:"registerRawContentMatcher",value:function(e){this._domConverter.registerRawContentMatcher(e)}},{key:"useFillerType",value:function(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}},{key:"_toDom",value:function(e){for(var t=this._domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),i=t.body.childNodes;i.length>0;)n.appendChild(i[0]);return n}}]),e}(),ds=function(){function e(t,n){var i=this;l(this,e),this.model=t,this.mapper=new ca,this.downcastDispatcher=new da({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",function(e,t,n){if(n.consumable.consume(t.item,"insert")){var i=n.writer,r=n.mapper.toViewPosition(t.range.start),o=i.createText(t.item.data);i.insert(r,o)}},{priority:"lowest"}),this.upcastDispatcher=new cs({schema:t.schema}),this.viewDocument=new Oi(n),this.stylesProcessor=n,this.htmlProcessor=new us(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new er(this.viewDocument),this.upcastDispatcher.on("text",function(e,t,n){var i=n.schema,r=n.consumable,o=n.writer,a=t.modelCursor;if(r.test(t.viewItem)){if(!i.checkChild(a,"$text")){if(!ja(a,"$text",i))return;a=Da(a,o)}r.consume(t.viewItem);var s=o.createText(t.viewItem.data);o.insert(s,a),t.modelRange=o.createRange(a,a.getShiftedBy(s.offsetSize)),t.modelCursor=t.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var i=n.convertChildren(t.viewItem,t.modelCursor),r=i.modelRange,o=i.modelCursor;t.modelRange=r,t.modelCursor=o}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var i=n.convertChildren(t.viewItem,t.modelCursor),r=i.modelRange,o=i.modelCursor;t.modelRange=r,t.modelCursor=o}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",function(){i.fire("ready")},{priority:"lowest"}),this.on("ready",function(){i.model.enqueueChange("transparent",Ra)},{priority:"lowest"})}return d(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootName,n=void 0===t?"main":t,i=e.trim,r=void 0===i?"empty":i;if(!this._checkIfRootsExists([n]))throw new A.a("datacontroller-get-non-existent-root",this);var o=this.model.document.getRoot(n);return"empty"!==r||this.model.hasContent(o,{ignoreWhitespaces:!0})?this.stringify(o,e):""}},{key:"stringify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toView(e,t);return this.processor.toData(n)}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();var a=sa._createIn(e),s=new Xi(n);this.mapper.bindElements(e,s),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(a,i);var c,l=e.is("documentFragment")?Array.from(e.markers):function(e){var t=[],n=e.root.document;if(!n)return[];var i,r=sa._createIn(e),a=o(n.model.markers);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=r.getIntersection(s.getRange());c&&t.push([s.name,c])}}catch(l){a.e(l)}finally{a.f()}return t}(e),u=o(l);try{for(u.s();!(c=u.n()).done;){var d=r(c.value,2),h=d[0],f=d[1];this.downcastDispatcher.convertMarkerAdd(h,f,i)}}catch(p){u.e(p)}finally{u.f()}return delete this.downcastDispatcher.conversionApi.options,s}},{key:"init",value:function(e){var t=this;if(this.model.document.version)throw new A.a("datacontroller-init-document-not-empty",this);var n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new A.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",function(e){for(var i=0,r=Object.keys(n);i<r.length;i++){var o=r[i],a=t.model.document.getRoot(o);e.insert(t.parse(n[o],a),a,0)}}),Promise.resolve()}},{key:"set",value:function(e){var t=this,n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new A.a("datacontroller-set-non-existent-root",this);this.model.enqueueChange("transparent",function(e){e.setSelection(null),e.removeSelectionAttribute(t.model.document.selection.getAttributeKeys());for(var i=0,r=Object.keys(n);i<r.length;i++){var o=r[i],a=t.model.document.getRoot(o);e.remove(e.createRangeIn(a)),e.insert(t.parse(n[o],a),a,0)}})}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root",n=this.processor.toView(e);return this.toModel(n,t)}},{key:"toModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";return this.model.change(function(i){return t.upcastDispatcher.convert(e,i,n)})}},{key:"addStyleProcessorRules",value:function(e){e(this.stylesProcessor)}},{key:"registerRawContentMatcher",value:function(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}},{key:"destroy",value:function(){this.stopListening()}},{key:"_checkIfRootsExists",value:function(e){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.model.document.getRootNames().includes(i))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}}]),e}();Xe(ds,Ye);var hs=function(){function e(t,n){l(this,e),this._helpers=new Map,this._downcast=_n(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=_n(n),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}return d(e,[{key:"addAlias",value:function(e,t){var n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new A.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}},{key:"for",value:function(e){if(!this._helpers.has(e))throw new A.a("conversion-for-unknown-group",this);return this._helpers.get(e)}},{key:"elementToElement",value:function(e){this.for("downcast").elementToElement(e);var t,n=o(fs(e));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.model,a=i.view;this.for("upcast").elementToElement({model:r,view:a,converterPriority:e.converterPriority})}}catch(s){n.e(s)}finally{n.f()}}},{key:"attributeToElement",value:function(e){this.for("downcast").attributeToElement(e);var t,n=o(fs(e));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.model,a=i.view;this.for("upcast").elementToAttribute({view:a,model:r,converterPriority:e.converterPriority})}}catch(s){n.e(s)}finally{n.f()}}},{key:"attributeToAttribute",value:function(e){this.for("downcast").attributeToAttribute(e);var t,n=o(fs(e));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.model,a=i.view;this.for("upcast").attributeToAttribute({view:a,model:r})}}catch(s){n.e(s)}finally{n.f()}}},{key:"_createConversionHelpers",value:function(e){var t=e.name,n=e.dispatchers,i=e.isDowncast;if(this._helpers.has(t))throw new A.a("conversion-group-exists",this);var r=i?new Oa(n):new Va(n);this._helpers.set(t,r)}}]),e}();function fs(e){var t,n,r,a,s,c;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.model.values){i.next=20;break}t=o(e.model.values),i.prev=2,t.s();case 4:if((n=t.n()).done){i.next=10;break}return r=n.value,a={key:e.model.key,value:r},s=e.view[r],c=e.upcastAlso?e.upcastAlso[r]:void 0,i.delegateYield(ps(a,s,c),"t0",8);case 8:i.next=4;break;case 10:i.next=15;break;case 12:i.prev=12,i.t1=i.catch(2),t.e(i.t1);case 15:return i.prev=15,t.f(),i.finish(15);case 18:i.next=21;break;case 20:return i.delegateYield(ps(e.model,e.view,e.upcastAlso),"t2",21);case 21:case"end":return i.stop()}},u,null,[[2,12,15,18]])}function ps(e,t,n){var r,a,s;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,{model:e,view:t};case 2:if(!n){i.next=20;break}r=o(_n(n)),i.prev=4,r.s();case 6:if((a=r.n()).done){i.next=12;break}return s=a.value,i.next=10,{model:e,view:s};case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(4),r.e(i.t0);case 17:return i.prev=17,r.f(),i.finish(17);case 20:case"end":return i.stop()}},h,null,[[4,14,17,20]])}var vs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(this,e),this.operations=[],this.type=t}return d(e,[{key:"baseVersion",get:function(){var e,t=o(this.operations);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==n.baseVersion)return n.baseVersion}}catch(i){t.e(i)}finally{t.f()}return null}},{key:"addOperation",value:function(e){return e.batch=this,this.operations.push(e),e}}]),e}(),gs=function(){function e(t){l(this,e),this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}return d(e,[{key:"_validate",value:function(){}},{key:"toJSON",value:function(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}}],[{key:"className",get:function(){return"Operation"}},{key:"fromJSON",value:function(e){return new this(e.baseVersion)}}]),e}(),ms=function(e){function t(e){l(this,t),this.markers=new Map,this._children=new Xo,e&&this._insertChild(0,e)}return d(t,[{key:Symbol.iterator,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"===e||"model:documentFragment"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(e){var t,n=this,i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=n.getChild(n.offsetToIndex(r))}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"toJSON",value:function(){var e,t=[],n=o(this._children);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(i.toJSON())}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,i,r="string"==typeof(n=t)?[new $o(n)]:(yn(n)||(n=[n]),Array.from(n).map(function(e){return"string"==typeof e?new $o(e):e instanceof Ko?new $o(e.data,e.getAttributes()):e})),a=o(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;null!==s.parent&&s._remove(),s.parent=this}}catch(c){a.e(c)}finally{a.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this._children._removeNodes(e,n),r=o(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.parent=null}}catch(s){r.e(s)}finally{r.f()}return i}}],[{key:"fromJSON",value:function(e){var n,i=[],r=o(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push(a.name?ea.fromJSON(a):$o.fromJSON(a))}}catch(s){r.e(s)}finally{r.f()}return new t(i)}}]),t}();function bs(e,t){var n=(t=ws(t)).reduce(function(e,t){return e+t.offsetSize},0),i=e.parent;xs(e);var r=e.index;return i._insertChild(r,t),_s(i,r+t.length),_s(i,r),new sa(e,e.getShiftedBy(n))}function ys(e){if(!e.isFlat)throw new A.a("operation-utils-remove-range-not-flat",this);var t=e.start.parent;xs(e.start),xs(e.end);var n=t._removeChildren(e.start.index,e.end.index-e.start.index);return _s(t,e.start.index),n}function ks(e,t){if(!e.isFlat)throw new A.a("operation-utils-move-range-not-flat",this);var n=ys(e);return bs(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),n)}function ws(e){var t=[];e instanceof Array||(e=[e]);for(var n=0;n<e.length;n++)if("string"==typeof e[n])t.push(new $o(e[n]));else if(e[n]instanceof Ko)t.push(new $o(e[n].data,e[n].getAttributes()));else if(e[n]instanceof ms||e[n]instanceof Xo){var i,r=o(e[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.push(a)}}catch(u){r.e(u)}finally{r.f()}}else e[n]instanceof Go&&t.push(e[n]);for(var s=1;s<t.length;s++){var c=t[s],l=t[s-1];c instanceof $o&&l instanceof $o&&Ts(c,l)&&(t.splice(s-1,2,new $o(l.data+c.data,l.getAttributes())),s--)}return t}function _s(e,t){var n=e.getChild(t-1),i=e.getChild(t);if(n&&i&&n.is("$text")&&i.is("$text")&&Ts(n,i)){var r=new $o(n.data+i.data,n.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,r)}}function xs(e){var t=e.textNode,n=e.parent;if(t){var i=e.offset-t.startOffset,r=t.index;n._removeChildren(r,1);var o=new $o(t.data.substr(0,i),t.getAttributes()),a=new $o(t.data.substr(i),t.getAttributes());n._insertChild(r,[o,a])}}function Ts(e,t){var n,i=e.getAttributes(),r=t.getAttributes(),a=o(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s[1]!==t.getAttribute(s[0]))return!1;r.next()}}catch(c){a.e(c)}finally{a.f()}return r.next().done}var As=function(e,t){return no(e,t)},Ss=function(e){function n(e,t,i,r,o){var a;return l(this,n),(a=f(this,n,[o])).range=e.clone(),a.key=t,a.oldValue=void 0===i?null:i,a.newValue=void 0===r?null:r,a}return g(n,e),d(n,[{key:"type",get:function(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}},{key:"clone",value:function(){return new n(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.range=this.range.toJSON(),e}},{key:"_validate",value:function(){if(!this.range.isFlat)throw new A.a("attribute-operation-range-not-flat",this);var e,t=o(this.range.getItems({shallow:!0}));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==this.oldValue&&!As(n.getAttribute(this.key),this.oldValue))throw new A.a("attribute-operation-wrong-old-value",this,{item:n,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&n.hasAttribute(this.key))throw new A.a("attribute-operation-attribute-exists",this,{node:n,key:this.key})}}catch(i){t.e(i)}finally{t.f()}}},{key:"_execute",value:function(){As(this.oldValue,this.newValue)||function(e,t,n){xs(e.start),xs(e.end);var i,r=o(e.getItems({shallow:!0}));try{for(r.s();!(i=r.n()).done;){var a=i.value,s=a.is("$textProxy")?a.textNode:a;null!==n?s._setAttribute(t,n):s._removeAttribute(t),_s(s.parent,s.index)}}catch(c){r.e(c)}finally{r.f()}_s(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}}],[{key:"className",get:function(){return"AttributeOperation"}},{key:"fromJSON",value:function(e,t){return new n(sa.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(gs),Cs=function(e){function n(e,t){var i;return l(this,n),(i=f(this,n,[null])).sourcePosition=e.clone(),i.howMany=t,i}return g(n,e),d(n,[{key:"type",get:function(){return"detach"}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e}},{key:"_validate",value:function(){if(this.sourcePosition.root.document)throw new A.a("detach-operation-on-document-node",this)}},{key:"_execute",value:function(){ys(sa._createFromPositionAndShift(this.sourcePosition,this.howMany))}}],[{key:"className",get:function(){return"DetachOperation"}}]),n}(gs),Os=function(e){function n(e,t,i,r){var o;return l(this,n),(o=f(this,n,[r])).sourcePosition=e.clone(),o.sourcePosition.stickiness="toNext",o.howMany=t,o.targetPosition=i.clone(),o.targetPosition.stickiness="toNone",o}return g(n,e),d(n,[{key:"type",get:function(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}},{key:"getMovedRangeStart",value:function(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}},{key:"getReversed",value:function(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,i=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new A.a("move-operation-nodes-do-not-exist",this);if(e===t&&n<i&&i<n+this.howMany)throw new A.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==On(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=n&&this.targetPosition.path[r]<n+this.howMany)throw new A.a("move-operation-node-into-itself",this)}}},{key:"_execute",value:function(){ks(sa._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}}],[{key:"className",get:function(){return"MoveOperation"}},{key:"fromJSON",value:function(e,t){var n=ia.fromJSON(e.sourcePosition,t),i=ia.fromJSON(e.targetPosition,t);return new this(n,e.howMany,i,e.baseVersion)}}]),n}(gs),Es=function(e){function n(e,t,i){var r;return l(this,n),(r=f(this,n,[i])).position=e.clone(),r.position.stickiness="toNone",r.nodes=new Xo(ws(t)),r.shouldReceiveAttributes=!1,r}return g(n,e),d(n,[{key:"type",get:function(){return"insert"}},{key:"howMany",get:function(){return this.nodes.maxOffset}},{key:"clone",value:function(){var e=new Xo(a(this.nodes).map(function(e){return e._clone(!0)})),t=new n(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}},{key:"getReversed",value:function(){var e=new ia(this.position.root.document.graveyard,[0]);return new Os(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new A.a("insert-operation-position-invalid",this)}},{key:"_execute",value:function(){var e=this.nodes;this.nodes=new Xo(a(e).map(function(e){return e._clone(!0)})),bs(this.position,e)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}}],[{key:"className",get:function(){return"InsertOperation"}},{key:"fromJSON",value:function(e,t){var i,r=[],a=o(e.nodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;r.push(s.name?ea.fromJSON(s):$o.fromJSON(s))}}catch(l){a.e(l)}finally{a.f()}var c=new n(ia.fromJSON(e.position,t),r,e.baseVersion);return c.shouldReceiveAttributes=e.shouldReceiveAttributes,c}}]),n}(gs),Ps=function(e){function n(e,t,i,r,o,a){var s;return l(this,n),(s=f(this,n,[a])).name=e,s.oldRange=t?t.clone():null,s.newRange=i?i.clone():null,s.affectsData=o,s._markers=r,s}return g(n,e),d(n,[{key:"type",get:function(){return"marker"}},{key:"clone",value:function(){return new n(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}},{key:"_execute",value:function(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}}],[{key:"className",get:function(){return"MarkerOperation"}},{key:"fromJSON",value:function(e,t){return new n(e.name,e.oldRange?sa.fromJSON(e.oldRange,t):null,e.newRange?sa.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}]),n}(gs),Is=function(e){function n(e,t,i,r){var o;return l(this,n),(o=f(this,n,[r])).position=e,o.position.stickiness="toNext",o.oldName=t,o.newName=i,o}return g(n,e),d(n,[{key:"type",get:function(){return"rename"}},{key:"clone",value:function(){return new n(this.position.clone(),this.oldName,this.newName,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.nodeAfter;if(!(e instanceof ea))throw new A.a("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new A.a("rename-operation-wrong-name",this)}},{key:"_execute",value:function(){this.position.nodeAfter.name=this.newName}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e}}],[{key:"className",get:function(){return"RenameOperation"}},{key:"fromJSON",value:function(e,t){return new n(ia.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}]),n}(gs),Ms=function(e){function n(e,t,i,r,o){var a;return l(this,n),(a=f(this,n,[o])).root=e,a.key=t,a.oldValue=i,a.newValue=r,a}return g(n,e),d(n,[{key:"type",get:function(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}},{key:"clone",value:function(){return new n(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new A.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new A.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new A.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}},{key:"_execute",value:function(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.root=this.root.toJSON(),e}}],[{key:"className",get:function(){return"RootAttributeOperation"}},{key:"fromJSON",value:function(e,t){if(!t.getRoot(e.root))throw new A.a("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new n(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(gs),Ns=function(e){function n(e,t,i,r,o){var a;return l(this,n),(a=f(this,n,[o])).sourcePosition=e.clone(),a.sourcePosition.stickiness="toPrevious",a.howMany=t,a.targetPosition=i.clone(),a.targetPosition.stickiness="toNext",a.graveyardPosition=r.clone(),a}return g(n,e),d(n,[{key:"type",get:function(){return"merge"}},{key:"deletionPosition",get:function(){return new ia(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}},{key:"movedRange",get:function(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new sa(this.sourcePosition,e)}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new ia(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Ls(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new A.a("merge-operation-source-position-invalid",this);if(!t.parent)throw new A.a("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new A.a("merge-operation-how-many-invalid",this)}},{key:"_execute",value:function(){var e=this.sourcePosition.parent;ks(sa._createIn(e),this.targetPosition),ks(sa._createOn(e),this.graveyardPosition)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}}],[{key:"className",get:function(){return"MergeOperation"}},{key:"fromJSON",value:function(e,t){var n=ia.fromJSON(e.sourcePosition,t),i=ia.fromJSON(e.targetPosition,t),r=ia.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,i,r,e.baseVersion)}}]),n}(gs),Ls=function(e){function n(e,t,i,r,o){var a;return l(this,n),(a=f(this,n,[o])).splitPosition=e.clone(),a.splitPosition.stickiness="toNext",a.howMany=t,a.insertionPosition=i,a.graveyardPosition=r?r.clone():null,a.graveyardPosition&&(a.graveyardPosition.stickiness="toNext"),a}return g(n,e),d(n,[{key:"type",get:function(){return"split"}},{key:"moveTargetPosition",get:function(){var e=this.insertionPosition.path.slice();return e.push(0),new ia(this.insertionPosition.root,e)}},{key:"movedRange",get:function(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new sa(this.splitPosition,e)}},{key:"clone",value:function(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var e=new ia(this.splitPosition.root.document.graveyard,[0]);return new Ns(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.splitPosition.parent;if(!e||e.maxOffset<this.splitPosition.offset)throw new A.a("split-operation-position-invalid",this);if(!e.parent)throw new A.a("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new A.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new A.a("split-operation-graveyard-position-invalid",this)}},{key:"_execute",value:function(){var e=this.splitPosition.parent;if(this.graveyardPosition)ks(sa._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var t=e._clone();bs(this.insertionPosition,t)}ks(new sa(ia._createAt(e,this.splitPosition.offset),ia._createAt(e,e.maxOffset)),this.moveTargetPosition)}},{key:"toJSON",value:function(){var e=t(w(n.prototype),"toJSON",this).call(this);return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}}],[{key:"className",get:function(){return"SplitOperation"}},{key:"getInsertionPosition",value:function(e){var t=e.path.slice(0,-1);return t[t.length-1]++,new ia(e.root,t,"toPrevious")}},{key:"fromJSON",value:function(e,t){var n=ia.fromJSON(e.splitPosition,t),i=ia.fromJSON(e.insertionPosition,t),r=e.graveyardPosition?ia.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,i,r,e.baseVersion)}}]),n}(gs),Rs=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return l(this,t),(i=f(this,t,[n]))._document=e,i.rootName=r,i}return g(t,e),d(t,[{key:"document",get:function(){return this._document}},{key:"is",value:function(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e}},{key:"toJSON",value:function(){return this.rootName}}]),t}(ea),js=function(){function e(t,n){l(this,e),this.model=t,this.batch=n}return d(e,[{key:"createText",value:function(e,t){return new $o(e,t)}},{key:"createElement",value:function(e,t){return new ea(e,t)}},{key:"createDocumentFragment",value:function(){return new ms}},{key:"cloneElement",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e._clone(t)}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertWriterUsedCorrectly(),!(e instanceof $o&&""==e.data)){var i=ia._createAt(t,n);if(e.parent){if(Fs(e.root,i.root))return void this.move(sa._createOn(e),i);if(e.root.document)throw new A.a("model-writer-insert-forbidden-move",this);this.remove(e)}var a=new Es(i,e,i.root.document?i.root.document.version:null);if(e instanceof $o&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),e instanceof ms){var s,c=o(e.markers);try{for(c.s();!(s=c.n()).done;){var l=r(s.value,2),u=l[0],d=l[1],h=ia._createAt(d.root,0),f={range:new sa(d.start._getCombined(h,i),d.end._getCombined(h,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(u)?this.updateMarker(u,f):this.addMarker(u,f)}}catch(p){c.e(p)}finally{c.f()}}}}},{key:"insertText",value:function(e,t,n,i){t instanceof ms||t instanceof ea||t instanceof ia?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,i)}},{key:"insertElement",value:function(e,t,n,i){t instanceof ms||t instanceof ea||t instanceof ia?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,i)}},{key:"append",value:function(e,t){this.insert(e,t,"end")}},{key:"appendText",value:function(e,t,n){t instanceof ms||t instanceof ea?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}},{key:"appendElement",value:function(e,t,n){t instanceof ms||t instanceof ea?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}},{key:"setAttribute",value:function(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof sa){var i,r=o(n.getMinimalFlatRanges());try{for(r.s();!(i=r.n()).done;){Ds(this,e,t,i.value)}}catch(a){r.e(a)}finally{r.f()}}else Vs(this,e,t,n)}},{key:"setAttributes",value:function(e,t){var n,i=o(Nn(e));try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),s=a[0],c=a[1];this.setAttribute(s,c,t)}}catch(l){i.e(l)}finally{i.f()}}},{key:"removeAttribute",value:function(e,t){if(this._assertWriterUsedCorrectly(),t instanceof sa){var n,i=o(t.getMinimalFlatRanges());try{for(i.s();!(n=i.n()).done;){Ds(this,e,null,n.value)}}catch(r){i.e(r)}finally{i.f()}}else Vs(this,e,null,t)}},{key:"clearAttributes",value:function(e){var t=this;this._assertWriterUsedCorrectly();var n=function(e){var n,i=o(e.getAttributeKeys());try{for(i.s();!(n=i.n()).done;){var r=n.value;t.removeAttribute(r,e)}}catch(a){i.e(a)}finally{i.f()}};if(e instanceof sa){var i,r=o(e.getItems());try{for(r.s();!(i=r.n()).done;){n(i.value)}}catch(a){r.e(a)}finally{r.f()}}else n(e)}},{key:"move",value:function(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof sa))throw new A.a("writer-move-invalid-range",this);if(!e.isFlat)throw new A.a("writer-move-range-not-flat",this);var i=ia._createAt(t,n);if(!i.isEqual(e.start)){if(this._addOperationForAffectedMarkers("move",e),!Fs(e.root,i.root))throw new A.a("writer-move-different-document",this);var r=new Os(e.start,e.end.offset-e.start.offset,i,e.root.document?e.root.document.version:null);this.batch.addOperation(r),this.model.applyOperation(r)}}},{key:"remove",value:function(e){this._assertWriterUsedCorrectly();var t,n=o((e instanceof sa?e:sa._createOn(e)).getMinimalFlatRanges().reverse());try{for(n.s();!(t=n.n()).done;){var i=t.value;this._addOperationForAffectedMarkers("move",i),zs(i.start,i.end.offset-i.start.offset,this.batch,this.model)}}catch(r){n.e(r)}finally{n.f()}}},{key:"merge",value:function(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof ea))throw new A.a("writer-merge-no-element-before",this);if(!(n instanceof ea))throw new A.a("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}},{key:"createPositionFromPath",value:function(e,t,n){return this.model.createPositionFromPath(e,t,n)}},{key:"createPositionAt",value:function(e,t){return this.model.createPositionAt(e,t)}},{key:"createPositionAfter",value:function(e){return this.model.createPositionAfter(e)}},{key:"createPositionBefore",value:function(e){return this.model.createPositionBefore(e)}},{key:"createRange",value:function(e,t){return this.model.createRange(e,t)}},{key:"createRangeIn",value:function(e){return this.model.createRangeIn(e)}},{key:"createRangeOn",value:function(e){return this.model.createRangeOn(e)}},{key:"createSelection",value:function(e,t,n){return this.model.createSelection(e,t,n)}},{key:"_mergeDetached",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;this.move(sa._createIn(n),ia._createAt(t,"end")),this.remove(n)}},{key:"_merge",value:function(e){var t=ia._createAt(e.nodeBefore,"end"),n=ia._createAt(e.nodeAfter,0),i=new ia(e.root.document.graveyard,[0]),r=new Ns(n,e.nodeAfter.maxOffset,t,i,e.root.document.version);this.batch.addOperation(r),this.model.applyOperation(r)}},{key:"rename",value:function(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof ea))throw new A.a("writer-rename-not-element-instance",this);var n=e.root.document?e.root.document.version:null,i=new Is(ia._createBefore(e),e.name,t,n);this.batch.addOperation(i),this.model.applyOperation(i)}},{key:"split",value:function(e,t){this._assertWriterUsedCorrectly();var n,i,r=e.parent;if(!r.parent)throw new A.a("writer-split-element-no-parent",this);if(t||(t=r.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new A.a("writer-split-invalid-limit-element",this);do{var o=r.root.document?r.root.document.version:null,a=r.maxOffset-e.offset,s=Ls.getInsertionPosition(e),c=new Ls(e,a,s,null,o);this.batch.addOperation(c),this.model.applyOperation(c),n||i||(n=r,i=e.parent.nextSibling),r=(e=this.createPositionAfter(e.parent)).parent}while(r!==t);return{position:e,range:new sa(ia._createAt(n,"end"),ia._createAt(i,0))}}},{key:"wrap",value:function(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new A.a("writer-wrap-range-not-flat",this);var n=t instanceof ea?t:new ea(t);if(n.childCount>0)throw new A.a("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new A.a("writer-wrap-element-attached",this);this.insert(n,e.start);var i=new sa(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(i,ia._createAt(n,0))}},{key:"unwrap",value:function(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new A.a("writer-unwrap-element-no-parent",this);this.move(sa._createIn(e),this.createPositionAfter(e)),this.remove(e)}},{key:"addMarker",value:function(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new A.a("writer-addmarker-no-usingoperation",this);var n=t.usingOperation,i=t.range,r=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new A.a("writer-addmarker-marker-exists",this);if(!i)throw new A.a("writer-addmarker-no-range",this);return n?(Zs(this,e,null,i,r),this.model.markers.get(e)):this.model.markers._set(e,i,n,r)}},{key:"updateMarker",value:function(e,t){this._assertWriterUsedCorrectly();var n="string"==typeof e?e:e.name,i=this.model.markers.get(n);if(!i)throw new A.a("writer-updatemarker-marker-not-exists",this);if(t){var r="boolean"==typeof t.usingOperation,o="boolean"==typeof t.affectsData,a=o?t.affectsData:i.affectsData;if(!r&&!t.range&&!o)throw new A.a("writer-updatemarker-wrong-options",this);var s=i.getRange(),c=t.range?t.range:s;r&&t.usingOperation!==i.managedUsingOperations?t.usingOperation?Zs(this,n,null,c,a):(Zs(this,n,s,null,a),this.model.markers._set(n,c,void 0,a)):i.managedUsingOperations?Zs(this,n,s,c,a):this.model.markers._set(n,c,void 0,a)}else this.model.markers._refresh(i)}},{key:"removeMarker",value:function(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new A.a("writer-removemarker-no-marker",this);var n=this.model.markers.get(t);n.managedUsingOperations?Zs(this,t,n.getRange(),null,n.affectsData):this.model.markers._remove(t)}},{key:"setSelection",value:function(e,t,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}},{key:"setSelectionAttribute",value:function(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else{var n,i=o(Nn(e));try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),s=a[0],c=a[1];this._setSelectionAttribute(s,c)}}catch(l){i.e(l)}finally{i.f()}}}},{key:"removeSelectionAttribute",value:function(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._removeSelectionAttribute(i)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"overrideSelectionGravity",value:function(){return this.model.document.selection._overrideGravity()}},{key:"restoreSelectionGravity",value:function(e){this.model.document.selection._restoreGravity(e)}},{key:"_setSelectionAttribute",value:function(e,t){var n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){var i=xa._getStoreAttributeKey(e);this.setAttribute(i,t,n.anchor.parent)}n._setAttribute(e,t)}},{key:"_removeSelectionAttribute",value:function(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var n=xa._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}},{key:"_assertWriterUsedCorrectly",value:function(){if(this.model._currentWriter!==this)throw new A.a("writer-incorrect-use",this)}},{key:"_addOperationForAffectedMarkers",value:function(e,t){var n,i=o(this.model.markers);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.managedUsingOperations){var a=r.getRange(),s=!1;if("move"===e)s=t.containsPosition(a.start)||t.start.isEqual(a.start)||t.containsPosition(a.end)||t.end.isEqual(a.end);else{var c=t.nodeAfter,l=a.end.parent==c&&0==a.end.offset,u=a.end.nodeAfter==c,d=a.start.nodeAfter==c;s=a.start.parent==t.nodeBefore&&a.start.isAtEnd||l||u||d}s&&this.updateMarker(r.name,{range:a})}}}catch(h){i.e(h)}finally{i.f()}}}]),e}();function Ds(e,t,n,i){var r,a,s,c,l=e.model,u=l.document,d=i.start,h=o(i.getWalker({shallow:!0}));try{for(h.s();!(c=h.n()).done;){var f=c.value;s=f.item.getAttribute(t),r&&a!=s&&(a!=n&&p(),d=r),r=f.nextPosition,a=s}}catch(v){h.e(v)}finally{h.f()}function p(){var i=new sa(d,r),o=new Ss(i,t,a,n,i.root.document?u.version:null);e.batch.addOperation(o),l.applyOperation(o)}r instanceof ia&&r!=d&&a!=n&&p()}function Vs(e,t,n,i){var r,o,a=e.model,s=a.document,c=i.getAttribute(t);c!=n&&(i.root===i?o=new Ms(i,t,c,n,i.document?s.version:null):(r=new sa(ia._createBefore(i),e.createPositionAfter(i)),o=new Ss(r,t,c,n,r.root.document?s.version:null)),e.batch.addOperation(o),a.applyOperation(o))}function Zs(e,t,n,i,r){var o=e.model,a=new Ps(t,n,i,o.markers,r,o.document.version);e.batch.addOperation(a),o.applyOperation(a)}function zs(e,t,n,i){var r;if(e.root.document){var o=i.document,a=new ia(o.graveyard,[0]);r=new Os(e,t,a,o.version)}else r=new Cs(e,t);n.addOperation(r),i.applyOperation(r)}function Fs(e,t){return e===t||e instanceof Rs&&t instanceof Rs}var qs=function(){function e(t){l(this,e),this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}return d(e,[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}},{key:"refreshItem",value:function(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var t,n=sa._createOn(e),i=o(this._markerCollection.getMarkersIntersectingRange(n));try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.getRange();this.bufferMarkerChange(r.name,a,a,r.affectsData)}}catch(s){i.e(s)}finally{i.f()}this._cachedChanges=null}}},{key:"bufferOperation",value:function(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var t,n=o(e.range.getItems({shallow:!0}));try{for(n.s();!(t=n.n()).done;){var i=t.value;this._isInInsertedElement(i.parent)||this._markAttribute(i)}}catch(v){n.e(v)}finally{n.f()}break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var r=this._isInInsertedElement(e.sourcePosition.parent),a=this._isInInsertedElement(e.targetPosition.parent);r||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),a||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var s,c=sa._createFromPositionAndShift(e.position,1),l=o(this._markerCollection.getMarkersIntersectingRange(c));try{for(l.s();!(s=l.n()).done;){var u=s.value,d=u.getRange();this.bufferMarkerChange(u.name,d,d,u.affectsData)}}catch(v){l.e(v)}finally{l.f()}break;case"split":var h=e.splitPosition.parent;this._isInInsertedElement(h)||this._markRemove(h,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":var f=e.sourcePosition.parent;this._isInInsertedElement(f.parent)||this._markRemove(f.parent,f.startOffset,1),this._markInsert(e.graveyardPosition.parent,e.graveyardPosition.offset,1);var p=e.targetPosition.parent;this._isInInsertedElement(p)||this._markInsert(p,e.targetPosition.offset,f.maxOffset)}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(e,t,n,i){var r=this._changedMarkers.get(e);r?(r.newRange=n,r.affectsData=i,null==r.oldRange&&null==r.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:i})}},{key:"getMarkersToRemove",value:function(){var e,t=[],n=o(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var i=r(e.value,2),a=i[0],s=i[1];null!=s.oldRange&&t.push({name:a,range:s.oldRange})}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"getMarkersToAdd",value:function(){var e,t=[],n=o(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var i=r(e.value,2),a=i[0],s=i[1];null!=s.newRange&&t.push({name:a,range:s.newRange})}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"getChangedMarkers",value:function(){return Array.from(this._changedMarkers).map(function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}})}},{key:"hasDataChanges",value:function(){var e,t=o(this._changedMarkers);try{for(t.s();!(e=t.n()).done;){if(r(e.value,2)[1].affectsData)return!0}}catch(n){t.e(n)}finally{t.f()}return this._changesInElement.size>0}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t,n=[],i=o(this._changesInElement.keys());try{for(i.s();!(t=i.n()).done;){var r,s=t.value,c=this._changesInElement.get(s).sort(function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1}),l=this._elementSnapshots.get(s),u=Bs(s.getChildren()),d=Us(l.length,c),h=0,f=0,p=o(d);try{for(p.s();!(r=p.n()).done;){var v=r.value;if("i"===v)n.push(this._getInsertDiff(s,h,u[h].name)),h++;else if("r"===v)n.push(this._getRemoveDiff(s,h,l[f].name)),f++;else if("a"===v){var g,m=u[h].attributes,b=l[f].attributes,y=void 0;if("$text"==u[h].name)y=new sa(ia._createAt(s,h),ia._createAt(s,h+1));else{var k=s.offsetToIndex(h);y=new sa(ia._createAt(s,h),ia._createAt(s.getChild(k),0))}(g=n).push.apply(g,a(this._getAttributesDiff(y,b,m))),h++,f++}else h++,f++}}catch(I){p.e(I)}finally{p.f()}}}catch(I){i.e(I)}finally{i.f()}n.sort(function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1});for(var w=1,_=0;w<n.length;w++){var x=n[_],T=n[w],A="remove"==x.type&&"remove"==T.type&&"$text"==x.name&&"$text"==T.name&&x.position.isEqual(T.position),S="insert"==x.type&&"insert"==T.type&&"$text"==x.name&&"$text"==T.name&&x.position.parent==T.position.parent&&x.position.offset+x.length==T.position.offset,C="attribute"==x.type&&"attribute"==T.type&&x.position.parent==T.position.parent&&x.range.isFlat&&T.range.isFlat&&x.position.offset+x.length==T.position.offset&&x.attributeKey==T.attributeKey&&x.attributeOldValue==T.attributeOldValue&&x.attributeNewValue==T.attributeNewValue;A||S||C?(x.length++,C&&(x.range.end=x.range.end.getShiftedBy(1)),n[w]=null):_=w}n=n.filter(function(e){return e});var O,E=o(n);try{for(E.s();!(O=E.n()).done;){var P=O.value;delete P.changeCount,"attribute"==P.type&&(delete P.position,delete P.length)}}catch(I){E.e(I)}finally{E.f()}return this._changeCount=0,this._cachedChangesWithGraveyard=n.slice(),this._cachedChanges=n.filter(Hs),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}},{key:"_markInsert",value:function(e,t,n){var i={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,i)}},{key:"_markRemove",value:function(e,t,n){var i={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,i),this._removeAllNestedChanges(e,t,n)}},{key:"_markAttribute",value:function(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}},{key:"_markChange",value:function(e,t){this._makeSnapshot(e);var n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(var i=0;i<n.length;i++)n[i].howMany<1&&(n.splice(i,1),i--)}},{key:"_getChangesForElement",value:function(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}},{key:"_makeSnapshot",value:function(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Bs(e.getChildren()))}},{key:"_handleChange",value:function(e,t){e.nodesToHandle=e.howMany;var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=e.offset+e.howMany,s=r.offset+r.howMany;if("insert"==e.type&&("insert"==r.type&&(e.offset<=r.offset?r.offset+=e.howMany:e.offset<s&&(r.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==r.type&&e.offset<r.offset&&(r.offset+=e.howMany),"attribute"==r.type))if(e.offset<=r.offset)r.offset+=e.howMany;else if(e.offset<s){var c=r.howMany;r.howMany=e.offset-r.offset,t.unshift({type:"attribute",offset:a,howMany:c-r.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==r.type)if(a<=r.offset)r.offset-=e.howMany;else if(a<=s)if(e.offset<r.offset){var l=a-r.offset;r.offset=e.offset,r.howMany-=l,e.nodesToHandle-=l}else r.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=r.offset)e.nodesToHandle-=r.howMany,r.howMany=0;else if(e.offset<s){var u=s-e.offset;r.howMany-=u,e.nodesToHandle-=u}if("remove"==r.type&&(a<=r.offset?r.offset-=e.howMany:e.offset<r.offset&&(e.nodesToHandle+=r.howMany,r.howMany=0)),"attribute"==r.type)if(a<=r.offset)r.offset-=e.howMany;else if(e.offset<r.offset){var d=a-r.offset;r.offset=e.offset,r.howMany-=d}else if(e.offset<s)if(a<=s){var h=r.howMany;r.howMany=e.offset-r.offset,t.unshift({type:"attribute",offset:e.offset,howMany:h-r.howMany-e.nodesToHandle,count:this._changeCount++})}else r.howMany-=s-e.offset}if("attribute"==e.type){if("insert"==r.type)if(e.offset<r.offset&&a>r.offset){if(a>s){var f={type:"attribute",offset:s,howMany:a-s,count:this._changeCount++};this._handleChange(f,t),t.push(f)}e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=r.offset&&e.offset<s&&(a>s?(e.nodesToHandle=a-s,e.offset=s):e.nodesToHandle=0);if("remove"==r.type&&e.offset<r.offset&&a>r.offset){var p={type:"attribute",offset:r.offset,howMany:a-r.offset,count:this._changeCount++};this._handleChange(p,t),t.push(p),e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==r.type&&(e.offset>=r.offset&&a<=s?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=r.offset&&a>=s&&(r.howMany=0))}}}catch(v){i.e(v)}finally{i.f()}e.howMany=e.nodesToHandle,delete e.nodesToHandle}},{key:"_getInsertDiff",value:function(e,t,n){return{type:"insert",position:ia._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getRemoveDiff",value:function(e,t,n){return{type:"remove",position:ia._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getAttributesDiff",value:function(e,t,n){var i=[];n=new Map(n);var a,s=o(t);try{for(s.s();!(a=s.n()).done;){var c=r(a.value,2),l=c[0],u=c[1],d=n.has(l)?n.get(l):null;d!==u&&i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:l,attributeOldValue:u,attributeNewValue:d,changeCount:this._changeCount++}),n.delete(l)}}catch(m){s.e(m)}finally{s.f()}var h,f=o(n);try{for(f.s();!(h=f.n()).done;){var p=r(h.value,2),v=p[0],g=p[1];i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:v,attributeOldValue:null,attributeNewValue:g,changeCount:this._changeCount++})}}catch(m){f.e(m)}finally{f.f()}return i}},{key:"_isInInsertedElement",value:function(e){var t=e.parent;if(!t)return!1;var n=this._changesInElement.get(t),i=e.startOffset;if(n){var r,a=o(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("insert"==s.type&&i>=s.offset&&i<s.offset+s.howMany)return!0}}catch(c){a.e(c)}finally{a.f()}}return this._isInInsertedElement(t)}},{key:"_removeAllNestedChanges",value:function(e,t,n){var i,r=o(new sa(ia._createAt(e,t),ia._createAt(e,t+n)).getItems({shallow:!0}));try{for(r.s();!(i=r.n()).done;){var a=i.value;a.is("element")&&(this._elementSnapshots.delete(a),this._changesInElement.delete(a),this._removeAllNestedChanges(a,0,a.maxOffset))}}catch(s){r.e(s)}finally{r.f()}}}]),e}();function Bs(e){var t,n=[],i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.is("$text"))for(var a=0;a<r.data.length;a++)n.push({name:"$text",attributes:new Map(r.getAttributes())});else n.push({name:r.name,attributes:new Map(r.getAttributes())})}}catch(s){i.e(s)}finally{i.f()}return n}function Us(e,t){var n,i=[],r=0,s=0,c=o(t);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(l.offset>r){for(var u=0;u<l.offset-r;u++)i.push("e");s+=l.offset-r}if("insert"==l.type){for(var d=0;d<l.howMany;d++)i.push("i");r=l.offset+l.howMany}else if("remove"==l.type){for(var h=0;h<l.howMany;h++)i.push("r");r=l.offset,s+=l.howMany}else i.push.apply(i,a("a".repeat(l.howMany).split(""))),r=l.offset+l.howMany,s+=l.howMany}}catch(p){c.e(p)}finally{c.f()}if(s<e)for(var f=0;f<e-s-r;f++)i.push("e");return i}function Hs(e){return!(e.position&&"$graveyard"==e.position.root.rootName||e.range&&"$graveyard"==e.range.root.rootName)}var Ws=function(){function e(){l(this,e),this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}return d(e,[{key:"addOperation",value:function(e){this._operations.includes(e)||this._operations.push(e)}},{key:"getOperations",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NEGATIVE_INFINITY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,i=[],r=o(this._operations);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.baseVersion>=t&&a.baseVersion<n&&i.push(a)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"getOperation",value:function(e){var t,n=o(this._operations);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.baseVersion==e)return i}}catch(r){n.e(r)}finally{n.f()}}},{key:"setOperationAsUndone",value:function(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}},{key:"isUndoingOperation",value:function(e){return this._undoPairs.has(e)}},{key:"isUndoneOperation",value:function(e){return this._undoneOperations.has(e)}},{key:"getUndoneOperation",value:function(e){return this._undoPairs.get(e)}}]),e}();function Ys(e,t){return!!(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&!!(n=e.charAt(t))&&1==n.length&&/[\udc00-\udfff]/.test(n);var n,i}function Js(e,t){return!!(n=e.charAt(t))&&1==n.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n);var n}var Qs=function(){function e(t){var n=this;l(this,e),this.model=t,this.version=0,this.history=new Ws(this),this.selection=new xa(this),this.roots=new kn({idProperty:"rootName"}),this.differ=new qs(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(t,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation&&i.baseVersion!==n.version)throw new A.a("model-document-applyoperation-wrong-version",n,{operation:i})},{priority:"highest"}),this.listenTo(t,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&n.differ.bufferOperation(i)},{priority:"high"}),this.listenTo(t,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&(n.version++,n.history.addOperation(i))},{priority:"low"}),this.listenTo(this.selection,"change",function(){n._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",function(e,t,i,r){n.differ.bufferMarkerChange(t.name,i,r,t.affectsData),null===i&&t.on("change",function(e,i){n.differ.bufferMarkerChange(t.name,i,t.getRange(),t.affectsData)})})}return d(e,[{key:"graveyard",get:function(){return this.getRoot("$graveyard")}},{key:"createRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(t))throw new A.a("model-document-createroot-name-exists",this,{name:t});var n=new Rs(this,e,t);return this.roots.add(n),n}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"getRootNames",value:function(){return Array.from(this.roots,function(e){return e.rootName}).filter(function(e){return"$graveyard"!=e})}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"toJSON",value:function(){var e=En(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}},{key:"_handleChangeBlock",value:function(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}},{key:"_getDefaultRoot",value:function(){var e,t=o(this.roots);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n!==this.graveyard)return n}}catch(i){t.e(i)}finally{t.f()}return this.graveyard}},{key:"_getDefaultRange",value:function(){var e=this._getDefaultRoot(),t=this.model,n=t.schema,i=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(i)||t.createRange(i)}},{key:"_validateSelectionRange",value:function(e){return Gs(e.start)&&Gs(e.end)}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,i=o(this._postFixers);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(this.selection.refresh(),t=r(e))break}}catch(a){i.e(a)}finally{i.f()}}while(t)}}]),e}();function Gs(e){var t=e.textNode;if(t){var n=t.data,i=e.offset-t.startOffset;return!Ys(n,i)&&!Js(n,i)}return!0}Xe(Qs,O);var $s=function(e){function t(){l(this,t),this._markers=new Map}return d(t,[{key:Symbol.iterator,value:function(){return this._markers.values()}},{key:"has",value:function(e){return this._markers.has(e)}},{key:"get",value:function(e){return this._markers.get(e)||null}},{key:"_set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e instanceof Ks?e.name:e;if(r.includes(","))throw new A.a("markercollection-incorrect-marker-name",this);var o=this._markers.get(r);if(o){var a=o.getRange(),s=!1;return a.isEqual(t)||(o._attachLiveRange(ka.fromRange(t)),s=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,s=!0),"boolean"==typeof i&&i!=o.affectsData&&(o._affectsData=i,s=!0),s&&this.fire("update:"+r,o,a,t),o}var c=ka.fromRange(t),l=new Ks(r,c,n,i);return this._markers.set(r,l),this.fire("update:"+r,l,null,t),l}},{key:"_remove",value:function(e){var t=e instanceof Ks?e.name:e,n=this._markers.get(t);return!!n&&(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0)}},{key:"_refresh",value:function(e){var t=e instanceof Ks?e.name:e,n=this._markers.get(t);if(!n)throw new A.a("markercollection-refresh-marker-not-exists",this);var i=n.getRange();this.fire("update:"+t,n,i,i,n.managedUsingOperations,n.affectsData)}},{key:"getMarkersAtPosition",value:i().mark(function e(t){var n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(a=r.value,e.t0=a.getRange().containsPosition(t),!e.t0){e.next=9;break}return e.next=9,a;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,13,16,19]])})},{key:"getMarkersIntersectingRange",value:i().mark(function e(t){var n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(a=r.value,e.t0=null!==a.getRange().getIntersection(t),!e.t0){e.next=9;break}return e.next=9,a;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,13,16,19]])})},{key:"destroy",value:function(){var e,t=o(this._markers.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._destroyMarker(n)}}catch(i){t.e(i)}finally{t.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:i().mark(function e(t){var n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(this._markers.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(a=r.value,e.t0=a.name.startsWith(t+":"),!e.t0){e.next=9;break}return e.next=9,a;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,13,16,19]])})},{key:"_destroyMarker",value:function(e){e.stopListening(),e._detachLiveRange()}}]),t}();Xe($s,O);var Ks=function(){function e(t,n,i,r){l(this,e),this.name=t,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=i,this._affectsData=r}return d(e,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new A.a("marker-destroyed",this);return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new A.a("marker-destroyed",this);return this._affectsData}},{key:"getStart",value:function(){if(!this._liveRange)throw new A.a("marker-destroyed",this);return this._liveRange.start.clone()}},{key:"getEnd",value:function(){if(!this._liveRange)throw new A.a("marker-destroyed",this);return this._liveRange.end.clone()}},{key:"getRange",value:function(){if(!this._liveRange)throw new A.a("marker-destroyed",this);return this._liveRange.toRange()}},{key:"is",value:function(e){return"marker"===e||"model:marker"===e}},{key:"_attachLiveRange",value:function(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}]),e}();Xe(Ks,O);var Xs=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"type",get:function(){return"noop"}},{key:"clone",value:function(){return new t(this.baseVersion)}},{key:"getReversed",value:function(){return new t(this.baseVersion+1)}},{key:"_execute",value:function(){}}],[{key:"className",get:function(){return"NoOperation"}}]),t}(gs),ec={};ec[Ss.className]=Ss,ec[Es.className]=Es,ec[Ps.className]=Ps,ec[Os.className]=Os,ec[Xs.className]=Xs,ec[gs.className]=gs,ec[Is.className]=Is,ec[Ms.className]=Ms,ec[Ls.className]=Ls,ec[Ns.className]=Ns;var tc=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(l(this,t),!(i=f(this,t,[e,n,r])).root.is("rootElement"))throw new A.a("model-liveposition-root-not-rootelement",e);return nc.call(v(i)),p(i)}return g(t,e),d(t,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}},{key:"toPosition",value:function(){return new ia(this.root,this.path.slice(),this.stickiness)}}],[{key:"fromPosition",value:function(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}]),t}(ia);function nc(){var e=this;this.listenTo(this.root.document.model,"applyOperation",function(t,n){var i=n[0];i.isDocumentOperation&&ic.call(e,i)},{priority:"low"})}function ic(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var n=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",n)}}Xe(tc,O);var rc=function(){function e(t,n,i){l(this,e),this.model=t,this.writer=n,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=n.createDocumentFragment(),this._documentFragmentPosition=n.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}return d(e,[{key:"handleNodes",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var i=n[t];this._handleNode(i)}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}},{key:"_updateLastNodeFromAutoParagraph",value:function(e){var t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new A.a("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}},{key:"getSelectionRange",value:function(){return this.nodeToSelect?sa._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}},{key:"getAffectedRange",value:function(){return this._affectedStart?new sa(this._affectedStart,this._affectedEnd):null}},{key:"destroy",value:function(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}},{key:"_handleNode",value:function(e){if(this.schema.isObject(e))this._handleObject(e);else{var t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e))?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}}},{key:"_insertPartialFragment",value:function(){if(!this._documentFragment.isEmpty){var e=tc.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}}},{key:"_handleObject",value:function(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}},{key:"_handleDisallowedNode",value:function(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}},{key:"_appendToFragment",value:function(e){if(!this.schema.checkChild(this.position,e))throw new A.a("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.nodeToSelect=this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?e:null,this._filterAttributesOf.push(e)}},{key:"_setAffectedBoundaries",value:function(e){this._affectedStart||(this._affectedStart=tc.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=tc.fromPosition(e,"toNext"))}},{key:"_mergeOnLeft",value:function(){var e=this._firstNode;if(e instanceof ea&&this._canMergeLeft(e)){var t=tc._createBefore(e);t.stickiness="toNext";var n=tc.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=tc._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=tc._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}},{key:"_mergeOnRight",value:function(){var e=this._lastNode;if(e instanceof ea&&this._canMergeRight(e)){var t=tc._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new A.a("insertcontent-invalid-insertion-position",this);this.position=ia._createAt(t.nodeBefore,"end");var n=tc.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=tc._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=tc._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}},{key:"_canMergeLeft",value:function(e){var t=e.previousSibling;return t instanceof ea&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}},{key:"_canMergeRight",value:function(e){var t=e.nextSibling;return t instanceof ea&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}},{key:"_tryAutoparagraphing",value:function(e){var t=this.writer.createElement("paragraph");this._getAllowedIn(t,this.position.parent)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();var t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}},{key:"_checkAndSplitToAllowedPosition",value:function(e){var t=this._getAllowedIn(e,this.position.parent);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}}return!0}},{key:"_getAllowedIn",value:function(e,t){return this.schema.checkChild(t,e)?t:t.parent?this._getAllowedIn(e,t.parent):null}}]),e}();function oc(e,t,n){var i=t.parent,r=n.parent;return i!=r&&!e.isLimit(i)&&!e.isLimit(r)&&function(e,t,n){var i,r=o(new sa(e,t).getWalker());try{for(r.s();!(i=r.n()).done;){var a=i.value;if(n.isLimit(a.item))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}(t,n,e)}function ac(e,t,n){var i=e.createElement("paragraph");e.insert(i,t),sc(e,n,e.createPositionAt(i,0))}function sc(e,t,n){t instanceof xa?e.setSelection(n):t.setTo(n)}function cc(e,t){var n=e.isForward,i=e.walker,r=e.unit,o=e.schema,a=t.type,s=t.item,c=t.nextPosition;if("text"==a)return"word"===e.unit?function(e,t){var n=e.position.textNode;if(n)for(var i=e.position.offset-n.startOffset;!uc(n.data,i,t)&&!dc(n,i,t);){e.next();var r=t?e.position.nodeAfter:e.position.nodeBefore;if(r&&r.is("$text")){var o=r.data.charAt(t?0:r.data.length-1);' ,.?!:;"-()'.includes(o)||(e.next(),n=e.position.textNode)}i=e.position.offset-n.startOffset}return e.position}(i,n):function(e,t){var n=e.position.textNode;if(n)for(var i=n.data,r=e.position.offset-n.startOffset;Ys(i,r)||"character"==t&&Js(i,r);)e.next(),r=e.position.offset-n.startOffset;return e.position}(i,r);if(a==(n?"elementStart":"elementEnd")){if(o.isSelectable(s))return ia._createAt(s,n?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(s))return void i.skip(function(){return!0});if(o.checkChild(c,"$text"))return c}}function lc(e,t){var n=ia._createAt(e.root,t?"end":0);return t?new sa(e,n):new sa(n,e)}function uc(e,t,n){return' ,.?!:;"-()'.includes(e.charAt(t+(n?0:-1)))}function dc(e,t,n){return t===(n?e.endOffset:0)}function hc(e,t){var n=[];Array.from(e.getItems({direction:"backward"})).map(function(e){return t.createRangeOn(e)}).filter(function(t){return(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end))}).forEach(function(e){n.push(e.start.parent),t.remove(e)}),n.forEach(function(e){for(var n=e;n.parent&&n.isEmpty;){var i=t.createRangeOn(n);n=n.parent,t.remove(i)}})}function fc(e,t){return e.isCollapsed?function(e,t){var n=e.start,i=t.getNearestSelectionRange(n);if(!i)return null;if(!i.isCollapsed)return i;var r=i.start;return n.isEqual(r)?null:new sa(r)}(e,t):function(e,t){var n=e.start,i=e.end,r=t.checkChild(n,"$text"),o=t.checkChild(i,"$text"),a=t.getLimitElement(n),s=t.getLimitElement(i);if(a===s){if(r&&o)return null;if(function(e,t,n){var i=e.nodeAfter&&!n.isLimit(e.nodeAfter)||n.checkChild(e,"$text"),r=t.nodeBefore&&!n.isLimit(t.nodeBefore)||n.checkChild(t,"$text");return i||r}(n,i,t)){var c=n.nodeAfter&&t.isSelectable(n.nodeAfter)?null:t.getNearestSelectionRange(n,"forward"),l=i.nodeBefore&&t.isSelectable(i.nodeBefore)?null:t.getNearestSelectionRange(i,"backward");return new sa(c?c.start:n,l?l.end:i)}}var u=a&&!a.is("rootElement"),d=s&&!s.is("rootElement");if(u||d){var h=n.nodeAfter&&i.nodeBefore&&n.nodeAfter.parent===i.nodeBefore.parent,f=u&&(!h||!vc(n.nodeAfter,t)),p=d&&(!h||!vc(i.nodeBefore,t)),v=n,g=i;return f&&(v=ia._createBefore(pc(a,t))),p&&(g=ia._createAfter(pc(s,t))),new sa(v,g)}return null}(e,t)}function pc(e,t){for(var n=e,i=n;t.isLimit(i)&&i.parent;)n=i,i=i.parent;return n}function vc(e,t){return e&&t.isSelectable(e)}var gc=function(){function e(){var t=this;l(this,e),this.markers=new $s,this.document=new Qs(this),this.schema=new Qa,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(e){return t.decorate(e)}),this.on("applyOperation",function(e,t){t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$documentFragment",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$documentFragment"}),this.schema.register("$marker"),this.schema.addChildCheck(function(e,t){if("$marker"===t.name)return!0}),function(e){e.document.registerPostFixer(function(t){return function(e,t){var n,i=t.document.selection,r=t.schema,a=[],s=!1,c=o(i.getRanges());try{for(c.s();!(n=c.n()).done;){var l=n.value,u=fc(l,r);u&&!u.isEqual(l)?(a.push(u),s=!0):a.push(l)}}catch(d){c.e(d)}finally{c.f()}s&&e.setSelection(function(e){var t=[];t.push(e.shift());var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=t.pop();if(r.isEqual(a))t.push(a);else if(r.isIntersecting(a)){var s=a.start.isAfter(r.start)?r.start:a.start,c=a.end.isAfter(r.end)?a.end:r.end,l=new sa(s,c);t.push(l)}else t.push(a),t.push(r)}}catch(d){i.e(d)}finally{i.f()}return t}(a),{backward:i.isBackward})}(t,e)})}(this),this.document.registerPostFixer(Ra)}return d(e,[{key:"change",value:function(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new vs,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(V){A.a.rethrowUnexpectedError(V,this)}}},{key:"enqueueChange",value:function(e,t){try{"string"==typeof e?e=new vs(e):"function"==typeof e&&(t=e,e=new vs),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(n){A.a.rethrowUnexpectedError(n,this)}}},{key:"applyOperation",value:function(e){e._execute()}},{key:"insertContent",value:function(e,t,n){return r=e,o=t,a=n,(i=this).change(function(e){var t;(t=o?o instanceof va||o instanceof xa?o:e.createSelection(o,a):i.document.selection).isCollapsed||i.deleteContent(t,{doNotAutoparagraph:!0});var n,s=new rc(i,e,t.anchor);n=r.is("documentFragment")?r.getChildren():[r],s.handleNodes(n);var c=s.getSelectionRange();c&&(t instanceof xa?e.setSelection(c):t.setTo(c));var l=s.getAffectedRange()||i.createRange(t.anchor);return s.destroy(),l});var i,r,o,a}},{key:"deleteContent",value:function(e,t){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){var i=t.getFirstRange();if("$graveyard"!=i.root.rootName){var a=e.schema;e.change(function(e){if(!n.doNotResetEntireContent&&function(e,t){var n=e.getLimitElement(t);if(!t.containsEntireContent(n))return!1;var i=t.getFirstRange();return i.start.parent!=i.end.parent&&e.checkChild(n,"paragraph")}(a,t))return c=t,l=(s=e).model.schema.getLimitElement(c),s.remove(s.createRangeIn(l)),void ac(s,s.createPositionAt(l,0),c);var s,c,l,u=function(e){var t=e.root.document.model,n=e.start,i=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){var r=function(e){var t,n=e.parent,i=n.root.document.model.schema,r=o(n.getAncestors({parentFirst:!0,includeSelf:!0}));try{for(r.s();!(t=r.n()).done;){var a=t.value;if(i.isLimit(a))return null;if(i.isBlock(a))return a}}catch(s){r.e(s)}finally{r.f()}}(i);if(r&&i.isTouching(t.createPositionAt(r,0))){var a=t.createSelection(e);t.modifySelection(a,{direction:"backward"}),i=a.getLastPosition()}}return[tc.fromPosition(n,"toPrevious"),tc.fromPosition(i,"toNext")]}(i),d=r(u,2),h=d[0],f=d[1];h.isTouching(f)||e.remove(e.createRange(h,f)),n.leaveUnmerged||(function(e,t,n){var i=e.model;if(oc(e.model.schema,t,n)){var o=r(function(e,t){for(var n=e.getAncestors(),i=t.getAncestors(),r=0;n[r]&&n[r]==i[r];)r++;return[n[r],i[r]]}(t,n),2),a=o[0],s=o[1];!a||!s||(!i.hasContent(a,{ignoreMarkers:!0})&&i.hasContent(s,{ignoreMarkers:!0})?function e(t,n,i,r){var o=n.parent,a=i.parent;if(o!=r&&a!=r){for(n=t.createPositionAfter(o),(i=t.createPositionBefore(a)).isEqual(n)||t.insert(o,i);n.parent.isEmpty;){var s=n.parent;n=t.createPositionBefore(s),t.remove(s)}i=t.createPositionBefore(a),function(e,t){var n=t.nodeBefore,i=t.nodeAfter;n.name!=i.name&&e.rename(n,i.name),e.clearAttributes(n),e.setAttributes(Object.fromEntries(i.getAttributes()),n),e.merge(t)}(t,i),oc(t.model.schema,n,i)&&e(t,n,i,r)}}(e,t,n,a.parent):function e(t,n,i,r){var o=n.parent,a=i.parent;if(o!=r&&a!=r){for(n=t.createPositionAfter(o),(i=t.createPositionBefore(a)).isEqual(n)||t.insert(a,n),t.merge(n);i.parent.isEmpty;){var s=i.parent;i=t.createPositionBefore(s),t.remove(s)}!oc(t.model.schema,n,i)||e(t,n,i,r)}}(e,t,n,a.parent))}}(e,h,f),a.removeDisallowedAttributes(h.parent.getChildren(),e)),sc(e,t,h),!n.doNotAutoparagraph&&function(e,t){var n=e.checkChild(t,"$text"),i=e.checkChild(t,"paragraph");return!n&&i}(a,h)&&ac(e,h,t),h.detach(),f.detach()})}}}(this,e,t)}},{key:"modifySelection",value:function(e,t){!function(e,t){for(var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.schema,a="backward"!=r.direction,s=r.unit?r.unit:"character",c=new ta({boundaries:lc(t.focus,a),singleCharacters:!0,direction:a?"forward":"backward"}),l={walker:c,schema:o,isForward:a,unit:s},u=function(){if(n.done)return{v:void 0};var i=cc(l,n.value);return i?{v:void(t instanceof xa?e.change(function(e){e.setSelectionFocus(i)}):t.setFocus(i))}:void 0};n=c.next();)if(i=u())return i.v}(this,e,t)}},{key:"getSelectedContent",value:function(e){return function(e,t){return e.change(function(e){var n=e.createDocumentFragment(),i=t.getFirstRange();if(!i||i.isCollapsed)return n;var r,a,s=i.start.root,c=i.start.getCommonPath(i.end),l=s.getNodeByPath(c),u=(r=i.start.parent==i.end.parent?i:e.createRange(e.createPositionAt(l,i.start.path[c.length]),e.createPositionAt(l,i.end.path[c.length]+1))).end.offset-r.start.offset,d=o(r.getItems({shallow:!0}));try{for(d.s();!(a=d.n()).done;){var h=a.value;h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),n):e.append(e.cloneElement(h,!0),n)}}catch(v){d.e(v)}finally{d.f()}if(r!=i){var f=i._getTransformedByMove(r.start,e.createPositionAt(n,0),u)[0],p=e.createRange(e.createPositionAt(n,0),f.start);hc(e.createRange(f.end,e.createPositionAt(n,"end")),e),hc(p,e)}return n})}(this,e)}},{key:"hasContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e instanceof ea?sa._createIn(e):e;if(n.isCollapsed)return!1;var i=t.ignoreWhitespaces,r=void 0!==i&&i,a=t.ignoreMarkers,s=void 0!==a&&a;if(!s){var c,l=o(this.markers.getMarkersIntersectingRange(n));try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.affectsData)return!0}}catch(p){l.e(p)}finally{l.f()}}var d,h=o(n.getItems());try{for(h.s();!(d=h.n()).done;){var f=d.value;if(this.schema.isContent(f)&&(!f.is("$textProxy")||!r||-1!==f.data.search(/\S/)))return!0}}catch(p){h.e(p)}finally{h.f()}return!1}},{key:"createPositionFromPath",value:function(e,t,n){return new ia(e,t,n)}},{key:"createPositionAt",value:function(e,t){return ia._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return ia._createAfter(e)}},{key:"createPositionBefore",value:function(e){return ia._createBefore(e)}},{key:"createRange",value:function(e,t){return new sa(e,t)}},{key:"createRangeIn",value:function(e){return sa._createIn(e)}},{key:"createRangeOn",value:function(e){return sa._createOn(e)}},{key:"createSelection",value:function(e,t,n){return new va(e,t,n)}},{key:"createBatch",value:function(e){return new vs(e)}},{key:"createOperationFromJSON",value:function(e){return function(){function e(){l(this,e)}return d(e,null,[{key:"fromJSON",value:function(e,t){return ec[e.__className].fromJSON(e,t)}}]),e}().fromJSON(e,this.document)}},{key:"destroy",value:function(){this.document.destroy(),this.stopListening()}},{key:"_runPendingChanges",value:function(){var e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new js(this,this._pendingChanges[0].batch);var t=this._pendingChanges[0].callback(this._currentWriter);e.push(t),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}]),e}();Xe(gc,Ye);var mc=function(e){function n(e){var t;return l(this,n),(t=f(this,n)).editor=e,t}return g(n,e),d(n,[{key:"set",value:function(e,i){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof i){var a=i;i=function(e,t){r.editor.execute(a),t()}}t(w(n.prototype),"set",this).call(this,e,i,o)}}]),n}(Do),bc=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this._context=n.context||new Sn({language:n.language}),this._context._addEditor(this,!n.context);var i=Array.from(this.constructor.builtinPlugins||[]);this.config=new gn(n,this.constructor.defaultConfig),this.config.define("plugins",i),this.config.define(this._context._getEditorConfig()),this.plugins=new wn(this,i,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Wa,this.set("state","initializing"),this.once("ready",function(){return t.state="ready"},{priority:"high"}),this.once("destroy",function(){return t.state="destroyed"},{priority:"high"}),this.set("isReadOnly",!1),this.model=new gc;var r=new ri;this.data=new ds(this.model,r),this.editing=new Ha(this.model,r),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new hs([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new mc(this),this.keystrokes.listenTo(this.editing.view.document)}return d(e,[{key:"initPlugins",value:function(){var e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],i=e.get("extraPlugins")||[],r=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(i),n,r)}},{key:"destroy",value:function(){var e=this,t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(function(t){return e.once("ready",t)})),t.then(function(){e.fire("destroy"),e.stopListening(),e.commands.destroy()}).then(function(){return e.plugins.destroy()}).then(function(){e.model.destroy(),e.data.destroy(),e.editing.destroy(),e.keystrokes.destroy()}).then(function(){return e._context._removeEditor(e)})}},{key:"execute",value:function(){try{var e;return(e=this.commands).execute.apply(e,arguments)}catch(V){A.a.rethrowUnexpectedError(V,this)}}},{key:"focus",value:function(){this.editing.view.focus()}}]),e}();Xe(bc,Ye);var yc=function(){function e(t){l(this,e),this.editor=t,this._components=new Map}return d(e,[{key:"names",value:i().mark(function e(){var t,n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this._components.values()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.originalName;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"add",value:function(e,t){this._components.set(kc(e),{callback:t,originalName:e})}},{key:"create",value:function(e){if(!this.has(e))throw new A.a("componentfactory-item-missing",this,{name:e});return this._components.get(kc(e)).callback(this.editor.locale)}},{key:"has",value:function(e){return this._components.has(kc(e))}}]),e}();function kc(e){return String(e).toLowerCase()}var wc=function(){function e(t){var n=this;l(this,e),this.editor=t,this.componentFactory=new yc(t),this.focusTracker=new jo,this._editableElementsMap=new Map,this.listenTo(t.editing.view.document,"layoutChanged",function(){return n.update()})}return d(e,[{key:"element",get:function(){return null}},{key:"update",value:function(){this.fire("update")}},{key:"destroy",value:function(){this.stopListening(),this.focusTracker.destroy();var e,t=o(this._editableElementsMap.values());try{for(t.s();!(e=t.n()).done;){e.value.ckeditorInstance=null}}catch(n){t.e(n)}finally{t.f()}this._editableElementsMap=new Map}},{key:"setEditableElement",value:function(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}},{key:"getEditableElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this._editableElementsMap.get(e)}},{key:"getEditableElementsNames",value:function(){return this._editableElementsMap.keys()}},{key:"_editableElements",get:function(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}]),e}();Xe(wc,O);var _c=function(e,t){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){this.set("hasAny",!1),this._actions=new kn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}},{key:"add",value:function(e){if("string"!=typeof e)throw new A.a("pendingactions-add-invalid-message",this);var t=Object.create(Ye);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}},{key:"remove",value:function(e){this._actions.remove(e),this.hasAny=!!this._actions.length}},{key:"first",get:function(){return this._actions.get(0)}},{key:t,value:function(){return this._actions[Symbol.iterator]()}}],[{key:"pluginName",get:function(){return"PendingActions"}}]),n}(Cn,Symbol.iterator),xc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Tc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Ac='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',Sc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',Cc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>',Oc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>';function Ec(e){var t=e.emitter,n=e.activator,i=e.callback,r=e.contextElements;t.listenTo(document,"mousedown",function(e,t){if(n()){var a,s="function"==typeof t.composedPath?t.composedPath():[],c=o(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(l.contains(t.target)||s.includes(l))return}}catch(u){c.e(u)}finally{c.f()}i()}})}function Pc(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=function(){e._isCssTransitionsDisabled=!0},e.enableCssTransitions=function(){e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function Ic(e){var t=e.view;t.listenTo(t.element,"submit",function(e,n){n.preventDefault(),t.fire("submit")},{useCapture:!0})}var Mc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l(this,t),(e=f(this,t,[n,{idProperty:"viewUid"}])).on("add",function(t,n,i){e._renderViewIntoCollectionParent(n,i)}),e.on("remove",function(t,n){n.element&&e._parentElement&&n.element.remove()}),e._parentElement=null,e}return g(t,e),d(t,[{key:"destroy",value:function(){this.map(function(e){return e.destroy()})}},{key:"setParent",value:function(e){this._parentElement=e;var t,n=o(this);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._renderViewIntoCollectionParent(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"delegate",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length||!n.every(function(e){return"string"==typeof e}))throw new A.a("ui-viewcollection-delegate-wrong-events",this);return{to:function(t){var i,r=o(e);try{for(r.s();!(i=r.n()).done;)for(var a=i.value,s=0,c=n;s<c.length;s++){var l=c[s];a.delegate(l).to(t)}}catch(u){r.e(u)}finally{r.f()}e.on("add",function(e,i){for(var r=0,o=n;r<o.length;r++){var a=o[r];i.delegate(a).to(t)}}),e.on("remove",function(e,i){for(var r=0,o=n;r<o.length;r++){var a=o[r];i.stopDelegating(a,t)}})}}}},{key:"_renderViewIntoCollectionParent",value:function(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}]),t}(kn);c(14);var Nc=function(){function e(t){l(this,e),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new kn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(e,n){n.locale=t}),this.decorate("render")}return d(e,[{key:"bindTemplate",get:function(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Lc.bind(this,this)}},{key:"createCollection",value:function(e){var t=new Mc(e);return this._viewCollections.add(t),t}},{key:"registerChild",value:function(e){yn(e)||(e=[e]);var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._unboundChildren.add(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"deregisterChild",value:function(e){yn(e)||(e=[e]);var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._unboundChildren.remove(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setTemplate",value:function(e){this.template=new Lc(e)}},{key:"extendTemplate",value:function(e){Lc.extend(this.template,e)}},{key:"render",value:function(){if(this.isRendered)throw new A.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}},{key:"destroy",value:function(){this.stopListening(),this._viewCollections.map(function(e){return e.destroy()}),this.template&&this.template._revertData&&this.template.revert(this.element)}}]),e}();Xe(Nc,Fr),Xe(Nc,Ye);var Lc=function(){function e(t){l(this,e),Object.assign(this,Uc(Bc(t))),this._isRendered=!1,this._revertData=null}return d(e,[{key:"render",value:function(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}},{key:"apply",value:function(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}},{key:"revert",value:function(e){if(!this._revertData)throw new A.a("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}},{key:"getViews",value:i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(i().mark(function e(t){var n,r,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!t.children){i.next=24;break}n=o(t.children),i.prev=2,n.s();case 4:if((r=n.n()).done){i.next=16;break}if(!Qc(a=r.value)){i.next=11;break}return i.next=9,a;case 9:i.next=14;break;case 11:if(i.t0=Gc(a),!i.t0){i.next=14;break}return i.delegateYield(e(a),"t1",14);case 14:i.next=4;break;case 16:i.next=21;break;case 18:i.prev=18,i.t2=i.catch(2),n.e(i.t2);case 21:return i.prev=21,n.f(),i.finish(21);case 24:case"end":return i.stop()}},e,null,[[2,18,21,24]])})(this),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"_renderNode",value:function(e){if(e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new A.a("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}},{key:"_renderElement",value:function(e){var t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}},{key:"_renderText",value:function(e){var t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Vc(this.text)?this._bindToObservable({schema:this.text,updater:zc(t),data:e}):t.textContent=this.text.join(""),t}},{key:"_renderAttributes",value:function(e){var t,n,i,r;if(this.attributes){var o=e.node,a=e.revertData;for(t in this.attributes)if(i=o.getAttribute(t),n=this.attributes[t],a&&(a.attributes[t]=i),r=Z(n[0])&&n[0].ns?n[0].ns:null,Vc(n)){var s=r?n[0].value:n;a&&Kc(t)&&s.unshift(i),this._bindToObservable({schema:s,updater:Fc(o,t,r),data:e})}else"style"==t&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],e):(a&&i&&Kc(t)&&n.unshift(i),n=n.map(function(e){return e&&e.value||e}).reduce(function(e,t){return e.concat(t)},[]).reduce(Wc,""),Jc(n)||o.setAttributeNS(r,t,n))}}},{key:"_renderStyleAttribute",value:function(e,t){var n=t.node;for(var i in e){var r=e[i];Vc(r)?this._bindToObservable({schema:[r],updater:qc(n,i),data:t}):n.style[i]=r}}},{key:"_renderElementChildren",value:function(e){var t,n=e.node,i=e.intoFragment?document.createDocumentFragment():n,r=e.isApplying,a=0,s=o(this.children);try{for(s.s();!(t=s.n()).done;){var c=t.value;if($c(c)){if(!r){c.setParent(n);var l,u=o(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;i.appendChild(d.element)}}catch(f){u.e(f)}finally{u.f()}}}else if(Qc(c))r||(c.isRendered||c.render(),i.appendChild(c.element));else if(Ar(c))i.appendChild(c);else if(r){var h={children:[],bindings:[],attributes:{}};e.revertData.children.push(h),c._renderNode({node:i.childNodes[a++],isApplying:!0,revertData:h})}else i.appendChild(c.render())}}catch(f){s.e(f)}finally{s.f()}e.intoFragment&&n.appendChild(i)}},{key:"_setUpListeners",value:function(e){var t=this;if(this.eventListeners){var n=function(n){var i=t.eventListeners[n].map(function(t){var i=r(n.split("@"),2),o=i[0],a=i[1];return t.activateDomEventListener(o,a,e)});e.revertData&&e.revertData.bindings.push(i)};for(var i in this.eventListeners)n(i)}}},{key:"_bindToObservable",value:function(e){var t=e.schema,n=e.updater,i=e.data,r=i.revertData;Zc(t,n,i);var o=t.filter(function(e){return!Jc(e)}).filter(function(e){return e.observable}).map(function(e){return e.activateAttributeListener(t,n,i)});r&&r.bindings.push(o)}},{key:"_revertTemplateFromNode",value:function(e,t){var n,i=o(t.bindings);try{for(i.s();!(n=i.n()).done;){var r,a=o(n.value);try{for(a.s();!(r=a.n()).done;){(0,r.value)()}}catch(u){a.e(u)}finally{a.f()}}}catch(u){i.e(u)}finally{i.f()}if(t.text)e.textContent=t.text;else{for(var s in t.attributes){var c=t.attributes[s];null===c?e.removeAttribute(s):e.setAttribute(s,c)}for(var l=0;l<t.children.length;++l)this._revertTemplateFromNode(e.childNodes[l],t.children[l])}}}],[{key:"bind",value:function(e,t){return{to:function(n,i){return new jc({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:i})},if:function(n,i,r){return new Dc({observable:e,emitter:t,attribute:n,valueIfTrue:i,callback:r})}}}},{key:"extend",value:function(e,t){if(e._isRendered)throw new A.a("template-extend-render",[this,e]);!function e(t,n,i){if(n.attributes&&(t.attributes||(t.attributes={}),Yc(t.attributes,n.attributes)),n.eventListeners&&(t.eventListeners||(t.eventListeners={}),Yc(t.eventListeners,n.eventListeners)),n.text&&(i=t.text).push.apply(i,a(n.text)),n.children&&n.children.length){if(t.children.length!=n.children.length)throw new A.a("ui-template-extend-children-mismatch",t);var r,s=0,c=o(n.children);try{for(c.s();!(r=c.n()).done;){var l=r.value;e(t.children[s++],l)}}catch(u){c.e(u)}finally{c.f()}}}(e,Uc(Bc(t)))}}]),e}();Xe(Lc,O);var Rc=function(){function e(t){l(this,e),Object.assign(this,t)}return d(e,[{key:"getValue",value:function(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}},{key:"activateAttributeListener",value:function(e,t,n){var i=this,r=function(){return Zc(e,t,n)};return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),function(){i.emitter.stopListening(i.observable,"change:"+i.attribute,r)}}}]),e}(),jc=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"activateDomEventListener",value:function(e,t,n){var i=this,r=function(e,n){t&&!n.target.matches(t)||("function"==typeof i.eventNameOrFunction?i.eventNameOrFunction(n):i.observable.fire(i.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,e,r),function(){i.emitter.stopListening(n.node,e,r)}}}]),t}(Rc),Dc=function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"getValue",value:function(e){return!Jc(t(w(n.prototype),"getValue",this).call(this,e))&&(this.valueIfTrue||!0)}}]),n}(Rc);function Vc(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Vc):e instanceof Rc)}function Zc(e,t,n){var i,r=n.node,o=(i=r,e.map(function(e){return e instanceof Rc?e.getValue(i):e}));Jc(o=1==e.length&&e[0]instanceof Dc?o[0]:o.reduce(Wc,""))?t.remove():t.set(o)}function zc(e){return{set:function(t){e.textContent=t},remove:function(){e.textContent=""}}}function Fc(e,t,n){return{set:function(i){e.setAttributeNS(n,t,i)},remove:function(){e.removeAttributeNS(n,t)}}}function qc(e,t){return{set:function(n){e.style[t]=n},remove:function(){e.style[t]=null}}}function Bc(e){return pn(e,function(e){if(e&&(e instanceof Rc||Gc(e)||Qc(e)||$c(e)))return e})}function Uc(e){if("string"==typeof e?e=function(e){return{text:[e]}}(e):e.text&&function(e){e.text=_n(e.text)}(e),e.on&&(e.eventListeners=function(e){for(var t in e)Hc(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(var t in e)e[t].value&&(e[t].value=_n(e[t].value)),Hc(e,t)}(e.attributes);var t=[];if(e.children)if($c(e.children))t.push(e.children);else{var n,i=o(e.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;Gc(r)||Qc(r)||Ar(r)?t.push(r):t.push(new Lc(r))}}catch(a){i.e(a)}finally{i.f()}}e.children=t}return e}function Hc(e,t){e[t]=_n(e[t])}function Wc(e,t){return Jc(t)?e:Jc(e)?t:"".concat(e," ").concat(t)}function Yc(e,t){for(var n in t){var i;e[n]?(i=e[n]).push.apply(i,a(t[n])):e[n]=t[n]}}function Jc(e){return!e&&0!==e}function Qc(e){return e instanceof Nc}function Gc(e){return e instanceof Lc}function $c(e){return e instanceof Mc}function Kc(e){return"class"==e||"style"==e}var Xc=function(e){function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l(this,n),(t=f(this,n,[i])).locale=e,t}return g(n,e),d(n,[{key:"attachToDom",value:function(){this._bodyCollectionContainer=new Lc({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=n&&n.xmlns,a=r?e.createElementNS(r,t):e.createElement(t);for(var s in n)a.setAttribute(s,n[s]);!Ao(i)&&yn(i)||(i=[i]);var c,l=o(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;Ao(u)&&(u=e.createTextNode(u)),a.appendChild(u)}}catch(d){l.e(d)}finally{l.f()}return a}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}},{key:"detachFromDom",value:function(){t(w(n.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}]),n}(Mc);c(16);var el=function(e){function n(){var e;l(this,n);var t=(e=f(this,n)).bindTemplate;return e.set("content",""),e.set("viewBox","0 0 20 20"),e.set("fillColor",""),e.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}}),e}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){e._updateXMLContent(),e._colorFillPaths()}),this.on("change:fillColor",function(){e._colorFillPaths()})}},{key:"_updateXMLContent",value:function(){if(this.content){var e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}},{key:"_colorFillPaths",value:function(){var e=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(t){t.style.fill=e.fillColor})}}]),n}(Nc);c(18);var tl=function(e){function t(e){var n;l(this,t),(n=f(this,t,[e])).set("text",""),n.set("position","s");var i=n.bindTemplate;return n.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",i.to("position",function(e){return"ck-tooltip_"+e}),i.if("text","ck-hidden",function(e){return!e.trim()})]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:i.to("text")}]}]}),n}return g(t,e),d(t)}(Nc);c(20);var nl=function(e){function n(e){var t;l(this,n);var i=(t=f(this,n,[e])).bindTemplate,r=x();return t.set("class"),t.set("labelStyle"),t.set("icon"),t.set("isEnabled",!0),t.set("isOn",!1),t.set("isVisible",!0),t.set("isToggleable",!1),t.set("keystroke"),t.set("label"),t.set("tabindex",-1),t.set("tooltip"),t.set("tooltipPosition","s"),t.set("type","button"),t.set("withText",!1),t.set("withKeystroke",!1),t.children=t.createCollection(),t.tooltipView=t._createTooltipView(),t.labelView=t._createLabelView(r),t.iconView=new el,t.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),t.keystrokeView=t._createKeystrokeView(),t.bind("_tooltipString").to(v(t),"tooltip",v(t),"label",v(t),"keystroke",t._getTooltipString.bind(v(t))),t.setTemplate({tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",function(e){return!e}),i.if("isVisible","ck-hidden",function(e){return!e}),i.to("isOn",function(e){return e?"ck-on":"ck-off"}),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],type:i.to("type",function(e){return e||"button"}),tabindex:i.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+r,"aria-disabled":i.if("isEnabled",!0,function(e){return!e}),"aria-pressed":i.to("isOn",function(e){return!!t.isToggleable&&String(e)})},children:t.children,on:{mousedown:i.to(function(e){e.preventDefault()}),click:i.to(function(e){t.isEnabled?t.fire("execute"):e.preventDefault()})}}),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}},{key:"focus",value:function(){this.element.focus()}},{key:"_createTooltipView",value:function(){var e=new tl;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}},{key:"_createLabelView",value:function(e){var t=new Nc;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:"ck-editor__aria-label_"+e},children:[{text:this.bindTemplate.to("label")}]}),t}},{key:"_createKeystrokeView",value:function(){var e=new Nc;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(e){return Wi(e)})}]}),e}},{key:"_getTooltipString",value:function(e,t,n){return e?"string"==typeof e?e:(n&&(n=Wi(n)),e instanceof Function?e(t,n):"".concat(t).concat(n?" (".concat(n,")"):"")):""}}]),n}(Nc);c(22);var il=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e])).isToggleable=!0,t.toggleSwitchView=t._createToggleView(),t.extendTemplate({attributes:{class:"ck-switchbutton"}}),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView)}},{key:"_createToggleView",value:function(){var e=new Nc;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}]),n}(nl);function rl(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:""+e.color}}}}var ol=function(e){function n(e){var t;l(this,n);var i=(t=f(this,n,[e])).bindTemplate;return t.set("color"),t.set("hasBorder"),t.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',t.extendTemplate({attributes:{style:{backgroundColor:i.to("color")},class:["ck","ck-color-grid__tile",i.if("hasBorder","ck-color-table__color-tile_bordered")]}}),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.iconView.fillColor="hsl(0, 0%, 100%)"}}]),n}(nl),al=function(){function e(t){var n=this;if(l(this,e),Object.assign(this,t),t.actions&&t.keystrokeHandler){var i=function(e){var i=t.actions[e];"string"==typeof i&&(i=[i]);var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;t.keystrokeHandler.set(s,function(t,i){n[e](),i()})}}catch(c){a.e(c)}finally{a.f()}};for(var r in t.actions)i(r)}}return d(e,[{key:"first",get:function(){return this.focusables.find(sl)||null}},{key:"last",get:function(){return this.focusables.filter(sl).slice(-1)[0]||null}},{key:"next",get:function(){return this._getFocusableItem(1)}},{key:"previous",get:function(){return this._getFocusableItem(-1)}},{key:"current",get:function(){var e=this,t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(n,i){var r=n.element===e.focusTracker.focusedElement;return r&&(t=i),r}),t)}},{key:"focusFirst",value:function(){this._focus(this.first)}},{key:"focusLast",value:function(){this._focus(this.last)}},{key:"focusNext",value:function(){this._focus(this.next)}},{key:"focusPrevious",value:function(){this._focus(this.previous)}},{key:"_focus",value:function(e){e&&e.focus()}},{key:"_getFocusableItem",value:function(e){var t=this.current,n=this.focusables.length;if(!n)return null;if(null===t)return this[1===e?"first":"last"];var i=(t+n+e)%n;do{var r=this.focusables.get(i);if(sl(r))return r;i=(i+n+e)%n}while(i!==t);return null}}]),e}();function sl(e){return!(!e.focus||"none"==Pr.window.getComputedStyle(e.element).display)}c(24);var cl=function(e){function n(e,t){var i;l(this,n),i=f(this,n,[e]);var r=t&&t.colorDefinitions||[],a={};return t&&t.columns&&(a.gridTemplateColumns="repeat( ".concat(t.columns,", 1fr)")),i.set("selectedColor"),i.items=i.createCollection(),i.focusTracker=new jo,i.keystrokes=new Do,i._focusCycler=new al({focusables:i.items,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),i.items.on("add",function(e,t){t.isOn=t.color===i.selectedColor}),r.forEach(function(e){var t=new ol;t.set({color:e.color,label:e.label,tooltip:!0,hasBorder:e.options.hasBorder}),t.on("execute",function(){i.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label})}),i.items.add(t)}),i.setTemplate({tag:"div",children:i.items,attributes:{class:["ck","ck-color-grid"],style:a}}),i.on("change:selectedColor",function(e,t,n){var r,a=o(i.items);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.isOn=s.color===n}}catch(c){a.e(c)}finally{a.f()}}),i}return g(n,e),d(n,[{key:"focus",value:function(){this.items.length&&this.items.first.focus()}},{key:"focusLast",value:function(){this.items.length&&this.items.last.focus()}},{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this);var i,r=o(this.items);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.focusTracker.add(a.element)}}catch(s){r.e(s)}finally{r.f()}this.items.on("add",function(t,n){e.focusTracker.add(n.element)}),this.items.on("remove",function(t,n){e.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element)}}]),n}(Nc),ll='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',ul=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e])).arrowView=t._createArrowView(),t.extendTemplate({attributes:{"aria-haspopup":!0}}),t.delegate("execute").to(v(t),"open"),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.children.add(this.arrowView)}},{key:"_createArrowView",value:function(){var e=new el;return e.content=ll,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}]),n}(nl);c(26);var dl=function(e){function n(e){var t;l(this,n);var i=(t=f(this,n,[e])).bindTemplate;return t.set("icon"),t.set("isEnabled",!0),t.set("isOn",!1),t.set("isToggleable",!1),t.set("isVisible",!0),t.set("keystroke"),t.set("label"),t.set("tabindex",-1),t.set("tooltip"),t.set("tooltipPosition","s"),t.set("type","button"),t.set("withText",!1),t.children=t.createCollection(),t.actionView=t._createActionView(),t.arrowView=t._createArrowView(),t.keystrokes=new Do,t.focusTracker=new jo,t.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.if("isVisible","ck-hidden",function(e){return!e}),t.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:t.children}),t}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",function(t,n){e.focusTracker.focusedElement===e.actionView.element&&(e.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",function(t,n){e.focusTracker.focusedElement===e.arrowView.element&&(e.actionView.focus(),n())})}},{key:"focus",value:function(){this.actionView.focus()}},{key:"_createActionView",value:function(){var e=new nl;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}},{key:"_createArrowView",value:function(){var e=new nl,t=e.bindTemplate;return e.icon=ll,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",function(e){return String(e)})}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}]),n}(Nc),hl=function(e){function t(e){var n;l(this,t);var i=(n=f(this,t,[e])).bindTemplate;return n.set("isVisible",!1),n.set("position","se"),n.children=n.createCollection(),n.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",function(e){return"ck-dropdown__panel_"+e}),i.if("isVisible","ck-dropdown__panel-visible")]},children:n.children,on:{selectstart:i.to(function(e){return e.preventDefault()})}}),n}return g(t,e),d(t,[{key:"focus",value:function(){this.children.length&&this.children.first.focus()}},{key:"focusLast",value:function(){if(this.children.length){var e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}]),t}(Nc);function fl(e){var t=e.element,n=e.target,i=e.positions,a=e.limiter,s=e.fitInViewport;Q(n)&&(n=n()),Q(a)&&(a=a());var c,l,u=(c=t)&&c.parentNode?c.offsetParent===Pr.document.body?null:c.offsetParent:null,d=new Eo(t),h=new Eo(n),f=(a||s)&&function(e,t){var n=t.viewportRect,i=t.elementRect.getArea(),a=function(e,t){var n,i=t.targetRect,a=t.elementRect,s=t.limiterRect,c=t.viewportRect,l=[],u=a.getArea(),d=o(e);try{for(d.s();!(n=d.n()).done;){var h=pl(n.value,i,a);if(h){var f=r(h,2),p=f[0],v=f[1],g=0,m=0;if(s)if(c){var b=s.getIntersection(c);b&&(g=b.getIntersectionArea(v))}else g=s.getIntersectionArea(v);c&&(m=c.getIntersectionArea(v));var y={positionName:p,positionRect:v,limiterIntersectArea:g,viewportIntersectArea:m};if(g===u)return[y];l.push(y)}}}catch(k){d.e(k)}finally{d.f()}return l}(e,t);if(n){var s=vl(a.filter(function(e){return e.viewportIntersectArea===i}),i);if(s)return s}return vl(a,i)}(i,{targetRect:h,elementRect:d,limiterRect:a&&new Eo(a).getVisible(),viewportRect:s&&new Eo(Pr.window)})||pl(i[0],h,d),p=r(f,2);l=p[0];var v=gl(p[1]);return u&&(v=function(e,t){var n=e.left,i=e.top,r=gl(new Eo(t)),o=Co(t);return n-=r.left,i-=r.top,n+=t.scrollLeft,i+=t.scrollTop,{left:n-=o.left,top:i-=o.top}}(v,u)),{left:v.left,top:v.top,name:l}}function pl(e,t,n){var i=e(t,n);if(!i)return null;var r=i.left,o=i.top;return[i.name,n.clone().moveTo(r,o)]}function vl(e,t){var n,i,r,a=0,s=o(e);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.positionName,u=c.positionRect,d=c.limiterIntersectArea,h=c.viewportIntersectArea;if(d===t)return[l,u];var f=_(h,2)+_(d,2);f>a&&(a=f,n=u,i=l)}}catch(p){s.e(p)}finally{s.f()}return n?[i,n]:null}function gl(e){var t=e.left,n=e.top,i=Pr.window;return{left:t+i.scrollX,top:n+i.scrollY}}c(28);var ml=function(e){function n(e,t,i){var r;l(this,n);var o=(r=f(this,n,[e])).bindTemplate;return r.buttonView=t,r.panelView=i,r.set("isOpen",!1),r.set("isEnabled",!0),r.set("class"),r.set("id"),r.set("panelPosition","auto"),r.keystrokes=new Do,r.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",o.to("class"),o.if("isEnabled","ck-disabled",function(e){return!e})],id:o.to("id"),"aria-describedby":o.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}}),r}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){e.isOpen=!e.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){e.isOpen&&(e.panelView.position="auto"===e.panelPosition?n._getOptimalPosition({element:e.panelView.element,target:e.buttonView.element,fitInViewport:!0,positions:e._panelPositions}).name:e.panelPosition)}),this.keystrokes.listenTo(this.element);var i=function(t,n){e.isOpen&&(e.buttonView.focus(),e.isOpen=!1,n())};this.keystrokes.set("arrowdown",function(t,n){e.buttonView.isEnabled&&!e.isOpen&&(e.isOpen=!0,n())}),this.keystrokes.set("arrowright",function(t,n){e.isOpen&&n()}),this.keystrokes.set("arrowleft",i),this.keystrokes.set("esc",i)}},{key:"focus",value:function(){this.buttonView.focus()}},{key:"_panelPositions",get:function(){var e=n.defaultPanelPositions,t=e.south,i=e.north,r=e.southEast,o=e.southWest,a=e.northEast,s=e.northWest,c=e.southMiddleEast,l=e.southMiddleWest,u=e.northMiddleEast,d=e.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[r,o,c,l,t,a,s,u,d,i]:[o,r,l,c,t,s,a,d,u,i]}}]),n}(Nc);ml.defaultPanelPositions={south:function(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}},southEast:function(e){return{top:e.bottom,left:e.left,name:"se"}},southWest:function(e,t){return{top:e.bottom,left:e.left-t.width+e.width,name:"sw"}},southMiddleEast:function(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}},southMiddleWest:function(e,t){return{top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}},north:function(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}},northEast:function(e,t){return{top:e.top-t.height,left:e.left,name:"ne"}},northWest:function(e,t){return{top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}},northMiddleEast:function(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}},northMiddleWest:function(e,t){return{top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"}}},ml._getOptimalPosition=fl;var bl=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}}),n}return g(t,e),d(t)}(Nc),yl=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}}),n}return g(t,e),d(t)}(Nc);c(30);var kl=function(e){function n(e,t){var i;l(this,n);var r=(i=f(this,n,[e])).bindTemplate,o=i.t;i.options=t||{},i.set("ariaLabel",o("Editor toolbar")),i.set("maxWidth","auto"),i.items=i.createCollection(),i.focusTracker=new jo,i.keystrokes=new Do,i.set("class"),i.set("isCompact",!1),i.itemsView=new wl(e),i.children=i.createCollection(),i.children.add(i.itemsView),i.focusables=i.createCollection(),i._focusCycler=new al({focusables:i.focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});var a,s=["ck","ck-toolbar",r.to("class"),r.if("isCompact","ck-toolbar_compact")];return i.options.shouldGroupWhenFull&&i.options.isFloating&&s.push("ck-toolbar_floating"),i.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":r.to("ariaLabel"),style:{maxWidth:r.to("maxWidth")}},children:i.children,on:{mousedown:(a=v(i),a.bindTemplate.to(function(e){e.target===a.element&&e.preventDefault()}))}}),i._behavior=i.options.shouldGroupWhenFull?new xl(v(i)):new _l(v(i)),i}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this);var i,r=o(this.items);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.focusTracker.add(a.element)}}catch(s){r.e(s)}finally{r.f()}this.items.on("add",function(t,n){e.focusTracker.add(n.element)}),this.items.on("remove",function(t,n){e.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}},{key:"destroy",value:function(){return this._behavior.destroy(),t(w(n.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"fillFromConfig",value:function(e,t){var n=this,i=function(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}(e),r=i.items.filter(function(e,r,o){return"|"===e||-1===i.removeItems.indexOf(e)&&("-"===e?!n.options.shouldGroupWhenFull||(Object(A.b)("toolbarview-line-break-ignored-when-grouping-items",o),!1):!!t.has(e)||(Object(A.b)("toolbarview-item-unavailable",{name:e}),!1))}),o=this._cleanSeparators(r).map(function(e){return"|"===e?new bl:"-"===e?new yl:t.create(e)});this.items.addMany(o)}},{key:"_cleanSeparators",value:function(e){var t=function(e){return"-"!==e&&"|"!==e},n=e.length,i=e.findIndex(t),r=n-e.slice().reverse().findIndex(t);return e.slice(i,r).filter(function(e,n,i){return!!t(e)||!(n>0&&i[n-1]===e)})}}]),n}(Nc),wl=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).children=n.createCollection(),n.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:n.children}),n}return g(t,e),d(t)}(Nc),_l=function(){function e(t){l(this,e);var n=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(function(e){return e}),t.focusables.bindTo(t.items).using(function(e){return e}),t.extendTemplate({attributes:{class:[n.if("isVertical","ck-toolbar_vertical")]}})}return d(e,[{key:"render",value:function(){}},{key:"destroy",value:function(){}}]),e}(),xl=function(){function e(t){var n=this;l(this,e),this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,t.itemsView.children.bindTo(this.ungroupedItems).using(function(e){return e}),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),t.children.on("add",this._updateFocusCycleableItems.bind(this)),t.children.on("remove",this._updateFocusCycleableItems.bind(this)),t.items.on("change",function(e,t){var i,r=t.index,a=o(t.removed);try{for(a.s();!(i=a.n()).done;){var s=i.value;r>=n.ungroupedItems.length?n.groupedItems.remove(s):n.ungroupedItems.remove(s)}}catch(u){a.e(u)}finally{a.f()}for(var c=r;c<r+t.added.length;c++){var l=t.added[c-r];c>n.ungroupedItems.length?n.groupedItems.add(l,c-n.ungroupedItems.length):n.ungroupedItems.add(l,c)}n._updateGrouping()}),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}return d(e,[{key:"render",value:function(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}},{key:"destroy",value:function(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}},{key:"_updateGrouping",value:function(){if(this.viewElement.ownerDocument.body.contains(this.viewElement))if(this.viewElement.offsetParent){for(var e,t=this.groupedItems.length;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}else this.shouldUpdateGroupingOnNextResize=!0}},{key:"_areItemsOverflowing",get:function(){if(!this.ungroupedItems.length)return!1;var e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new Eo(e.lastChild),i=new Eo(e);if(!this.cachedPadding){var r=Pr.window.getComputedStyle(e);this.cachedPadding=Number.parseInt(r["ltr"===t?"paddingRight":"paddingLeft"])}return"ltr"===t?n.right>i.right-this.cachedPadding:n.left<i.left+this.cachedPadding}},{key:"_enableGroupingOnResize",value:function(){var e,t=this;this.resizeObserver=new Mo(this.viewElement,function(n){e&&e===n.contentRect.width&&!t.shouldUpdateGroupingOnNextResize||(t.shouldUpdateGroupingOnNextResize=!1,t._updateGrouping(),e=n.contentRect.width)}),this._updateGrouping()}},{key:"_enableGroupingOnMaxWidthChange",value:function(e){var t=this;e.on("change:maxWidth",function(){t._updateGrouping()})}},{key:"_groupLastItem",value:function(){this.groupedItems.length||(this.viewChildren.add(new bl),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}},{key:"_ungroupFirstItem",value:function(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}},{key:"_createGroupedItemsDropdown",value:function(){var e=this.viewLocale,t=e.t,n=Cl(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",Ol(n,[]),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}),n.toolbarView.items.bindTo(this.groupedItems).using(function(e){return e}),n}},{key:"_updateFocusCycleableItems",value:function(){var e=this;this.viewFocusables.clear(),this.ungroupedItems.map(function(t){e.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}]),e}();c(32);var Tl=function(e){function n(){var e;return l(this,n),(e=f(this,n)).items=e.createCollection(),e.focusTracker=new jo,e.keystrokes=new Do,e._focusCycler=new al({focusables:e.items,focusTracker:e.focusTracker,keystrokeHandler:e.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),e.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:e.items}),e}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this);var i,r=o(this.items);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.focusTracker.add(a.element)}}catch(s){r.e(s)}finally{r.f()}this.items.on("add",function(t,n){e.focusTracker.add(n.element)}),this.items.on("remove",function(t,n){e.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}}]),n}(Nc),Al=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).children=n.createCollection(),n.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:n.children}),n}return g(t,e),d(t,[{key:"focus",value:function(){this.children.first.focus()}}]),t}(Nc),Sl=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}}),n}return g(t,e),d(t)}(Nc);function Cl(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ul,r=new i(e),o=new hl(e),a=new ml(e,r,o);return r.bind("isEnabled").to(a),r instanceof ul?r.bind("isOn").to(a,"isOpen"):r.arrowView.bind("isOn").to(a,"isOpen"),(n=t=a).on("render",function(){Ec({emitter:n,activator:function(){return n.isOpen},callback:function(){n.isOpen=!1},contextElements:[n.element]})}),function(e){e.on("execute",function(t){t.source instanceof il||(e.isOpen=!1)})}(t),function(e){e.keystrokes.set("arrowdown",function(t,n){e.isOpen&&(e.panelView.focus(),n())}),e.keystrokes.set("arrowup",function(t,n){e.isOpen&&(e.panelView.focusLast(),n())})}(t),a}function Ol(e,t){var n=e.locale,i=n.t,r=e.toolbarView=new kl(n);r.set("ariaLabel",i("Dropdown toolbar")),e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map(function(e){return r.items.add(e)}),e.panelView.children.add(r),r.items.delegate("execute").to(e)}function El(e,t){var n=e.locale,i=e.listView=new Tl(n);i.items.bindTo(t).using(function(e){var t=e.type,i=e.model;if("separator"===t)return new Sl(n);if("button"===t||"switchbutton"===t){var r,o,s=new Al(n);return(r=o="button"===t?new nl(n):new il(n)).bind.apply(r,a(Object.keys(i))).to(i),o.delegate("execute").to(s),s.children.add(o),s}}),e.panelView.children.add(i),i.items.delegate("execute").to(e)}c(34),c(36),c(38);var Pl=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e])).body=new Xc(e),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.body.attachToDom()}},{key:"destroy",value:function(){return this.body.detachFromDom(),t(w(n.prototype),"destroy",this).call(this)}}]),n}(Nc);c(40);var Il=function(e){function t(e){var n;l(this,t),(n=f(this,t,[e])).set("text"),n.set("for"),n.id="ck-editor__label_"+x();var i=n.bindTemplate;return n.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:n.id,for:i.to("for")},children:[{text:i.to("text")}]}),n}return g(t,e),d(t)}(Nc),Ml=function(e){function n(e,t,i){var r;return l(this,n),(r=f(this,n,[e])).setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),r.name=null,r.set("isFocused",!1),r._editableElement=i,r._hasExternalElement=!!r._editableElement,r._editingView=t,r}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return e._updateIsFocusedClasses()}),this._updateIsFocusedClasses()}},{key:"destroy",value:function(){this._hasExternalElement&&this.template.revert(this._editableElement),t(w(n.prototype),"destroy",this).call(this)}},{key:"_updateIsFocusedClasses",value:function(){var e=this._editingView;function t(t){e.change(function(n){var i=e.document.getRoot(t.name);n.addClass(t.isFocused?"ck-focused":"ck-blurred",i),n.removeClass(t.isFocused?"ck-blurred":"ck-focused",i)})}e.isRenderingInProgress?function n(i){e.once("change:isRenderingInProgress",function(e,r,o){o?n(i):t(i)})}(this):t(this)}}]),n}(Nc),Nl=function(e){function n(e,t,i){var r;return l(this,n),(r=f(this,n,[e,t,i])).extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),r}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this);var i=this._editingView,r=this.t;i.change(function(t){var n=i.document.getRoot(e.name);t.setAttribute("aria-label",r("Rich Text Editor, %0",e.name),n)})}}]),n}(Ml);c(42),c(44);var Ll=function(e){function n(e){var t;l(this,n),(t=f(this,n,[e])).set("value"),t.set("id"),t.set("placeholder"),t.set("isReadOnly",!1),t.set("hasError",!1),t.set("ariaDescribedById"),t.focusTracker=new jo,t.bind("isFocused").to(t.focusTracker),t.set("isEmpty",!0);var i=t.bindTemplate;return t.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",i.if("isFocused","ck-input_focused"),i.if("isEmpty","ck-input-text_empty"),i.if("hasError","ck-error")],id:i.to("id"),placeholder:i.to("placeholder"),readonly:i.to("isReadOnly"),"aria-invalid":i.if("hasError",!0),"aria-describedby":i.to("ariaDescribedById")},on:{input:i.to("input"),change:i.to(t._updateIsEmpty.bind(v(t)))}}),t}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",function(t,n,i){e._setDomElementValue(i),e._updateIsEmpty()})}},{key:"select",value:function(){this.element.select()}},{key:"focus",value:function(){this.element.focus()}},{key:"_updateIsEmpty",value:function(){this.isEmpty=!this.element.value}},{key:"_setDomElementValue",value:function(e){this.element.value=e||0===e?e:""}}]),n}(Nc);c(46);var Rl=function(e){function t(e,n){var i;l(this,t),i=f(this,t,[e]);var r="ck-labeled-field-view-"+x(),o="ck-labeled-field-view-status-"+x();i.fieldView=n(v(i),r,o),i.set("label"),i.set("isEnabled",!0),i.set("isEmpty",!0),i.set("isFocused",!1),i.set("errorText",null),i.set("infoText",null),i.set("class"),i.set("placeholder"),i.labelView=i._createLabelView(r),i.statusView=i._createStatusView(o),i.bind("_statusText").to(v(i),"errorText",v(i),"infoText",function(e,t){return e||t});var a=i.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",a.to("class"),a.if("isEnabled","ck-disabled",function(e){return!e}),a.if("isEmpty","ck-labeled-field-view_empty"),a.if("isFocused","ck-labeled-field-view_focused"),a.if("placeholder","ck-labeled-field-view_placeholder"),a.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[i.fieldView,i.labelView]},i.statusView]}),i}return g(t,e),d(t,[{key:"_createLabelView",value:function(e){var t=new Il(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}},{key:"_createStatusView",value:function(e){var t=new Nc(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",function(e){return!e})],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}},{key:"focus",value:function(){this.fieldView.focus()}}]),t}(Nc);function jl(e,t,n){var i=new Ll(e.locale);return i.set({id:t,ariaDescribedById:n}),i.bind("isReadOnly").to(e,"isEnabled",function(e){return!e}),i.bind("hasError").to(e,"errorText",function(e){return!!e}),i.on("input",function(){e.errorText=null}),e.bind("isEmpty","isFocused","placeholder").to(i),i}var Dl=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){this.on("show:warning",function(e,t){window.alert(t.message)},{priority:"lowest"})}},{key:"showSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}},{key:"showWarning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}},{key:"_showNotification",value:function(e){this.fire("show:"+e.type+(e.namespace?":"+e.namespace:""),{message:e.message,type:e.type,title:e.title||""})}}],[{key:"pluginName",get:function(){return"Notification"}}]),t}(Cn),Vl=d(function e(t,n){l(this,e),n&&ze(this,n),t&&this.set(t)});Xe(Vl,Ye),c(48);var Zl=Lo("px"),zl=Pr.document.body,Fl=function(e){function t(e){var n;l(this,t);var i=(n=f(this,t,[e])).bindTemplate;return n.set("top",0),n.set("left",0),n.set("position","arrow_nw"),n.set("isVisible",!1),n.set("withArrow",!0),n.set("class"),n.content=n.createCollection(),n.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",function(e){return"ck-balloon-panel_"+e}),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",Zl),left:i.to("left",Zl)}},children:n.content}),n}return g(t,e),d(t,[{key:"show",value:function(){this.isVisible=!0}},{key:"hide",value:function(){this.isVisible=!1}},{key:"attachTo",value:function(e){this.show();var n=t.defaultPositions,i=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast],limiter:zl,fitInViewport:!0},e),r=t._getOptimalPosition(i),o=parseInt(r.left),a=parseInt(r.top);Object.assign(this,{top:a,left:o,position:r.name})}},{key:"pin",value:function(e){var t=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){t.isVisible?t._startPinning(e):t._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}},{key:"unpin",value:function(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}},{key:"_startPinning",value:function(e){var t=this;this.attachTo(e);var n=ql(e.target),i=e.limiter?ql(e.limiter):zl;this.listenTo(Pr.document,"scroll",function(r,o){var a=o.target,s=n&&a.contains(n),c=i&&a.contains(i);!s&&!c&&n&&i||t.attachTo(e)},{useCapture:!0}),this.listenTo(Pr.window,"resize",function(){t.attachTo(e)})}},{key:"_stopPinning",value:function(){this.stopListening(Pr.document,"scroll"),this.stopListening(Pr.window,"resize")}}]),t}(Nc);function ql(e){return vn(e)?e:So(e)?e.commonAncestorContainer:"function"==typeof e?ql(e()):null}function Bl(e,t){return e.top-t.height-Fl.arrowVerticalOffset}function Ul(e){return e.bottom+Fl.arrowVerticalOffset}Fl.arrowHorizontalOffset=25,Fl.arrowVerticalOffset=10,Fl._getOptimalPosition=fl,Fl.defaultPositions={northWestArrowSouthWest:function(e,t){return{top:Bl(e,t),left:e.left-Fl.arrowHorizontalOffset,name:"arrow_sw"}},northWestArrowSouthMiddleWest:function(e,t){return{top:Bl(e,t),left:e.left-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_smw"}},northWestArrowSouth:function(e,t){return{top:Bl(e,t),left:e.left-t.width/2,name:"arrow_s"}},northWestArrowSouthMiddleEast:function(e,t){return{top:Bl(e,t),left:e.left-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_sme"}},northWestArrowSouthEast:function(e,t){return{top:Bl(e,t),left:e.left-t.width+Fl.arrowHorizontalOffset,name:"arrow_se"}},northArrowSouthWest:function(e,t){return{top:Bl(e,t),left:e.left+e.width/2-Fl.arrowHorizontalOffset,name:"arrow_sw"}},northArrowSouthMiddleWest:function(e,t){return{top:Bl(e,t),left:e.left+e.width/2-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_smw"}},northArrowSouth:function(e,t){return{top:Bl(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"}},northArrowSouthMiddleEast:function(e,t){return{top:Bl(e,t),left:e.left+e.width/2-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_sme"}},northArrowSouthEast:function(e,t){return{top:Bl(e,t),left:e.left+e.width/2-t.width+Fl.arrowHorizontalOffset,name:"arrow_se"}},northEastArrowSouthWest:function(e,t){return{top:Bl(e,t),left:e.right-Fl.arrowHorizontalOffset,name:"arrow_sw"}},northEastArrowSouthMiddleWest:function(e,t){return{top:Bl(e,t),left:e.right-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_smw"}},northEastArrowSouth:function(e,t){return{top:Bl(e,t),left:e.right-t.width/2,name:"arrow_s"}},northEastArrowSouthMiddleEast:function(e,t){return{top:Bl(e,t),left:e.right-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_sme"}},northEastArrowSouthEast:function(e,t){return{top:Bl(e,t),left:e.right-t.width+Fl.arrowHorizontalOffset,name:"arrow_se"}},southWestArrowNorthWest:function(e,t){return{top:Ul(e),left:e.left-Fl.arrowHorizontalOffset,name:"arrow_nw"}},southWestArrowNorthMiddleWest:function(e,t){return{top:Ul(e),left:e.left-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_nmw"}},southWestArrowNorth:function(e,t){return{top:Ul(e),left:e.left-t.width/2,name:"arrow_n"}},southWestArrowNorthMiddleEast:function(e,t){return{top:Ul(e),left:e.left-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_nme"}},southWestArrowNorthEast:function(e,t){return{top:Ul(e),left:e.left-t.width+Fl.arrowHorizontalOffset,name:"arrow_ne"}},southArrowNorthWest:function(e,t){return{top:Ul(e),left:e.left+e.width/2-Fl.arrowHorizontalOffset,name:"arrow_nw"}},southArrowNorthMiddleWest:function(e,t){return{top:Ul(e),left:e.left+e.width/2-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_nmw"}},southArrowNorth:function(e,t){return{top:Ul(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"}},southArrowNorthMiddleEast:function(e,t){return{top:Ul(e),left:e.left+e.width/2-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_nme"}},southArrowNorthEast:function(e,t){return{top:Ul(e),left:e.left+e.width/2-t.width+Fl.arrowHorizontalOffset,name:"arrow_ne"}},southEastArrowNorthWest:function(e,t){return{top:Ul(e),left:e.right-Fl.arrowHorizontalOffset,name:"arrow_nw"}},southEastArrowNorthMiddleWest:function(e,t){return{top:Ul(e),left:e.right-.25*t.width-Fl.arrowHorizontalOffset,name:"arrow_nmw"}},southEastArrowNorth:function(e,t){return{top:Ul(e),left:e.right-t.width/2,name:"arrow_n"}},southEastArrowNorthMiddleEast:function(e,t){return{top:Ul(e),left:e.right-.75*t.width+Fl.arrowHorizontalOffset,name:"arrow_nme"}},southEastArrowNorthEast:function(e,t){return{top:Ul(e),left:e.right-t.width+Fl.arrowHorizontalOffset,name:"arrow_ne"}}},c(50),c(52);var Hl=Lo("px"),Wl=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).positionLimiter=function(){var e=n.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},n.set("visibleView",null),n.view=new Fl(e.locale),e.ui.view.body.add(n.view),e.ui.focusTracker.add(n.view.element),n._viewToStack=new Map,n._idToStack=new Map,n.set("_numberOfStacks",0),n.set("_singleViewMode",!1),n._rotatorView=n._createRotatorView(),n._fakePanelsView=n._createFakePanelsView(),n}return g(t,e),d(t,[{key:"hasView",value:function(e){return Array.from(this._viewToStack.keys()).includes(e)}},{key:"add",value:function(e){if(this.hasView(e.view))throw new A.a("contextualballoon-add-view-exist",[this,e]);var t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));var n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}},{key:"remove",value:function(e){if(!this.hasView(e))throw new A.a("contextualballoon-remove-view-not-exist",[this,e]);var t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}},{key:"updatePosition",value:function(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}},{key:"showStack",value:function(e){this.visibleStack=e;var t=this._idToStack.get(e);if(!t)throw new A.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}},{key:"_visibleStack",get:function(){return this._viewToStack.get(this.visibleView)}},{key:"_getStackId",value:function(e){return Array.from(this._idToStack.entries()).find(function(t){return t[1]===e})[0]}},{key:"_showNextStack",value:function(){var e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}},{key:"_showPrevStack",value:function(){var e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}},{key:"_createRotatorView",value:function(){var e=this,t=new Yl(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>1}),t.on("change:isNavigationVisible",function(){return e.updatePosition()},{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(t,i){if(i<2)return"";var r=Array.from(e._idToStack.values()).indexOf(e._visibleStack)+1;return n("%0 of %1",[r,i])}),t.buttonNextView.on("execute",function(){t.focusTracker.isFocused&&e.editor.editing.view.focus(),e._showNextStack()}),t.buttonPrevView.on("execute",function(){t.focusTracker.isFocused&&e.editor.editing.view.focus(),e._showPrevStack()}),t}},{key:"_createFakePanelsView",value:function(){var e=new Jl(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>=2?Math.min(e-1,2):0}),e.listenTo(this.view,"change:top",function(){return e.updatePosition()}),e.listenTo(this.view,"change:left",function(){return e.updatePosition()}),this.editor.ui.view.body.add(e),e}},{key:"_showView",value:function(e){var t=e.view,n=e.balloonClassName,i=void 0===n?"":n,r=e.withArrow,o=void 0===r||r,a=e.singleViewMode,s=void 0!==a&&a;this.view.class=i,this.view.withArrow=o,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}},{key:"_getBalloonPosition",value:function(){var e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}],[{key:"pluginName",get:function(){return"ContextualBalloon"}}]),t}(et),Yl=function(e){function n(e){var t;l(this,n),t=f(this,n,[e]);var i=e.t,r=t.bindTemplate;return t.set("isNavigationVisible",!0),t.focusTracker=new jo,t.buttonPrevView=t._createButtonView(i("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),t.buttonNextView=t._createButtonView(i("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),t.content=t.createCollection(),t.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",r.to("isNavigationVisible",function(e){return e?"":"ck-hidden"})]},children:[t.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:r.to("counter")}]},t.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:t.content}]}),t}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.focusTracker.add(this.element)}},{key:"showView",value:function(e){this.hideView(),this.content.add(e)}},{key:"hideView",value:function(){this.content.clear()}},{key:"_createButtonView",value:function(e,t){var n=new nl(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}]),n}(Nc),Jl=function(e){function t(e,n){var i;l(this,t);var r=(i=f(this,t,[e])).bindTemplate;return i.set("top",0),i.set("left",0),i.set("height",0),i.set("width",0),i.set("numberOfPanels",0),i.content=i.createCollection(),i._balloonPanelView=n,i.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",r.to("numberOfPanels",function(e){return e?"":"ck-hidden"})],style:{top:r.to("top",Hl),left:r.to("left",Hl),width:r.to("width",Hl),height:r.to("height",Hl)}},children:i.content}),i.on("change:numberOfPanels",function(e,t,n,r){n>r?i._addPanels(n-r):i._removePanels(r-n),i.updatePosition()}),i}return g(t,e),d(t,[{key:"_addPanels",value:function(e){for(;e--;){var t=new Nc;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}},{key:"_removePanels",value:function(e){for(;e--;){var t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}},{key:"updatePosition",value:function(){if(this.numberOfPanels){var e=this._balloonPanelView,t=e.top,n=e.left,i=new Eo(this._balloonPanelView.element),r=i.width,o=i.height;Object.assign(this,{top:t,left:n,width:r,height:o})}}}]),t}(Nc);c(54),Lo("px"),Lo("px"),c(56),Lo("px"),Lo("px"),c(58);var Ql=new WeakMap;function Gl(e){var t=e.view,n=e.element,i=e.text,r=e.isDirectHost,o=void 0===r||r,a=e.keepOnFocus,s=void 0!==a&&a,c=t.document;Ql.has(c)||(Ql.set(c,new Map),c.registerPostFixer(function(e){return $l(c,e)})),Ql.get(c).set(n,{text:i,isDirectHost:o,keepOnFocus:s,hostElement:o?n:null}),t.change(function(e){return $l(c,e)})}function $l(e,t){var n,i=Ql.get(e),a=[],s=!1,c=o(i);try{for(c.s();!(n=c.n()).done;){var l=r(n.value,2),u=l[0],d=l[1];d.isDirectHost&&(a.push(u),Kl(t,u,d)&&(s=!0))}}catch(b){c.e(b)}finally{c.f()}var h,f=o(i);try{for(f.s();!(h=f.n()).done;){var p=r(h.value,2),v=p[0],g=p[1];if(!g.isDirectHost){var m=Xl(v);m&&(a.includes(m)||(g.hostElement=m,Kl(t,v,g)&&(s=!0)))}}}catch(b){f.e(b)}finally{f.f()}return s}function Kl(e,t,n){var i,r,o=n.text,a=n.isDirectHost,s=n.hostElement,c=!1;return s.getAttribute("data-placeholder")!==o&&(e.setAttribute("data-placeholder",o,s),c=!0),(a||1==t.childCount)&&function(e,t){if(!e.isAttached()||Array.from(e.getChildren()).some(function(e){return!e.is("uiElement")}))return!1;if(t)return!0;var n=e.document;if(!n.isFocused)return!0;var i=n.selection.anchor;return i&&i.parent!==e}(s,n.keepOnFocus)?(i=e,!(r=s).hasClass("ck-placeholder")&&(i.addClass("ck-placeholder",r),!0)&&(c=!0)):function(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0)}(e,s)&&(c=!0),c}function Xl(e){if(e.childCount){var t=e.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}var eu=new Map;function tu(e,t,n){var i=eu.get(e);i||(i=new Map,eu.set(e,i)),i.set(t,n)}function nu(e){return[e]}function iu(e,t){var n,i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(n=e.constructor,i=t.constructor,(r=eu.get(n))&&r.has(i)?r.get(i):nu);try{return a(e=e.clone(),t,o)}catch(n){throw n}}function ru(e,t,n){e=e.slice(),t=t.slice();var i=new ou(n.document,n.useRelations,n.forceWeakRemove);i.setOriginalOperations(e),i.setOriginalOperations(t);var r=i.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:r};var s,c=new WeakMap,l=o(e);try{for(l.s();!(s=l.n()).done;){var u=s.value;c.set(u,0)}}catch(A){l.e(A)}finally{l.f()}for(var d={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length},h=0;h<e.length;){var f,p,v=e[h],g=c.get(v);if(g!=t.length){var m=t[g],b=iu(v,m,i.getContext(v,m,!0)),y=iu(m,v,i.getContext(m,v,!1));i.updateRelation(v,m),i.setOriginalOperations(b,v),i.setOriginalOperations(y,m);var k,w=o(b);try{for(w.s();!(k=w.n()).done;){var _=k.value;c.set(_,g+y.length)}}catch(A){w.e(A)}finally{w.f()}(f=e).splice.apply(f,[h,1].concat(a(b))),(p=t).splice.apply(p,[g,1].concat(a(y)))}else h++}if(n.padWithNoOps){var x=e.length-d.originalOperationsACount,T=t.length-d.originalOperationsBCount;su(e,T-x),su(t,x-T)}return au(e,d.nextBaseVersionB),au(t,d.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:r}}var ou=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,e),this.originalOperations=new Map,this._history=t.history,this._useRelations=n,this._forceWeakRemove=!!i,this._relations=new Map}return d(e,[{key:"setOriginalOperations",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=n?this.originalOperations.get(n):null,r=o(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.originalOperations.set(a,i||a)}}catch(s){r.e(s)}finally{r.f()}}},{key:"updateRelation",value:function(e,t){switch(e.constructor){case Os:switch(t.constructor){case Ns:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case Os:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")}break;case Ls:switch(t.constructor){case Ns:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case Os:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{var n=sa._createFromPositionAndShift(t.sourcePosition,t.howMany);e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)&&this._setRelation(e,t,{howMany:n.end.offset-e.splitPosition.offset,offset:e.splitPosition.offset-n.start.offset})}}break;case Ns:switch(t.constructor){case Ns:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Ls:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break;case Ps:var i=e.newRange;if(!i)return;switch(t.constructor){case Os:var r=sa._createFromPositionAndShift(t.sourcePosition,t.howMany),o=r.containsPosition(i.start)||r.start.isEqual(i.start),a=r.containsPosition(i.end)||r.end.isEqual(i.end);!o&&!a||r.containsRange(i)||this._setRelation(e,t,{side:o?"left":"right",path:o?i.start.path.slice():i.end.path.slice()});break;case Ns:var s=i.start.isEqual(t.targetPosition),c=i.start.isEqual(t.deletionPosition),l=i.end.isEqual(t.deletionPosition),u=i.end.isEqual(t.sourcePosition);(s||c||l||u)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:c,wasEndBeforeMergedElement:l,wasInRightElement:u})}}}},{key:"getContext",value:function(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}},{key:"_wasUndone",value:function(e){var t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}},{key:"_getRelation",value:function(e,t){var n=this.originalOperations.get(t),i=this._history.getUndoneOperation(n);if(!i)return null;var r=this.originalOperations.get(e),o=this._relations.get(r);return o&&o.get(i)||null}},{key:"_setRelation",value:function(e,t,n){var i=this.originalOperations.get(e),r=this.originalOperations.get(t),o=this._relations.get(i);o||(o=new Map,this._relations.set(i,o)),o.set(r,n)}}]),e}();function au(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){n.value.baseVersion=t++}}catch(r){i.e(r)}finally{i.f()}}function su(e,t){for(var n=0;n<t;n++)e.push(new Xs(0))}function cu(e,t,n){var i=e.nodes.getNode(0).getAttribute(t);if(i==n)return null;var r=new sa(e.position,e.position.getShiftedBy(e.howMany));return new Ss(r,t,i,n,0)}function lu(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function uu(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new Os(r.start,r.end.offset-r.start.offset,t,0);n.push(o);for(var a=i+1;a<e.length;a++)e[a]=e[a]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}tu(Ss,Ss,function(e,t,n){if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){var i=e.range.getDifference(t.range).map(function(t){return new Ss(t,e.key,e.oldValue,e.newValue,0)}),r=e.range.getIntersection(t.range);return r&&n.aIsStrong&&i.push(new Ss(r,t.key,t.newValue,e.newValue,0)),0==i.length?[new Xs(0)]:i}return[e]}),tu(Ss,Es,function(e,t){if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){var n=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(function(t){return new Ss(t,e.key,e.oldValue,e.newValue,e.baseVersion)});if(t.shouldReceiveAttributes){var i=cu(t,e.key,e.oldValue);i&&n.unshift(i)}return n}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e]}),tu(Ss,Ns,function(e,t){var n=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&n.push(sa._createFromPositionAndShift(t.graveyardPosition,1));var i=e.range._getTransformedByMergeOperation(t);return i.isCollapsed||n.push(i),n.map(function(t){return new Ss(t,e.key,e.oldValue,e.newValue,e.baseVersion)})}),tu(Ss,Os,function(e,t){return function(e,t){var n=sa._createFromPositionAndShift(t.sourcePosition,t.howMany),i=null,r=[];n.containsRange(e,!0)?i=e:e.start.hasSameParentAs(n.start)?(r=e.getDifference(n),i=e.getIntersection(n)):r=[e];var s,c=[],l=o(r);try{for(l.s();!(s=l.n()).done;){var u=s.value;u=u._getTransformedByDeletion(t.sourcePosition,t.howMany);var d=t.getMovedRangeStart(),h=u.start.hasSameParentAs(d);u=u._getTransformedByInsertion(d,t.howMany,h),c.push.apply(c,a(u))}}catch(f){l.e(f)}finally{l.f()}return i&&c.push(i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),c}(e.range,t).map(function(t){return new Ss(t,e.key,e.oldValue,e.newValue,e.baseVersion)})}),tu(Ss,Ls,function(e,t){if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){var n=e.clone();return n.range=new sa(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,n]}return e.range=e.range._getTransformedBySplitOperation(t),[e]}),tu(Es,Ss,function(e,t){var n=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){var i=cu(e,t.key,t.newValue);i&&n.push(i)}return n}),tu(Es,Es,function(e,t,n){return e.position.isEqual(t.position)&&n.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e]}),tu(Es,Os,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e]}),tu(Es,Ls,function(e,t){return e.position=e.position._getTransformedBySplitOperation(t),[e]}),tu(Es,Ns,function(e,t){return e.position=e.position._getTransformedByMergeOperation(t),[e]}),tu(Ps,Es,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e]}),tu(Ps,Ps,function(e,t,n){if(e.name==t.name){if(!n.aIsStrong)return[new Xs(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]}),tu(Ps,Ns,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e]}),tu(Ps,Os,function(e,t,n){if(e.oldRange&&(e.oldRange=sa._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(n.abRelation){var i=sa._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=n.abRelation.path,e.newRange.end=i.end,[e];if("right"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=i.start,e.newRange.end.path=n.abRelation.path,[e]}e.newRange=sa._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]}),tu(Ps,Ls,function(e,t,n){if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(n.abRelation){var i=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?e.newRange.start=ia._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!n.abRelation.wasInLeftElement&&(e.newRange.start=ia._createAt(t.moveTargetPosition)),e.newRange.end=e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasInRightElement?ia._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?ia._createAt(t.insertionPosition):i.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]}),tu(Ns,Es,function(e,t){return e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e]}),tu(Ns,Ns,function(e,t,n){if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(n.bWasUndone){var i=t.graveyardPosition.path.slice();return i.push(0),e.sourcePosition=new ia(t.graveyardPosition.root,i),e.howMany=0,[e]}return[new Xs(0)]}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){var r="$graveyard"==e.targetPosition.root.rootName,o="$graveyard"==t.targetPosition.root.rootName;if(o&&!r||(!r||o)&&n.aIsStrong){var a=t.targetPosition._getTransformedByMergeOperation(t),s=e.targetPosition._getTransformedByMergeOperation(t);return[new Os(a,e.howMany,s,0)]}return[new Xs(0)]}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&n.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]}),tu(Ns,Os,function(e,t,n){var i=sa._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!n.bWasUndone&&!n.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.sourcePosition)?[new Xs(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])}),tu(Ns,Ls,function(e,t,n){if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){var i=0!=t.howMany,r=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(i||r||"mergeTargetNotMoved"==n.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==n.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}),tu(Os,Es,function(e,t){var n=sa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=n.start,e.howMany=n.end.offset-n.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]}),tu(Os,Os,function(e,t,n){var i,r=sa._createFromPositionAndShift(e.sourcePosition,e.howMany),s=sa._createFromPositionAndShift(t.sourcePosition,t.howMany),c=n.aIsStrong,l=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?l=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(l=!1),i=e.targetPosition.isEqual(t.targetPosition)&&l?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),lu(e,t)&&lu(t,e))return[t.getReversed()];if(r.containsPosition(t.targetPosition)&&r.containsRange(s,!0))return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),uu([r],i);if(s.containsPosition(e.targetPosition)&&s.containsRange(r,!0))return r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),uu([r],i);var u=On(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==u||"extension"==u)return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),uu([r],i);"remove"!=e.type||"remove"==t.type||n.aWasUndone||n.forceWeakRemove?"remove"==e.type||"remove"!=t.type||n.bWasUndone||n.forceWeakRemove||(c=!1):c=!0;var d,h=[],f=o(r.getDifference(s));try{for(f.s();!(d=f.n()).done;){var p=d.value;p.start=p.start._getTransformedByDeletion(t.sourcePosition,t.howMany),p.end=p.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var v="same"==On(p.start.getParentPath(),t.getMovedRangeStart().getParentPath()),g=p._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,v);h.push.apply(h,a(g))}}catch(b){f.e(b)}finally{f.f()}var m=r.getIntersection(s);return null!==m&&c&&(m.start=m.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),m.end=m.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===h.length?h.push(m):1==h.length?s.start.isBefore(r.start)||s.start.isEqual(r.start)?h.unshift(m):h.push(m):h.splice(1,0,m)),0===h.length?[new Xs(e.baseVersion)]:uu(h,i)}),tu(Os,Ls,function(e,t,n){var i=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(i=e.targetPosition._getTransformedBySplitOperation(t));var r=sa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(r.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=i,[e];if(r.start.hasSameParentAs(t.splitPosition)&&r.containsPosition(t.splitPosition)){var o=new sa(t.splitPosition,r.end);return o=o._getTransformedBySplitOperation(t),uu([new sa(r.start,t.splitPosition),o],i)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==n.abRelation&&(i=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==n.abRelation&&(i=e.targetPosition);var a=[r._getTransformedBySplitOperation(t)];if(t.graveyardPosition){var s=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);e.howMany>1&&s&&!n.aWasUndone&&a.push(sa._createFromPositionAndShift(t.insertionPosition,1))}return uu(a,i)}),tu(Os,Ns,function(e,t,n){var i=sa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.sourcePosition))if("remove"!=e.type||n.forceWeakRemove){if(1==e.howMany)return n.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new Xs(0)]}else if(!n.aWasUndone){var r=[],o=t.graveyardPosition.clone(),a=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(r.push(new Os(e.sourcePosition,e.howMany-1,e.targetPosition,0)),o=o._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),a=a._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));var s=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),c=new Os(o,1,s,0),l=c.getMovedRangeStart().path.slice();l.push(0);var u=new ia(c.targetPosition.root,l);a=a._getTransformedByMove(o,s,1);var d=new Os(a,t.howMany,u,0);return r.push(c),r.push(d),r}var h=sa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=h.start,e.howMany=h.end.offset-h.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]}),tu(Is,Es,function(e,t){return e.position=e.position._getTransformedByInsertOperation(t),[e]}),tu(Is,Ns,function(e,t){return e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e])}),tu(Is,Os,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e]}),tu(Is,Is,function(e,t,n){if(e.position.isEqual(t.position)){if(!n.aIsStrong)return[new Xs(0)];e.oldName=t.newName}return[e]}),tu(Is,Ls,function(e,t){if("same"==On(e.position.path,t.splitPosition.getParentPath())&&!t.graveyardPosition){var n=new Is(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,n]}return e.position=e.position._getTransformedBySplitOperation(t),[e]}),tu(Ms,Ms,function(e,t,n){if(e.root===t.root&&e.key===t.key){if(!n.aIsStrong||e.newValue===t.newValue)return[new Xs(0)];e.oldValue=t.newValue}return[e]}),tu(Ls,Es,function(e,t){return e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e]}),tu(Ls,Ns,function(e,t,n){if(!e.graveyardPosition&&!n.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){var i=t.graveyardPosition.path.slice();i.push(0);var r=new ia(t.graveyardPosition.root,i),o=Ls.getInsertionPosition(new ia(t.graveyardPosition.root,i)),a=new Ls(r,0,o,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Ls.getInsertionPosition(e.splitPosition),e.graveyardPosition=a.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[a,e]}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Ls.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]}),tu(Ls,Os,function(e,t,n){var i=sa._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var r=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);if(!n.bWasUndone&&r){var o=e.splitPosition._getTransformedByMoveOperation(t),a=e.graveyardPosition._getTransformedByMoveOperation(t),s=a.path.slice();s.push(0);var c=new ia(a.root,s);return[new Os(o,e.howMany,c,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}var l=e.splitPosition.isEqual(t.targetPosition);if(l&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Ls.getInsertionPosition(e.splitPosition),[e];if(l&&n.abRelation&&n.abRelation.howMany){var u=n.abRelation,d=u.howMany,h=u.offset;return e.howMany+=d,e.splitPosition=e.splitPosition.getShiftedBy(h),[e]}return e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)?(e.howMany-=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Ls.getInsertionPosition(e.splitPosition),[e]):(t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.insertionPosition=e.graveyardPosition?e.insertionPosition._getTransformedByMoveOperation(t):Ls.getInsertionPosition(e.splitPosition),[e])}),tu(Ls,Ls,function(e,t,n){if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Xs(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Xs(0)];if("splitBefore"==n.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var i="$graveyard"==e.splitPosition.root.rootName,r="$graveyard"==t.splitPosition.root.rootName;if(r&&!i||(!i||r)&&n.aIsStrong){var o=[];return t.howMany&&o.push(new Os(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&o.push(new Os(e.splitPosition,e.howMany,e.moveTargetPosition,0)),o}return[new Xs(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.baRelation){var a=t.insertionPosition.path.slice();a.push(0);var s=new ia(t.insertionPosition.root,a);return[e,new Os(e.insertionPosition,1,s,0)]}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Ls.getInsertionPosition(e.splitPosition),[e]});var du=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).domEventType="click",n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),t}(ao),hu=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).domEventType=["mousedown","mouseup"],n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),t}(ao),fu=function(){function e(t){l(this,e),this.document=t}return d(e,[{key:"createDocumentFragment",value:function(e){return new Xi(this.document,e)}},{key:"createElement",value:function(e,t,n){return new si(this.document,e,t,n)}},{key:"createText",value:function(e){return new In(this.document,e)}},{key:"clone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._clone(t)}},{key:"appendChild",value:function(e,t){return t._appendChild(e)}},{key:"insertChild",value:function(e,t,n){return n._insertChild(e,t)}},{key:"removeChildren",value:function(e,t,n){return n._removeChildren(e,t)}},{key:"remove",value:function(e){var t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}},{key:"replace",value:function(e,t){var n=e.parent;if(n){var i=n.getChildIndex(e);return this.removeChildren(i,1,n),this.insertChild(i,t,n),!0}return!1}},{key:"unwrapElement",value:function(e){var t=e.parent;if(t){var n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}},{key:"rename",value:function(e,t){var n=new si(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}},{key:"setAttribute",value:function(e,t,n){n._setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){t._removeAttribute(e)}},{key:"addClass",value:function(e,t){t._addClass(e)}},{key:"removeClass",value:function(e,t){t._removeClass(e)}},{key:"setStyle",value:function(e,t,n){ut(e)&&void 0===n&&(n=t),n._setStyle(e,t)}},{key:"removeStyle",value:function(e,t){t._removeStyle(e)}},{key:"setCustomProperty",value:function(e,t,n){n._setCustomProperty(e,t)}},{key:"removeCustomProperty",value:function(e,t){return t._removeCustomProperty(e)}},{key:"createPositionAt",value:function(e,t){return vi._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return vi._createAfter(e)}},{key:"createPositionBefore",value:function(e){return vi._createBefore(e)}},{key:"createRange",value:function(e,t){return new gi(e,t)}},{key:"createRangeOn",value:function(e){return gi._createOn(e)}},{key:"createRangeIn",value:function(e){return gi._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new yi(e,t,n)}}]),e}(),pu=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,vu=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,gu=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,mu=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,bu=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,yu=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function ku(e){return e.startsWith("#")?pu.test(e):e.startsWith("rgb")?vu.test(e)||gu.test(e):e.startsWith("hsl")?mu.test(e)||bu.test(e):yu.has(e.toLowerCase())}var wu=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/,_u=/^[+-]?[0-9]*([.][0-9]+)?%$/,xu=["repeat-x","repeat-y","repeat","space","round","no-repeat"],Tu=["center","top","bottom","left","right"];function Au(e){return Tu.includes(e)}var Su=["fixed","scroll","local"];function Cu(e){return Su.includes(e)}var Ou=/^url\(/;function Eu(e){return Ou.test(e)}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return{top:void 0,right:void 0,bottom:void 0,left:void 0};var t=Mu(e),n=t[0],i=t[1]||n;return{top:n,bottom:t[2]||n,right:i,left:t[3]||i}}function Iu(e){var t=e.top,n=e.right,i=e.bottom,r=e.left,o=[];return r!==n?o.push(t,n,i,r):i!==t?o.push(t,n,i):n!==t?o.push(t,n):o.push(t),o.join(" ")}function Mu(e){return e.replace(/, /g,",").split(" ").map(function(e){return e.replace(/,/g,", ")})}function Nu(e){e.setNormalizer("background",Lu),e.setNormalizer("background-color",function(e){return{path:"background.color",value:e}}),e.setReducer("background",function(e){var t=[];return t.push(["background-color",e.color]),t})}function Lu(e){var t,n={},i=o(Mu(e));try{for(i.s();!(t=i.n()).done;){var r=t.value;xu.includes(r)?(n.repeat=n.repeat||[],n.repeat.push(r)):Au(r)?(n.position=n.position||[],n.position.push(r)):Cu(r)?n.attachment=r:ku(r)?n.color=r:Eu(r)&&(n.image=r)}}catch(a){i.e(a)}finally{i.f()}return{path:"background",value:n}}function Ru(e){e.setNormalizer("margin",function(e){return{path:"margin",value:Pu(e)}}),e.setNormalizer("margin-top",function(e){return{path:"margin.top",value:e}}),e.setNormalizer("margin-right",function(e){return{path:"margin.right",value:e}}),e.setNormalizer("margin-bottom",function(e){return{path:"margin.bottom",value:e}}),e.setNormalizer("margin-left",function(e){return{path:"margin.left",value:e}}),e.setReducer("margin",function(e){return function(t){var n=t.top,i=t.right,r=t.bottom,o=t.left,a=[];return[n,i,o,r].every(function(e){return!!e})?a.push([e,Iu(t)]):(n&&a.push([e+"-top",n]),i&&a.push([e+"-right",i]),r&&a.push([e+"-bottom",r]),o&&a.push([e+"-left",o])),a}}("margin")),e.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}var ju=function(e){function n(e,t){var i;return l(this,n),(i=f(this,n,[e])).view=t,i}return g(n,e),d(n,[{key:"init",value:function(){var e=this.view,t=this.editor.editing.view,n=e.editable,i=t.document.getRoot();e.editable.name=i.rootName,e.render();var r=n.element;this.setEditableElement(n.name,r),this.focusTracker.add(r),e.editable.bind("isFocused").to(this.focusTracker),t.attachDomRoot(r),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}},{key:"destroy",value:function(){var e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),t(w(n.prototype),"destroy",this).call(this)}},{key:"_initToolbar",value:function(){var e,t,n,i,r,o,a,s=this.editor,c=this.view.toolbar;c.fillFromConfig(s.config.get("toolbar"),this.componentFactory),e={origin:s.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:s.keystrokes,toolbar:c},t=e.origin,n=e.originKeystrokeHandler,r=e.toolbar,o=e.beforeFocus,a=e.afterBlur,(i=e.originFocusTracker).add(r.element),n.set("Alt+F10",function(e,t){i.isFocused&&!r.focusTracker.isFocused&&(o&&o(),r.focus(),t())}),r.keystrokes.set("Esc",function(e,n){r.focusTracker.isFocused&&(t.focus(),a&&a(),n())})}},{key:"_initPlaceholder",value:function(){var e=this.editor,t=e.editing.view,n=t.document.getRoot(),i=e.sourceElement,r=e.config.get("placeholder")||i&&"textarea"===i.tagName.toLowerCase()&&i.getAttribute("placeholder");r&&Gl({view:t,element:n,text:r,isDirectHost:!1,keepOnFocus:!0})}}]),n}(wc),Du=function(e){function n(e,t){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(this,n),(i=f(this,n,[e])).toolbar=new kl(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull}),i.editable=new Nl(e,t,r.editableElement),i.toolbar.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}}),i}return g(n,e),d(n,[{key:"render",value:function(){t(w(n.prototype),"render",this).call(this),this.registerChild([this.toolbar,this.editable])}}]),n}(Pl),Vu=function(e){function n(e,t){var i;l(this,n),i=f(this,n,[t]),vn(e)&&(i.sourceElement=e,function(e){var t=e.sourceElement;if(t){if(t.ckeditorInstance)throw new A.a("editor-source-element-already-used",e);t.ckeditorInstance=e,e.once("destroy",function(){delete t.ckeditorInstance})}}(v(i))),i.model.document.createRoot();var r=!i.config.get("toolbar.shouldNotGroupWhenFull"),o=new Du(i.locale,i.editing.view,{editableElement:i.sourceElement,shouldToolbarGroupWhenFull:r});return i.ui=new ju(v(i),o),i}return g(n,e),d(n,[{key:"destroy",value:function(){var e=this,i=this.getData();return this.ui.destroy(),t(w(n.prototype),"destroy",this).call(this).then(function(){e.sourceElement&&function(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}(e.sourceElement,i)})}}],[{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i){var r=vn(e);if(r&&"TEXTAREA"===e.tagName)throw new A.a("editor-wrong-element",null);var o=new t(e,n);i(o.initPlugins().then(function(){o.ui.init()}).then(function(){if(!r&&n.initialData)throw new A.a("editor-create-initial-data",null);var t,i,a=void 0!==n.initialData?n.initialData:vn(t=e)?(i=t)instanceof HTMLTextAreaElement?i.value:i.innerHTML:t;return o.data.init(a)}).then(function(){return o.fire("ready")}).then(function(){return o}))})}}]),n}(bc);Xe(Vu,{setData:function(e){this.data.set(e)},getData:function(e){return this.data.get(e)}});var Zu=function(){function e(t){l(this,e),this.files=function(e){var t=e.files?Array.from(e.files):[],n=e.items?Array.from(e.items):[];return t.length?t:n.filter(function(e){return"file"===e.kind}).map(function(e){return e.getAsFile()})}(t),this._native=t}return d(e,[{key:"types",get:function(){return this._native.types}},{key:"getData",value:function(e){return this._native.getData(e)}},{key:"setData",value:function(e,t){this._native.setData(e,t)}},{key:"effectAllowed",get:function(){return this._native.effectAllowed},set:function(e){this._native.effectAllowed=e}},{key:"dropEffect",get:function(){return this._native.dropEffect},set:function(e){this._native.dropEffect=e}},{key:"isCanceled",get:function(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}]),e}(),zu=function(e){function t(e){var n;l(this,t);var i=(n=f(this,t,[e])).document;function r(e){return function(t,n){n.preventDefault();var r=n.dropRange?[n.dropRange]:null,o=new y(i,e);i.fire(o,{dataTransfer:n.dataTransfer,method:t.name,targetRanges:r,target:n.target}),o.stop.called&&n.stopPropagation()}}return n.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],n.listenTo(i,"paste",r("clipboardInput"),{priority:"low"}),n.listenTo(i,"drop",r("clipboardInput"),{priority:"low"}),n.listenTo(i,"dragover",r("dragging"),{priority:"low"}),n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){var t,n,i,r,o,a,s={dataTransfer:new Zu(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(s.dropRange=(t=this.view,r=(n=e).target.ownerDocument,o=n.clientX,a=n.clientY,r.caretRangeFromPoint&&r.caretRangeFromPoint(o,a)?i=r.caretRangeFromPoint(o,a):n.rangeParent&&((i=r.createRange()).setStart(n.rangeParent,n.rangeOffset),i.collapse(!0)),i?t.domConverter.domRangeToView(i):null)),this.fire(e.type,e,s)}}]),t}(ao),Fu=["figcaption","li"],qu=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){this.editor.editing.view.addObserver(zu),this._setupPasteDrop(),this._setupCopyCut()}},{key:"_setupPasteDrop",value:function(){var e=this,t=this.editor,n=t.model,i=t.editing.view,r=i.document;this.listenTo(r,"clipboardInput",function(e){t.isReadOnly&&e.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",function(t,n){var r,o=n.dataTransfer,a=n.content||"";a||(o.getData("text/html")?a=o.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1==t.length?" ":t}):o.getData("text/plain")&&(((r=(r=o.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||r.includes("<br>"))&&(r="<p>".concat(r,"</p>")),a=r),a=e.editor.data.htmlProcessor.toView(a));var s=new y(e,"inputTransformation");e.fire(s,{content:a,dataTransfer:o,targetRanges:n.targetRanges,method:n.method}),s.stop.called&&t.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",function(t,i){if(!i.content.isEmpty){var r=e.editor.data.toModel(i.content,"$clipboardHolder");0!=r.childCount&&(t.stop(),n.change(function(){e.fire("contentInsertion",{content:r,method:i.method,dataTransfer:i.dataTransfer,targetRanges:i.targetRanges})}))}},{priority:"low"}),this.listenTo(this,"contentInsertion",function(e,t){t.resultRange=n.insertContent(t.content)},{priority:"low"})}},{key:"_setupCopyCut",value:function(){var e=this,t=this.editor,n=t.model.document,i=t.editing.view.document;function r(e,r){var o=r.dataTransfer;r.preventDefault();var a=t.data.toView(t.model.getSelectedContent(n.selection));i.fire("clipboardOutput",{dataTransfer:o,content:a,method:e.name})}this.listenTo(i,"copy",r,{priority:"low"}),this.listenTo(i,"cut",function(e,n){t.isReadOnly?n.preventDefault():r(e,n)},{priority:"low"}),this.listenTo(i,"clipboardOutput",function(i,r){r.content.isEmpty||(r.dataTransfer.setData("text/html",e.editor.data.htmlProcessor.toData(r.content)),r.dataTransfer.setData("text/plain",function e(t){var n="";if(t.is("$text")||t.is("$textProxy"))n=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))n=t.getAttribute("alt");else if(t.is("element","br"))n="\n";else{var i,r=null,a=o(t.getChildren());try{for(a.s();!(i=a.n()).done;){var s=i.value,c=e(s);r&&(r.is("containerElement")||s.is("containerElement"))&&(Fu.includes(r.name)||Fu.includes(s.name)?n+="\n":n+="\n\n"),n+=c,r=s}}catch(l){a.e(l)}finally{a.f()}}return n}(r.content))),"cut"==r.method&&t.model.deleteContent(n.selection)},{priority:"low"})}}],[{key:"pluginName",get:function(){return"ClipboardPipeline"}}]),t}(et);function Bu(e,t){var n,r,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=o(t),i.prev=1,n.s();case 3:if((r=n.n()).done){i.next=11;break}if(a=r.value,i.t0=a&&e.getAttributeProperties(a[0]).copyOnEnter,!i.t0){i.next=9;break}return i.next=9,a;case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t1=i.catch(1),n.e(i.t1);case 16:return i.prev=16,n.f(),i.finish(16);case 19:case"end":return i.stop()}},m,null,[[1,13,16,19]])}var Uu=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change(function(i){(function(e,t,n,i){var r=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,s=o.end.parent;if(i.isLimit(a)||i.isLimit(s))r||a!=s||e.deleteContent(n);else if(r){var c=Bu(t.model.schema,n.getAttributes());Hu(t,o.start),t.setSelectionAttribute(c)}else{var l=!(o.start.isAtStart&&o.end.isAtEnd),u=a==s;e.deleteContent(n,{leaveUnmerged:l}),l&&(u?Hu(t,n.focus):t.setSelection(s,0))}})(e.editor.model,i,n.selection,t.schema),e.fire("afterExecute",{writer:i})})}}]),t}(nt);function Hu(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}var Wu=function(e){function t(e){var n;l(this,t);var i=(n=f(this,t,[e])).document;return i.on("keydown",function(e,t){if(n.isEnabled&&t.keyCode==qi.enter){var r=new wi(i,"enter",i.selection.getFirstRange());i.fire(r,new oo(i,t.domEvent,{isSoft:t.shiftKey})),r.stop.called&&e.stop()}}),n}return g(t,e),d(t,[{key:"observe",value:function(){}}]),t}(Ur),Yu=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(Wu),e.commands.add("enter",new Uu(e)),this.listenTo(n,"enter",function(n,i){i.preventDefault(),i.isSoft||(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"})}}],[{key:"pluginName",get:function(){return"Enter"}}]),t}(et),Ju=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;l(this,e),this.model=t,this.size=0,this.limit=i,this.isLocked=!1,this._changeCallback=function(e,t){"transparent"!=t.type&&t!==n._batch&&n._reset(!0)},this._selectionChangeCallback=function(){n._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}return d(e,[{key:"batch",get:function(){return this._batch||(this._batch=this.model.createBatch()),this._batch}},{key:"input",value:function(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}},{key:"lock",value:function(){this.isLocked=!0}},{key:"unlock",value:function(){this.isLocked=!1}},{key:"destroy",value:function(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}},{key:"_reset",value:function(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}]),e}(),Qu=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).direction=n,i._buffer=new Ju(e.model,e.config.get("typing.undoStep")),i}return g(t,e),d(t,[{key:"buffer",get:function(){return this._buffer}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=n.document;n.enqueueChange(this._buffer.batch,function(r){e._buffer.lock();var o=r.createSelection(t.selection||i.selection),a=t.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&n.modifySelection(o,{direction:e.direction,unit:t.unit}),e._shouldEntireContentBeReplacedWithParagraph(a))e._replaceEntireContentWithParagraph(r);else if(e._shouldReplaceFirstBlockWithParagraph(o,a))e.editor.execute("paragraph",{selection:o});else if(!o.isCollapsed){var c=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(e){c+=bi(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(o,{doNotResetEntireContent:s,direction:e.direction}),e._buffer.input(c),r.setSelection(o),e._buffer.unlock()}})}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function(e){if(e>1)return!1;var t=this.editor.model,n=t.document.selection,i=t.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(i)||!t.schema.checkChild(i,"paragraph"))return!1;var r=i.getChild(0);return!r||"paragraph"!==r.name}},{key:"_replaceEntireContentWithParagraph",value:function(e){var t=this.editor.model,n=t.schema.getLimitElement(t.document.selection),i=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(i,n),e.setSelection(i,0)}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function(e,t){var n=this.editor.model;if(t>1||"backward"!=this.direction||!e.isCollapsed)return!1;var i=e.getFirstPosition(),r=n.schema.getLimitElement(i),o=r.getChild(0);return i.parent==o&&!!e.containsEntireContent(o)&&!!n.schema.checkChild(r,"paragraph")&&"paragraph"!=o.name}}]),t}(nt),Gu=function(e){function t(e){var n;l(this,t),n=f(this,t,[e]);var i=e.document,r=0;function o(e,t,n){var r=new wi(i,"delete",i.selection.getFirstRange());i.fire(r,new oo(i,t,n)),r.stop.called&&e.stop()}return i.on("keyup",function(e,t){t.keyCode!=qi.delete&&t.keyCode!=qi.backspace||(r=0)}),i.on("keydown",function(e,t){var n={};if(t.keyCode==qi.delete)n.direction="forward",n.unit="character";else{if(t.keyCode!=qi.backspace)return;n.direction="backward",n.unit="codePoint"}n.unit=(Ri?t.altKey:t.ctrlKey)?"word":n.unit,n.sequence=++r,o(e,t.domEvent,n)}),Vi&&i.on("beforeinput",function(t,n){if("deleteContentBackward"==n.domEvent.inputType){var i={unit:"codepoint",direction:"backward",sequence:1},r=n.domTarget.ownerDocument.defaultView.getSelection();r.anchorNode==r.focusNode&&r.anchorOffset+1!=r.focusOffset&&(i.selectionToRemove=e.domConverter.domSelectionToView(r)),o(t,n.domEvent,i)}}),n}return g(t,e),d(t,[{key:"observe",value:function(){}}]),t}(Ur),$u=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(Gu);var i=new Qu(e,"forward");if(e.commands.add("deleteForward",i),e.commands.add("forwardDelete",i),e.commands.add("delete",new Qu(e,"backward")),this.listenTo(n,"delete",function(n,i){var r={unit:i.unit,sequence:i.sequence};if(i.selectionToRemove){var a,s=e.model.createSelection(),c=[],l=o(i.selectionToRemove.getRanges());try{for(l.s();!(a=l.n()).done;){var u=a.value;c.push(e.editing.mapper.toModelRange(u))}}catch(d){l.e(d)}finally{l.f()}s.setTo(c),r.selection=s}e.execute("forward"==i.direction?"deleteForward":"delete",r),i.preventDefault(),t.scrollToTheSelection()},{priority:"low"}),Vi){var r=null;this.listenTo(n,"delete",function(e,t){var n=t.domTarget.ownerDocument.defaultView.getSelection();r={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}},{priority:"lowest"}),this.listenTo(n,"keyup",function(e,t){if(r){var n=t.domTarget.ownerDocument.defaultView.getSelection();n.collapse(r.anchorNode,r.anchorOffset),n.extend(r.focusNode,r.focusOffset),r=null}})}}}],[{key:"pluginName",get:function(){return"Delete"}}]),t}(et),Ku=function(){function e(){l(this,e),this._stack=[]}return d(e,[{key:"add",value:function(e,t){var n=this._stack,i=n[0];this._insertDescriptor(e);var r=n[0];i===r||Xu(i,r)||this.fire("change:top",{oldDescriptor:i,newDescriptor:r,writer:t})}},{key:"remove",value:function(e,t){var n=this._stack,i=n[0];this._removeDescriptor(e);var r=n[0];i===r||Xu(i,r)||this.fire("change:top",{oldDescriptor:i,newDescriptor:r,writer:t})}},{key:"_insertDescriptor",value:function(e){var t=this._stack,n=t.findIndex(function(t){return t.id===e.id});if(!Xu(e,t[n])){n>-1&&t.splice(n,1);for(var i=0;t[i]&&ed(t[i],e);)i++;t.splice(i,0,e)}}},{key:"_removeDescriptor",value:function(e){var t=this._stack,n=t.findIndex(function(t){return t.id===e});n>-1&&t.splice(n,1)}}]),e}();function Xu(e,t){return e&&t&&e.priority==t.priority&&td(e.classes)==td(t.classes)}function ed(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&td(e.classes)>td(t.classes)}function td(e){return Array.isArray(e)?e.sort().join(","):e}function nd(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function id(e,t){var n,i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.is("containerElement"))throw new A.a("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=hd,o.label&&t.setCustomProperty("widgetLabel",o.label,e),o.hasSelectionHandle&&(n=e,r=(i=t).createUIElement("div",{class:"ck ck-widget__selection-handle"},function(e){var t=this.toDomElement(e),n=new el;return n.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),n.render(),t.appendChild(n.element),t}),i.insert(i.createPositionAt(n,0),r),i.addClass(["ck-widget_with-selection-handle"],n)),ad(e,t,rd,od),e}function rd(e,t,n){if(t.classes&&n.addClass(_n(t.classes),e),t.attributes)for(var i in t.attributes)n.setAttribute(i,t.attributes[i],e)}function od(e,t,n){if(t.classes&&n.removeClass(_n(t.classes),e),t.attributes)for(var i in t.attributes)n.removeAttribute(i,e)}function ad(e,t,n,i){var r=new Ku;r.on("change:top",function(t,r){r.oldDescriptor&&i(e,r.oldDescriptor,r.writer),r.newDescriptor&&n(e,r.newDescriptor,r.writer)}),t.setCustomProperty("addHighlight",function(e,t,n){return r.add(t,n)},e),t.setCustomProperty("removeHighlight",function(e,t,n){return r.remove(t,n)},e)}function sd(e){var t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:""}function cd(e,t){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e),t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e),e.on("change:isReadOnly",function(n,i,r){t.setAttribute("contenteditable",r?"false":"true",e)}),e.on("change:isFocused",function(n,i,r){r?t.addClass("ck-editor__nested-editable_focused",e):t.removeClass("ck-editor__nested-editable_focused",e)}),e}function ld(e,t){var n=e.getSelectedElement();if(n){var i=pd(e);if(i)return t.createPositionAt(n,i);if(t.schema.isBlock(n))return t.createPositionAfter(n)}var r=e.getSelectedBlocks().next().value;if(r){if(r.isEmpty)return t.createPositionAt(r,0);var o=t.createPositionAfter(r);return e.focus.isTouching(o)?o:t.createPositionBefore(r)}return e.focus}function ud(e,t){var n=e.getSelectedElement();return!!n&&t.isObject(n)}function dd(e,t){var n=new Eo(Pr.window),i=n.getIntersection(e),r=t.height+Fl.arrowVerticalOffset;if(e.top-r>n.top||e.bottom+r<n.bottom)return null;var o=i||e,a=o.left+o.width/2-t.width/2;return{top:Math.max(e.top,0)+Fl.arrowVerticalOffset,left:a,name:"arrow_n"}}function hd(){return null}function fd(e,t,n){return e&&nd(e)&&!n.isInline(t)}function pd(e){return e.getAttribute("widget-type-around")}Xe(Ku,O);for(var vd=[Ui("arrowUp"),Ui("arrowRight"),Ui("arrowDown"),Ui("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255],gd=112;gd<=135;gd++)vd.push(gd);function md(e){return!(!e.ctrlKey&&!e.metaKey)||vd.includes(e.keyCode)}c(60);var bd=["before","after"],yd=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,kd=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e]))._currentFakeCaretModelElement=null,n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.editing.view;this.on("change:isEnabled",function(n,i,r){t.change(function(e){var n,i=o(t.document.roots);try{for(i.s();!(n=i.n()).done;){var a=n.value;r?e.removeClass("ck-widget__type-around_disabled",a):e.addClass("ck-widget__type-around_disabled",a)}}catch(s){i.e(s)}finally{i.f()}}),r||e.model.change(function(e){e.removeSelectionAttribute("widget-type-around")})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration()}},{key:"destroy",value:function(){this._currentFakeCaretModelElement=null}},{key:"_insertParagraph",value:function(e,t){var n=this.editor,i=n.editing.view;n.execute("insertParagraph",{position:n.model.createPositionAt(e,t)}),i.focus(),i.scrollToTheSelection()}},{key:"_listenToIfEnabled",value:function(e,t,n,i){var r=this;this.listenTo(e,t,function(){r.isEnabled&&n.apply(void 0,arguments)},i)}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function(){var e=this.editor.model.document.selection,t=pd(e);if(!t)return!1;var n=e.getSelectedElement();return this._insertParagraph(n,t),!0}},{key:"_enableTypeAroundUIInjection",value:function(){var e=this.editor,t=e.model.schema,n=e.locale.t,i={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",function(e,n,r){var o,a,s,c,l=r.mapper.toViewElement(n.item);fd(l,n.item,t)&&(o=r.writer,a=i,s=l,c=o.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(e){var t,n,i=this.toDomElement(e);return function(e,t){for(var n=0,i=bd;n<i.length;n++){var r=i[n],o=new Lc({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+r],title:t[r]},children:[e.ownerDocument.importNode(yd,!0)]});e.appendChild(o.render())}}(i,a),t=i,n=new Lc({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}}),t.appendChild(n.render()),i}),o.insert(o.createPositionAt(s,"end"),c))},{priority:"low"})}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function(){var e=this,t=this.editor,n=t.model,i=n.document.selection,r=n.schema;function o(e){return"ck-widget_type-around_show-fake-caret_"+e}this._listenToIfEnabled(t.editing.view.document,"arrowKey",function(t,n){e._handleArrowKeyPress(t,n)},{context:[nd,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",function(e,n){n.directChange&&t.model.change(function(e){e.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(n.document,"change:data",function(){var e=i.getSelectedElement();e&&fd(t.editing.mapper.toViewElement(e),e,r)||t.model.change(function(e){e.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",function(t,n,i){var a=i.writer;if(e._currentFakeCaretModelElement){var s=i.mapper.toViewElement(e._currentFakeCaretModelElement);s&&(a.removeClass(bd.map(o),s),e._currentFakeCaretModelElement=null)}var c=n.selection.getSelectedElement();if(c){var l=i.mapper.toViewElement(c);if(fd(l,c,r)){var u=pd(n.selection);u&&(a.addClass(o(u),l),e._currentFakeCaretModelElement=c)}}}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",function(e,n,i){i||t.model.change(function(e){e.removeSelectionAttribute("widget-type-around")})})}},{key:"_handleArrowKeyPress",value:function(e,t){var n,i=this.editor,r=i.model,o=r.document.selection,a=r.schema,s=i.editing.view,c=Ji(t.keyCode,i.locale.contentLanguageDirection),l=s.document.selection.getSelectedElement();fd(l,i.editing.mapper.toModelElement(l),a)?n=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed&&(n=this._handleArrowKeyPressWhenSelectionNextToAWidget(c)),n&&(t.preventDefault(),e.stop())}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function(e){var t=this.editor.model,n=pd(t.document.selection);return t.change(function(t){return n?n!==(e?"after":"before")&&(t.removeSelectionAttribute("widget-type-around"),!0):(t.setSelectionAttribute("widget-type-around",e?"after":"before"),!0)})}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function(e){var t=this.editor,n=t.model,i=n.schema,r=t.plugins.get("Widget"),o=r._getObjectElementNextToSelection(e);return!!fd(t.editing.mapper.toViewElement(o),o,i)&&(n.change(function(t){r._setSelectionOverElement(o),t.setSelectionAttribute("widget-type-around",e?"before":"after")}),!0)}},{key:"_enableInsertingParagraphsOnButtonClick",value:function(){var e=this,t=this.editor,n=t.editing.view;this._listenToIfEnabled(n.document,"mousedown",function(i,r){var o=r.domTarget.closest(".ck-widget__type-around__button");if(o){var a,s,c,l=o.classList.contains("ck-widget__type-around__button_before")?"before":"after",u=(a=o,s=n.domConverter,c=a.closest(".ck-widget"),s.mapDomToView(c)),d=t.editing.mapper.toModelElement(u);e._insertParagraph(d,l),r.preventDefault(),i.stop()}})}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function(){var e=this,t=this.editor,n=t.model.document.selection;this._listenToIfEnabled(t.editing.view.document,"enter",function(i,r){if("atTarget"==i.eventPhase){var o,a=n.getSelectedElement(),s=t.editing.mapper.toViewElement(a),c=t.model.schema;e._insertParagraphAccordingToFakeCaretPosition()?o=!0:fd(s,a,c)&&(e._insertParagraph(a,r.isSoft?"before":"after"),o=!0),o&&(r.preventDefault(),i.stop())}},{context:nd})}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function(){var e=this,t=[qi.enter,qi.delete,qi.backspace];this._listenToIfEnabled(this.editor.editing.view.document,"keydown",function(n,i){t.includes(i.keyCode)||md(i)||e._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}},{key:"_enableDeleteIntegration",value:function(){var e=this.editor,t=e.model,n=t.schema;this._listenToIfEnabled(e.editing.view.document,"delete",function(i,r){if("atTarget"==i.eventPhase){var a=pd(t.document.selection);if(a){var s=r.direction,c=t.document.selection.getSelectedElement(),l="forward"==s;if("before"===a===l)e.execute("delete",{selection:t.createSelection(c,"on")});else{var u=n.getNearestSelectionRange(t.createPositionAt(c,a),s);if(u)if(u.isCollapsed){var d=t.createSelection(u.start);if(t.modifySelection(d,{direction:s}),d.focus.isEqual(u.start)){var h=function(e,t){var n,i=t,r=o(t.getAncestors({parentFirst:!0}));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.childCount>1||e.isLimit(a))break;i=a}}catch(s){r.e(s)}finally{r.f()}return i}(n,u.start.parent);t.deleteContent(t.createSelection(h,"on"),{doNotAutoparagraph:!0})}else t.change(function(t){t.setSelection(u),e.execute(l?"deleteForward":"delete")})}else t.change(function(t){t.setSelection(u),e.execute(l?"deleteForward":"delete")})}r.preventDefault(),i.stop()}}},{context:nd})}},{key:"_enableInsertContentIntegration",value:function(){var e=this.editor.model,t=e.document.selection;this._listenToIfEnabled(this.editor.model,"insertContent",function(n,i){var o=r(i,2),a=o[0],s=o[1];if(!s||s.is("documentSelection")){var c=pd(t);return c?(n.stop(),e.change(function(n){var i=t.getSelectedElement(),r=e.createPositionAt(i,c),o=n.createSelection(r),s=e.insertContent(a,o);return n.setSelection(o),s})):void 0}},{priority:"high"})}}],[{key:"pluginName",get:function(){return"WidgetTypeAround"}},{key:"requires",get:function(){return[Yu,$u]}}]),t}(et);function wd(e,t,n){var i,r=e.schema,a="forward"==n?"elementStart":"elementEnd",s=o(e.createRangeIn(t.root).getWalker({startPosition:t,direction:n}));try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.previousPosition,u=c.item,d=c.type;if(r.isLimit(u)&&!r.isInline(u))return l;if(d==a&&r.isBlock(u))return null}}catch(h){s.e(h)}finally{s.f()}return null}function _d(e,t,n){var i="backward"==n?t.end:t.start;if(e.checkChild(i,"$text"))return i;var r,a=o(t.getWalker({direction:n}));try{for(a.s();!(r=a.n()).done;){var s=r.value.nextPosition;if(e.checkChild(s,"$text"))return s}}catch(c){a.e(c)}finally{a.f()}}c(62);var xd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor.editing.view,n=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",function(t,n,i){e._clearPreviouslySelectedWidgets(i.writer);var r,a=i.writer,s=a.document.selection,c=s.getSelectedElement(),l=null,u=o(s.getRanges());try{for(u.s();!(r=u.n()).done;){var d,h=o(r.value);try{for(h.s();!(d=h.n()).done;){var f=d.value.item;nd(f)&&!Td(f,l)&&(a.addClass("ck-widget_selected",f),e._previouslySelected.add(f),l=f,f==c&&a.setSelection(s.getRanges(),{fake:!0,label:sd(c)}))}}catch(p){h.e(p)}finally{h.f()}}}catch(p){u.e(p)}finally{u.f()}},{priority:"low"}),t.addObserver(hu),this.listenTo(n,"mousedown",function(){return e._onMousedown.apply(e,arguments)}),this.listenTo(n,"arrowKey",function(){e._handleSelectionChangeOnArrowKeyPress.apply(e,arguments)},{context:[nd,"$text"]}),this.listenTo(n,"arrowKey",function(){e._preventDefaultOnArrowKeyPress.apply(e,arguments)},{context:"$root"}),this.listenTo(n,"arrowKey",function(e){var t=e.model;return function(n,i){var r=i.keyCode==qi.arrowdown,a=i.shiftKey,s=t.document.selection;if(i.keyCode==qi.arrowup||r){var c=r;if(!a||(l=s).isCollapsed||l.isBackward!=c){var l,u=function(e,t,n){var i=e.model;if(n){var r=t.isCollapsed?t.focus:t.getLastPosition(),o=wd(i,r,"forward");if(!o)return null;var a=i.createRange(r,o),s=_d(i.schema,a,"backward");return s&&r.isBefore(s)?i.createRange(r,s):null}var c=t.isCollapsed?t.focus:t.getFirstPosition(),l=wd(i,c,"backward");if(!l)return null;var u=i.createRange(l,c),d=_d(i.schema,u,"forward");return d&&c.isAfter(d)?i.createRange(d,c):null}(e,s,c);u&&!u.isCollapsed&&function(e,t,n){var i=e.model,r=e.view.domConverter;if(n){var a=i.createSelection(t.start);i.modifySelection(a),a.focus.isAtEnd||t.start.isEqual(a.focus)||(t=i.createRange(a.focus,t.end))}var s,c,l=e.mapper.toViewRange(t),u=r.viewRangeToDom(l),d=o(Eo.getDomRangeRects(u));try{for(d.s();!(c=d.n()).done;){var h=c.value;if(void 0!==s){if(Math.round(h.top)>=s)return!1;s=Math.max(s,Math.round(h.bottom))}else s=Math.round(h.bottom)}}catch(f){d.e(f)}finally{d.f()}return!0}(e,u,c)&&(t.change(function(e){var n=c?u.end:u.start;if(a){var i=t.createSelection(s.anchor);i.setFocus(n),e.setSelection(i)}else e.setSelection(n)}),n.stop(),i.preventDefault(),i.stopPropagation())}}}}(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",function(t,n){e._handleDelete("forward"==n.direction)&&(n.preventDefault(),t.stop())},{context:"$root"})}},{key:"_onMousedown",value:function(e,t){var n=this.editor,i=n.editing.view,r=i.document,o=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(nd(e))return!1;e=e.parent}return!1}(o)){if((Di||ji)&&t.domEvent.detail>=3){var a=n.editing.mapper,s=o.is("attributeElement")?o.findAncestor(function(e){return!e.is("attributeElement")}):o,c=a.toModelElement(s);t.preventDefault(),this.editor.model.change(function(e){e.setSelection(c,"in")})}}else if(nd(o)||(o=o.findAncestor(nd))){Vi&&t.preventDefault(),r.isFocused||i.focus();var l=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(l)}}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function(e,t){var n=t.keyCode,i=this.editor.model,r=i.schema,o=i.document.selection,a=o.getSelectedElement(),s=Ji(n,this.editor.locale.contentLanguageDirection);if(a&&r.isObject(a)){var c=s?o.getLastPosition():o.getFirstPosition(),l=r.getNearestSelectionRange(c,s?"forward":"backward");l&&(i.change(function(e){e.setSelection(l)}),t.preventDefault(),e.stop())}else if(o.isCollapsed){var u=this._getObjectElementNextToSelection(s);u&&r.isObject(u)&&(this._setSelectionOverElement(u),t.preventDefault(),e.stop())}}},{key:"_preventDefaultOnArrowKeyPress",value:function(e,t){var n=this.editor.model,i=n.schema,r=n.document.selection.getSelectedElement();r&&i.isObject(r)&&(t.preventDefault(),e.stop())}},{key:"_handleDelete",value:function(e){var t=this;if(!this.editor.isReadOnly){var n=this.editor.model.document.selection;if(n.isCollapsed){var i=this._getObjectElementNextToSelection(e);return i?(this.editor.model.change(function(e){for(var r=n.anchor.parent;r.isEmpty;){var o=r;r=o.parent,e.remove(o)}t._setSelectionOverElement(i)}),!0):void 0}}}},{key:"_setSelectionOverElement",value:function(e){this.editor.model.change(function(t){t.setSelection(t.createRangeOn(e))})}},{key:"_getObjectElementNextToSelection",value:function(e){var t=this.editor.model,n=t.schema,i=t.createSelection(t.document.selection);t.modifySelection(i,{direction:e?"forward":"backward"});var r=e?i.focus.nodeBefore:i.focus.nodeAfter;return r&&n.isObject(r)?r:null}},{key:"_clearPreviouslySelectedWidgets",value:function(e){var t,n=o(this._previouslySelected);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.removeClass("ck-widget_selected",i)}}catch(r){n.e(r)}finally{n.f()}this._previouslySelected.clear()}}],[{key:"pluginName",get:function(){return"Widget"}},{key:"requires",get:function(){return[kd,$u]}}]),t}(et);function Td(e,t){return!!t&&Array.from(e.getAncestors()).includes(t)}var Ad=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Z(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),yo(e,t,{leading:i,maxWait:t,trailing:r})};c(64);var Sd=function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=Ad(function(t){return e._updateDropMarker(t)},40),this._removeDropMarkerDelayed=Ed(function(){return e._removeDropMarker()},40),this._clearDraggableAttributesDelayed=Ed(function(){return e._clearDraggableAttributes()},40),n.addObserver(zu),n.addObserver(hu),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",function(t,n,i){i?e.forceDisabled("readOnlyMode"):e.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",function(t,n,i){i||e._finalizeDragging(!1)}),Vi&&this.forceDisabled("noAndroidSupport")}},{key:"destroy",value:function(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),t(w(n.prototype),"destroy",this).call(this)}},{key:"_setupDragging",value:function(){var e=this,t=this.editor,n=t.model,i=n.document,r=t.editing.view,o=r.document;this.listenTo(o,"dragstart",function(r,a){var s=i.selection;if(a.target&&a.target.is("editableElement"))a.preventDefault();else{var c=a.target?Pd(a.target):null;if(c){var l=t.editing.mapper.toModelElement(c);e._draggedRange=ka.fromRange(n.createRangeOn(l))}else if(!o.selection.isCollapsed){var u=o.selection.getSelectedElement();u&&nd(u)||(e._draggedRange=ka.fromRange(s.getFirstRange()))}if(e._draggedRange){e._draggingUid=x(),a.dataTransfer.effectAllowed=e.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",e._draggingUid);var d=n.createSelection(e._draggedRange.toRange()),h=t.data.toView(n.getSelectedContent(d));o.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:h,method:r.name}),e.isEnabled||(e._draggedRange.detach(),e._draggedRange=null,e._draggingUid="")}else a.preventDefault()}},{priority:"low"}),this.listenTo(o,"dragend",function(t,n){e._finalizeDragging(!n.dataTransfer.isCanceled&&"move"==n.dataTransfer.dropEffect)},{priority:"low"}),this.listenTo(o,"dragenter",function(){e.isEnabled&&r.focus()}),this.listenTo(o,"dragleave",function(){e._removeDropMarkerDelayed()}),this.listenTo(o,"dragging",function(n,i){if(e.isEnabled){e._removeDropMarkerDelayed.cancel();var r=Cd(t,i.targetRanges,i.target);e._draggedRange||(i.dataTransfer.dropEffect="copy"),ji||("copy"==i.dataTransfer.effectAllowed?i.dataTransfer.dropEffect="copy":["all","copyMove"].includes(i.dataTransfer.effectAllowed)&&(i.dataTransfer.dropEffect="move")),r&&e._updateDropMarkerThrottled(r)}else i.dataTransfer.dropEffect="none"},{priority:"low"})}},{key:"_setupClipboardInputIntegration",value:function(){var e=this,t=this.editor;this.listenTo(t.editing.view.document,"clipboardInput",function(n,i){if("drop"==i.method){var r=Cd(t,i.targetRanges,i.target);return e._removeDropMarker(),r?(e._draggedRange&&e._draggingUid!=i.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(e._draggedRange.detach(),e._draggedRange=null,e._draggingUid=""),"move"==Od(i.dataTransfer)&&e._draggedRange&&e._draggedRange.containsRange(r,!0)?(e._finalizeDragging(!1),void n.stop()):void(i.targetRanges=[t.editing.mapper.toViewRange(r)])):(e._finalizeDragging(!1),void n.stop())}},{priority:"high"})}},{key:"_setupContentInsertionIntegration",value:function(){var e=this,t=this.editor.plugins.get(qu);t.on("contentInsertion",function(t,n){if(e.isEnabled&&"drop"===n.method){var i=n.targetRanges.map(function(t){return e.editor.editing.mapper.toModelRange(t)});e.editor.model.change(function(e){return e.setSelection(i)})}},{priority:"high"}),t.on("contentInsertion",function(t,n){if(e.isEnabled&&"drop"===n.method){var i="move"==Od(n.dataTransfer);e._finalizeDragging((!n.resultRange||!n.resultRange.isCollapsed)&&i)}},{priority:"lowest"})}},{key:"_setupDraggableAttributeHandling",value:function(){var e=this,t=this.editor,n=t.editing.view,i=n.document;this.listenTo(i,"mousedown",function(r,o){if(!Vi&&o){e._clearDraggableAttributesDelayed.cancel();var a=Pd(o.target);if(Zi&&!t.isReadOnly&&!a&&!i.selection.isCollapsed){var s=i.selection.getSelectedElement();s&&nd(s)||(a=i.selection.editableElement)}a&&(n.change(function(e){e.setAttribute("draggable","true",a)}),e._draggableElement=t.editing.mapper.toModelElement(a))}}),this.listenTo(i,"mouseup",function(){Vi||e._clearDraggableAttributesDelayed()})}},{key:"_clearDraggableAttributes",value:function(){var e=this,t=this.editor.editing;t.view.change(function(n){e._draggableElement&&"$graveyard"!=e._draggableElement.root.rootName&&n.removeAttribute("draggable",t.mapper.toViewElement(e._draggableElement)),e._draggableElement=null})}},{key:"_setupDropMarker",value:function(){var e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:function(t,n){var i=n.writer;if(e.model.schema.checkChild(t.markerRange.start,"$text"))return i.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(e){var t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t})}})}},{key:"_updateDropMarker",value:function(e){var t=this.editor,n=t.model.markers;t.model.change(function(t){n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}},{key:"_removeDropMarker",value:function(){var e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(function(e){e.removeMarker("drop-target")})}},{key:"_finalizeDragging",value:function(e){var t=this.editor.model;this._removeDropMarker(),this._clearDraggableAttributes(),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&t.deleteContent(t.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}],[{key:"pluginName",get:function(){return"DragDrop"}},{key:"requires",get:function(){return[qu,xd]}}]),n}(et);function Cd(e,t,n){var i=e.model,r=e.editing.mapper,o=null,a=t?t[0].start:null;if(n.is("uiElement")&&(n=n.parent),o=function(e,t){var n=e.model,i=e.editing.mapper;if(nd(t))return n.createRangeOn(i.toModelElement(t));if(!t.is("editableElement")){var r=t.findAncestor(function(e){return nd(e)||e.is("editableElement")});if(nd(r))return n.createRangeOn(i.toModelElement(r))}return null}(e,n),o)return o;var s,c,l,u,d=function(e,t){var n=e.editing.mapper,i=e.editing.view,r=n.toModelElement(t);if(r)return r;var o=i.createPositionBefore(t),a=n.findMappedViewAncestor(o);return n.toModelElement(a)}(e,n),h=a?r.toModelPosition(a):null;return h?(o=function(e,t,n){var i=e.model;if(!i.schema.checkChild(n,"$block"))return null;var r=i.createPositionAt(n,0),o=t.path.slice(0,r.path.length),a=i.createPositionFromPath(t.root,o).nodeAfter;return a&&i.schema.isObject(a)?i.createRangeOn(a):null}(e,h,d),o||((o=i.schema.getNearestSelectionRange(h,ji?"forward":"backward"))||function(e,t){for(var n=e.model;t;){if(n.schema.isObject(t))return n.createRangeOn(t);t=t.parent}}(e,h.parent))):(s=d,c=e.model,l=c.schema,u=c.createPositionAt(s,0),l.getNearestSelectionRange(u,"forward"))}function Od(e){return ji?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function Ed(e,t){var n;function i(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i.cancel(),n=setTimeout(function(){return e.apply(void 0,o)},t)}return i.cancel=function(){clearTimeout(n)},i}function Pd(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(nd);if(nd(e))return e;var t=e.findAncestor(function(e){return nd(e)||e.is("editableElement")});return nd(t)?t:null}var Id=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model,n=e.editing.view,i=n.document,s=t.document.selection,c=!1;n.addObserver(zu),this.listenTo(i,"keydown",function(e,t){c=t.shiftKey}),e.plugins.get(qu).on("contentInsertion",function(e,n){(c||function(e,t){if(e.childCount>1)return!1;var n=e.getChild(0);return!t.isObject(n)&&0==a(n.getAttributeKeys()).length}(n.content,t.schema))&&t.change(function(e){var i=Array.from(s.getAttributes()).filter(function(e){var n=r(e,1)[0];return t.schema.getAttributeProperties(n).isFormatting});s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0}),i.push.apply(i,a(s.getAttributes()));var c,l=o(e.createRangeIn(n.content).getItems());try{for(l.s();!(c=l.n()).done;){var u=c.value;u.is("$textProxy")&&e.setAttributes(i,u)}}catch(d){l.e(d)}finally{l.f()}})})}}],[{key:"pluginName",get:function(){return"PastePlainText"}},{key:"requires",get:function(){return[qu]}}]),t}(et),Md=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"Clipboard"}},{key:"requires",get:function(){return[qu,Sd,Id]}}]),t}(et),Nd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change(function(i){(function(e,t,n){var i=n.isCollapsed,r=n.getFirstRange(),o=r.end.parent,a=r.start.parent==o;if(i){var s=Bu(e.schema,n.getAttributes());Ld(e,t,r.end),t.removeSelectionAttribute(n.getAttributeKeys()),t.setSelectionAttribute(s)}else{var c=!(r.start.isAtStart&&r.end.isAtEnd);e.deleteContent(n,{leaveUnmerged:c}),a?Ld(e,t,n.focus):c&&t.setSelection(o,0)}})(t,i,n.selection),e.fire("afterExecute",{writer:i})})}},{key:"refresh",value:function(){var e=this.editor.model;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;var n=t.anchor;if(!n||!e.checkChild(n,"softBreak"))return!1;var i=t.getFirstRange(),r=i.start.parent,o=i.end.parent;return!((Rd(r,e)||Rd(o,e))&&r!==o)}(e.schema,e.document.selection)}}]),t}(nt);function Ld(e,t,n){var i=t.createElement("softBreak");e.insertContent(i,n),t.setSelection(i,"after")}function Rd(e,t){return!e.is("rootElement")&&(t.isLimit(e)||Rd(e.parent,t))}var jd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.conversion,n=e.editing.view,i=n.document;e.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),t.for("upcast").elementToElement({model:"softBreak",view:"br"}),t.for("downcast").elementToElement({model:"softBreak",view:function(e,t){return t.writer.createEmptyElement("br")}}),n.addObserver(Wu),e.commands.add("shiftEnter",new Nd(e)),this.listenTo(i,"enter",function(t,i){i.preventDefault(),i.isSoft&&(e.execute("shiftEnter"),n.scrollToTheSelection())},{priority:"low"})}}],[{key:"pluginName",get:function(){return"ShiftEnter"}}]),t}(et),Dd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(){var e=this.editor.model,t=e.document.selection,n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!Vd(e.schema,n))do{if(!(n=n.parent))return}while(!Vd(e.schema,n));e.change(function(e){e.setSelection(n,"in")})}}]),t}(nt);function Vd(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}var Zd=Hi("Ctrl+A"),zd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new Dd(e)),this.listenTo(t,"keydown",function(t,n){Ui(n)===Zd&&(e.execute("selectAll"),n.preventDefault())})}}],[{key:"pluginName",get:function(){return"SelectAllEditing"}}]),t}(et),Fd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor;t.ui.componentFactory.add("selectAll",function(n){var i=t.commands.get("selectAll"),r=new nl(n);return r.set({label:(0,n.t)("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),r.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(r,"execute",function(){t.execute("selectAll"),t.editing.view.focus()}),r})}}],[{key:"pluginName",get:function(){return"SelectAllUI"}}]),t}(et),qd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[zd,Fd]}},{key:"pluginName",get:function(){return"SelectAll"}}]),t}(et),Bd=function(e){function n(e,t){var i;return l(this,n),(i=f(this,n,[e]))._buffer=new Ju(e.model,t),i._batches=new WeakSet,i}return g(n,e),d(n,[{key:"buffer",get:function(){return this._buffer}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),this._buffer.destroy()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=n.document,r=t.text||"",o=r.length,a=t.range?n.createSelection(t.range):i.selection,s=t.resultRange;n.enqueueChange(this._buffer.batch,function(t){e._buffer.lock(),e._batches.add(e._buffer.batch),n.deleteContent(a),r&&n.insertContent(t.createText(r,i.selection.getAttributes()),a),s?t.setSelection(s):a.is("documentSelection")||t.setSelection(a),e._buffer.unlock(),e._buffer.input(o)})}}]),n}(nt);function Ud(e){if(e.newChildren.length-e.oldChildren.length==1){var t=function(e,t){var n,i=[],r=0;return e.forEach(function(e){"equal"==e?(o(),r++):"insert"==e?(a("insert")?n.values.push(t[r]):(o(),n={type:"insert",index:r,values:[t[r]]}),r++):a("delete")?n.howMany++:(o(),n={type:"delete",index:r,howMany:1})}),o(),i;function o(){n&&(i.push(n),n=null)}function a(e){return n&&n.type==e}}(_r(e.oldChildren,e.newChildren,Hd),e.newChildren);if(!(t.length>1)){var n=t[0];return n.values[0]&&n.values[0].is("$text")?n:void 0}}}function Hd(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t}var Wd=function(){function e(t){l(this,e),this.editor=t,this.editing=this.editor.editing}return d(e,[{key:"handle",value:function(e,t){if(function(e){if(0==e.length)return!1;var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("children"===i.type&&!Ud(i))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}(e))this._handleContainerChildrenMutations(e,t);else{var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._handleTextMutation(r,t),this._handleTextNodeInsertion(r)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"_handleContainerChildrenMutations",value:function(e,t){var n=function(e){var t=e.map(function(e){return e.node}).reduce(function(e,t){return e.getCommonAncestor(t,{includeSelf:!0})});if(t)return t.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(e){return e.is("containerElement")||e.is("rootElement")})}(e);if(n){var i=this.editor.editing.view.domConverter.mapViewToDom(n),r=new jr(this.editor.editing.view.document),o=this.editor.data.toModel(r.domToView(i)).getChild(0),a=this.editor.editing.mapper.toModelElement(n);if(a){var s=Array.from(o.getChildren()),c=Array.from(a.getChildren()),l=s[s.length-1],u=c[c.length-1],d=l&&l.is("element","softBreak"),h=u&&!u.is("element","softBreak");d&&h&&s.pop();var f=this.editor.model.schema;if(Yd(s,f)&&Yd(c,f)){var p=s.map(function(e){return e.is("$text")?e.data:"@"}).join("").replace(/\u00A0/g," "),v=c.map(function(e){return e.is("$text")?e.data:"@"}).join("").replace(/\u00A0/g," ");if(v!==p){var g=Jd(_r(v,p)),m=g.firstChangeAt,b=g.insertions,y=g.deletions,k=null;t&&(k=this.editing.mapper.toModelRange(t.getFirstRange()));var w=p.substr(m,b),_=this.editor.model.createRange(this.editor.model.createPositionAt(a,m),this.editor.model.createPositionAt(a,m+y));this.editor.execute("input",{text:w,range:_,resultRange:k})}}}}}},{key:"_handleTextMutation",value:function(e,t){if("text"==e.type){var n=e.newText.replace(/\u00A0/g," "),i=e.oldText.replace(/\u00A0/g," ");if(i!==n){var r=Jd(_r(i,n)),o=r.firstChangeAt,a=r.insertions,s=r.deletions,c=null;t&&(c=this.editing.mapper.toModelRange(t.getFirstRange()));var l=this.editing.view.createPositionAt(e.node,o),u=this.editing.mapper.toModelPosition(l),d=this.editor.model.createRange(u,u.getShiftedBy(s)),h=n.substr(o,a);this.editor.execute("input",{text:h,range:d,resultRange:c})}}}},{key:"_handleTextNodeInsertion",value:function(e){if("children"==e.type){var t=Ud(e),n=this.editing.view.createPositionAt(e.node,t.index),i=this.editing.mapper.toModelPosition(n);this.editor.execute("input",{text:t.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(i)})}}}]),e}();function Yd(e,t){return e.every(function(e){return t.isInline(e)})}function Jd(e){for(var t=null,n=null,i=0;i<e.length;i++)"equal"!=e[i]&&(t=null===t?i:t,n=i);for(var r=0,o=0,a=t;a<=n;a++)"insert"!=e[a]&&r++,"delete"!=e[a]&&o++;return{insertions:o,deletions:r,firstChangeAt:t}}var Qd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e,t=this.editor,n=new Bd(t,t.config.get("typing.undoStep")||20);t.commands.add("input",n),function(e){var t=null,n=e.model,i=e.editing.view,r=e.commands.get("input");function o(){var e=r.buffer;e.lock();var t=e.batch;r._batches.add(t),n.enqueueChange(t,function(){n.deleteContent(n.document.selection)}),e.unlock()}i.document.on(Vi?"beforeinput":"keydown",function(e,a){return function(e){var a=n.document,s=i.document.isComposing,c=t&&t.isEqual(a.selection);t=null,r.isEnabled&&(md(e)||a.selection.isCollapsed||s&&229===e.keyCode||!s&&229===e.keyCode&&c||o())}(a)},{priority:"lowest"}),i.document.on("compositionstart",function(){var e=n.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||o()},{priority:"lowest"}),i.document.on("compositionend",function(){t=n.createSelection(n.document.selection)},{priority:"lowest"})}(t),(e=t).editing.view.document.on("mutations",function(t,n,i){new Wd(e).handle(n,i)})}},{key:"isInput",value:function(e){return this.editor.commands.get("input")._batches.has(e)}}],[{key:"pluginName",get:function(){return"Input"}}]),t}(et),Gd=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Qd,$u]}},{key:"pluginName",get:function(){return"Typing"}}]),t}(et);function $d(e,t){var n=e.start;return{text:Array.from(e.getItems()).reduce(function(e,i){return i.is("$text")||i.is("$textProxy")?e+i.data:(n=t.createPositionAfter(i),"")},""),range:t.createRange(n,e.end)}}var Kd=function(){function e(t,n){var i=this;l(this,e),this.model=t,this.testCallback=n,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",function(){i.isEnabled?i._startListening():(i.stopListening(t.document.selection),i.stopListening(t.document))}),this._startListening()}return d(e,[{key:"_startListening",value:function(){var e=this,t=this.model.document;this.listenTo(t.selection,"change:range",function(n,i){i.directChange&&(t.selection.isCollapsed?e._evaluateTextBeforeSelection("selection"):e.hasMatch&&(e.fire("unmatched"),e.hasMatch=!1))}),this.listenTo(t,"change:data",function(t,n){"transparent"!=n.type&&e._evaluateTextBeforeSelection("data",{batch:n})})}},{key:"_evaluateTextBeforeSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,i=n.document.selection,r=n.createRange(n.createPositionAt(i.focus.parent,0),i.focus),o=$d(r,n),a=o.text,s=o.range,c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!c,c){var l=Object.assign(t,{text:a,range:s});"object"==typeof c&&Object.assign(l,c),this.fire("matched:"+e,l)}}}]),e}();Xe(Kd,Ye);var Xd=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).attributes=new Set,n._overrideUid=null,n}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.locale,i=t.model.document.selection;this.listenTo(t.editing.view.document,"arrowKey",function(t,r){if(i.isCollapsed&&!r.shiftKey&&!r.altKey&&!r.ctrlKey){var o=r.keyCode==qi.arrowright,a=r.keyCode==qi.arrowleft;if(o||a){var s=n.contentLanguageDirection;!0===("ltr"===s&&o||"rtl"===s&&a?e._handleForwardMovement(r):e._handleBackwardMovement(r))&&t.stop()}}},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(i,"change:range",function(t,n){e._isNextGravityRestorationSkipped?e._isNextGravityRestorationSkipped=!1:e._isGravityOverridden&&(!n.directChange&&ih(i.getFirstPosition(),e.attributes)||e._restoreGravity())})}},{key:"registerAttribute",value:function(e){this.attributes.add(e)}},{key:"_handleForwardMovement",value:function(e){var t=this.attributes,n=this.editor.model.document.selection,i=n.getFirstPosition();return!this._isGravityOverridden&&(!i.isAtStart||!eh(n,t))&&(ih(i,t)?(nh(e),this._overrideGravity(),!0):void 0)}},{key:"_handleBackwardMovement",value:function(e){var t,n=this.attributes,i=this.editor.model,r=i.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(nh(e),this._restoreGravity(),th(i,n,o),!0):o.isAtStart?!!eh(r,n)&&(nh(e),th(i,n,o),!0):(t=n,ih(o.getShiftedBy(-1),t)?o.isAtEnd&&!eh(r,n)&&ih(o,n)?(nh(e),th(i,n,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0)}},{key:"_isGravityOverridden",get:function(){return!!this._overrideUid}},{key:"_overrideGravity",value:function(){this._overrideUid=this.editor.model.change(function(e){return e.overrideSelectionGravity()})}},{key:"_restoreGravity",value:function(){var e=this;this.editor.model.change(function(t){t.restoreSelectionGravity(e._overrideUid),e._overrideUid=null})}}],[{key:"pluginName",get:function(){return"TwoStepCaretMovement"}}]),t}(et);function eh(e,t){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(e.hasAttribute(r))return!0}}catch(a){i.e(a)}finally{i.f()}return!1}function th(e,t,n){var i=n.nodeBefore;e.change(function(e){i?e.setSelectionAttribute(i.getAttributes()):e.removeSelectionAttribute(t)})}function nh(e){e.preventDefault()}function ih(e,t){var n,i=e.nodeBefore,r=e.nodeAfter,a=o(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=i?i.getAttribute(s):void 0;if((r?r.getAttribute(s):void 0)!==c)return!0}}catch(l){a.e(l)}finally{a.f()}return!1}var rh=/[\\^$.*+?()[\]{}|]/g,oh=RegExp(rh.source),ah={copyright:{from:"(c)",to:"\xa9"},registeredTrademark:{from:"(r)",to:"\xae"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:"1/2",to:"\xbd"},oneThird:{from:"1/3",to:"\u2153"},twoThirds:{from:"2/3",to:"\u2154"},oneForth:{from:"1/4",to:"\xbc"},threeQuarters:{from:"3/4",to:"\xbe"},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:hh('"'),to:[null,"\u201c",null,"\u201d"]},quotesSecondary:{from:hh("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:hh("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:hh('"'),to:[null,"\u201c",null,"\u201d"]},quotesPrimaryPl:{from:hh('"'),to:[null,"\u201e",null,"\u201d"]},quotesSecondaryPl:{from:hh("'"),to:[null,"\u201a",null,"\u2019"]}},sh={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},ch=["symbols","mathematical","typography","quotes"];function lh(e){return"string"==typeof e?new RegExp("(".concat(function(e){return(e=Yn(e))&&oh.test(e)?e.replace(rh,"\\$&"):e}(e),")$")):e}function uh(e){return"string"==typeof e?function(){return[e]}:e instanceof Array?function(){return e}:e}function dh(e){return(e.textNode?e.textNode:e.nodeAfter).getAttributes()}function hh(e){return new RegExp("(^|\\s)(".concat(e,")([^").concat(e,"]*)(").concat(e,")$"))}function fh(e,t,n,i){return i.createRange(ph(e,t,n,!0,i),ph(e,t,n,!1,i))}function ph(e,t,n,i,r){for(var o=e.textNode||(i?e.nodeBefore:e.nodeAfter),a=null;o&&o.getAttribute(t)==n;)a=o,o=i?o.previousSibling:o.nextSibling;return a?r.createPositionAt(a,i?"before":"after"):e}var vh=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e]))._stack=[],n._createdBatches=new WeakSet,n.refresh(),n.listenTo(e.data,"set",function(){return n.clearStack()}),n}return g(t,e),d(t,[{key:"refresh",value:function(){this.isEnabled=this._stack.length>0}},{key:"addBatch",value:function(e){var t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}},{key:"clearStack",value:function(){this._stack=[],this.refresh()}},{key:"_restoreSelection",value:function(e,t,n){var i,r=this.editor.model,a=r.document,s=[],c=e.map(function(e){return e.getTransformedByOperations(n)}),l=c.flat(),u=o(c);try{for(u.s();!(i=u.n()).done;){var d=i.value.filter(function(e){return e.root!=a.graveyard}).filter(function(e){return!mh(e,l)});d.length&&(gh(d),s.push(d[0]))}}catch(h){u.e(h)}finally{u.f()}s.length&&r.change(function(e){e.setSelection(s,{backward:t})})}},{key:"_undo",value:function(e,t){var n=this.editor.model,i=n.document;this._createdBatches.add(t);var r=e.operations.slice().filter(function(e){return e.isDocumentOperation});r.reverse();var a,s=o(r);try{for(s.s();!(a=s.n()).done;){var c,l=a.value,u=Array.from(i.history.getOperations(l.baseVersion+1)),d=o(ru([l.getReversed()],u,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA);try{for(d.s();!(c=d.n()).done;){var h=c.value;t.addOperation(h),n.applyOperation(h),i.history.setOperationAsUndone(l,h)}}catch(f){d.e(f)}finally{d.f()}}}catch(f){s.e(f)}finally{s.f()}}}]),t}(nt);function gh(e){e.sort(function(e,t){return e.start.isBefore(t.start)?-1:1});for(var t=1;t<e.length;t++){var n=e[t-1].getJoined(e[t],!0);n&&(t--,e.splice(t,2,n))}}function mh(e,t){return t.some(function(t){return t!==e&&t.containsRange(e,!0)})}var bh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t?this._stack.findIndex(function(e){return e.batch==t}):this._stack.length-1,i=this._stack.splice(n,1)[0],r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,function(){e._undo(i.batch,r);var t=e.editor.model.document.history.getOperations(i.batch.baseVersion);e._restoreSelection(i.selection.ranges,i.selection.isBackward,t),e.fire("revert",i.batch,r)}),this.refresh()}}]),t}(vh),yh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(){var e=this,t=this._stack.pop(),n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,function(){var i=e.editor.model.document.history.getOperations(t.batch.operations[t.batch.operations.length-1].baseVersion+1);e._restoreSelection(t.selection.ranges,t.selection.isBackward,i),e._undo(t.batch,n)}),this.refresh()}}]),t}(vh),kh=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e]))._batchRegistry=new WeakSet,n}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor;this._undoCommand=new bh(t),this._redoCommand=new yh(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",function(t,n){var i=n[0];if(i.isDocumentOperation){var r=i.batch,o=e._redoCommand._createdBatches.has(r),a=e._undoCommand._createdBatches.has(r);e._batchRegistry.has(r)||"transparent"==r.type&&!o&&!a||(o?e._undoCommand.addBatch(r):a||(e._undoCommand.addBatch(r),e._redoCommand.clearStack()),e._batchRegistry.add(r))}},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(t,n,i){e._redoCommand.addBatch(i)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}],[{key:"pluginName",get:function(){return"UndoEditing"}}]),t}(et),wh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',_h='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',xh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.locale,n=e.t,i="ltr"==t.uiLanguageDirection?wh:_h,r="ltr"==t.uiLanguageDirection?_h:wh;this._addButton("undo",n("Undo"),"CTRL+Z",i),this._addButton("redo",n("Redo"),"CTRL+Y",r)}},{key:"_addButton",value:function(e,t,n,i){var r=this,o=this.editor;o.ui.componentFactory.add(e,function(a){var s=o.commands.get(e),c=new nl(a);return c.set({label:t,icon:i,keystroke:n,tooltip:!0}),c.bind("isEnabled").to(s,"isEnabled"),r.listenTo(c,"execute",function(){o.execute(e),o.editing.view.focus()}),c})}}],[{key:"pluginName",get:function(){return"UndoUI"}}]),t}(et),Th=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[kh,xh]}},{key:"pluginName",get:function(){return"Undo"}}]),t}(et),Ah=["left","right","center","justify"];function Sh(e){return Ah.includes(e)}function Ch(e,t){return"rtl"==t.contentLanguageDirection?"right"===e:"left"===e}function Oh(e){var t=e.map(function(e){return"string"==typeof e?{name:e}:e}).filter(function(e){var t=!!Ah.includes(e.name);return t||Object(A.b)("alignment-config-name-not-recognized",{option:e}),t}),n=t.filter(function(e){return!!e.className}).length;if(n&&n<t.length)throw new A.a("alignment-config-classnames-are-missing",{configuredOptions:e});return t.forEach(function(t,n,i){var r=i.slice(n+1);if(r.some(function(e){return e.name==t.name}))throw new A.a("alignment-config-name-already-defined",{option:t,configuredOptions:e});if(t.className&&r.some(function(e){return e.className==t.className}))throw new A.a("alignment-config-classname-already-defined",{option:t,configuredOptions:e})}),t}var Eh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.locale,t=Ro(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.value=this.isEnabled&&t.hasAttribute("alignment")?t.getAttribute("alignment"):"rtl"===e.contentLanguageDirection?"right":"left"}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor,i=n.locale,r=n.model,a=r.document,s=t.value;r.change(function(t){var n=Array.from(a.selection.getSelectedBlocks()).filter(function(t){return e._canBeAligned(t)}),r=n[0].getAttribute("alignment");Ch(s,i)||r===s||!s?function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t.removeAttribute("alignment",r)}}catch(a){i.e(a)}finally{i.f()}}(n,t):function(e,t,n){var i,r=o(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.setAttribute("alignment",n,a)}}catch(s){r.e(s)}finally{r.f()}}(n,t,s)})}},{key:"_canBeAligned",value:function(e){return this.editor.model.schema.checkAttribute(e,"alignment")}}]),t}(nt),Ph=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("alignment",{options:a(Ah.map(function(e){return{name:e}}))}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.locale,n=e.model.schema,i=Oh(e.config.get("alignment.options")).filter(function(e){return Sh(e.name)&&!Ch(e.name,t)}),r=i.some(function(e){return!!e.className});n.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(function(e){var t,n={model:{key:"alignment",values:e.map(function(e){return e.name})},view:{}},i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.view[r.name]={key:"class",value:r.className}}}catch(a){i.e(a)}finally{i.f()}return n}(i)):e.conversion.for("downcast").attributeToAttribute(function(e){var t,n={model:{key:"alignment",values:e.map(function(e){return e.name})},view:{}},i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value.name;n.view[r]={key:"style",value:{"text-align":r}}}}catch(a){i.e(a)}finally{i.f()}return n}(i));var a,s=function(e){var t,n=[],i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value.name;n.push({view:{key:"style",value:{"text-align":r}},model:{key:"alignment",value:r}})}}catch(a){i.e(a)}finally{i.f()}return n}(i),c=o(s);try{for(c.s();!(a=c.n()).done;){var l=a.value;e.conversion.for("upcast").attributeToAttribute(l)}}catch(p){c.e(p)}finally{c.f()}var u,d=function(e){var t,n=[],i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value.name;n.push({view:{key:"align",value:r},model:{key:"alignment",value:r}})}}catch(p){i.e(p)}finally{i.f()}return n}(i),h=o(d);try{for(h.s();!(u=h.n()).done;){var f=u.value;e.conversion.for("upcast").attributeToAttribute(f)}}catch(p){h.e(p)}finally{h.f()}e.commands.add("alignment",new Eh(e))}}],[{key:"pluginName",get:function(){return"AlignmentEditing"}}]),t}(et),Ih=new Map([["left",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>'],["right",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>'],["center",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>'],["justify",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>']]),Mh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"localizedOptionTitles",get:function(){var e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}},{key:"init",value:function(){var e=this,t=this.editor,n=t.ui.componentFactory,i=t.t,r=Oh(t.config.get("alignment.options"));r.map(function(e){return e.name}).filter(Sh).forEach(function(t){return e._addButton(t)}),n.add("alignment",function(e){var t=Cl(e),o=r.map(function(e){return n.create("alignment:"+e.name)});Ol(t,o),t.buttonView.set({label:i("Text alignment"),tooltip:!0}),t.toolbarView.isVertical=!0,t.toolbarView.ariaLabel=i("Text alignment toolbar"),t.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});var a=Ih.get("rtl"===e.contentLanguageDirection?"right":"left");return t.buttonView.bind("icon").toMany(o,"isOn",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.findIndex(function(e){return e});return i<0?a:o[i].icon}),t.bind("isEnabled").toMany(o,"isEnabled",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return e})}),t})}},{key:"_addButton",value:function(e){var t=this,n=this.editor;n.ui.componentFactory.add("alignment:"+e,function(i){var r=n.commands.get("alignment"),o=new nl(i);return o.set({label:t.localizedOptionTitles[e],icon:Ih.get(e),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"value",function(t){return t===e}),t.listenTo(o,"execute",function(){n.execute("alignment",{value:e}),n.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"AlignmentUI"}}]),t}(et),Nh=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).attributeKey=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=n.document.selection,r=t.value;n.change(function(t){if(i.isCollapsed)r?t.setSelectionAttribute(e.attributeKey,r):t.removeSelectionAttribute(e.attributeKey);else{var a,s=o(n.schema.getValidRanges(i.getRanges(),e.attributeKey));try{for(s.s();!(a=s.n()).done;){var c=a.value;r?t.setAttribute(e.attributeKey,r,c):t.removeAttribute(e.attributeKey,c)}}catch(l){s.e(l)}finally{s.f()}}})}}]),t}(nt),Lh=function(e){function n(e){var t;return l(this,n),(t=f(this,n,[e])).set("isEmpty",!0),t.on("change",function(){t.set("isEmpty",0===t.length)}),t}return g(n,e),d(n,[{key:"add",value:function(e,i){this.find(function(t){return t.color===e.color})||t(w(n.prototype),"add",this).call(this,e,i)}},{key:"hasColor",value:function(e){return!!this.find(function(t){return t.color===e})}}]),n}(kn);Xe(Lh,Ye),c(66);var Rh=function(e){function n(e,t){var i,r=t.colors,o=t.columns,a=t.removeButtonLabel,s=t.documentColorsLabel,c=t.documentColorsCount;return l(this,n),(i=f(this,n,[e])).items=i.createCollection(),i.colorDefinitions=r,i.focusTracker=new jo,i.keystrokes=new Do,i.set("selectedColor"),i.removeButtonLabel=a,i.columns=o,i.documentColors=new Lh,i.documentColorsCount=c,i._focusCycler=new al({focusables:i.items,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),i._documentColorsLabel=s,i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:i.items}),i.items.add(i._removeColorButton()),i}return g(n,e),d(n,[{key:"updateDocumentColors",value:function(e,t){var n=e.document,i=this.documentColorsCount;this.documentColors.clear();var r,a=o(n.getRootNames());try{for(a.s();!(r=a.n()).done;){var s,c=r.value,l=n.getRoot(c),u=o(e.createRangeIn(l).getItems());try{for(u.s();!(s=u.n()).done;){var d=s.value;if(d.is("$textProxy")&&d.hasAttribute(t)&&(this._addColorToDocumentColors(d.getAttribute(t)),this.documentColors.length>=i))return}}catch(h){u.e(h)}finally{u.f()}}}catch(h){a.e(h)}finally{a.f()}}},{key:"updateSelectedColors",value:function(){var e=this.documentColorsGrid,t=this.selectedColor;this.staticColorsGrid.selectedColor=t,e&&(e.selectedColor=t)}},{key:"render",value:function(){t(w(n.prototype),"render",this).call(this);var e,i=o(this.items);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.focusTracker.add(r.element)}}catch(a){i.e(a)}finally{i.f()}this.keystrokes.listenTo(this.element)}},{key:"appendGrids",value:function(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){var e=Lc.bind(this.documentColors,this.documentColors),t=new Il(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"_removeColorButton",value:function(){var e=this,t=new nl;return t.set({withText:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',tooltip:!0,label:this.removeButtonLabel}),t.class="ck-color-table__remove-color",t.on("execute",function(){e.fire("execute",{value:null})}),t}},{key:"_createStaticColorsGrid",value:function(){var e=new cl(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.delegate("execute").to(this),e}},{key:"_createDocumentColorsGrid",value:function(){var e=this,t=Lc.bind(this.documentColors,this.documentColors),n=new cl(this.locale,{columns:this.columns});return n.delegate("execute").to(this),n.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(function(t){var n=new ol;return n.set({color:t.color,hasBorder:t.options&&t.options.hasBorder}),t.label&&n.set({label:t.label,tooltip:!0}),n.on("execute",function(){e.fire("execute",{value:t.color})}),n}),this.documentColors.on("change:isEmpty",function(e,t,i){i&&(n.selectedColor=null)}),n}},{key:"_addColorToDocumentColors",value:function(e){var t=this.colorDefinitions.find(function(t){return t.color===e});this.documentColors.add(t?Object.assign({},t):{color:e,label:e,options:{hasBorder:!1}})}}]),n}(Nc);function jh(e,t){var n,i={model:{key:e,values:[]},view:{},upcastAlso:{}},r=o(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.model.values.push(a.model),i.view[a.model]=a.view,a.upcastAlso&&(i.upcastAlso[a.model]=a.upcastAlso)}}catch(s){r.e(s)}finally{r.f()}return i}function Dh(e){return function(t){return t.getStyle(e).replace(/\s/g,"")}}function Vh(e){return function(t,n){return n.writer.createAttributeElement("span",{style:"".concat(e,":").concat(t)},{priority:7})}}var Zh=function(e){function t(e){return l(this,t),f(this,t,[e,"fontSize"])}return g(t,e),d(t)}(Nh);function zh(e){return e.map(function(e){return function(e){if("object"==typeof(t=e)&&t.title&&t.model&&t.view)return qh(e);var t,n,i=Fh[n=e]||Fh[n.model];return i?qh(i):"default"===e?{model:void 0,title:"Default"}:function(e){var t;if("object"==typeof e){if(!e.model)throw new A.a("font-size-invalid-definition",null,e);t=parseFloat(e.model)}else t=parseFloat(e);return isNaN(t)}(e)?void 0:function(e){return"number"!=typeof e&&"string"!=typeof e||(e={title:String(e),model:parseFloat(e)+"px"}),e.view={name:"span",styles:{"font-size":e.model}},qh(e)}(e)}(e)}).filter(function(e){return!!e})}var Fh={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function qh(e){return e.view.priority||(e.view.priority=7),e}var Bh=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"],Uh=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("fontSize",{options:["tiny","small","default","big","huge"],supportAllValues:!1}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"fontSize"}),e.model.schema.setAttributeProperties("fontSize",{isFormatting:!0,copyOnEnter:!0});var t=e.config.get("fontSize.supportAllValues"),n=jh("fontSize",zh(this.editor.config.get("fontSize.options")).filter(function(e){return e.model}));t?(this._prepareAnyValueConverters(n),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add("fontSize",new Zh(e))}},{key:"_prepareAnyValueConverters",value:function(e){var t=this.editor,n=e.model.values.filter(function(e){return!function(e){return wu.test(e)}(String(e))&&(t=String(e),!_u.test(t));var t});if(n.length)throw new A.a("font-size-invalid-use-of-named-presets",null,{presets:n});t.conversion.for("downcast").attributeToElement({model:"fontSize",view:function(e,t){var n=t.writer;if(e)return n.createAttributeElement("span",{style:"font-size:"+e},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:"fontSize",value:function(e){return e.getStyle("font-size")}},view:{name:"span",styles:{"font-size":/.*/}}})}},{key:"_prepareCompatibilityConverter",value:function(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:"fontSize",value:function(e){var t=e.getAttribute("size"),n="-"===t[0]||"+"===t[0],i=parseInt(t,10);n&&(i=3+i);var r=Bh.length-1,o=Math.min(Math.max(i,0),r);return Bh[o]}}})}}],[{key:"pluginName",get:function(){return"FontSizeEditing"}}]),t}(et);c(68);var Hh=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,i=this._getLocalizedOptions(),r=t.commands.get("fontSize");t.ui.componentFactory.add("fontSize",function(a){var s=Cl(a);return El(s,function(e,t){var n,i=new kn,r=o(e);try{var a=function(){var e=n.value,r={type:"button",model:new Vl({commandName:"fontSize",commandParam:e.model,label:e.title,class:"ck-fontsize-option",withText:!0})};e.view&&e.view.styles&&r.model.set("labelStyle","font-size:"+e.view.styles["font-size"]),e.view&&e.view.classes&&r.model.set("class","".concat(r.model.class," ").concat(e.view.classes)),r.model.bind("isOn").to(t,"value",function(t){return t===e.model}),i.add(r)};for(r.s();!(n=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}return i}(i,r)),s.buttonView.set({label:n("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),s.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),s.bind("isEnabled").to(r),e.listenTo(s,"execute",function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()}),s})}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t,n={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return zh(e.config.get("fontSize").options).map(function(e){var t=n[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e})}}],[{key:"pluginName",get:function(){return"FontSizeUI"}}]),t}(et),Wh=function(e){function t(e){return l(this,t),f(this,t,[e,"fontFamily"])}return g(t,e),d(t)}(Nh);function Yh(e){return e.map(Jh).filter(function(e){return!!e})}function Jh(e){return"object"==typeof e?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){var t=e.replace(/"|'/g,"").split(","),n=t[0],i=t.map(Qh).join(", ");return{title:n,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}(e):void 0}function Qh(e){return(e=e.trim()).indexOf(" ")>0&&(e="'".concat(e,"'")),e}var Gh=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("fontFamily",{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"fontFamily"}),e.model.schema.setAttributeProperties("fontFamily",{isFormatting:!0,copyOnEnter:!0});var t=jh("fontFamily",Yh(e.config.get("fontFamily.options")).filter(function(e){return e.model}));e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(t),e.commands.add("fontFamily",new Wh(e))}},{key:"_prepareAnyValueConverters",value:function(){var e=this.editor;e.conversion.for("downcast").attributeToElement({model:"fontFamily",view:function(e,t){return t.writer.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:"fontFamily",value:function(e){return e.getStyle("font-family")}},view:{name:"span",styles:{"font-family":/.*/}}})}},{key:"_prepareCompatibilityConverter",value:function(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:"fontFamily",value:function(e){return e.getAttribute("face")}}})}}],[{key:"pluginName",get:function(){return"FontFamilyEditing"}}]),t}(et),$h=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,i=this._getLocalizedOptions(),r=t.commands.get("fontFamily");t.ui.componentFactory.add("fontFamily",function(a){var s=Cl(a);return El(s,function(e,t){var n,i=new kn,r=o(e);try{var a=function(){var e=n.value,r={type:"button",model:new Vl({commandName:"fontFamily",commandParam:e.model,label:e.title,withText:!0})};r.model.bind("isOn").to(t,"value",function(t){return t===e.model||!(!t||!e.model)&&t.split(",")[0].replace(/'/g,"").toLowerCase()===e.model.toLowerCase()}),e.view&&e.view.styles&&r.model.set("labelStyle","font-family: "+e.view.styles["font-family"]),i.add(r)};for(r.s();!(n=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}return i}(i,r)),s.buttonView.set({label:n("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),s.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),s.bind("isEnabled").to(r),e.listenTo(s,"execute",function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()}),s})}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t;return Yh(e.config.get("fontFamily").options).map(function(e){return"Default"===e.title&&(e.title=t("Default")),e})}}],[{key:"pluginName",get:function(){return"FontFamilyUI"}}]),t}(et),Kh=function(e){function t(e){return l(this,t),f(this,t,[e,"fontColor"])}return g(t,e),d(t)}(Nh),Xh=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("fontColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:"fontColor",value:Dh("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:"fontColor",value:function(e){return e.getAttribute("color")}}}),e.conversion.for("downcast").attributeToElement({model:"fontColor",view:Vh("color")}),e.commands.add("fontColor",new Kh(e)),e.model.schema.extend("$text",{allowAttributes:"fontColor"}),e.model.schema.setAttributeProperties("fontColor",{isFormatting:!0,copyOnEnter:!0}),n}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"FontColorEditing"}}]),t}(et),ef=function(e){function t(e,n){var i,r=n.commandName,o=n.icon,a=n.componentName,s=n.dropdownLabel;return l(this,t),(i=f(this,t,[e])).commandName=r,i.componentName=a,i.icon=o,i.dropdownLabel=s,i.columns=e.config.get(i.componentName+".columns"),i.colorTableView=void 0,i}return g(t,e),d(t,[{key:"init",value:function(){var e,t,n,i,r=this,o=this.editor,a=o.locale,s=a.t,c=o.commands.get(this.commandName),l=(e=a,t=o.config.get(this.componentName).colors.map(rl).filter(function(e){return!!e}),n=e.t,i={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")},t.map(function(e){var t=i[e.label];return t&&t!=e.label&&(e.label=t),e})),u=o.config.get(this.componentName+".documentColors");o.ui.componentFactory.add(this.componentName,function(e){var t=Cl(e);return r.colorTableView=function(e){var t=e.dropdownView,n=e.colors,i=e.columns,r=e.removeButtonLabel,o=e.documentColorsLabel,a=e.documentColorsCount,s=new Rh(t.locale,{colors:n,columns:i,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a});return t.colorTableView=s,t.panelView.children.add(s),s.delegate("execute").to(t,"execute"),s}({dropdownView:t,colors:l.map(function(e){return{label:e.label,color:e.model,options:{hasBorder:e.hasBorder}}}),columns:r.columns,removeButtonLabel:s("Remove color"),documentColorsLabel:0!==u?s("Document colors"):void 0,documentColorsCount:void 0===u?r.columns:u}),r.colorTableView.bind("selectedColor").to(c,"value"),t.buttonView.set({label:r.dropdownLabel,icon:r.icon,tooltip:!0}),t.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),t.bind("isEnabled").to(c),t.on("execute",function(e,t){o.execute(r.commandName,t),o.editing.view.focus()}),t.on("change:isOpen",function(e,n,i){t.colorTableView.appendGrids(),i&&(0!==u&&r.colorTableView.updateDocumentColors(o.model,r.componentName),r.colorTableView.updateSelectedColors())}),t})}}]),t}(et),tf=function(e){function t(e){return l(this,t),f(this,t,[e,{commandName:"fontColor",componentName:"fontColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:(0,e.locale.t)("Font Color")}])}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"FontColorUI"}}]),t}(ef),nf=function(e){function t(e){return l(this,t),f(this,t,[e,"fontBackgroundColor"])}return g(t,e),d(t)}(Nh),rf=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("fontBackgroundColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Nu),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:"fontBackgroundColor",value:Dh("background-color")}}),e.conversion.for("downcast").attributeToElement({model:"fontBackgroundColor",view:Vh("background-color")}),e.commands.add("fontBackgroundColor",new nf(e)),e.model.schema.extend("$text",{allowAttributes:"fontBackgroundColor"}),e.model.schema.setAttributeProperties("fontBackgroundColor",{isFormatting:!0,copyOnEnter:!0}),n}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"FontBackgroundColorEditing"}}]),t}(et),of=function(e){function t(e){return l(this,t),f(this,t,[e,{commandName:"fontBackgroundColor",componentName:"fontBackgroundColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:(0,e.locale.t)("Font Background Color")}])}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"FontBackgroundColorUI"}}]),t}(ef),af=function(){function e(){var t=this;l(this,e);var n=new window.FileReader;this._reader=n,this._data=void 0,this.set("loaded",0),n.onprogress=function(e){t.loaded=e.loaded}}return d(e,[{key:"error",get:function(){return this._reader.error}},{key:"data",get:function(){return this._data}},{key:"read",value:function(e){var t=this,n=this._reader;return this.total=e.size,new Promise(function(i,r){n.onload=function(){var e=n.result;t._data=e,i(e)},n.onerror=function(){r("error")},n.onabort=function(){r("aborted")},t._reader.readAsDataURL(e)})}},{key:"abort",value:function(){this._reader.abort()}}]),e}();Xe(af,Ye);var sf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this;this.loaders=new kn,this.loaders.on("add",function(){return e._updatePendingAction()}),this.loaders.on("remove",function(){return e._updatePendingAction()}),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0})}},{key:"getLoader",value:function(e){return this._loadersMap.get(e)||null}},{key:"createLoader",value:function(e){var t=this;if(!this.createUploadAdapter)return Object(A.b)("filerepository-no-upload-adapter"),null;var n=new cf(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(function(e){t._loadersMap.set(e,n)}).catch(function(){}),n.on("change:uploaded",function(){var e,n=0,i=o(t.loaders);try{for(i.s();!(e=i.n()).done;){n+=e.value.uploaded}}catch(r){i.e(r)}finally{i.f()}t.uploaded=n}),n.on("change:uploadTotal",function(){var e,n=0,i=o(t.loaders);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.uploadTotal&&(n+=r.uploadTotal)}}catch(a){i.e(a)}finally{i.f()}t.uploadTotal=n}),n}},{key:"destroyLoader",value:function(e){var t=this,n=e instanceof cf?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach(function(e,i){e===n&&t._loadersMap.delete(i)})}},{key:"_updatePendingAction",value:function(){var e=this.editor.plugins.get(_c);if(this.loaders.length){if(!this._pendingAction){var t=this.editor.t,n=function(e){return"".concat(t("Upload in progress")," ").concat(parseInt(e),"%.")};this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}],[{key:"pluginName",get:function(){return"FileRepository"}},{key:"requires",get:function(){return[_c]}}]),t}(et);Xe(sf,Ye);var cf=function(){function e(t,n){l(this,e),this.id=x(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=n(this),this._reader=new af,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0}),this.set("uploadResponse",null)}return d(e,[{key:"file",get:function(){var e=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(t){return e._filePromiseWrapper?t:null}):Promise.resolve(null)}},{key:"data",get:function(){return this._reader.data}},{key:"read",value:function(){var e=this;if("idle"!=this.status)throw new A.a("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(function(t){return e._reader.read(t)}).then(function(t){if("reading"!==e.status)throw e.status;return e.status="idle",t}).catch(function(t){throw"aborted"===t?(e.status="aborted","aborted"):(e.status="error",e._reader.error?e._reader.error:t)})}},{key:"upload",value:function(){var e=this;if("idle"!=this.status)throw new A.a("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(function(){return e._adapter.upload()}).then(function(t){return e.uploadResponse=t,e.status="idle",t}).catch(function(t){throw"aborted"===e.status?"aborted":(e.status="error",t)})}},{key:"abort",value:function(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(function(){}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}},{key:"_destroy",value:function(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}},{key:"_createFilePromiseWrapper",value:function(e){var t={};return t.promise=new Promise(function(n,i){t.rejecter=i,t.isFulfilled=!1,e.then(function(e){t.isFulfilled=!0,n(e)}).catch(function(e){t.isFulfilled=!0,i(e)})}),t}}]),e}();Xe(cf,Ye);var lf=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).buttonView=new nl(e),n._fileInputView=new uf(e),n._fileInputView.bind("acceptedType").to(v(n)),n._fileInputView.bind("allowMultipleFiles").to(v(n)),n._fileInputView.delegate("done").to(v(n)),n.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[n.buttonView,n._fileInputView]}),n.buttonView.on("execute",function(){n._fileInputView.open()}),n}return g(t,e),d(t,[{key:"focus",value:function(){this.buttonView.focus()}}]),t}(Nc),uf=function(e){function t(e){var n;l(this,t),(n=f(this,t,[e])).set("acceptedType"),n.set("allowMultipleFiles",!1);var i=n.bindTemplate;return n.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:i.to("acceptedType"),multiple:i.to("allowMultipleFiles")},on:{change:i.to(function(){n.element&&n.element.files&&n.element.files.length&&n.fire("done",n.element.files),n.element.value=""})}}),n}return g(t,e),d(t,[{key:"open",value:function(){this.element.click()}}]),t}(Nc),df=function(){function e(t,n,i){l(this,e),this.loader=t,this.url=n,this.t=i}return d(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then(function(t){return new Promise(function(n,i){e._initRequest(),e._initListeners(n,i,t),e._sendRequest(t)})})}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}},{key:"_initListeners",value:function(e,t,n){var i=this.xhr,r=this.loader,o=(0,this.t)("Cannot upload file:")+" ".concat(n.name,".");i.addEventListener("error",function(){return t(o)}),i.addEventListener("abort",function(){return t()}),i.addEventListener("load",function(){var n=i.response;if(!n||!n.uploaded)return t(n&&n.error&&n.error.message?n.error.message:o);e({default:n.url})}),i.upload&&i.upload.addEventListener("progress",function(e){e.lengthComputable&&(r.uploadTotal=e.total,r.uploaded=e.loaded)})}},{key:"_sendRequest",value:function(e){var t=new FormData;t.append("upload",e),t.append("ckCsrfToken",function(){var e,t=function(e){e=e.toLowerCase();var t,n=o(document.cookie.split(";"));try{for(n.s();!(t=n.n()).done;){var i=t.value.split("=");if(decodeURIComponent(i[0].trim().toLowerCase())===e)return decodeURIComponent(i[1])}}catch(r){n.e(r)}finally{n.f()}return null}("ckCsrfToken");return t&&40==t.length||(e=t=function(e){var t="",n=new Uint8Array(40);window.crypto.getRandomValues(n);for(var i=0;i<n.length;i++){var r="abcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%"abcdefghijklmnopqrstuvwxyz0123456789".length);t+=Math.random()>.5?r.toUpperCase():r}return t}(),document.cookie=encodeURIComponent("ckCsrfToken")+"="+encodeURIComponent(e)+";path=/"),t}()),this.xhr.send(t)}}]),e}();function hf(e,t,n,i){var r,o=null;"function"==typeof i?r=i:(o=e.commands.get(i),r=function(){e.execute(i)}),e.model.document.on("change:data",function(a,s){if((!o||o.isEnabled)&&t.isEnabled){var c=Ro(e.model.document.selection.getRanges());if(c.isCollapsed&&"transparent"!=s.type){var l=Array.from(e.model.document.differ.getChanges()),u=l[0];if(1==l.length&&"insert"===u.type&&"$text"==u.name&&1==u.length){var d=u.position.parent;if(!(d.is("element","codeBlock")||d.is("element","listItem")&&"function"!=typeof i&&!["numberedList","bulletedList","todoList"].includes(i)||o&&!0===o.value)){var h=d.getChild(0),f=e.model.createRangeOn(h);if(f.containsRange(c)||c.end.isEqual(f.end)){var p=n.exec(h.data.substr(0,c.end.offset));p&&e.model.enqueueChange(function(t){var n=t.createPositionAt(d,0),i=t.createPositionAt(d,p[0].length),o=new ka(n,i);if(!1!==r({match:p})){t.remove(o);var a=e.model.document.selection.getFirstRange(),s=t.createRangeIn(d);!d.isEmpty||s.isEqual(a)||s.containsRange(a,!0)||t.remove(d)}o.detach()})}}}}}})}function ff(e,t,n,i){var r,a;n instanceof RegExp?r=n:a=n,a=a||function(e){for(var t,n=[],i=[];null!==(t=r.exec(e))&&!(t&&t.length<4);){var o=t,a=o.index,s=o[1],c=o[2],l=o[3],u=[(a+=t[0].length-(s+c+l).length)+s.length+c.length,a+s.length+c.length+l.length];n.push([a,a+s.length]),n.push(u),i.push([a+s.length,a+s.length+c.length])}return{remove:n,format:i}},e.model.document.on("change:data",function(n,r){if("transparent"!=r.type&&t.isEnabled){var s=e.model,c=s.document.selection;if(c.isCollapsed){var l=Array.from(s.document.differ.getChanges()),u=l[0];if(1==l.length&&"insert"===u.type&&"$text"==u.name&&1==u.length){var d,h,f,p=c.focus,v=p.parent,g=(d=s.createRange(s.createPositionAt(v,0),p),h=s,f=d.start,{text:Array.from(d.getItems()).reduce(function(e,t){return!t.is("$text")&&!t.is("$textProxy")||t.getAttribute("code")?(f=h.createPositionAfter(t),""):e+t.data},""),range:h.createRange(f,d.end)}),m=g.range,b=a(g.text),y=pf(m.start,b.format,s),k=pf(m.start,b.remove,s);y.length&&k.length&&s.enqueueChange(function(e){if(!1!==i(e,y)){var t,n=o(k.reverse());try{for(n.s();!(t=n.n()).done;){var r=t.value;e.remove(r)}}catch(a){n.e(a)}finally{n.f()}}})}}}})}function pf(e,t,n){return t.filter(function(e){return void 0!==e[0]&&void 0!==e[1]}).map(function(t){return n.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]))})}function vf(e,t){return function(n,i){if(!e.commands.get(t).isEnabled)return!1;var r,a=o(e.model.schema.getValidRanges(i,t));try{for(a.s();!(r=a.n()).done;){var s=r.value;n.setAttribute(t,!0,s)}}catch(c){a.e(c)}finally{a.f()}n.removeSelectionAttribute(t)}}var gf=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).attributeKey=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=n.document.selection,r=void 0===t.forceValue?!this.value:t.forceValue;n.change(function(t){if(i.isCollapsed)r?t.setSelectionAttribute(e.attributeKey,!0):t.removeSelectionAttribute(e.attributeKey);else{var a,s=o(n.schema.getValidRanges(i.getRanges(),e.attributeKey));try{for(s.s();!(a=s.n()).done;){var c=a.value;r?t.setAttribute(e.attributeKey,r,c):t.removeAttribute(e.attributeKey,c)}}catch(l){s.e(l)}finally{s.f()}}})}},{key:"_getValueFromFirstAllowedNode",value:function(){var e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);var i,r=o(n.getRanges());try{for(r.s();!(i=r.n()).done;){var a,s=o(i.value.getItems());try{for(s.s();!(a=s.n()).done;){var c=a.value;if(t.checkAttribute(c,this.attributeKey))return c.hasAttribute(this.attributeKey)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){r.e(l)}finally{r.f()}return!1}}]),t}(nt),mf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"bold"}),e.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",function(e){var t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),e.commands.add("bold",new gf(e,"bold")),e.keystrokes.set("CTRL+B","bold")}}],[{key:"pluginName",get:function(){return"BoldEditing"}}]),t}(et),bf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("bold",function(i){var r=t.commands.get("bold"),o=new nl(i);return o.set({label:n("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(o,"execute",function(){t.execute("bold"),t.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"BoldUI"}}]),t}(et),yf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"italic"}),e.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add("italic",new gf(e,"italic")),e.keystrokes.set("CTRL+I","italic")}}],[{key:"pluginName",get:function(){return"ItalicEditing"}}]),t}(et),kf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("italic",function(i){var r=t.commands.get("italic"),o=new nl(i);return o.set({label:n("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(o,"execute",function(){t.execute("italic"),t.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"ItalicUI"}}]),t}(et),wf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"strikethrough"}),e.model.schema.setAttributeProperties("strikethrough",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"strikethrough",view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add("strikethrough",new gf(e,"strikethrough")),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}],[{key:"pluginName",get:function(){return"StrikethroughEditing"}}]),t}(et),_f=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("strikethrough",function(i){var r=t.commands.get("strikethrough"),o=new nl(i);return o.set({label:n("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(o,"execute",function(){t.execute("strikethrough"),t.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"StrikethroughUI"}}]),t}(et),xf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"underline"}),e.model.schema.setAttributeProperties("underline",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"underline",view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add("underline",new gf(e,"underline")),e.keystrokes.set("CTRL+U","underline")}}],[{key:"pluginName",get:function(){return"UnderlineEditing"}}]),t}(et),Tf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("underline",function(i){var r=t.commands.get("underline"),o=new nl(i);return o.set({label:n("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(o,"execute",function(){t.execute("underline"),t.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"UnderlineUI"}}]),t}(et),Af=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=n.schema,r=Array.from(n.document.selection.getSelectedBlocks()),o=void 0===t.forceValue?!this.value:t.forceValue;n.change(function(t){if(o){var n=r.filter(function(e){return Sf(e)||Of(i,e)});e._applyQuote(t,n)}else e._removeQuote(t,r.filter(Sf))})}},{key:"_getValue",value:function(){var e=Ro(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!Sf(e))}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var e=this.editor.model.schema,t=Ro(this.editor.model.document.selection.getSelectedBlocks());return!!t&&Of(e,t)}},{key:"_removeQuote",value:function(e,t){Cf(e,t).reverse().forEach(function(t){if(t.start.isAtStart&&t.end.isAtEnd)e.unwrap(t.start.parent);else if(t.start.isAtStart){var n=e.createPositionBefore(t.start.parent);e.move(t,n)}else{t.end.isAtEnd||e.split(t.end);var i=e.createPositionAfter(t.end.parent);e.move(t,i)}})}},{key:"_applyQuote",value:function(e,t){var n=[];Cf(e,t).reverse().forEach(function(t){var i=Sf(t.start);i||(i=e.createElement("blockQuote"),e.wrap(t,i)),n.push(i)}),n.reverse().reduce(function(t,n){return t.nextSibling==n?(e.merge(e.createPositionAfter(t)),t):n})}}]),t}(nt);function Sf(e){return"blockQuote"==e.parent.name?e.parent:null}function Cf(e,t){for(var n,i=0,r=[];i<t.length;){var o=t[i],a=t[i+1];n||(n=e.createPositionBefore(o)),a&&o.nextSibling==a||(r.push(e.createRange(n,e.createPositionAfter(o))),n=null),i++}return r}function Of(e,t){var n=e.checkChild(t.parent,"blockQuote"),i=e.checkChild(["$root","blockQuote"],t);return n&&i}var Ef=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new Af(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(function(n){var i,r=o(e.model.document.differ.getChanges());try{for(r.s();!(i=r.n()).done;){var a=i.value;if("insert"==a.type){var s=a.position.nodeAfter;if(!s)continue;if(s.is("element","blockQuote")&&s.isEmpty)return n.remove(s),!0;if(s.is("element","blockQuote")&&!t.checkChild(a.position,s))return n.unwrap(s),!0;if(s.is("element")){var c,l=o(n.createRangeIn(s).getItems());try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.is("element","blockQuote")&&!t.checkChild(n.createPositionBefore(u),u))return n.unwrap(u),!0}}catch(h){l.e(h)}finally{l.f()}}}else if("remove"==a.type){var d=a.position.parent;if(d.is("element","blockQuote")&&d.isEmpty)return n.remove(d),!0}}}catch(h){r.e(h)}finally{r.f()}return!1});var n=this.editor.editing.view.document,i=e.model.document.selection,r=e.commands.get("blockQuote");this.listenTo(n,"enter",function(t,n){!i.isCollapsed||!r.value||i.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),n.preventDefault(),t.stop())},{context:"blockquote"}),this.listenTo(n,"delete",function(t,n){if("backward"==n.direction&&i.isCollapsed&&r.value){var o=i.getLastPosition().parent;o.isEmpty&&!o.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),n.preventDefault(),t.stop())}},{context:"blockquote"})}}],[{key:"pluginName",get:function(){return"BlockQuoteEditing"}},{key:"requires",get:function(){return[Yu,$u]}}]),t}(et);c(70);var Pf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("blockQuote",function(i){var r=t.commands.get("blockQuote"),o=new nl(i);return o.set({label:n("Block quote"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(o,"execute",function(){t.execute("blockQuote"),t.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"BlockQuoteUI"}}]),t}(et),If=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.t;e.ui.componentFactory.add("ckfinder",function(n){var i=e.commands.get("ckfinder"),r=new nl(n);return r.set({label:t("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),r.bind("isEnabled").to(i),r.on("execute",function(){e.execute("ckfinder"),e.editing.view.focus()}),r})}}],[{key:"pluginName",get:function(){return"CKFinderUI"}}]),t}(et),Mf=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).stopListening(n.editor.model.document,"change"),n.listenTo(n.editor.model.document,"change",function(){return n.refresh()},{priority:"low"}),n}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled}},{key:"execute",value:function(){var e=this.editor,t=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=t&&"modal"!=t)throw new A.a("ckfinder-unknown-openermethod",e);var n=this.editor.config.get("ckfinder.options")||{};n.chooseFiles=!0;var i=n.onInit;n.language||(n.language=e.locale.uiLanguage),n.onInit=function(t){i&&i(t),t.on("files:choose",function(n){var i,r=n.data.files.toArray(),a=r.filter(function(e){return!e.isImage()}),s=r.filter(function(e){return e.isImage()}),c=o(a);try{for(c.s();!(i=c.n()).done;){var l=i.value;e.execute("link",l.getUrl())}}catch(v){c.e(v)}finally{c.f()}var u,d=[],h=o(s);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=f.getUrl();d.push(p||t.request("file:getProxyUrl",{file:f}))}}catch(v){h.e(v)}finally{h.f()}d.length&&Nf(e,d)}),t.on("file:choose:resizedImage",function(t){var n=t.data.resizedUrl;if(n)Nf(e,[n]);else{var i=e.plugins.get("Notification"),r=e.locale.t;i.showWarning(r("Could not obtain resized image URL."),{title:r("Selecting resized image failed"),namespace:"ckfinder"})}})},window.CKFinder[t](n)}}]),t}(nt);function Nf(e,t){if(e.commands.get("insertImage").isEnabled)e.execute("insertImage",{source:t});else{var n=e.plugins.get("Notification"),i=e.locale.t;n.showWarning(i("Could not insert image at the current position."),{title:i("Inserting image failed"),namespace:"ckfinder"})}}var Lf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.commands.add("ckfinder",new Mf(e))}}],[{key:"pluginName",get:function(){return"CKFinderEditing"}},{key:"requires",get:function(){return[Dl,"ImageEditing","LinkEditing"]}}]),t}(et),Rf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.plugins.get("CloudServices"),i=n.token,r=n.uploadUrl;i&&(this._uploadGateway=t.plugins.get("CloudServicesCore").createUploadGateway(i,r),t.plugins.get(sf).createUploadAdapter=function(t){return new jf(e._uploadGateway,t)})}}],[{key:"pluginName",get:function(){return"CloudServicesUploadAdapter"}},{key:"requires",get:function(){return["CloudServices",sf]}}]),t}(et),jf=function(){function e(t,n){l(this,e),this.uploadGateway=t,this.loader=n}return d(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then(function(t){return e.fileUploader=e.uploadGateway.upload(t),e.fileUploader.on("progress",function(t,n){e.loader.uploadTotal=n.total,e.loader.uploaded=n.uploaded}),e.fileUploader.send()})}},{key:"abort",value:function(){this.fileUploader.abort()}}]),e}(),Df=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model,t=Ro(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&Vf(t,e.schema)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.editor.model,n=t.document;t.change(function(i){var r,a=o((e.selection||n.selection).getSelectedBlocks());try{for(a.s();!(r=a.n()).done;){var s=r.value;!s.is("element","paragraph")&&Vf(s,t.schema)&&i.rename(s,"paragraph")}}catch(c){a.e(c)}finally{a.f()}})}}]),t}(nt);function Vf(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}var Zf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"execute",value:function(e){var t=this.editor.model,n=e.position;t.change(function(e){var i=e.createElement("paragraph");if(!t.schema.checkChild(n.parent,i)){var r=t.schema.findAllowedParent(n,i);if(!r)return;n=e.split(n,r).position}t.insertContent(i,n),e.setSelection(i,"in")})}}]),t}(nt),zf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,n=e.model;e.commands.add("paragraph",new Df(e)),e.commands.add("insertParagraph",new Zf(e)),n.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:function(e,n){var i=n.writer;return t.paragraphLikeElements.has(e.name)?e.isEmpty?null:i.createElement("paragraph"):null},view:/.+/,converterPriority:"low"})}}],[{key:"pluginName",get:function(){return"Paragraph"}}]),t}(et);zf.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var Ff=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).modelElements=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this,t=Ro(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(function(n){return qf(t,n,e.editor.model.schema)})}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document,i=e.value;t.change(function(e){var r,a=Array.from(n.selection.getSelectedBlocks()).filter(function(e){return qf(e,i,t.schema)}),s=o(a);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.is("element",i)||e.rename(c,i)}}catch(l){s.e(l)}finally{s.f()}})}}]),t}(nt);function qf(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)}var Bf=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]}),n}return g(t,e),d(t,[{key:"init",value:function(){var e,t=this.editor,n=[],i=o(t.config.get("heading.options"));try{for(i.s();!(e=i.n()).done;){var r=e.value;"paragraph"!==r.model&&(t.model.schema.register(r.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(r),n.push(r.model))}}catch(a){i.e(a)}finally{i.f()}this._addDefaultH1Conversion(t),t.commands.add("heading",new Ff(t,n))}},{key:"afterInit",value:function(){var e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",function(t,i){var r=e.model.document.selection.getFirstPosition().parent;n.some(function(e){return r.is("element",e.model)})&&!r.is("element","paragraph")&&0===r.childCount&&i.writer.rename(r,"paragraph")})}},{key:"_addDefaultH1Conversion",value:function(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:T.get("low")+1})}}],[{key:"pluginName",get:function(){return"HeadingEditing"}},{key:"requires",get:function(){return[zf]}}]),t}(et);c(12);var Uf=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e,t,n,i=this,r=this.editor,a=r.t,s=(t=(e=r).t,n={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")},e.config.get("heading.options").map(function(e){var t=n[e.title];return t&&t!=e.title&&(e.title=t),e})),c=a("Choose heading"),l=a("Heading");r.ui.componentFactory.add("heading",function(e){var t,n={},a=new kn,u=r.commands.get("heading"),d=r.commands.get("paragraph"),h=[u],f=o(s);try{var p=function(){var e=t.value,i={type:"button",model:new Vl({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(i.model.bind("isOn").to(d,"value"),i.model.set("commandName","paragraph"),h.push(d)):(i.model.bind("isOn").to(u,"value",function(t){return t===e.model}),i.model.set({commandName:"heading",commandValue:e.model})),a.add(i),n[e.model]=e.title};for(f.s();!(t=f.n()).done;)p()}catch(g){f.e(g)}finally{f.f()}var v=Cl(e);return El(v,a),v.buttonView.set({isOn:!1,withText:!0,tooltip:l}),v.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),v.bind("isEnabled").toMany(h,"isEnabled",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return e})}),v.buttonView.bind("label").to(u,"value",d,"value",function(e,t){var i=e||t&&"paragraph";return n[i]?n[i]:c}),i.listenTo(v,"execute",function(e){r.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),r.editing.view.focus()}),v})}}],[{key:"pluginName",get:function(){return"HeadingUI"}}]),t}(et),Hf=function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){var e=this,t=this.editor;if(t.plugins.has("BalloonToolbar")){var n=t.plugins.get("BalloonToolbar");this.listenTo(n,"show",function(e){var n,i;n=t.editing.view.document.selection,(i=n.getSelectedElement())&&nd(i)&&e.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",function(){e._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",function(){e._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",function(){e._updateToolbarsVisibility()},{priority:"low"})}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this);var e,i=o(this._toolbarDefinitions.values());try{for(i.s();!(e=i.n()).done;){e.value.view.destroy()}}catch(r){i.e(r)}finally{i.f()}}},{key:"register",value:function(e,t){var n=t.ariaLabel,i=t.items,r=t.getRelatedElement,o=t.balloonClassName,a=void 0===o?"ck-toolbar-container":o;if(i.length){var s=this.editor,c=s.t,l=new kl(s.locale);if(l.ariaLabel=n||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new A.a("widget-toolbar-duplicated",this,{toolbarId:e});l.fillFromConfig(i,s.ui.componentFactory),this._toolbarDefinitions.set(e,{view:l,getRelatedElement:r,balloonClassName:a})}else Object(A.b)("widget-toolbar-no-items",{toolbarId:e})}},{key:"_updateToolbarsVisibility",value:function(){var e,t=0,n=null,i=null,r=o(this._toolbarDefinitions.values());try{for(r.s();!(e=r.n()).done;){var a=e.value,s=a.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&s)if(this.editor.ui.focusTracker.isFocused){var c=s.getAncestors().length;c>t&&(t=c,n=s,i=a)}else this._isToolbarVisible(a)&&this._hideToolbar(a);else this._isToolbarInBalloon(a)&&this._hideToolbar(a)}}catch(l){r.e(l)}finally{r.f()}i&&this._showToolbar(i,n)}},{key:"_hideToolbar",value:function(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}},{key:"_showToolbar",value:function(e,t){var n=this;this._isToolbarVisible(e)?Wf(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:Yf(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var e,t=o(n._toolbarDefinitions.values());try{for(t.s();!(e=t.n()).done;){var i=e.value;if(n._isToolbarVisible(i)){var r=i.getRelatedElement(n.editor.editing.view.document.selection);Wf(n.editor,r)}}}catch(a){t.e(a)}finally{t.f()}}))}},{key:"_isToolbarVisible",value:function(e){return this._balloon.visibleView===e.view}},{key:"_isToolbarInBalloon",value:function(e){return this._balloon.hasView(e.view)}}],[{key:"requires",get:function(){return[Wl]}},{key:"pluginName",get:function(){return"WidgetToolbarRepository"}}]),n}(et);function Wf(e,t){var n=e.plugins.get("ContextualBalloon"),i=Yf(e,t);n.updatePosition(i)}function Yf(e,t){var n=Fl.defaultPositions;return{target:e.editing.view.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,dd]}}var Jf=function(){function e(t){l(this,e),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}return d(e,[{key:"begin",value:function(e,t,n){var i,r,o,a=new Eo(t);this.activeHandlePosition=function(e){for(var t=0,n=["top-left","top-right","bottom-right","bottom-left"];t<n.length;t++){var i=n[t];if(e.classList.contains("ck-widget__resizer__handle-"+i))return i}}(e),this._referenceCoordinates=function(e,t){var n=new Eo(e),i=t.split("-"),r={x:"right"==i[1]?n.right:n.left,y:"bottom"==i[0]?n.bottom:n.top};return r.x+=e.ownerDocument.defaultView.scrollX,r.y+=e.ownerDocument.defaultView.scrollY,r}(t,(i=this.activeHandlePosition,r=i.split("-"),"".concat((o={top:"bottom",bottom:"top",left:"right",right:"left"})[r[0]],"-").concat(o[r[1]]))),this.originalWidth=a.width,this.originalHeight=a.height,this.aspectRatio=a.width/a.height;var s=n.style.width;this.originalWidthPercents=s&&s.match(/^\d+(\.\d*)?%$/)?parseFloat(s):function(e,t){var n=e.parentElement,i=parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);return t.width/i*100}(n,a)}},{key:"update",value:function(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}]),e}();Xe(Jf,Ye);var Qf=function(){function e(t){var n=this;l(this,e),this._options=t,this._domResizerWrapper=null,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",function(e){n.state.proposedWidth||n.state.proposedWidthPercents||(n._cleanup(),e.stop())},{priority:"high"}),this.on("change:isEnabled",function(){n.isEnabled&&n.redraw()})}return d(e,[{key:"attach",value:function(){var e=this,t=this,n=this._options.viewElement;this._options.editor.editing.view.change(function(i){var r=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(e){var n=this.toDomElement(e);return t._appendHandles(n),t._appendSizeUI(n),t._domResizerWrapper=n,t.on("change:isEnabled",function(e,t,i){n.style.display=i?"":"none"}),n.style.display=t.isEnabled?"":"none",n});i.insert(i.createPositionAt(n,"end"),r),i.addClass("ck-widget_with-resizer",n),e._viewResizerWrapper=r})}},{key:"begin",value:function(e){this.state=new Jf(this._options),this._sizeUI.bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}},{key:"updateSize",value:function(e){var t=this,n=this._proposeNewSize(e);this._options.editor.editing.view.change(function(e){var i=t._options.unit||"%";e.setStyle("width",("%"===i?n.widthPercents:n.width)+i,t._options.viewElement)});var i=this._getHandleHost(),r=new Eo(i);n.handleHostWidth=Math.round(r.width),n.handleHostHeight=Math.round(r.height);var o=new Eo(i);n.width=Math.round(o.width),n.height=Math.round(o.height),this.redraw(r),this.state.update(n)}},{key:"commit",value:function(){var e=this,t=this._options.unit||"%",n=("%"===t?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change(function(){e._cleanup(),e._options.onCommit(n)})}},{key:"cancel",value:function(){this._cleanup()}},{key:"destroy",value:function(){this.cancel()}},{key:"redraw",value:function(e){var t=this._domResizerWrapper;if((n=t)&&n.ownerDocument&&n.ownerDocument.contains(n)){var n,i,r=t.parentElement,o=this._getHandleHost(),a=this._viewResizerWrapper,s=[a.getStyle("width"),a.getStyle("height"),a.getStyle("left"),a.getStyle("top")];if(r.isSameNode(o)){var c=e||new Eo(o);i=[c.width+"px",c.height+"px",void 0,void 0]}else i=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];"same"!==On(s,i)&&this._options.editor.editing.view.change(function(e){e.setStyle({width:i[0],height:i[1],left:i[2],top:i[3]},a)})}}},{key:"containsHandle",value:function(e){return this._domResizerWrapper.contains(e)}},{key:"_cleanup",value:function(){var e=this;this._sizeUI.dismiss(),this._sizeUI.isVisible=!1,this._options.editor.editing.view.change(function(t){t.setStyle("width",e._initialViewWidth,e._options.viewElement)})}},{key:"_proposeNewSize",value:function(e){var t,n=this.state,i=(t=e).pageX,r=t.pageY,o=!this._options.isCentered||this._options.isCentered(this),a={x:n._referenceCoordinates.x-(i+n.originalWidth),y:r-n.originalHeight-n._referenceCoordinates.y};o&&n.activeHandlePosition.endsWith("-right")&&(a.x=i-(n._referenceCoordinates.x+n.originalWidth)),o&&(a.x*=2);var s={width:Math.abs(n.originalWidth+a.x),height:Math.abs(n.originalHeight+a.y)};s.dominant=s.width/n.aspectRatio>s.height?"width":"height",s.max=s[s.dominant];var c={width:s.width,height:s.height};return"width"==s.dominant?c.height=c.width/n.aspectRatio:c.width=c.height*n.aspectRatio,{width:Math.round(c.width),height:Math.round(c.height),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*c.width*100)/100,100)}}},{key:"_getResizeHost",value:function(){return this._options.getResizeHost(this._domResizerWrapper.parentElement)}},{key:"_getHandleHost",value:function(){return this._options.getHandleHost(this._domResizerWrapper.parentElement)}},{key:"_appendHandles",value:function(e){for(var t,n=0,i=["top-left","top-right","bottom-right","bottom-left"];n<i.length;n++){var r=i[n];e.appendChild(new Lc({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(t=r,"ck-widget__resizer__handle-"+t)}}).render())}}},{key:"_appendSizeUI",value:function(e){var t=new Gf;t.render(),this._sizeUI=t,e.appendChild(t.element)}}],[{key:"isResizeHandle",value:function(e){return e.classList.contains("ck-widget__resizer__handle")}}]),e}();Xe(Qf,Ye);var Gf=function(e){function t(){var e;l(this,t);var n=(e=f(this,t)).bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",n.to("activeHandlePosition",function(e){return e?"ck-orientation-"+e:""})],style:{display:n.if("isVisible","none",function(e){return!e})}},children:[{text:n.to("label")}]}),e}return g(t,e),d(t,[{key:"bindToState",value:function(e,t){this.bind("isVisible").to(t,"proposedWidth",t,"proposedHeight",function(e,t){return null!==e&&null!==t}),this.bind("label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",function(t,n,i){return"px"===e.unit?"".concat(t,"\xd7").concat(n):i+"%"}),this.bind("activeHandlePosition").to(t)}},{key:"dismiss",value:function(){this.unbind(),this.isVisible=!1}}]),t}(Nc);c(73),Xe(function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map;var t=Pr.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0}),this.editor.editing.view.addObserver(hu),this._observer=Object.create(Fr),this.listenTo(this.editor.editing.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));var n=function(){e.visibleResizer&&e.visibleResizer.redraw()},i=Ad(n,200);this.on("change:visibleResizer",n),this.editor.ui.on("update",i),this._observer.listenTo(Pr.window,"resize",i);var r=this.editor.editing.view.document.selection;r.on("change",function(){var t=r.getSelectedElement();e.visibleResizer=e.getResizerByViewElement(t)||null})}},{key:"destroy",value:function(){this._observer.stopListening();var e,t=o(this._resizers.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"attachTo",value:function(e){var t=new Qf(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){var i=n.get("WidgetToolbarRepository");t.on("begin",function(){i.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",function(){i.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",function(){i.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);var r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==t&&(this.visibleResizer=t),t}},{key:"getResizerByViewElement",value:function(e){return this._resizers.get(e)}},{key:"_getResizerByHandle",value:function(e){var t,n=o(this._resizers.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.containsHandle(e))return i}}catch(r){n.e(r)}finally{n.f()}}},{key:"_mouseDownListener",value:function(e,t){var n=t.domTarget;Qf.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n),this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}},{key:"_mouseMoveListener",value:function(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}},{key:"_mouseUpListener",value:function(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}],[{key:"pluginName",get:function(){return"WidgetResize"}}]),t}(et),Ye);var $f=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"observe",value:function(e){var t=this;this.listenTo(e,"load",function(e,n){var i=n.target;t.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&t._fireEvents(n)},{useCapture:!0})}},{key:"_fireEvents",value:function(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}]),t}(Ur);function Kf(e){return!!e.getCustomProperty("image")&&nd(e)}function Xf(e){var t=e.getSelectedElement();return t&&Kf(t)?t:null}function ep(e){return!!e&&e.is("element","image")}function tp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.change(function(i){var r=i.createElement("image",t),o=n||ld(e.document.selection,e);e.insertContent(r,o),r.parent&&i.setSelection(r,"on")})}function np(e){var t,n,i,r=e.schema,o=e.document.selection;return t=r,i=(n=ld(o,e).parent).isEmpty&&!n.is("element","$root")?n.parent:n,t.checkChild(i,"image")&&!ud(o,r)&&a(o.focus.getAncestors()).every(function(e){return!e.is("element","image")})}function ip(e){var t,n=[],i=o(e.getChildren());try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push(r),r.is("element")&&n.push.apply(n,a(r.getChildren()))}}catch(s){i.e(s)}finally{i.f()}return n.find(function(e){return e.is("element","img")})}function rp(e){return function(n){n.on("attribute:".concat(e,":image"),t)};function t(e,t,n){if(n.consumable.consume(t.item,e.name)){var i=n.writer,r=ip(n.mapper.toViewElement(t.item));i.setAttribute(t.attributeKey,t.attributeNewValue||"",r)}}}var op=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){this.isEnabled=np(this.editor.model)}},{key:"execute",value:function(e){var t,n=this.editor.model,i=o(_n(e.source));try{for(i.s();!(t=i.n()).done;){tp(n,{src:t.value})}}catch(r){i.e(r)}finally{i.f()}}}]),t}(nt),ap=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.t,i=e.conversion;e.editing.view.addObserver($f),t.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),i.for("dataDowncast").elementToElement({model:"image",view:function(e,t){return sp(t.writer)}}),i.for("editingDowncast").elementToElement({model:"image",view:function(e,t){var i,r,o,a=t.writer;return i=sp(a),r=a,o=n("image widget"),r.setCustomProperty("image",!0,i),id(i,r,{label:function(){var e=ip(i).getAttribute("alt");return e?"".concat(e," ").concat(o):o}})}}),i.for("downcast").add(rp("src")).add(rp("alt")).add(function(){return function(t){t.on("attribute:srcset:image",e)};function e(e,t,n){if(n.consumable.consume(t.item,e.name)){var i=n.writer,r=ip(n.mapper.toViewElement(t.item));if(null===t.attributeNewValue){var o=t.attributeOldValue;o.data&&(i.removeAttribute("srcset",r),i.removeAttribute("sizes",r),o.width&&i.removeAttribute("width",r))}else{var a=t.attributeNewValue;a.data&&(i.setAttribute("srcset",a.data,r),i.setAttribute("sizes","100vw",r),a.width&&i.setAttribute("width",a.width,r))}}}}()),i.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:function(e,t){return t.writer.createElement("image",{src:e.getAttribute("src")})}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function(e){var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}}).add(function(){return function(t){t.on("element:figure",e)};function e(e,t,n){if(n.consumable.test(t.viewItem,{name:!0,classes:"image"})){var i=ip(t.viewItem);if(i&&i.hasAttribute("src")&&n.consumable.test(i,{name:!0})){var r=Ro(n.convertItem(i,t.modelCursor).modelRange.getItems());r&&(n.convertChildren(t.viewItem,r),n.updateConversionResult(r,t))}}}}());var r=new op(e);e.commands.add("insertImage",r),e.commands.add("imageInsert",r)}}],[{key:"pluginName",get:function(){return"ImageEditing"}}]),t}(et);function sp(e){var t=e.createEmptyElement("img"),n=e.createContainerElement("figure",{class:"image"});return e.insert(e.createPositionAt(n,0),t),n}var cp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=ep(e),this.value=!(!ep(e)||!e.hasAttribute("alt"))&&e.getAttribute("alt")}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document.selection.getSelectedElement();t.change(function(t){t.setAttribute("alt",e.newValue,n)})}}]),t}(nt),lp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){this.editor.commands.add("imageTextAlternative",new cp(this.editor))}}],[{key:"pluginName",get:function(){return"ImageTextAlternativeEditing"}}]),t}(et);c(75),c(7);var up=function(e){function n(e){var t;l(this,n);var i=(t=f(this,n,[e])).locale.t;return t.focusTracker=new jo,t.keystrokes=new Do,t.labeledInput=t._createLabeledInputView(),t.saveButtonView=t._createButton(i("Save"),Tc,"ck-button-save"),t.saveButtonView.type="submit",t.cancelButtonView=t._createButton(i("Cancel"),xc,"ck-button-cancel","cancel"),t._focusables=new Mc,t._focusCycler=new al({focusables:t._focusables,focusTracker:t.focusTracker,keystrokeHandler:t.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[t.labeledInput,t.saveButtonView,t.cancelButtonView]}),Pc(v(t)),t}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),Ic({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(t){e._focusables.add(t),e.focusTracker.add(t.element)})}},{key:"_createButton",value:function(e,t,n,i){var r=new nl(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.extendTemplate({attributes:{class:n}}),i&&r.delegate("execute").to(this,i),r}},{key:"_createLabeledInputView",value:function(){var e=this.locale.t,t=new Rl(this.locale,jl);return t.label=e("Text alternative"),t}}]),n}(Nc);function dp(e){var t=e.editing.view,n=Fl.defaultPositions;return{target:t.domConverter.viewToDom(t.document.selection.getSelectedElement()),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}var hp=function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){this._createButton(),this._createForm()}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),this._form.destroy()}},{key:"_createButton",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("imageTextAlternative",function(i){var r=t.commands.get("imageTextAlternative"),o=new nl(i);return o.set({label:n("Change image text alternative"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),e.listenTo(o,"execute",function(){e._showForm()}),o})}},{key:"_createForm",value:function(){var e=this,t=this.editor,n=t.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new up(t.locale),this._form.render(),this.listenTo(this._form,"submit",function(){t.execute("imageTextAlternative",{newValue:e._form.labeledInput.fieldView.element.value}),e._hideForm(!0)}),this.listenTo(this._form,"cancel",function(){e._hideForm(!0)}),this._form.keystrokes.set("Esc",function(t,n){e._hideForm(!0),n()}),this.listenTo(t.ui,"update",function(){Xf(n.selection)?e._isVisible&&function(e){var t=e.plugins.get("ContextualBalloon");if(Xf(e.editing.view.document.selection)){var n=dp(e);t.updatePosition(n)}}(t):e._hideForm(!0)}),Ec({emitter:this._form,activator:function(){return e._isVisible},contextElements:[this._balloon.view.element],callback:function(){return e._hideForm()}})}},{key:"_showForm",value:function(){if(!this._isVisible){var e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:dp(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}}},{key:"_hideForm",value:function(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}},{key:"_isVisible",get:function(){return this._balloon.visibleView===this._form}},{key:"_isInBalloon",get:function(){return this._balloon.hasView(this._form)}}],[{key:"requires",get:function(){return[Wl]}},{key:"pluginName",get:function(){return"ImageTextAlternativeUI"}}]),n}(et),fp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[lp,hp]}},{key:"pluginName",get:function(){return"ImageTextAlternative"}}]),t}(et);function pp(e){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i&&i.is("element","caption"))return i}}catch(r){n.e(r)}finally{n.f()}return null}function vp(e){var t=e.parent;return"figcaption"==e.name&&t&&"figure"==t.name&&t.hasClass("image")?{name:!0}:null}c(78);var gp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view,i=t.data,r=t.editing,o=t.t;t.model.schema.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),t.model.document.registerPostFixer(function(t){return e._insertMissingModelCaptionElement(t)}),t.conversion.for("upcast").elementToElement({view:vp,model:"caption"}),i.downcastDispatcher.on("insert:caption",mp(function(e){return e.createContainerElement("figcaption")},!1));var a,s,c=(a=n,s=o("Enter image caption"),function(e){var t=e.createEditableElement("figcaption");return e.setCustomProperty("imageCaption",!0,t),Gl({view:a,element:t,text:s}),cd(t,e)});r.downcastDispatcher.on("insert:caption",mp(c)),r.downcastDispatcher.on("insert",this._fixCaptionVisibility(function(e){return e.item}),{priority:"high"}),r.downcastDispatcher.on("remove",this._fixCaptionVisibility(function(e){return e.position.parent}),{priority:"high"}),n.document.registerPostFixer(function(t){return e._updateCaptionVisibility(t)})}},{key:"_updateCaptionVisibility",value:function(e){var t,n=this.editor.editing.mapper,i=this._lastSelectedCaption,r=this.editor.model.document.selection,o=r.getSelectedElement();if(o&&o.is("element","image")){var a=pp(o);t=n.toViewElement(a)}var s=bp(r.getFirstPosition().parent);if(s&&(t=n.toViewElement(s)),t&&!this.editor.isReadOnly)return i?(i===t||(yp(i,e),this._lastSelectedCaption=t),kp(t,e)):(this._lastSelectedCaption=t,kp(t,e));if(i){var c=yp(i,e);return this._lastSelectedCaption=null,c}return!1}},{key:"_fixCaptionVisibility",value:function(e){var t=this;return function(n,i,r){var o=bp(e(i)),a=r.writer;if(o){var s=t.editor.editing.mapper.toViewElement(o);s&&(o.childCount?a.removeClass("ck-hidden",s):a.addClass("ck-hidden",s))}}}},{key:"_insertMissingModelCaptionElement",value:function(e){var t,n=this.editor.model,i=[],r=o(n.document.differ.getChanges());try{for(r.s();!(t=r.n()).done;){var a=t.value;if("insert"==a.type&&"$text"!=a.name){var s=a.position.nodeAfter;if(s.is("element","image")&&!pp(s)&&i.push(s),!s.is("element","image")&&s.childCount){var c,l=o(n.createRangeIn(s).getItems());try{for(l.s();!(c=l.n()).done;){var u=c.value;u.is("element","image")&&!pp(u)&&i.push(u)}}catch(p){l.e(p)}finally{l.f()}}}}}catch(p){r.e(p)}finally{r.f()}for(var d=0,h=i;d<h.length;d++){var f=h[d];e.appendElement("caption",f)}return!!i.length}}],[{key:"pluginName",get:function(){return"ImageCaptionEditing"}}]),t}(et);function mp(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,i,r){var o,a,s,c,l,u=i.item;if((u.childCount||t)&&ep(u.parent)){if(!r.consumable.consume(i.item,"insert"))return;var d=r.mapper.toViewElement(i.range.start.parent),h=e(r.writer),f=r.writer;u.childCount||f.addClass("ck-hidden",h),o=h,a=i.item,s=d,l=(c=r).writer.createPositionAt(s,"end"),c.writer.insert(l,o),c.mapper.bindElements(a,o)}}}function bp(e){var t=e.getAncestors({includeSelf:!0}).find(function(e){return"caption"==e.name});return t&&t.parent&&"image"==t.parent.name?t:null}function yp(e,t){return!e.childCount&&!e.hasClass("ck-hidden")&&(t.addClass("ck-hidden",e),!0)}function kp(e,t){return!!e.hasClass("ck-hidden")&&(t.removeClass("ck-hidden",e),!0)}c(80);var wp=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).defaultStyle=!1,i.styles=n.reduce(function(e,t){return e[t.name]=t,t.isDefault&&(i.defaultStyle=t.name),e},{}),i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=ep(e),e)if(e.hasAttribute("imageStyle")){var t=e.getAttribute("imageStyle");this.value=!!this.styles[t]&&t}else this.value=this.defaultStyle;else this.value=!1}},{key:"execute",value:function(e){var t=this,n=e.value,i=this.editor.model,r=i.document.selection.getSelectedElement();i.change(function(e){t.styles[n].isDefault?e.removeAttribute("imageStyle",r):e.setAttribute("imageStyle",n,r)})}}]),t}(nt);function _p(e,t){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.name===e)return r}}catch(a){i.e(a)}finally{i.f()}}var xp={full:{name:"full",title:"Full size image",icon:Oc,isDefault:!0},side:{name:"side",title:"Side image",icon:Cc,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Ac,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Sc,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Cc,className:"image-style-align-right"}},Tp={full:Oc,left:Ac,right:Cc,center:Sc};function Ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(Sp)}function Sp(e){if("string"==typeof e){var t=e;xp[t]?e=Object.assign({},xp[t]):(Object(A.b)("image-style-not-found",{name:t}),e={name:t})}else if(xp[e.name]){var n=xp[e.name],i=Object.assign({},e);for(var r in n)Object.prototype.hasOwnProperty.call(e,r)||(i[r]=n[r]);e=i}return"string"==typeof e.icon&&Tp[e.icon]&&(e.icon=Tp[e.icon]),e}var Cp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.data,i=e.editing;e.config.define("image.styles",["full","side"]);var r=Ap(e.config.get("image.styles"));t.extend("image",{allowAttributes:"imageStyle"});var a,s=(a=r,function(e,t,n){if(n.consumable.consume(t.item,e.name)){var i=_p(t.attributeNewValue,a),r=_p(t.attributeOldValue,a),o=n.mapper.toViewElement(t.item),s=n.writer;r&&s.removeClass(r.className,o),i&&s.addClass(i.className,o)}});i.downcastDispatcher.on("attribute:imageStyle:image",s),n.downcastDispatcher.on("attribute:imageStyle:image",s),n.upcastDispatcher.on("element:figure",function(e){var t=e.filter(function(e){return!e.isDefault});return function(e,n,i){if(n.modelRange){var r=n.viewItem,a=Ro(n.modelRange.getItems());if(!a||i.schema.checkAttribute(a,"imageStyle")){var s,c=o(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;i.consumable.consume(r,{classes:l.className})&&i.writer.setAttribute("imageStyle",l.name,a)}}catch(u){c.e(u)}finally{c.f()}}}}}(r),{priority:"low"}),e.commands.add("imageStyle",new wp(e,r))}}],[{key:"pluginName",get:function(){return"ImageStyleEditing"}}]),t}(et);c(82);var Op=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"localizedDefaultStylesTitles",get:function(){var e=this.editor.t;return{"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}},{key:"init",value:function(){var e,t=function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t[r.title]&&(r.title=t[r.title])}}catch(a){i.e(a)}finally{i.f()}return e}(Ap(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles),n=o(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this._createButton(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_createButton",value:function(e){var t=this,n=this.editor;n.ui.componentFactory.add("imageStyle:"+e.name,function(i){var r=n.commands.get("imageStyle"),o=new nl(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",function(t){return t===e.name}),t.listenTo(o,"execute",function(){n.execute("imageStyle",{value:e.name}),n.editing.view.focus()}),o})}}],[{key:"pluginName",get:function(){return"ImageStyleUI"}}]),t}(et);function Ep(e){var t=e.map(function(e){return e.replace("+","\\+")});return new RegExp("^image\\/(".concat(t.join("|"),")$"))}function Pp(e){return new Promise(function(t,n){var i=e.getAttribute("src");fetch(i).then(function(e){return e.blob()}).then(function(e){var n=Ip(e,i),r=n.replace("image/",""),o=new File([e],"image."+r,{type:n});t(o)}).catch(function(e){return e&&"TypeError"===e.name?(r=i,(o=r,new Promise(function(e,t){var n=Pr.document.createElement("img");n.addEventListener("load",function(){var i=Pr.document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0),i.toBlob(function(n){return n?e(n):t()})}),n.addEventListener("error",function(){return t()}),n.src=o})).then(function(e){var t=Ip(e,r),n=t.replace("image/","");return new File([e],"image."+n,{type:t})})).then(t).catch(n):n(e);var r,o})})}function Ip(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}var Mp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.t,n=function(n){var i=new lf(n),r=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),a=Ep(o);return i.set({acceptedType:o.map(function(e){return"image/"+e}).join(","),allowMultipleFiles:!0}),i.buttonView.set({label:t("Insert image"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',tooltip:!0}),i.buttonView.bind("isEnabled").to(r),i.on("done",function(t,n){var i=Array.from(n).filter(function(e){return a.test(e.type)});i.length&&e.execute("uploadImage",{file:i})}),i};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}],[{key:"pluginName",get:function(){return"ImageUploadUI"}}]),t}(et);c(84),c(86),c(88);var Np=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>'),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this;this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",function(){return e.uploadStatusChange.apply(e,arguments)})}},{key:"uploadStatusChange",value:function(e,t,n){var i=this.editor,r=t.item,o=r.getAttribute("uploadId");if(n.consumable.consume(t.item,e.name)){var a,s,c,l,u,d,h,f=i.plugins.get(sf),p=o?t.attributeNewValue:null,v=this.placeholder,g=i.editing.mapper.toViewElement(r),m=n.writer;if("reading"==p)return Lp(g,m),void Rp(v,g,m);if("uploading"==p){var b=f.loaders.get(o);return Lp(g,m),void(b?(jp(g,m),a=g,s=m,c=b,l=i.editing.view,d=(u=s).createUIElement("div",{class:"ck-progress-bar"}),u.setCustomProperty("progressBar",!0,d),h=d,s.insert(s.createPositionAt(a,"end"),h),c.on("change:uploadedPercent",function(e,t,n){l.change(function(e){e.setStyle("width",n+"%",h)})}),function(e,t,n){if(n.data){var i=ip(e);t.setAttribute("src",n.data,i)}}(g,m,b)):Rp(v,g,m))}"complete"==p&&f.loaders.get(o)&&function(e,t,n){var i=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),i),setTimeout(function(){n.change(function(e){return e.remove(e.createRangeOn(i))})},3e3)}(g,m,i.editing.view),Vp(g,m,"progressBar"),jp(g,m),m.removeClass("ck-appear",g)}}}],[{key:"pluginName",get:function(){return"ImageUploadProgress"}}]),t}(et);function Lp(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function Rp(e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);var i,r,o=ip(t);o.getAttribute("src")!==e&&n.setAttribute("src",e,o),Dp(t,"placeholder")||n.insert(n.createPositionAfter(o),(r=(i=n).createUIElement("div",{class:"ck-upload-placeholder-loader"}),i.setCustomProperty("placeholder",!0,r),r))}function jp(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),Vp(e,t,"placeholder")}function Dp(e,t){var n,i=o(e.getChildren());try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.getCustomProperty(t))return r}}catch(a){i.e(a)}finally{i.f()}}function Vp(e,t,n){var i=Dp(e,n);i&&t.remove(t.createRangeOn(i))}var Zp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement(),t=e&&"image"===e.name||!1;this.isEnabled=np(this.editor.model)||t}},{key:"execute",value:function(e){var t,n=this.editor,i=n.model,r=n.plugins.get(sf),a=o(_n(e.file));try{for(a.s();!(t=a.n()).done;){zp(i,r,t.value)}}catch(s){a.e(s)}finally{a.f()}}}]),t}(nt);function zp(e,t,n){var i=t.createLoader(n);i&&tp(e,{uploadId:i.id})}var Fp=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document,i=t.model.schema,r=t.conversion,a=t.plugins.get(sf),s=Ep(t.config.get("image.upload.types"));i.extend("image",{allowAttributes:["uploadId","uploadStatus"]});var c=new Zp(t);t.commands.add("uploadImage",c),t.commands.add("imageUpload",c),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",function(e,n){if(i=n.dataTransfer,!Array.from(i.types).includes("text/html")||""===i.getData("text/html")){var i,r=Array.from(n.dataTransfer.files).filter(function(e){return!!e&&s.test(e.type)});r.length&&(e.stop(),t.model.change(function(e){n.targetRanges&&e.setSelection(n.targetRanges.map(function(e){return t.editing.mapper.toModelRange(e)})),t.model.enqueueChange("default",function(){t.execute("uploadImage",{file:r})})}))}}),this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",function(e,n){var i=Array.from(t.editing.view.createRangeIn(n.content)).filter(function(e){return!(!(t=e.item).is("element","img")||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))&&!e.item.getAttribute("uploadProcessed");var t}).map(function(e){return{promise:Pp(e.item),imageElement:e.item}});if(i.length){var r,s=new fu(t.editing.view.document),c=o(i);try{for(c.s();!(r=c.n()).done;){var l=r.value;s.setAttribute("uploadProcessed",!0,l.imageElement);var u=a.createLoader(l.promise);u&&(s.setAttribute("src","",l.imageElement),s.setAttribute("uploadId",u.id,l.imageElement))}}catch(d){c.e(d)}finally{c.f()}}}),t.editing.view.document.on("dragover",function(e,t){t.preventDefault()}),n.on("change",function(){var i,r=o(n.differ.getChanges({includeChangesInGraveyard:!0}));try{for(r.s();!(i=r.n()).done;){var s=i.value;if("insert"==s.type&&"$text"!=s.name){var c,l=s.position.nodeAfter,u="$graveyard"==s.position.root.rootName,d=o(qp(t,l));try{for(d.s();!(c=d.n()).done;){var h=c.value,f=h.getAttribute("uploadId");if(f){var p=a.loaders.get(f);p&&(u?p.abort():"idle"==p.status&&e._readAndUpload(p,h))}}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){r.e(v)}finally{r.f()}}),this.on("uploadComplete",function(t,n){var i=n.imageElement,r=n.data,o=r.urls?r.urls:r;e.editor.model.change(function(t){t.setAttribute("src",o.default,i),e._parseAndSetSrcsetAttributeOnImage(o,i,t)})},{priority:"low"})}},{key:"_readAndUpload",value:function(e,t){var n=this,i=this.editor,r=i.model,o=i.locale.t,a=i.plugins.get(sf),s=i.plugins.get(Dl);return r.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","reading",t)}),e.read().then(function(){var n=e.upload();if(Di){var o=ip(i.editing.mapper.toViewElement(t));i.editing.view.once("render",function(){if(o.parent){var e=i.editing.view.domConverter.mapViewToDom(o.parent);if(e){var t=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=t}}})}return r.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","uploading",t)}),n}).then(function(e){r.enqueueChange("transparent",function(i){i.setAttribute("uploadStatus","complete",t),n.fire("uploadComplete",{data:e,imageElement:t})}),c()}).catch(function(n){if("error"!==e.status&&"aborted"!==e.status)throw n;"error"==e.status&&n&&s.showWarning(n,{title:o("Upload failed"),namespace:"upload"}),c(),r.enqueueChange("transparent",function(e){e.remove(t)})});function c(){r.enqueueChange("transparent",function(e){e.removeAttribute("uploadId",t),e.removeAttribute("uploadStatus",t)}),a.destroyLoader(e)}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function(e,t,n){var i=0,r=Object.keys(e).filter(function(e){var t=parseInt(e,10);if(!isNaN(t))return i=Math.max(i,t),!0}).map(function(t){return"".concat(e[t]," ").concat(t,"w")}).join(", ");""!=r&&n.setAttribute("srcset",{data:r,width:i},t)}}],[{key:"requires",get:function(){return[sf,Dl,qu]}},{key:"pluginName",get:function(){return"ImageUploadEditing"}}]),t}(et);function qp(e,t){return Array.from(e.model.createRangeOn(t)).filter(function(e){return e.item.is("element","image")}).map(function(e){return e.item})}var Bp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.commands.add("indent",new rt(e)),e.commands.add("outdent",new rt(e))}}],[{key:"pluginName",get:function(){return"IndentEditing"}}]),t}(et),Up='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Hp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Wp=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.locale,n=e.t,i="ltr"==t.uiLanguageDirection?Up:Hp,r="ltr"==t.uiLanguageDirection?Hp:Up;this._defineButton("indent",n("Increase indent"),i),this._defineButton("outdent",n("Decrease indent"),r)}},{key:"_defineButton",value:function(e,t,n){var i=this,r=this.editor;r.ui.componentFactory.add(e,function(o){var a=r.commands.get(e),s=new nl(o);return s.set({label:t,icon:n,tooltip:!0}),s.bind("isOn","isEnabled").to(a,"value","isEnabled"),i.listenTo(s,"execute",function(){r.execute(e),r.editing.view.focus()}),s})}}],[{key:"pluginName",get:function(){return"IndentUI"}}]),t}(et),Yp=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e]))._indentBehavior=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model,t=Ro(e.document.selection.getSelectedBlocks());this.isEnabled=!(!t||!e.schema.checkAttribute(t,"blockIndent"))&&this._indentBehavior.checkEnabled(t.getAttribute("blockIndent"))}},{key:"execute",value:function(){var e,t,n=this,i=this.editor.model,r=(t=(e=i).schema,Array.from(e.document.selection.getSelectedBlocks()).filter(function(e){return t.checkAttribute(e,"blockIndent")}));i.change(function(e){var t,i=o(r);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=a.getAttribute("blockIndent"),c=n._indentBehavior.getNextIndent(s);c?e.setAttribute("blockIndent",c,a):e.removeAttribute("blockIndent",a)}}catch(l){i.e(l)}finally{i.f()}})}}]),t}(nt),Jp=function(){function e(t){l(this,e),this.isForward="forward"===t.direction,this.offset=t.offset,this.unit=t.unit}return d(e,[{key:"checkEnabled",value:function(e){var t=parseFloat(e||0);return this.isForward||t>0}},{key:"getNextIndent",value:function(e){var t=parseFloat(e||0);if(e&&!e.endsWith(this.unit))return this.isForward?this.offset+this.unit:void 0;var n=t+(this.isForward?this.offset:-this.offset);return n>0?n+this.unit:void 0}}]),e}(),Qp=function(){function e(t){l(this,e),this.isForward="forward"===t.direction,this.classes=t.classes}return d(e,[{key:"checkEnabled",value:function(e){var t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}},{key:"getNextIndent",value:function(e){var t=this.classes.indexOf(e);return this.classes[t+(this.isForward?1:-1)]}}]),e}(),Gp=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"],$p=function(){function e(){l(this,e),this._definitions=new Set}return d(e,[{key:"length",get:function(){return this._definitions.size}},{key:"add",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t._definitions.add(e)}):this._definitions.add(e)}},{key:"getDispatcher",value:function(){var e=this;return function(t){t.on("attribute:linkHref",function(t,n,i){if(i.consumable.test(n.item,"attribute:linkHref")){var r,a=i.writer,s=a.document.selection,c=o(e._definitions);try{for(c.s();!(r=c.n()).done;){var l=r.value,u=a.createAttributeElement("a",l.attributes,{priority:5});a.setCustomProperty("link",!0,u),l.callback(n.attributeNewValue)?n.item.is("selection")?a.wrap(s.getFirstRange(),u):a.wrap(i.mapper.toViewRange(n.range),u):a.unwrap(i.mapper.toViewRange(n.range),u)}}catch(d){c.e(d)}finally{c.f()}}},{priority:"high"})}}},{key:"getDispatcherForLinkedImage",value:function(){var e=this;return function(t){t.on("attribute:linkHref:image",function(t,n,i){var a,s=i.mapper.toViewElement(n.item),c=Array.from(s.getChildren()).find(function(e){return"a"===e.name}),l=o(e._definitions);try{for(l.s();!(a=l.n()).done;){var u=a.value,d=Nn(u.attributes);if(u.callback(n.attributeNewValue)){var h,f=o(d);try{for(f.s();!(h=f.n()).done;){var p=r(h.value,2),v=p[0],g=p[1];"class"===v?i.writer.addClass(g,c):i.writer.setAttribute(v,g,c)}}catch(_){f.e(_)}finally{f.f()}}else{var m,b=o(d);try{for(b.s();!(m=b.n()).done;){var y=r(m.value,2),k=y[0],w=y[1];"class"===k?i.writer.removeClass(w,c):i.writer.removeAttribute(k,c)}}catch(_){b.e(_)}finally{b.f()}}}}catch(_){l.e(_)}finally{l.f()}})}}}]),e}(),Kp=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Xp=function(e){return Kp.test(e)},ev="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tv="\\ud83c[\\udffb-\\udfff]",nv="[^\\ud800-\\udfff]",iv="(?:\\ud83c[\\udde6-\\uddff]){2}",rv="[\\ud800-\\udbff][\\udc00-\\udfff]",ov="(?:"+ev+"|"+tv+")?",av="[\\ufe0e\\ufe0f]?"+ov+"(?:\\u200d(?:"+[nv,iv,rv].join("|")+")[\\ufe0e\\ufe0f]?"+ov+")*",sv="(?:"+[nv+ev+"?",ev,iv,rv,"[\\ud800-\\udfff]"].join("|")+")",cv=RegExp(tv+"(?="+tv+")|"+sv+av,"g"),lv=function(e){e=Yn(e);var t=Xp(e)?function(e){return Xp(e)?function(e){return e.match(cv)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,n=t?t[0]:e.charAt(0),i=t?function(e,t,n){var i=e.length;return $n(e,1,n=void 0===n?i:n)}(t).join(""):e.slice(1);return n.toUpperCase()+i},uv=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,dv=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,hv=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,fv=/^((\w+:(\/{2,})?)|(\W))/i;function pv(e,t){var n=t.writer,i=n.createAttributeElement("a",{href:e},{priority:5});return n.setCustomProperty("link",!0,i),i}function vv(e){return function(e){return e.replace(uv,"").match(dv)}(e=String(e))?e:"#"}function gv(e,t){return!!e&&e.is("element","image")&&t.checkAttribute("image","linkHref")}function mv(e,t){var n=hv.test(e)?"mailto:":t,i=!!n&&!fv.test(e);return e&&i?n+e:e}var bv=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).manualDecorators=new kn,n.automaticDecorators=new $p,n}return g(t,e),d(t,[{key:"restoreManualDecoratorStates",value:function(){var e,t=o(this.manualDecorators);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.value=this._getDecoratorStateFromModel(n.id)}}catch(i){t.e(i)}finally{t.f()}}},{key:"refresh",value:function(){var e=this.editor.model,t=e.document,n=Ro(t.selection.getSelectedBlocks());gv(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.selection.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"linkHref"));var i,r=o(this.manualDecorators);try{for(r.s();!(i=r.n()).done;){var a=i.value;a.value=this._getDecoratorStateFromModel(a.id)}}catch(s){r.e(s)}finally{r.f()}}},{key:"execute",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.editor.model,r=i.document.selection,a=[],s=[];for(var c in n)n[c]?a.push(c):s.push(c);i.change(function(n){if(r.isCollapsed){var c=r.getFirstPosition();if(r.hasAttribute("linkHref")){var l=fh(c,"linkHref",r.getAttribute("linkHref"),i);n.setAttribute("linkHref",e,l),a.forEach(function(e){n.setAttribute(e,!0,l)}),s.forEach(function(e){n.removeAttribute(e,l)}),n.setSelection(n.createPositionAfter(l.end.nodeBefore))}else if(""!==e){var u=Nn(r.getAttributes());u.set("linkHref",e),a.forEach(function(e){u.set(e,!0)});var d=i.insertContent(n.createText(e,u),c).end;n.setSelection(d)}["linkHref"].concat(a,s).forEach(function(e){n.removeSelectionAttribute(e)})}else{var h,f=i.schema.getValidRanges(r.getRanges(),"linkHref"),p=[],v=o(r.getSelectedBlocks());try{for(v.s();!(h=v.n()).done;){var g=h.value;i.schema.checkAttribute(g,"linkHref")&&p.push(n.createRangeOn(g))}}catch(T){v.e(T)}finally{v.f()}var m,b=p.slice(),y=o(f);try{for(y.s();!(m=y.n()).done;){var k=m.value;t._isRangeToUpdate(k,p)&&b.push(k)}}catch(T){y.e(T)}finally{y.f()}var w,_=o(b);try{var x=function(){var t=w.value;n.setAttribute("linkHref",e,t),a.forEach(function(e){n.setAttribute(e,!0,t)}),s.forEach(function(e){n.removeAttribute(e,t)})};for(_.s();!(w=_.n()).done;)x()}catch(T){_.e(T)}finally{_.f()}}})}},{key:"_getDecoratorStateFromModel",value:function(e){var t=this.editor.model,n=t.document,i=Ro(n.selection.getSelectedBlocks());return gv(i,t.schema)?i.getAttribute(e):n.selection.getAttribute(e)}},{key:"_isRangeToUpdate",value:function(e,t){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){if(n.value.containsRange(e))return!1}}catch(r){i.e(r)}finally{i.f()}return!0}}]),t}(nt),yv=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document,n=Ro(t.selection.getSelectedBlocks());this.isEnabled=gv(n,e.schema)?e.schema.checkAttribute(n,"linkHref"):e.schema.checkAttributeInSelection(t.selection,"linkHref")}},{key:"execute",value:function(){var e=this.editor.model,t=e.document.selection,n=this.editor.commands.get("link");e.change(function(i){var r,a=o(t.isCollapsed?[fh(t.getFirstPosition(),"linkHref",t.getAttribute("linkHref"),e)]:e.schema.getValidRanges(t.getRanges(),"linkHref"));try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i.removeAttribute("linkHref",s),n){var c,l=o(n.manualDecorators);try{for(l.s();!(c=l.n()).done;){var u=c.value;i.removeAttribute(u.id,s)}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){a.e(d)}finally{a.f()}})}}]),t}(nt),kv=d(function e(t){var n=t.id,i=t.label,r=t.attributes,o=t.defaultValue;l(this,e),this.id=n,this.set("value"),this.defaultValue=o,this.label=i,this.attributes=r});Xe(kv,Ye),c(90);var wv=/^(https?:)?\/\//,_v=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("link",{addTargetToExternalLinks:!1}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:pv}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:function(e,t){return pv(vv(e),t)}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function(e){return e.getAttribute("href")}}}),e.commands.add("link",new bv(e)),e.commands.add("unlink",new yv(e));var t,n,i,a=(t=e.t,n=function(e){var t=[];if(e)for(var n=0,i=Object.entries(e);n<i.length;n++){var o=r(i[n],2),a=o[0],s=o[1],c=Object.assign({},s,{id:"link"+lv(a)});t.push(c)}return t}(e.config.get("link.decorators")),i={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")},n.forEach(function(e){return e.label&&i[e.label]&&(e.label=i[e.label]),e}),n);this._enableAutomaticDecorators(a.filter(function(e){return"automatic"===e.mode})),this._enableManualDecorators(a.filter(function(e){return"manual"===e.mode})),e.plugins.get(Xd).registerAttribute("linkHref"),function(e,t,n,i){var r=e.editing.view,a=new Set;r.document.registerPostFixer(function(n){var r=e.model.document.selection,s=!1;if(r.hasAttribute(t)){var c,l=fh(r.getFirstPosition(),t,r.getAttribute(t),e.model),u=o(e.editing.mapper.toViewRange(l).getItems());try{for(u.s();!(c=u.n()).done;){var d=c.value;d.is("element","a")&&!d.hasClass(i)&&(n.addClass(i,d),a.add(d),s=!0)}}catch(h){u.e(h)}finally{u.f()}}return s}),e.conversion.for("editingDowncast").add(function(e){function t(){r.change(function(e){var t,n=o(a.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;e.removeClass(i,r),a.delete(r)}}catch(s){n.e(s)}finally{n.f()}})}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})})}(e,"linkHref",0,"ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}},{key:"_enableAutomaticDecorators",value:function(e){var t=this.editor,n=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:"automatic",callback:function(e){return wv.test(e)},attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(e),n.length&&t.conversion.for("downcast").add(n.getDispatcher())}},{key:"_enableManualDecorators",value:function(e){if(e.length){var t=this.editor,n=t.commands.get("link").manualDecorators;e.forEach(function(e){t.model.schema.extend("$text",{allowAttributes:e.id}),n.add(new kv(e)),t.conversion.for("downcast").attributeToElement({model:e.id,view:function(t,i){var r=i.writer;if(t){var o=n.get(e.id).attributes,a=r.createAttributeElement("a",o,{priority:5});return r.setCustomProperty("link",!0,a),a}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:n.get(e.id).attributes},model:{key:e.id}})})}}},{key:"_enableInsertContentSelectionAttributesFixer",value:function(){var e=this.editor,t=e.model,n=t.document.selection,i=e.commands.get("link");this.listenTo(t,"insertContent",function(){var e=n.anchor.nodeBefore,r=n.anchor.nodeAfter;n.hasAttribute("linkHref")&&e&&e.hasAttribute("linkHref")&&(r&&r.hasAttribute("linkHref")||t.change(function(e){xv(e,i.manualDecorators)}))},{priority:"low"})}},{key:"_enableClickingAfterLink",value:function(){var e=this.editor,t=e.commands.get("link");e.editing.view.addObserver(hu);var n=!1;this.listenTo(e.editing.view.document,"mousedown",function(){n=!0}),this.listenTo(e.editing.view.document,"selectionChange",function(){if(n){n=!1;var i=e.model.document.selection;if(i.isCollapsed&&i.hasAttribute("linkHref")){var r=i.getFirstPosition(),o=fh(r,"linkHref",i.getAttribute("linkHref"),e.model);(r.isTouching(o.start)||r.isTouching(o.end))&&e.model.change(function(e){xv(e,t.manualDecorators)})}}})}},{key:"_enableTypingOverLink",value:function(){var e,t,n=this.editor;this.listenTo(n.editing.view.document,"delete",function(){t=!0},{priority:"high"}),this.listenTo(n.model,"deleteContent",function(){var i,r,o,a,s,c=n.model.document.selection;c.isCollapsed||(t?t=!1:Tv(n)&&(i=n.model,r=i.document.selection,o=r.getFirstPosition(),a=r.getLastPosition(),(s=o.nodeAfter)&&s.is("$text")&&s.hasAttribute("linkHref")&&(s===(a.textNode||a.nodeBefore)||fh(o,"linkHref",s.getAttribute("linkHref"),i).containsRange(i.createRange(o,a),!0)))&&(e=c.getAttributes()))},{priority:"high"}),this.listenTo(n.model,"insertContent",function(i,a){var s=r(a,1)[0];t=!1,Tv(n)&&e&&(n.model.change(function(t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){var a=r(n.value,2),c=a[0],l=a[1];t.setAttribute(c,l,s)}}catch(u){i.e(u)}finally{i.f()}}),e=null)},{priority:"high"})}},{key:"_handleDeleteContentAfterLink",value:function(){var e=this.editor,t=e.model,n=t.document.selection,i=e.editing.view,r=e.commands.get("link"),o=!1,a=!1;this.listenTo(i.document,"delete",function(e,t){a=t.domEvent.keyCode===qi.backspace},{priority:"high"}),this.listenTo(t,"deleteContent",function(){o=!1;var e=n.getFirstPosition(),i=n.getAttribute("linkHref");if(i){var r=fh(e,"linkHref",i,t);o=r.containsPosition(e)||r.end.isEqual(e)}},{priority:"high"}),this.listenTo(t,"deleteContent",function(){a&&(a=!1,o||e.model.enqueueChange(function(e){xv(e,r.manualDecorators)}))},{priority:"low"})}}],[{key:"pluginName",get:function(){return"LinkEditing"}},{key:"requires",get:function(){return[Xd,Qd,qu]}}]),t}(et);function xv(e,t){e.removeSelectionAttribute("linkHref");var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.removeSelectionAttribute(r.id)}}catch(a){i.e(a)}finally{i.f()}}function Tv(e){return e.plugins.get("Input").isInput(e.model.change(function(e){return e.batch}))}c(92);var Av=function(e){function n(e,t){var i;l(this,n),i=f(this,n,[e]);var r=e.t;i.focusTracker=new jo,i.keystrokes=new Do,i.urlInputView=i._createUrlInput(),i.saveButtonView=i._createButton(r("Save"),Tc,"ck-button-save"),i.saveButtonView.type="submit",i.cancelButtonView=i._createButton(r("Cancel"),xc,"ck-button-cancel","cancel"),i._manualDecoratorSwitches=i._createManualDecoratorSwitches(t),i.children=i._createFormChildren(t.manualDecorators),i._focusables=new Mc,i._focusCycler=new al({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var o=["ck","ck-link-form","ck-responsive-form"];return t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),i.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:i.children}),Pc(v(i)),i}return g(n,e),d(n,[{key:"getDecoratorSwitchesState",value:function(){return Array.from(this._manualDecoratorSwitches).reduce(function(e,t){return e[t.name]=t.isOn,e},{})}},{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),Ic({view:this}),[this.urlInputView].concat(a(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(t){e._focusables.add(t),e.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createUrlInput",value:function(){var e=this.locale.t,t=new Rl(this.locale,jl);return t.label=e("Link URL"),t}},{key:"_createButton",value:function(e,t,n,i){var r=new nl(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.extendTemplate({attributes:{class:n}}),i&&r.delegate("execute").to(this,i),r}},{key:"_createManualDecoratorSwitches",value:function(e){var t,n=this,i=this.createCollection(),r=o(e.manualDecorators);try{var a=function(){var r=t.value,o=new il(n.locale);o.set({name:r.id,label:r.label,withText:!0}),o.bind("isOn").toMany([r,e],"value",function(e,t){return void 0===t&&void 0===e?r.defaultValue:e}),o.on("execute",function(){r.set("value",!o.isOn)}),i.add(o)};for(r.s();!(t=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_createFormChildren",value:function(e){var t=this.createCollection();if(t.add(this.urlInputView),e.length){var n=new Nc;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(e){return{tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}}}),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}]),n}(Nc);c(94);var Sv=function(e){function n(e){var t;l(this,n),t=f(this,n,[e]);var i=e.t;return t.focusTracker=new jo,t.keystrokes=new Do,t.previewButtonView=t._createPreviewButton(),t.unlinkButtonView=t._createButton(i("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),t.editButtonView=t._createButton(i("Edit link"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',"edit"),t.set("href"),t._focusables=new Mc,t._focusCycler=new al({focusables:t._focusables,focusTracker:t.focusTracker,keystrokeHandler:t.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[t.previewButtonView,t.editButtonView,t.unlinkButtonView]}),t}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(t){e._focusables.add(t),e.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createButton",value:function(e,t,n){var i=new nl(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.delegate("execute").to(this,n),i}},{key:"_createPreviewButton",value:function(){var e=new nl(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",function(e){return e&&vv(e)}),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",function(e){return e||n("This link has no URL")}),e.bind("isEnabled").to(this,"href",function(e){return!!e}),e.template.tag="a",e.template.eventListeners={},e}}]),n}(Nc),Cv=function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){var e=this.editor;e.editing.view.addObserver(du),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Wl),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this),this.formView.destroy()}},{key:"_createActionsView",value:function(){var e=this,t=this.editor,n=new Sv(t.locale),i=t.commands.get("link"),r=t.commands.get("unlink");return n.bind("href").to(i,"value"),n.editButtonView.bind("isEnabled").to(i),n.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(n,"edit",function(){e._addFormView()}),this.listenTo(n,"unlink",function(){t.execute("unlink"),e._hideUI()}),n.keystrokes.set("Esc",function(t,n){e._hideUI(),n()}),n.keystrokes.set("Ctrl+K",function(t,n){e._addFormView(),n()}),n}},{key:"_createFormView",value:function(){var e=this,t=this.editor,n=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),r=new Av(t.locale,n);return r.urlInputView.fieldView.bind("value").to(n,"value"),r.urlInputView.bind("isReadOnly").to(n,"isEnabled",function(e){return!e}),r.saveButtonView.bind("isEnabled").to(n),this.listenTo(r,"submit",function(){var n=mv(r.urlInputView.fieldView.element.value,i);t.execute("link",n,r.getDecoratorSwitchesState()),e._closeFormView()}),this.listenTo(r,"cancel",function(){e._closeFormView()}),r.keystrokes.set("Esc",function(t,n){e._closeFormView(),n()}),r}},{key:"_createToolbarLinkButton",value:function(){var e=this,t=this.editor,n=t.commands.get("link"),i=t.t;t.keystrokes.set("Ctrl+K",function(t,i){i(),n.isEnabled&&e._showUI(!0)}),t.ui.componentFactory.add("link",function(t){var r=new nl(t);return r.isEnabled=!0,r.label=i("Link"),r.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',r.keystroke="Ctrl+K",r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(n,"isEnabled"),r.bind("isOn").to(n,"value",function(e){return!!e}),e.listenTo(r,"execute",function(){return e._showUI(!0)}),r})}},{key:"_enableUserBalloonInteractions",value:function(){var e=this;this.listenTo(this.editor.editing.view.document,"click",function(){e._getSelectedLinkElement()&&e._showUI()}),this.editor.keystrokes.set("Tab",function(t,n){e._areActionsVisible&&!e.actionsView.focusTracker.isFocused&&(e.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",function(t,n){e._isUIVisible&&(e._hideUI(),n())}),Ec({emitter:this.formView,activator:function(){return e._isUIInPanel},contextElements:[this._balloon.view.element],callback:function(){return e._hideUI()}})}},{key:"_addActionsView",value:function(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}},{key:"_addFormView",value:function(){if(!this._isFormInPanel){var e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||""}}},{key:"_closeFormView",value:function(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}},{key:"_removeFormView",value:function(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}},{key:"_showUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}},{key:"_hideUI",value:function(){if(this._isUIInPanel){var e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}}},{key:"_startUpdatingUI",value:function(){var e=this,t=this.editor,n=t.editing.view.document,i=this._getSelectedLinkElement(),r=a(),o=function(){var t=e._getSelectedLinkElement(),n=a();i&&!t||!i&&n!==r?e._hideUI():e._isUIVisible&&e._balloon.updatePosition(e._getBalloonPositionData()),i=t,r=n};function a(){return n.selection.focus.getAncestors().reverse().find(function(e){return e.is("element")})}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}},{key:"_isFormInPanel",get:function(){return this._balloon.hasView(this.formView)}},{key:"_areActionsInPanel",get:function(){return this._balloon.hasView(this.actionsView)}},{key:"_areActionsVisible",get:function(){return this._balloon.visibleView===this.actionsView}},{key:"_isUIInPanel",get:function(){return this._isFormInPanel||this._areActionsInPanel}},{key:"_isUIVisible",get:function(){return this._balloon.visibleView==this.formView||this._areActionsVisible}},{key:"_getBalloonPositionData",value:function(){var e=this.editor.editing.view,t=e.document,n=null;if(this.editor.model.markers.has("link-ui")){var i=Array.from(this.editor.editing.mapper.markerNameToElements("link-ui")),r=e.createRange(e.createPositionBefore(i[0]),e.createPositionAfter(i[i.length-1]));n=e.domConverter.viewRangeToDom(r)}else{var o=this._getSelectedLinkElement(),a=t.selection.getFirstRange();n=o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(a)}return{target:n}}},{key:"_getSelectedLinkElement",value:function(){var e=this.editor.editing.view,t=e.document.selection;if(t.isCollapsed)return Ov(t.getFirstPosition());var n=t.getFirstRange().getTrimmed(),i=Ov(n.start),r=Ov(n.end);return i&&i==r&&e.createRangeIn(i).getTrimmed().isEqual(n)?i:null}},{key:"_showFakeVisualSelection",value:function(){var e=this.editor.model;e.change(function(t){var n=e.document.selection.getFirstRange();if(e.markers.has("link-ui"))t.updateMarker("link-ui",{range:n});else if(n.start.isAtEnd){var i=n.start.getLastMatchingPosition(function(t){var n=t.item;return!e.schema.isContent(n)},{boundaries:n});t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:t.createRange(i,n.end)})}else t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:n})})}},{key:"_hideFakeVisualSelection",value:function(){var e=this.editor.model;e.markers.has("link-ui")&&e.change(function(e){e.removeMarker("link-ui")})}}],[{key:"requires",get:function(){return[Wl]}},{key:"pluginName",get:function(){return"LinkUI"}}]),n}(et);function Ov(e){return e.getAncestors().find(function(e){return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t})}var Ev=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Pv=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor.model.document.selection;t.on("change:range",function(){e.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}},{key:"afterInit",value:function(){this._enableEnterHandling(),this._enableShiftEnterHandling()}},{key:"_enableTypingHandling",value:function(){var e=this,t=this.editor,n=new Kd(t.model,function(e){if((t=e).length>4&&" "===t[t.length-1]&&" "!==t[t.length-2]){var t,n=Iv(e.substr(0,e.length-1));return n?{url:n}:void 0}}),i=t.plugins.get("Input");n.on("matched:data",function(n,r){var o=r.batch,a=r.range,s=r.url;if(i.isInput(o)){var c=a.end.getShiftedBy(-1),l=c.getShiftedBy(-s.length),u=t.model.createRange(l,c);e._applyAutoLink(s,u)}}),n.bind("isEnabled").to(this)}},{key:"_enableEnterHandling",value:function(){var e=this,t=this.editor,n=t.model,i=t.commands.get("enter");i&&i.on("execute",function(){var t=n.document.selection.getFirstPosition();if(t.parent.previousSibling){var i=n.createRangeIn(t.parent.previousSibling);e._checkAndApplyAutoLinkOnRange(i)}})}},{key:"_enableShiftEnterHandling",value:function(){var e=this,t=this.editor,n=t.model,i=t.commands.get("shiftEnter");i&&i.on("execute",function(){var t=n.document.selection.getFirstPosition(),i=n.createRange(n.createPositionAt(t.parent,0),t.getShiftedBy(-1));e._checkAndApplyAutoLinkOnRange(i)})}},{key:"_checkAndApplyAutoLinkOnRange",value:function(e){var t=this.editor.model,n=$d(e,t),i=n.text,r=n.range,o=Iv(i);if(o){var a=t.createRange(r.end.getShiftedBy(-o.length),r.end);this._applyAutoLink(o,a)}}},{key:"_applyAutoLink",value:function(e,t){var n,i=this,r=this.editor.model;this.isEnabled&&(n=r).schema.checkAttributeInSelection(n.createSelection(t),"linkHref")&&r.enqueueChange(function(n){var r=i.editor.config.get("link.defaultProtocol"),o=mv(e,r);n.setAttribute("linkHref",o,t)})}}],[{key:"pluginName",get:function(){return"AutoLink"}}]),t}(et);function Iv(e){var t=Ev.exec(e);return t?t[2]:null}var Mv=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).type=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=Array.from(n.document.selection.getSelectedBlocks()).filter(function(e){return Lv(e,n.schema)}),r=void 0!==t.forceValue?!t.forceValue:this.value;n.change(function(t){if(r){for(var n=i[i.length-1].nextSibling,a=Number.POSITIVE_INFINITY,s=[];n&&"listItem"==n.name&&0!==n.getAttribute("listIndent");){var c=n.getAttribute("listIndent");c<a&&(a=c),s.push({element:n,listIndent:c-a}),n=n.nextSibling}var l,u=o(s=s.reverse());try{for(u.s();!(l=u.n()).done;){var d=l.value;t.setAttribute("listIndent",d.listIndent,d.element)}}catch(y){u.e(y)}finally{u.f()}}if(!r){var h,f=Number.POSITIVE_INFINITY,p=o(i);try{for(p.s();!(h=p.n()).done;){var v=h.value;v.is("element","listItem")&&v.getAttribute("listIndent")<f&&(f=v.getAttribute("listIndent"))}}catch(y){p.e(y)}finally{p.f()}Nv(i,!0,f=0===f?1:f),Nv(i,!1,f)}var g,m=o(i.reverse());try{for(m.s();!(g=m.n()).done;){var b=g.value;r&&"listItem"==b.name?t.rename(b,"paragraph"):r||"listItem"==b.name?r||"listItem"!=b.name||b.getAttribute("listType")==e.type||t.setAttribute("listType",e.type,b):(t.setAttributes({listType:e.type,listIndent:0},b),t.rename(b,"listItem"))}}catch(y){m.e(y)}finally{m.f()}e.fire("_executeCleanup",i)})}},{key:"_getValue",value:function(){var e=Ro(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var e=this.editor.model.schema,t=Ro(this.editor.model.document.selection.getSelectedBlocks());return!!t&&Lv(t,e)}}]),t}(nt);function Nv(e,t,n){var i=t?e[0]:e[e.length-1];if(i.is("element","listItem"))for(var r=i[t?"previousSibling":"nextSibling"],o=i.getAttribute("listIndent");r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=n;)o>r.getAttribute("listIndent")&&(o=r.getAttribute("listIndent")),r.getAttribute("listIndent")==o&&e[t?"unshift":"push"](r),r=r[t?"previousSibling":"nextSibling"]}function Lv(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}var Rv=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e]))._indentBy="forward"==n?1:-1,i}return g(t,e),d(t,[{key:"refresh",value:function(){this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=Array.from(t.document.selection.getSelectedBlocks());t.change(function(t){for(var i=n[n.length-1],r=i.nextSibling;r&&"listItem"==r.name&&r.getAttribute("listIndent")>i.getAttribute("listIndent");)n.push(r),r=r.nextSibling;e._indentBy<0&&(n=n.reverse());var a,s=o(n);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=c.getAttribute("listIndent")+e._indentBy;l<0?t.rename(c,"paragraph"):t.setAttribute("listIndent",l,c)}}catch(u){s.e(u)}finally{s.f()}e.fire("_executeCleanup",n)})}},{key:"_checkEnabled",value:function(){var e=Ro(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){for(var t=e.getAttribute("listIndent"),n=e.getAttribute("listType"),i=e.previousSibling;i&&i.is("element","listItem")&&i.getAttribute("listIndent")>=t;){if(i.getAttribute("listIndent")==t)return i.getAttribute("listType")==n;i=i.previousSibling}return!1}return!0}}]),t}(nt);function jv(e,t,n,i){var r=t.parent,a=n.mapper,s=n.writer,c=a.toViewPosition(i.createPositionBefore(e)),l=Zv(e.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:e.getAttribute("listIndent")}),u=e.previousSibling;if(l&&l.getAttribute("listIndent")==e.getAttribute("listIndent")){var d=a.toViewElement(l);c=s.breakContainer(s.createPositionAfter(d))}else if(u&&"listItem"==u.name){c=a.toViewPosition(i.createPositionAt(u,"end"));var h=a.findMappedViewAncestor(c),f=function(e){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("ul"==i.name||"ol"==i.name)return i}}catch(r){n.e(r)}finally{n.f()}return null}(h);c=f?s.createPositionBefore(f):s.createPositionAt(h,"end")}else c=a.toViewPosition(i.createPositionBefore(e));if(c=Vv(c),s.insert(c,r),u&&"listItem"==u.name){var p,v=a.toViewElement(u),g=s.createRange(s.createPositionAt(v,0),c).getWalker({ignoreElementEnd:!0}),m=o(g);try{for(m.s();!(p=m.n()).done;){var b=p.value;if(b.item.is("element","li")){var y=s.breakContainer(s.createPositionBefore(b.item)),k=b.item.parent,w=s.createPositionAt(t,"end");Dv(s,w.nodeBefore,w.nodeAfter),s.move(s.createRangeOn(k),w),g.position=y}}}catch(O){m.e(O)}finally{m.f()}}else{var _=r.nextSibling;if(_&&(_.is("element","ul")||_.is("element","ol"))){var x,T=null,A=o(_.getChildren());try{for(A.s();!(x=A.n()).done;){var S=x.value,C=a.toModelElement(S);if(!(C&&C.getAttribute("listIndent")>e.getAttribute("listIndent")))break;T=S}}catch(O){A.e(O)}finally{A.f()}T&&(s.breakContainer(s.createPositionAfter(T)),s.move(s.createRangeOn(T.parent),s.createPositionAt(t,"end")))}}Dv(s,r,r.nextSibling),Dv(s,r.previousSibling,r)}function Dv(e,t,n){return!t||!n||"ul"!=t.name&&"ol"!=t.name||t.name!=n.name||t.getAttribute("class")!==n.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t))}function Vv(e){return e.getLastMatchingPosition(function(e){return e.item.is("uiElement")})}function Zv(e,t){for(var n=!!t.sameIndent,i=!!t.smallerIndent,r=t.listIndent,o=e;o&&"listItem"==o.name;){var a=o.getAttribute("listIndent");if(n&&r==a||i&&r>a)return o;o="forward"===t.direction?o.nextSibling:o.previousSibling}return null}function zv(e,t,n,i){e.ui.componentFactory.add(t,function(r){var o=e.commands.get(t),a=new nl(r);return a.set({label:n,icon:i,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.on("execute",function(){e.execute(t),e.editing.view.focus()}),a})}function Fv(e,t){var n,i=[],r=e.parent,s={ignoreElementEnd:!0,startPosition:e,shallow:!0,direction:t},c=r.getAttribute("listIndent"),l=a(new ta(s)).filter(function(e){return e.item.is("element")}).map(function(e){return e.item}),u=o(l);try{for(u.s();!(n=u.n()).done;){var d=n.value;if(!d.is("element","listItem")||d.getAttribute("listIndent")<c)break;if(!(d.getAttribute("listIndent")>c)){if(d.getAttribute("listType")!==r.getAttribute("listType")||d.getAttribute("listStyle")!==r.getAttribute("listStyle"))break;"backward"===t?i.unshift(d):i.push(d)}}}catch(h){u.e(h)}finally{u.f()}return i}function qv(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:ui.call(this)}function Bv(e){return function(t,n,i){var r=i.consumable;if(r.test(n.item,"insert")&&r.test(n.item,"attribute:listType")&&r.test(n.item,"attribute:listIndent")){r.consume(n.item,"insert"),r.consume(n.item,"attribute:listType"),r.consume(n.item,"attribute:listIndent");var o=n.item;jv(o,function(e,t){var n,i=t.mapper,r=t.writer,o="numbered"==e.getAttribute("listType")?"ol":"ul",a=((n=r.createContainerElement("li")).getFillerOffset=qv,n),s=r.createContainerElement(o,null);return r.insert(r.createPositionAt(s,0),a),i.bindElements(e,a),a}(o,i),i,e)}}}function Uv(e,t,n){if(n.consumable.consume(t.item,"attribute:listType")){var i=n.mapper.toViewElement(t.item),r=n.writer;r.breakContainer(r.createPositionBefore(i)),r.breakContainer(r.createPositionAfter(i)),r.rename("numbered"==t.attributeNewValue?"ol":"ul",i.parent)}}function Hv(e,t,n){var i=n.mapper.toViewElement(t.item).parent,r=n.writer;Dv(r,i,i.nextSibling),Dv(r,i.previousSibling,i);var a,s=o(t.item.getChildren());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.consumable.consume(c,"insert")}}catch(l){s.e(l)}finally{s.f()}}function Wv(e,t,n){if("listItem"!=t.item.name){for(var i=n.mapper.toViewPosition(t.range.start),r=n.writer,o=[];("ul"==i.parent.name||"ol"==i.parent.name)&&"li"==(i=r.breakContainer(i)).parent.name;){var a=i,s=r.createPositionAt(i.parent,"end");if(!a.isEqual(s)){var c=r.remove(r.createRange(a,s));o.push(c)}i=r.createPositionAfter(i.parent)}if(o.length>0){for(var l=0;l<o.length;l++){var u=i.nodeBefore;if(i=r.insert(i,o[l]).end,l>0){var d=Dv(r,u,u.nextSibling);d&&d.parent==u&&i.offset--}}Dv(r,i.nodeBefore,i.nodeAfter)}}}function Yv(e,t,n){var i=n.mapper.toViewPosition(t.position);Dv(n.writer,i.nodeBefore,i.nodeAfter)}function Jv(e,t,n){if(n.consumable.consume(t.viewItem,{name:!0})){var i=n.writer,r=i.createElement("listItem"),a=function(e){for(var t=0,n=e.parent;n;){if(n.is("element","li"))t++;else{var i=n.previousSibling;i&&i.is("element","li")&&t++}n=n.parent}return t}(t.viewItem);if(i.setAttribute("listIndent",a,r),i.setAttribute("listType",t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted",r),!n.safeInsert(r,t.modelCursor))return;var s=function(e,t,n){var i,r=n.writer,a=n.schema,s=r.createPositionAfter(e),c=o(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;if("ul"==l.name||"ol"==l.name)s=n.convertItem(l,s).modelCursor;else{var u=n.convertItem(l,r.createPositionAt(e,"end")),d=u.modelRange.start.nodeAfter;d&&d.is("element")&&!a.checkChild(e,d.name)&&(e=u.modelCursor.parent.is("element","listItem")?u.modelCursor.parent:Xv(u.modelCursor),s=r.createPositionAfter(e))}}}catch(h){c.e(h)}finally{c.f()}return s}(r,t.viewItem.getChildren(),n);t.modelRange=i.createRange(t.modelCursor,s),n.updateConversionResult(r,t)}}function Qv(e,t,n){if(n.consumable.test(t.viewItem,{name:!0}))for(var i=0,r=Array.from(t.viewItem.getChildren());i<r.length;i++){var o=r[i];!o.is("element","li")&&!tg(o)&&o._remove()}}function Gv(e,t,n){if(n.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;var i,r=!1,s=!0,c=o(a(t.viewItem.getChildren()));try{for(c.s();!(i=c.n()).done;){var l=i.value;r&&!tg(l)&&l._remove(),l.is("$text")?(s&&(l._data=l.data.trimStart()),l.nextSibling&&!tg(l.nextSibling)||(l._data=l.data.trimEnd())):tg(l)&&(r=!0),s=!1}}catch(u){c.e(u)}finally{c.f()}}}function $v(e){return function(t,n){if(!n.isPhantom){var i=n.modelPosition.nodeBefore;if(i&&i.is("element","listItem")){var r,a=n.mapper.toViewElement(i),s=a.getAncestors().find(tg),c=o(e.createPositionAt(a,0).getWalker());try{for(c.s();!(r=c.n()).done;){var l=r.value;if("elementStart"==l.type&&l.item.is("element","li")){n.viewPosition=l.previousPosition;break}if("elementEnd"==l.type&&l.item==s){n.viewPosition=l.nextPosition;break}}}catch(u){c.e(u)}finally{c.f()}}}}}function Kv(e,t){var n,i=r(t,2),o=i[0],a=i[1],s=o.is("documentFragment")?o.getChild(0):o;if(n=a?this.createSelection(a):this.document.selection,s&&s.is("element","listItem")){var c=n.getFirstPosition(),l=null;if(c.parent.is("element","listItem")?l=c.parent:c.nodeBefore&&c.nodeBefore.is("element","listItem")&&(l=c.nodeBefore),l){var u=l.getAttribute("listIndent");if(u>0)for(;s&&s.is("element","listItem");)s._setAttribute("listIndent",s.getAttribute("listIndent")+u),s=s.nextSibling}}}function Xv(e){var t,n=new ta({startPosition:e});do{t=n.next()}while(!t.value.item.is("element","listItem"));return t.value.item}function eg(e,t,n,i,r,o){var s,c=Zv(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),l=r.mapper,u=r.writer,d=c?c.getAttribute("listIndent"):null;if(c)if(d==e){var h=l.toViewElement(c).parent;s=u.createPositionAfter(h)}else{var f=o.createPositionAt(c,"end");s=l.toViewPosition(f)}else s=n;s=Vv(s);for(var p=0,v=a(i.getChildren());p<v.length;p++){var g=v[p];tg(g)&&(s=u.move(u.createRangeOn(g),s).end,Dv(u,g,g.nextSibling),Dv(u,g.previousSibling,g))}}function tg(e){return e.is("element","ol")||e.is("element","ul")}var ng=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var n,i=t.data,r=t.editing;t.model.document.registerPostFixer(function(e){return function(e,t){var n,i=e.document.differ.getChanges(),r=new Map,a=!1,s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("insert"==c.type&&"listItem"==c.name)v(c.position);else if("insert"==c.type&&"listItem"!=c.name){if("$text"!=c.name){var l=c.position.nodeAfter;l.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",l),a=!0),l.hasAttribute("listType")&&(t.removeAttribute("listType",l),a=!0),l.hasAttribute("listStyle")&&(t.removeAttribute("listStyle",l),a=!0);var u,d=o(Array.from(e.createRangeIn(l)).filter(function(e){return e.item.is("element","listItem")}));try{for(d.s();!(u=d.n()).done;){v(u.value.previousPosition)}}catch(b){d.e(b)}finally{d.f()}}v(c.position.getShiftedBy(c.length))}else"remove"==c.type&&"listItem"==c.name?v(c.position):("attribute"==c.type&&"listIndent"==c.attributeKey||"attribute"==c.type&&"listType"==c.attributeKey)&&v(c.range.start)}}catch(b){s.e(b)}finally{s.f()}var h,f=o(r.values());try{for(f.s();!(h=f.n()).done;){var p=h.value;g(p),m(p)}}catch(b){f.e(b)}finally{f.f()}return a;function v(e){var t=e.nodeBefore;if(t&&t.is("element","listItem")){var n=t;if(r.has(n))return;for(var i=n.previousSibling;i&&i.is("element","listItem");i=n.previousSibling)if(n=i,r.has(n))return;r.set(t,n)}else{var o=e.nodeAfter;o&&o.is("element","listItem")&&r.set(o,o)}}function g(e){for(var n=0,i=null;e&&e.is("element","listItem");){var r=e.getAttribute("listIndent");if(r>n){var o=void 0;null===i?(i=r-n,o=n):(i>r&&(i=r),o=r-i),t.setAttribute("listIndent",o,e),a=!0}else i=null,n=e.getAttribute("listIndent")+1;e=e.nextSibling}}function m(e){for(var n=[],i=null;e&&e.is("element","listItem");){var r=e.getAttribute("listIndent");if(i&&i.getAttribute("listIndent")>r&&(n=n.slice(0,r+1)),0!=r)if(n[r]){var o=n[r];e.getAttribute("listType")!=o&&(t.setAttribute("listType",o,e),a=!0)}else n[r]=e.getAttribute("listType");i=e,e=e.nextSibling}}}(t.model,e)}),r.mapper.registerViewToModelLength("li",ig),i.mapper.registerViewToModelLength("li",ig),r.mapper.on("modelToViewPosition",$v(r.view)),r.mapper.on("viewToModelPosition",(n=t.model,function(e,t){var i=t.viewPosition,r=i.parent,o=t.mapper;if("ul"==r.name||"ol"==r.name){if(i.isAtEnd){var a=o.toModelElement(i.nodeBefore),s=o.getModelLength(i.nodeBefore);t.modelPosition=n.createPositionBefore(a).getShiftedBy(s)}else{var c=o.toModelElement(i.nodeAfter);t.modelPosition=n.createPositionBefore(c)}e.stop()}else if("li"==r.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){for(var l=o.toModelElement(r),u=1,d=i.nodeBefore;d&&tg(d);)u+=o.getModelLength(d),d=d.previousSibling;t.modelPosition=n.createPositionBefore(l).getShiftedBy(u),e.stop()}})),i.mapper.on("modelToViewPosition",$v(r.view)),t.conversion.for("editingDowncast").add(function(e){var n;e.on("insert",Wv,{priority:"high"}),e.on("insert:listItem",Bv(t.model)),e.on("attribute:listType:listItem",Uv,{priority:"high"}),e.on("attribute:listType:listItem",Hv,{priority:"low"}),e.on("attribute:listIndent:listItem",(n=t.model,function(e,t,i){if(i.consumable.consume(t.item,"attribute:listIndent")){var r=i.mapper.toViewElement(t.item),a=i.writer;a.breakContainer(a.createPositionBefore(r)),a.breakContainer(a.createPositionAfter(r));var s=r.parent,c=s.previousSibling,l=a.createRangeOn(s);a.remove(l),c&&c.nextSibling&&Dv(a,c,c.nextSibling),eg(t.attributeOldValue+1,t.range.start,l.start,r,i,n),jv(t.item,r,i,n);var u,d=o(t.item.getChildren());try{for(d.s();!(u=d.n()).done;){var h=u.value;i.consumable.consume(h,"insert")}}catch(f){d.e(f)}finally{d.f()}}})),e.on("remove:listItem",function(e){return function(t,n,i){var r=i.mapper.toViewPosition(n.position).getLastMatchingPosition(function(e){return!e.item.is("element","li")}).nodeAfter,a=i.writer;a.breakContainer(a.createPositionBefore(r)),a.breakContainer(a.createPositionAfter(r));var s=r.parent,c=s.previousSibling,l=a.createRangeOn(s),u=a.remove(l);c&&c.nextSibling&&Dv(a,c,c.nextSibling),eg(i.mapper.toModelElement(r).getAttribute("listIndent")+1,n.position,l.start,r,i,e);var d,h=o(a.createRangeIn(u).getItems());try{for(h.s();!(d=h.n()).done;){var f=d.value;i.mapper.unbindViewElement(f)}}catch(p){h.e(p)}finally{h.f()}t.stop()}}(t.model)),e.on("remove",Yv,{priority:"low"})}),t.conversion.for("dataDowncast").add(function(e){e.on("insert",Wv,{priority:"high"}),e.on("insert:listItem",Bv(t.model))}),t.conversion.for("upcast").add(function(e){e.on("element:ul",Qv,{priority:"high"}),e.on("element:ol",Qv,{priority:"high"}),e.on("element:li",Gv,{priority:"high"}),e.on("element:li",Jv)}),t.model.on("insertContent",Kv,{priority:"high"}),t.commands.add("numberedList",new Mv(t,"numbered")),t.commands.add("bulletedList",new Mv(t,"bulleted")),t.commands.add("indentList",new Rv(t,"forward")),t.commands.add("outdentList",new Rv(t,"backward"));var a=r.view.document;this.listenTo(a,"enter",function(t,n){var i=e.editor.model.document,r=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==r.name&&r.isEmpty&&(e.editor.execute("outdentList"),n.preventDefault(),t.stop())},{context:"li"}),this.listenTo(a,"delete",function(t,n){if("backward"===n.direction){var i=e.editor.model.document.selection;if(i.isCollapsed){var r=i.getFirstPosition();if(r.isAtStart){var o=r.parent;"listItem"===o.name&&(o.previousSibling&&"listItem"===o.previousSibling.name||(e.editor.execute("outdentList"),n.preventDefault(),t.stop()))}}}},{context:"li"});var s=function(t){return function(n,i){e.editor.commands.get(t).isEnabled&&(e.editor.execute(t),i())}};t.keystrokes.set("Tab",s("indentList")),t.keystrokes.set("Shift+Tab",s("outdentList"))}},{key:"afterInit",value:function(){var e=this.editor.commands,t=e.get("indent"),n=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),n&&n.registerChildCommand(e.get("outdentList"))}}],[{key:"pluginName",get:function(){return"ListEditing"}},{key:"requires",get:function(){return[Yu,$u]}}]),t}(et);function ig(e){var t,n=1,i=o(e.getChildren());try{for(i.s();!(t=i.n()).done;){var r=t.value;if("ul"==r.name||"ol"==r.name){var a,s=o(r.getChildren());try{for(s.s();!(a=s.n()).done;){n+=ig(a.value)}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){i.e(c)}finally{i.f()}return n}var rg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',og='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',ag=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor.t;zv(this.editor,"numberedList",e("Numbered List"),rg),zv(this.editor,"bulletedList",e("Bulleted List"),og)}}],[{key:"pluginName",get:function(){return"ListUI"}}]),t}(et),sg=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e]))._defaultType=n,i}return g(t,e),d(t,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,i=a(n.document.selection.getSelectedBlocks()).filter(function(e){return e.is("element","listItem")}).map(function(e){var t=n.change(function(t){return t.createPositionAt(e,0)});return[].concat(a(Fv(t,"backward")),a(Fv(t,"forward")))}).flat();(i=a(new Set(i))).length&&n.change(function(n){var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;n.setAttribute("listStyle",t.type||e._defaultType,s)}}catch(c){a.e(c)}finally{a.f()}})}},{key:"_getValue",value:function(){var e=this.editor.model.document.selection.getFirstPosition().parent;return e&&e.is("element","listItem")?e.getAttribute("listStyle"):null}},{key:"_checkEnabled",value:function(){var e=this.editor,t=e.commands.get("numberedList"),n=e.commands.get("bulletedList");return t.isEnabled||n.isEnabled}}]),t}(nt),cg=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e,t=this.editor,n=t.model;n.schema.extend("listItem",{allowAttributes:["listStyle"]}),t.commands.add("listStyle",new sg(t,"default")),this.listenTo(t.commands.get("indentList"),"_executeCleanup",(e=t,function(t,n){var i,r=n[0],a=r.getAttribute("listIndent"),s=n.filter(function(e){return e.getAttribute("listIndent")===a});i=r.previousSibling.getAttribute("listIndent")+1===a?"default":Zv(r.previousSibling,{sameIndent:!0,direction:"backward",listIndent:a}).getAttribute("listStyle"),e.model.change(function(e){var t,n=o(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.setAttribute("listStyle",i,r)}}catch(a){n.e(a)}finally{n.f()}})})),this.listenTo(t.commands.get("outdentList"),"_executeCleanup",function(e){return function(t,n){if((n=n.reverse().filter(function(e){return e.is("element","listItem")})).length){var i=n[0].getAttribute("listIndent"),r=n[0].getAttribute("listType"),a=n[0].previousSibling;if(a.is("element","listItem"))for(;a.getAttribute("listIndent")!==i;)a=a.previousSibling;else a=null;a||(a=n[n.length-1].nextSibling),a&&a.is("element","listItem")&&a.getAttribute("listType")===r&&e.model.change(function(e){var t,r=n.filter(function(e){return e.getAttribute("listIndent")===i}),s=o(r);try{for(s.s();!(t=s.n()).done;){var c=t.value;e.setAttribute("listStyle",a.getAttribute("listStyle"),c)}}catch(l){s.e(l)}finally{s.f()}})}}}(t)),this.listenTo(t.commands.get("bulletedList"),"_executeCleanup",dg(t)),this.listenTo(t.commands.get("numberedList"),"_executeCleanup",dg(t)),n.document.registerPostFixer(function(e){return function(t){var n=!1,i=hg(e.model.document.differ.getChanges()).filter(function(e){return"todo"!==e.getAttribute("listType")});if(!i.length)return n;var r=i[i.length-1].nextSibling;if((!r||!r.is("element","listItem"))&&(r=i[i.length-1].previousSibling))for(var a=i[0].getAttribute("listIndent");r.is("element","listItem")&&r.getAttribute("listIndent")!==a&&(r=r.previousSibling););var s,c=o(i);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.hasAttribute("listStyle")){var u=l.previousSibling;ug(u,l)&&(t.setAttribute("listStyle",u.getAttribute("listStyle"),l),n=!0)}else lg(r,l)?t.setAttribute("listStyle",r.getAttribute("listStyle"),l):t.setAttribute("listStyle","default",l),n=!0}}catch(d){c.e(d)}finally{c.f()}return n}}(t)),t.conversion.for("upcast").add(function(e){e.on("element:li",function(e,t,n){var i=t.viewItem.parent.getStyle("list-style-type")||"default";n.writer.setAttribute("listStyle",i,t.modelRange.start.nodeAfter||t.modelRange.end.nodeBefore)},{priority:"low"})}),t.conversion.for("downcast").add(function(e){e.on("attribute:listStyle:listItem",function(e,t,n){var i,r,o,a,s,c=n.writer,l=t.item,u=Zv(l.previousSibling,{sameIndent:!0,listIndent:l.getAttribute("listIndent"),direction:"backward"}),d=n.mapper.toViewElement(l);i=l,(r=u)&&i.getAttribute("listType")===r.getAttribute("listType")&&i.getAttribute("listIndent")===r.getAttribute("listIndent")&&i.getAttribute("listStyle")===r.getAttribute("listStyle")||c.breakContainer(c.createPositionBefore(d)),o=c,s=d.parent,(a=t.attributeNewValue)&&"default"!==a?o.setStyle("list-style-type",a,s):o.removeStyle("list-style-type",s)},{priority:"low"})}),this._mergeListStyleAttributeWhileMergingLists()}},{key:"afterInit",value:function(){var e=this.editor;e.commands.get("todoList")&&e.model.document.registerPostFixer(function(e){return function(t){var n=hg(e.model.document.differ.getChanges()).filter(function(e){return"todo"===e.getAttribute("listType")&&e.hasAttribute("listStyle")});if(!n.length)return!1;var i,r=o(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.removeAttribute("listStyle",a)}}catch(s){r.e(s)}finally{r.f()}return!0}}(e))}},{key:"_mergeListStyleAttributeWhileMergingLists",value:function(){var e,t=this.editor.model;this.listenTo(t,"deleteContent",function(t,n){var i=r(n,1)[0],o=i.getFirstPosition(),a=i.getLastPosition();if(o.parent!==a.parent&&o.parent.is("element","listItem")){var s=a.parent.nextSibling;if(s&&s.is("element","listItem")){var c=Zv(o.parent,{sameIndent:!0,listIndent:s.getAttribute("listIndent")});c&&c.getAttribute("listType")===s.getAttribute("listType")&&(e=c)}}},{priority:"high"}),this.listenTo(t,"deleteContent",function(){e&&(t.change(function(t){var n,i=Zv(e.nextSibling,{sameIndent:!0,listIndent:e.getAttribute("listIndent"),direction:"forward"}),r=o([i].concat(a(Fv(t.createPositionAt(i,0),"forward"))));try{for(r.s();!(n=r.n()).done;){var s=n.value;t.setAttribute("listStyle",e.getAttribute("listStyle"),s)}}catch(c){r.e(c)}finally{r.f()}}),e=null)},{priority:"low"})}}],[{key:"requires",get:function(){return[ng]}},{key:"pluginName",get:function(){return"ListStyleEditing"}}]),t}(et);function lg(e,t){if(!e)return!1;var n=e.getAttribute("listStyle");return!!n&&"default"!==n&&e.getAttribute("listType")===t.getAttribute("listType")}function ug(e,t){if(!e||!e.is("element","listItem")||t.getAttribute("listType")!==e.getAttribute("listType"))return!1;var n=e.getAttribute("listIndent");if(n<1||n!==t.getAttribute("listIndent"))return!1;var i=e.getAttribute("listStyle");return!(!i||i===t.getAttribute("listStyle"))}function dg(e){return function(t,n){n=n.filter(function(e){return e.is("element","listItem")}),e.model.change(function(e){var t,i=o(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;e.removeAttribute("listStyle",r)}}catch(a){i.e(a)}finally{i.f()}})}}function hg(e){var t,n=[],i=o(e);try{for(i.s();!(t=i.n()).done;){var r=fg(t.value);r&&r.is("element","listItem")&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}function fg(e){return"attribute"===e.type?e.range.start.nodeAfter:"insert"===e.type?e.position.nodeAfter:null}c(96);var pg=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.locale.t;e.ui.componentFactory.add("bulletedList",vg({editor:e,parentCommandName:"bulletedList",buttonLabel:t("Bulleted List"),buttonIcon:og,toolbarAriaLabel:t("Bulleted list styles toolbar"),styleDefinitions:[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>'},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>'},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>'}]})),e.ui.componentFactory.add("numberedList",vg({editor:e,parentCommandName:"numberedList",buttonLabel:t("Numbered List"),buttonIcon:rg,toolbarAriaLabel:t("Numbered list styles toolbar"),styleDefinitions:[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the lower\u2013roman list style"),tooltip:t("Lower\u2013roman"),type:"lower-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the upper\u2013roman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the lower\u2013latin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the upper\u2013latin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>'}]}))}}],[{key:"pluginName",get:function(){return"ListStyleUI"}}]),t}(et);function vg(e){var t=e.editor,n=e.parentCommandName,i=e.buttonLabel,r=e.buttonIcon,o=e.toolbarAriaLabel,a=e.styleDefinitions,s=t.commands.get(n),c=t.commands.get("listStyle");return function(e){var l,u,d,h,f,p,v=Cl(e,dl),g=v.buttonView,m=(d=(l={editor:t,parentCommandName:n,listStyleCommand:c}).listStyleCommand,h=l.parentCommandName,f=(u=l.editor).locale,p=u.commands.get(h),function(e){var t=e.label,n=e.type,i=e.icon,r=e.tooltip,o=new nl(f);return o.set({label:t,icon:i,tooltip:r}),d.on("change:value",function(){o.isOn=d.value===n}),o.on("execute",function(){p.value?u.execute("listStyle",d.value!==n?{type:n}:{type:d._defaultType}):u.model.change(function(){u.execute(h),u.execute("listStyle",{type:n})}),u.editing.view.focus()}),o});return Ol(v,a.map(m)),v.bind("isEnabled").to(s),v.toolbarView.ariaLabel=o,v.class="ck-list-styles-dropdown",g.on("execute",function(){t.execute(n),t.editing.view.focus()}),g.set({label:i,icon:r,tooltip:!0,isToggleable:!0}),g.bind("isOn").to(s,"value",function(e){return!!e}),v}}function gg(e,t){return function(e){e.on("attribute:url:media",n)};function n(n,i,r){if(r.consumable.consume(i.item,n.name)){var o=i.attributeNewValue,s=r.writer,c=r.mapper.toViewElement(i.item),l=a(c.getChildren()).find(function(e){return e.getCustomProperty("media-content")});s.remove(l);var u=e.getMediaViewElement(s,o,t);s.insert(s.createPositionAt(c,0),u)}}}function mg(e,t,n,i){var r=e.createContainerElement("figure",{class:"media"});return e.insert(e.createPositionAt(r,0),t.getMediaViewElement(e,n,i)),r}function bg(e){var t=e.getSelectedElement();return t&&t.is("element","media")?t:null}function yg(e,t,n){e.change(function(i){var r=i.createElement("media",{url:t});e.insertContent(r,n),i.setSelection(r,"on")})}var kg=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e,t=this.editor.model,n=t.document.selection,i=t.schema,r=bg(n);this.value=r?r.getAttribute("url"):null,this.isEnabled=!!(e=n.getSelectedElement())&&"media"===e.name||function(e,t){var n=ld(e,t).parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}(n,t)&&!ud(n,i)}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document.selection,i=bg(n);if(i)t.change(function(t){t.setAttribute("url",e,i)});else{var r=ld(n,t);yg(t,e,r)}}}]),t}(nt),wg=function(){function e(t,n){l(this,e);var i=n.providers,r=n.extraProviders||[],o=new Set(n.removeProviders),a=i.concat(r).filter(function(e){var t=e.name;return t?!o.has(t):(Object(A.b)("media-embed-no-provider-name",{provider:e}),!1)});this.locale=t,this.providerDefinitions=a}return d(e,[{key:"hasMedia",value:function(e){return!!this._getMedia(e)}},{key:"getMediaViewElement",value:function(e,t,n){return this._getMedia(t).getViewElement(e,n)}},{key:"_getMedia",value:function(e){if(!e)return new _g(this.locale);e=e.trim();var t,n=o(this.providerDefinitions);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,a=r.html,s=o(_n(r.url));try{for(s.s();!(i=s.n()).done;){var c=i.value,l=this._getUrlMatches(e,c);if(l)return new _g(this.locale,e,l,a)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){n.e(u)}finally{n.f()}return null}},{key:"_getUrlMatches",value:function(e,t){var n=e.match(t);if(n)return n;var i=e.replace(/^https?:\/\//,"");return(n=i.match(t))||((n=(i=i.replace(/^www\./,"")).match(t))||null)}}]),e}(),_g=function(){function e(t,n,i,r){l(this,e),this.url=this._getValidUrl(n),this._t=t.t,this._match=i,this._previewRenderer=r}return d(e,[{key:"getViewElement",value:function(e,t){var n,i={};if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");var r=this._getPreviewHtml(t);n=e.createRawElement("div",i,function(e){e.innerHTML=r})}else this.url&&(i.url=this.url),n=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,n),n}},{key:"_getPreviewHtml",value:function(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}},{key:"_getPlaceholderHtml",value:function(){var e=new tl,t=new el;return e.text=this._t("Open media in new tab"),t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42",new Lc({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}},{key:"_getValidUrl",value:function(e){return e?e.match(/^https?/)?e:"https://"+e:null}}]),e}();c(98);var xg=function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>')}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>')}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>')}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>')}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),n.registry=new wg(e.locale,e.config.get("mediaEmbed")),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.t,i=e.conversion,r=e.config.get("mediaEmbed.previewsInData"),o=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new kg(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),i.for("dataDowncast").elementToElement({model:"media",view:function(e,t){var n=t.writer,i=e.getAttribute("url");return mg(n,a,i,{elementName:o,renderMediaPreview:i&&r})}}),i.for("dataDowncast").add(gg(a,{elementName:o,renderMediaPreview:r})),i.for("editingDowncast").elementToElement({model:"media",view:function(e,t){var i,r,s,c=t.writer,l=e.getAttribute("url");return i=mg(c,a,l,{elementName:o,renderForEditingView:!0}),r=c,s=n("media widget"),r.setCustomProperty("media",!0,i),id(i,r,{label:s})}}),i.for("editingDowncast").add(gg(a,{elementName:o,renderForEditingView:!0})),i.for("upcast").elementToElement({view:function(e){return["oembed",o].includes(e.name)&&e.getAttribute("url")?{name:!0}:null},model:function(e,t){var n=t.writer,i=e.getAttribute("url");if(a.hasMedia(i))return n.createElement("media",{url:i})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function(e,t){var n=t.writer,i=e.getAttribute("data-oembed-url");if(a.hasMedia(i))return n.createElement("media",{url:i})}})}}],[{key:"pluginName",get:function(){return"MediaEmbedEditing"}}]),t}(et),Tg=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/,Ag=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e]))._timeoutId=null,n._positionToInsert=null,n}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document;this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",function(){var t=n.selection.getFirstRange(),i=tc.fromPosition(t.start);i.stickiness="toPrevious";var r=tc.fromPosition(t.end);r.stickiness="toNext",n.once("change:data",function(){e._embedMediaBetweenPositions(i,r),i.detach(),r.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",function(){e._timeoutId&&(Pr.window.clearTimeout(e._timeoutId),e._positionToInsert.detach(),e._timeoutId=null,e._positionToInsert=null)},{priority:"high"})}},{key:"_embedMediaBetweenPositions",value:function(e,t){var n,i=this,r=this.editor,a=r.plugins.get(xg).registry,s=new ka(e,t),c=s.getWalker({ignoreElementEnd:!0}),l="",u=o(c);try{for(u.s();!(n=u.n()).done;){var d=n.value;d.item.is("$textProxy")&&(l+=d.item.data)}}catch(h){u.e(h)}finally{u.f()}(l=l.trim()).match(Tg)&&a.hasMedia(l)&&r.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=tc.fromPosition(e),this._timeoutId=Pr.window.setTimeout(function(){r.model.change(function(e){var t;i._timeoutId=null,e.remove(s),s.detach(),"$graveyard"!==i._positionToInsert.root.rootName&&(t=i._positionToInsert),yg(r.model,l,t),i._positionToInsert.detach(),i._positionToInsert=null})},100)):s.detach()}}],[{key:"requires",get:function(){return[Md,Th]}},{key:"pluginName",get:function(){return"AutoMediaEmbed"}}]),t}(et);c(100);var Sg=function(e){function n(e,t){var i;l(this,n),i=f(this,n,[t]);var r=t.t;return i.focusTracker=new jo,i.keystrokes=new Do,i.set("mediaURLInputValue",""),i.urlInputView=i._createUrlInput(),i.saveButtonView=i._createButton(r("Save"),Tc,"ck-button-save"),i.saveButtonView.type="submit",i.saveButtonView.bind("isEnabled").to(v(i),"mediaURLInputValue",function(e){return!!e}),i.cancelButtonView=i._createButton(r("Cancel"),xc,"ck-button-cancel","cancel"),i._focusables=new Mc,i._focusCycler=new al({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i._validators=e,i.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[i.urlInputView,i.saveButtonView,i.cancelButtonView]}),Pc(v(i)),i}return g(n,e),d(n,[{key:"render",value:function(){var e=this;t(w(n.prototype),"render",this).call(this),Ic({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(t){e._focusables.add(t),e.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element);var i=function(e){return e.stopPropagation()};this.keystrokes.set("arrowright",i),this.keystrokes.set("arrowleft",i),this.keystrokes.set("arrowup",i),this.keystrokes.set("arrowdown",i),this.listenTo(this.urlInputView.element,"selectstart",function(e,t){t.stopPropagation()},{priority:"high"})}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"url",get:function(){return this.urlInputView.fieldView.element.value.trim()},set:function(e){this.urlInputView.fieldView.element.value=e.trim()}},{key:"isValid",value:function(){this.resetFormStatus();var e,t=o(this._validators);try{for(t.s();!(e=t.n()).done;){var n=(0,e.value)(this);if(n)return this.urlInputView.errorText=n,!1}}catch(i){t.e(i)}finally{t.f()}return!0}},{key:"resetFormStatus",value:function(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}},{key:"_createUrlInput",value:function(){var e=this,t=this.locale.t,n=new Rl(this.locale,jl),i=n.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),n.label=t("Media URL"),n.infoText=this._urlInputViewInfoDefault,i.on("input",function(){n.infoText=i.element.value?e._urlInputViewInfoTip:e._urlInputViewInfoDefault,e.mediaURLInputValue=i.element.value.trim()}),n}},{key:"_createButton",value:function(e,t,n,i){var r=new nl(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.extendTemplate({attributes:{class:n}}),i&&r.delegate("execute").to(this,i),r}}]),n}(Nc),Cg=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.commands.get("mediaEmbed"),i=t.plugins.get(xg).registry;t.ui.componentFactory.add("mediaEmbed",function(r){var o,a,s=Cl(r),c=new Sg((o=t.t,a=i,[function(e){if(!e.url.length)return o("The URL must not be empty.")},function(e){if(!a.hasMedia(e.url))return o("This media URL is not supported.")}]),t.locale);return e._setUpDropdown(s,c,n,t),e._setUpForm(s,c,n),s})}},{key:"_setUpDropdown",value:function(e,t,n){var i=this.editor,r=i.t,o=e.buttonView;function a(){i.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),o.set({label:r("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),o.on("open",function(){t.disableCssTransitions(),t.url=n.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions()},{priority:"low"}),e.on("submit",function(){t.isValid()&&(i.execute("mediaEmbed",t.url),a())}),e.on("change:isOpen",function(){return t.resetFormStatus()}),e.on("cancel",function(){return a()})}},{key:"_setUpForm",value:function(e,t,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",function(e){return!e})}}],[{key:"requires",get:function(){return[xg]}},{key:"pluginName",get:function(){return"MediaEmbedUI"}}]),t}(et);function Og(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null}}function Eg(e,t,n){var i=t.parent,r=n.createElement(e.type),o=i.getChildIndex(t)+1;return n.insertChild(o,r,i),e.style&&n.setStyle("list-style-type",e.style,r),r}function Pg(e){var t={},n=e.getStyle("mso-list");if(n){var i=n.match(/(^|\s{1,100})l(\d+)/i),r=n.match(/\s{0,100}lfo(\d+)/i),o=n.match(/\s{0,100}level(\d+)/i);i&&r&&o&&(t.id=i[2],t.order=r[1],t.indent=o[1])}return t}c(102);var Ig=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i,Mg=function(){function e(t){l(this,e),this.document=t}return d(e,[{key:"isActive",value:function(e){return Ig.test(e)}},{key:"execute",value:function(e){var t=new fu(this.document);(function(e,t){var n,i=o(e.getChildren());try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.is("element","b")&&"normal"===r.getStyle("font-weight")){var a=e.getChildIndex(r);t.remove(r),t.insertChild(a,r.getChildren(),e)}}}catch(s){i.e(s)}finally{i.f()}})(e.content,t),function(e,t){var n,i=o(t.createRangeIn(e));try{for(i.s();!(n=i.n()).done;){var r=n.value.item;if(r.is("element","li")){var a=r.getChild(0);a&&a.is("element","p")&&t.unwrapElement(a)}}}catch(s){i.e(s)}finally{i.f()}}(e.content,t)}}]),e}();function Ng(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1===t.length?" ":Array(t.length+1).join("\xa0 ").substr(0,t.length)})}var Lg=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Rg=/xmlns:o="urn:schemas-microsoft-com/i,jg=function(){function e(t){l(this,e),this.document=t}return d(e,[{key:"isActive",value:function(e){return Lg.test(e)||Rg.test(e)}},{key:"execute",value:function(e){var t=function(e,t){var n=new DOMParser,i=Ng(Ng(function(e){var t=e.indexOf("</body>");if(t<0)return e;var n=e.indexOf("</html>",t+"</body>".length);return e.substring(0,t+"</body>".length)+(n>=0?e.substring(n):"")}(e=e.replace(/<!--\[if gte vml 1]>/g,"")))).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><"),r=n.parseFromString(i,"text/html");r.querySelectorAll("span[style*=spacerun]").forEach(function(e){var t=e.innerText.length||0;e.innerHTML=Array(t+1).join("\xa0 ").substr(0,t)});var o=r.body.innerHTML,a=function(e,t){for(var n=new Oi(t),i=new jr(n,{blockFillerMode:"nbsp"}),r=e.createDocumentFragment(),o=e.body.childNodes;o.length>0;)r.appendChild(o[0]);return i.domToView(r)}(r,t),s=function(e){for(var t=[],n=[],i=0,r=Array.from(e.getElementsByTagName("style"));i<r.length;i++){var o=r[i];o.sheet&&o.sheet.cssRules&&o.sheet.cssRules.length&&(t.push(o.sheet),n.push(o.innerHTML))}return{styles:t,stylesString:n.join(" ")}}(r);return{body:a,bodyString:o,styles:s.styles,stylesString:s.stylesString}}(e.dataTransfer.getData("text/html"),this.document.stylesProcessor),n=t.body;(function(e,t){if(e.childCount){var n=new fu(e.document),i=function(e,t){var n,i=t.createRangeIn(e),r=new Ln({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),a=[],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("elementStart"===c.type&&r.match(c.item)){var l=Pg(c.item);a.push({element:c.item,id:l.id,order:l.order,indent:l.indent})}}}catch(u){s.e(u)}finally{s.f()}return a}(e,n);if(i.length){var r=null,a=1;i.forEach(function(e,s){var c,l,u=function(e,t){if(!e)return!0;if(e.id!==t.id)return t.indent-e.indent!=1;var n,i=t.element.previousSibling;return!i||!((n=i).is("element","ol")||n.is("element","ul"))}(i[s-1],e),d=(l=e,(c=u?null:i[s-1])?l.indent-c.indent:l.indent-1);if(u&&(r=null,a=1),!r||0!==d){var h=function(e,t){var n=new RegExp("@list l".concat(e.id,":level").concat(e.indent,"\\s*({[^}]*)"),"gi").exec(t),i="decimal",r="ol";if(n&&n[1]){var o=/mso-level-number-format:([^;]{0,100});/gi.exec(n[1]);if(o&&o[1]&&(r="bullet"!==(i=o[1].trim())&&"image"!==i?"ol":"ul"),"bullet"===i){var a=function(e){var t=function(e){if(e.getChild(0).is("$text"))return null;var t=e.getChild(0).getChild(0);return t.is("$text")?t:t.getChild(0)}(e);if(!t)return null;var n=t._data;return"o"===n?"circle":"\xb7"===n?"disc":"\xa7"===n?"square":null}(e.element);a&&(i=a)}}return{type:r,style:Og(i)}}(e,t);if(r)if(e.indent>a){var f=r.getChild(r.childCount-1),p=f.getChild(f.childCount-1);r=Eg(h,p,n),a+=1}else e.indent<a&&(r=function(e,t){var n,i=null,r=0,a=o(e.getAncestors({parentFirst:!0}));try{for(a.s();!(n=a.n()).done;){var s=n.value;if("ul"!==s.name&&"ol"!==s.name||r++,r===t){i=s;break}}}catch(c){a.e(c)}finally{a.f()}return i}(r,a-e.indent),a=parseInt(e.indent));else r=Eg(h,e.element,n);e.indent<=a&&(r.is("element",h.type)||(r=n.rename(h.type,r)))}var v,g,m=(function(e,t){var n,i=new Ln({name:"span",styles:{"mso-list":"Ignore"}}),r=o(t.createRangeIn(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;"elementStart"===a.type&&i.match(a.item)&&t.remove(a.item)}}catch(s){r.e(s)}finally{r.f()}}(v=e.element,g=n),g.rename("li",v));n.appendChild(m,r)})}}})(n,t.stylesString),function(e,t){if(e.childCount){var n=new fu;(function(e,t,n){var i,r=n.createRangeIn(t),a=new Ln({name:"img"}),s=[],c=o(r);try{for(c.s();!(i=c.n()).done;){var l=i.value;if(a.match(l.item)){var u=l.item,d=u.getAttribute("v:shapes")?u.getAttribute("v:shapes").split(" "):[];d.length&&d.every(function(t){return e.indexOf(t)>-1})?s.push(u):u.getAttribute("src")||s.push(u)}}}catch(v){c.e(v)}finally{c.f()}for(var h=0,f=s;h<f.length;h++){var p=f[h];n.remove(p)}})(function(e,t){var n,i=t.createRangeIn(e),r=new Ln({name:/v:(.+)/}),a=[],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=c.item,u=l.previousSibling&&l.previousSibling.name||null;r.match(l)&&l.getAttribute("o:gfxdata")&&"v:shapetype"!==u&&a.push(c.item.getAttribute("id"))}}catch(d){s.e(d)}finally{s.f()}return a}(e,n),e,n),function(e,t){var n,i=t.createRangeIn(e),r=new Ln({name:/v:(.+)/}),a=[],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;r.match(c.item)&&a.push(c.item)}}catch(h){s.e(h)}finally{s.f()}for(var l=0,u=a;l<u.length;l++){var d=u[l];t.remove(d)}}(e,n);var i=function(e,t){var n,i=t.createRangeIn(e),r=new Ln({name:"img"}),a=[],s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;r.match(c.item)&&c.item.getAttribute("src").startsWith("file://")&&a.push(c.item)}}catch(l){s.e(l)}finally{s.f()}return a}(e,n);i.length&&function(e,t,n){if(e.length===t.length)for(var i=0;i<e.length;i++){var r="data:".concat(t[i].type,";base64,").concat((o=t[i].hex,btoa(o.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))));n.setAttribute("src",r,e[i])}var o}(i,function(e){if(!e)return[];var t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),i=e.match(n),r=[];if(i){var a,s=o(i);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=!1;c.includes("\\pngblip")?l="image/png":c.includes("\\jpegblip")&&(l="image/jpeg"),l&&r.push({hex:c.replace(t,"").replace(/[^\da-fA-F]/g,""),type:l})}}catch(u){s.e(u)}finally{s.f()}}return r}(t),n)}}(n,e.dataTransfer.getData("text/rtf")),e.content=n}}]),e}();function Dg(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t>r?i.setAttribute(e,t,n):i.removeAttribute(e,n)}function Vg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.createElement("tableCell",n);return e.insertElement("paragraph",i),e.insert(i,t),i}function Zg(e,t){var n=parseInt(t.parent.parent.getAttribute("headingColumns")||0),i=e.getCellLocation(t).column;return!!n&&i<n}function zg(e){return function(t){t.on("element:"+e,function(e,t,n){if(t.modelRange&&t.viewItem.isEmpty){var i=n.writer.createPositionAt(t.modelRange.start.nodeAfter,0);n.writer.insertElement("paragraph",i)}},{priority:"low"})}}function Fg(e){for(var t=0,n=0,i=Array.from(e.getChildren()).filter(function(e){return"th"===e.name||"td"===e.name});n<i.length&&"th"===i[n].name;)t+=parseInt(i[n].getAttribute("colspan")||1),n++;return t}var qg=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,t),this._table=e,this._startRow=void 0!==n.row?n.row:n.startRow||0,this._endRow=void 0!==n.row?n.row:n.endRow,this._startColumn=void 0!==n.column?n.column:n.startColumn||0,this._endColumn=void 0!==n.column?n.column:n.endColumn,this._includeAllSlots=!!n.includeAllSlots,this._skipRows=new Set,this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}return d(t,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._table.getChild(this._row);if(!e||this._isOverEndRow())return{done:!0};if(this._isOverEndColumn())return this._advanceToNextRow();var t=null,n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{var i=e.getChild(this._cellIndex);if(!i)return this._advanceToNextRow();var r=parseInt(i.getAttribute("colspan")||1),o=parseInt(i.getAttribute("rowspan")||1);(r>1||o>1)&&this._recordSpans(i,o,r),this._shouldSkipSlot()||(t=this._formatOutValue(i)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}},{key:"skipRow",value:function(e){this._skipRows.add(e)}},{key:"_advanceToNextRow",value:function(){return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}},{key:"_isOverEndRow",value:function(){return void 0!==this._endRow&&this._row>this._endRow}},{key:"_isOverEndColumn",value:function(){return void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_formatOutValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._column;return{done:!1,value:new Bg(this,e,t,n)}}},{key:"_shouldSkipSlot",value:function(){return this._skipRows.has(this._row)||this._row<this._startRow||this._column<this._startColumn||void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_getSpanned",value:function(){var e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}},{key:"_recordSpans",value:function(e,t,n){for(var i={cell:e,row:this._row,column:this._column},r=this._row;r<this._row+t;r++)for(var o=this._column;o<this._column+n;o++)r==this._row&&o==this._column||this._markSpannedCell(r,o,i)}},{key:"_markSpannedCell",value:function(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}}]),t}(),Bg=function(){function e(t,n,i,r){l(this,e),this.cell=n,this.row=t._row,this.column=t._column,this.cellAnchorRow=i,this.cellAnchorColumn=r,this._cellIndex=t._cellIndex,this._table=t._table}return d(e,[{key:"isAnchor",get:function(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}},{key:"cellWidth",get:function(){return parseInt(this.cell.getAttribute("colspan")||1)}},{key:"cellHeight",get:function(){return parseInt(this.cell.getAttribute("rowspan")||1)}},{key:"getPositionBefore",value:function(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}]),e}();function Ug(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return t.on("insert:table",function(t,n,i){var r=n.item;if(i.consumable.consume(r,"insert")){i.consumable.consume(r,"attribute:headingRows:table"),i.consumable.consume(r,"attribute:headingColumns:table");var a,s,c,l=e&&e.asWidget,u=i.writer.createContainerElement("figure",{class:"table"}),d=i.writer.createContainerElement("table");i.writer.insert(i.writer.createPositionAt(u,0),d),l&&((c=i.writer).setCustomProperty("table",!0,s=u),a=id(s,c,{hasSelectionHandle:!0}));var h,f=new qg(r),p={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0},v=new Map,g=o(f);try{for(g.s();!(h=g.n()).done;){var m=h.value,b=m.row,y=m.cell,k=r.getChild(b),w=v.get(b)||Qg(d,k,b,p,i);v.set(b,w),i.consumable.consume(y,"insert"),Jg(m,p,i.writer.createPositionAt(w,"end"),i,e)}}catch(C){g.e(C)}finally{g.f()}var _,x=o(r.getChildren());try{for(x.s();!(_=x.n()).done;){var T=_.value,A=T.index;v.has(A)||v.set(A,Qg(d,T,A,p,i))}}catch(C){x.e(C)}finally{x.f()}var S=i.mapper.toViewPosition(n.range.start);i.mapper.bindElements(r,l?a:u),i.writer.insert(S,l?a:u)}})}}function Hg(e,t){var n=t.writer;if(e.parent.is("element","tableCell"))return Wg(e)?n.createContainerElement("span",{style:"display:inline-block"}):n.createContainerElement("p")}function Wg(e){return 1===e.parent.childCount&&!Xg(e)}function Yg(e,t,n){var i,r,o,a,s,c,l=e.cell,u=Gg(e,t),d=n.mapper.toViewElement(l);d&&d.name!==u&&(i=l,r=u,a=(o=n).writer,s=o.mapper.toViewElement(i),ad(c=cd(a.createEditableElement(r,s.getAttributes()),a),a,function(e,t,n){return n.addClass(_n(t.classes),e)},function(e,t,n){return n.removeClass(_n(t.classes),e)}),a.insert(a.createPositionAfter(s),c),a.move(a.createRangeIn(s),a.createPositionAt(c,0)),a.remove(a.createRangeOn(s)),o.mapper.unbindViewElement(s),o.mapper.bindElements(i,c))}function Jg(e,t,n,i,r){var o=r&&r.asWidget,a=Gg(e,t),s=o?cd(i.writer.createEditableElement(a),i.writer):i.writer.createContainerElement(a);o&&ad(s,i.writer,function(e,t,n){return n.addClass(_n(t.classes),e)},function(e,t,n){return n.removeClass(_n(t.classes),e)});var c=e.cell,l=c.getChild(0),u=1===c.childCount&&"paragraph"===l.name;if(i.writer.insert(n,s),i.mapper.bindElements(c,s),!o&&u&&!Xg(l)){var d=c.getChild(0);i.consumable.consume(d,"insert"),i.mapper.bindElements(d,s)}}function Qg(e,t,n,i,r){r.consumable.consume(t,"insert");var o=t.isEmpty?r.writer.createEmptyElement("tr"):r.writer.createContainerElement("tr");r.mapper.bindElements(t,o);var a,s,c,l,u,d,h,f,p=i.headingRows,v=(f=r,$g(d=n<i.headingRows?"thead":"tbody",h=e)||(a=d,s=h,l=(c=f).writer.createContainerElement(a),u=c.writer.createPositionAt(s,"tbody"==a?"end":0),c.writer.insert(u,l),l)),g=r.writer.createPositionAt(v,p>0&&n>=p?n-p:n);return r.writer.insert(g,o),o}function Gg(e,t){var n=e.row,i=e.column,r=t.headingColumns,o=t.headingRows;return o&&o>n||r&&r>i?"th":"td"}function $g(e,t){var n,i=o(t.getChildren());try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.name==e)return r}}catch(a){i.e(a)}finally{i.f()}}function Kg(e,t,n){var i=$g(e,t);i&&0===i.childCount&&n.writer.remove(n.writer.createRangeOn(i))}function Xg(e){return!!a(e.getAttributeKeys()).length}var em=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e,t,n=this.editor.model,i=n.document.selection,r=n.schema;this.isEnabled=(e=r,t=i.getFirstPosition().parent,e.checkChild(t===t.root?t:t.parent,"table")&&!ud(i,r))}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.editor.model,n=t.document.selection,i=this.editor.plugins.get("TableUtils"),r=ld(n,t);t.change(function(n){var o=i.createTable(n,e);t.insertContent(o,r),n.setSelection(n.createPositionAt(o.getNodeByPath([0,0,0]),0))})}}]),t}(nt);function tm(e){var t,n=[],i=o(sm(e.getRanges()));try{for(i.s();!(t=i.n()).done;){var r=t.value.getContainedElement();r&&r.is("element","tableCell")&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}function nm(e){var t,n=[],i=o(e.getRanges());try{for(i.s();!(t=i.n()).done;){var r=t.value.start.findAncestor("tableCell");r&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}function im(e){var t=tm(e);return t.length?t:nm(e)}function rm(e){return cm(e.map(function(e){return e.parent.index}))}function om(e){var t=e[0].findAncestor("table");return cm(a(new qg(t)).filter(function(t){return e.includes(t.cell)}).map(function(e){return e.column}))}function am(e,t){if(e.length<2||!function(e){var t=e[0].findAncestor("table");if(!um(rm(e),parseInt(t.getAttribute("headingRows")||0)))return!1;var n=parseInt(t.getAttribute("headingColumns")||0);return um(om(e),n)}(e))return!1;var n,i=new Set,r=new Set,a=0,s=o(e);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=t.getCellLocation(c),u=l.row,d=l.column,h=parseInt(c.getAttribute("rowspan")||1),f=parseInt(c.getAttribute("colspan")||1);i.add(u),r.add(d),h>1&&i.add(u+h-1),f>1&&r.add(d+f-1),a+=h*f}}catch(p){s.e(p)}finally{s.f()}return function(e,t){var n=Array.from(e.values()),i=Array.from(t.values());return(Math.max.apply(Math,n)-Math.min.apply(Math,n)+1)*(Math.max.apply(Math,i)-Math.min.apply(Math,i)+1)}(i,r)==a}function sm(e){return Array.from(e).sort(lm)}function cm(e){var t=e.sort(function(e,t){return e-t});return{first:t[0],last:t[t.length-1]}}function lm(e,t){return e.start.isBefore(t.start)?-1:1}function um(e,t){return e.first<t==e.last<t}var dm=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,t),(n=f(this,t,[e])).order=i.order||"below",n}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!e}},{key:"execute",value:function(){var e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),i="above"===this.order,r=im(t),o=rm(r),a=i?o.first:o.last,s=r[0].findAncestor("table");n.insertRows(s,{at:i?a:a+1,copyStructureFromAbove:!i})}}]),t}(nt),hm=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,t),(n=f(this,t,[e])).order=i.order||"right",n}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!e}},{key:"execute",value:function(){var e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),i="left"===this.order,r=im(t),o=om(r),a=i?o.first:o.last,s=r[0].findAncestor("table");n.insertColumns(s,{columns:1,at:i?a:a+1})}}]),t}(nt),fm=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,t),(n=f(this,t,[e])).direction=i.direction||"horizontally",n}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection);this.isEnabled=1===e.length}},{key:"execute",value:function(){var e=im(this.editor.model.document.selection)[0],t="horizontally"===this.direction,n=this.editor.plugins.get("TableUtils");t?n.splitCellHorizontally(e,2):n.splitCellVertically(e,2)}}]),t}(nt);function pm(e,t,n){for(var i=t.startRow,r=t.startColumn,s=t.endRow,c=t.endColumn,l=n.createElement("table"),u=s-i+1,d=0;d<u;d++)n.insertElement("tableRow",l,"end");var h,f=o(a(new qg(e,{startRow:i,endRow:s,startColumn:r,endColumn:c,includeAllSlots:!0})));try{for(f.s();!(h=f.n()).done;){var p=h.value,v=p.row,g=p.column,m=p.cell,b=p.isAnchor,y=p.cellAnchorRow,k=p.cellAnchorColumn,w=l.getChild(v-i);if(b){var _=n.cloneElement(m);n.append(_,w),ym(_,v,g,s,c,n)}else(y<i||k<r)&&Vg(n,n.createPositionAt(w,"end"))}}catch(x){f.e(x)}finally{f.f()}return function(e,t,n,i,r){var o=parseInt(t.getAttribute("headingRows")||0);o>0&&Dg("headingRows",o-n,e,r,0);var a=parseInt(t.getAttribute("headingColumns")||0);a>0&&Dg("headingColumns",a-i,e,r,0)}(l,e,i,r,n),l}function vm(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],a=new qg(e,{startRow:i,endRow:t-1}),s=o(a);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=c.row,u=c.cellHeight,d=l+u-1;l<t&&t<=d&&r.push(c)}}catch(h){s.e(h)}finally{s.f()}return r}function gm(e,t,n){var i=e.parent,r=i.parent,s=i.index,c=t-s,l={},u=parseInt(e.getAttribute("rowspan"))-c;u>1&&(l.rowspan=u);var d=parseInt(e.getAttribute("colspan")||1);d>1&&(l.colspan=d);var h,f,p=s+c,v=null,g=o(a(new qg(r,{startRow:s,endRow:p,includeAllSlots:!0})));try{for(g.s();!(f=g.n()).done;){var m=f.value,b=m.row,y=m.column;m.cell===e&&void 0===h&&(h=y),void 0!==h&&h===y&&b===p&&(v=Vg(n,m.getPositionBefore(),l))}}catch(k){g.e(k)}finally{g.f()}return Dg("rowspan",c,e,n),v}function mm(e,t){var n,i=[],r=o(new qg(e));try{for(r.s();!(n=r.n()).done;){var a=n.value,s=a.column,c=a.cellWidth;s<t&&t<=s+c-1&&i.push(a)}}catch(l){r.e(l)}finally{r.f()}return i}function bm(e,t,n,i){var r=n-t,o={},a=parseInt(e.getAttribute("colspan"))-r;a>1&&(o.colspan=a);var s=parseInt(e.getAttribute("rowspan")||1);s>1&&(o.rowspan=s);var c=Vg(i,i.createPositionAfter(e),o);return Dg("colspan",r,e,i),c}function ym(e,t,n,i,r,o){var a=parseInt(e.getAttribute("colspan")||1),s=parseInt(e.getAttribute("rowspan")||1);n+a-1>r&&Dg("colspan",r-n+1,e,o,1),t+s-1>i&&Dg("rowspan",i-t+1,e,o,1)}function km(e,t){var n,i=t.getColumns(e),r=new Array(i).fill(0),s=o(new qg(e));try{for(s.s();!(n=s.n()).done;){r[n.value.column]++}}catch(l){s.e(l)}finally{s.f()}var c=r.reduce(function(e,t,n){return t?e:[].concat(a(e),[n])},[]);return c.length>0&&(t.removeColumns(e,{at:c[c.length-1]}),!0)}function wm(e,t){for(var n=[],i=0;i<e.childCount;i++)e.getChild(i).isEmpty&&n.push(i);return n.length>0&&(t.removeRows(e,{at:n[n.length-1]}),!0)}function _m(e,t){km(e,t)||wm(e,t)}function xm(e,t){var n=Array.from(new qg(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));return n.every(function(e){return 1===e.cellHeight})?t.lastRow:t.lastRow+(n[0].cellHeight-1)}function Tm(e,t){var n=Array.from(new qg(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));return n.every(function(e){return 1===e.cellWidth})?t.lastColumn:t.lastColumn+(n[0].cellWidth-1)}var Am=function(e){function t(e,n){var i;return l(this,t),(i=f(this,t,[e])).direction=n.direction,i.isHorizontal="right"==i.direction||"left"==i.direction,i}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=nm(t.document.selection)[0],i=this.value,r=this.direction;t.change(function(t){var o,a,s,c="right"==r||"down"==r,l=c?n:i,u=c?i:n,d=u.parent;a=l,s=t,Sm(o=u)||(Sm(a)&&s.remove(s.createRangeIn(a)),s.move(s.createRangeIn(o),s.createPositionAt(a,"end"))),s.remove(o);var h=e.isHorizontal?"colspan":"rowspan",f=parseInt(n.getAttribute(h)||1),p=parseInt(i.getAttribute(h)||1);t.setAttribute(h,f+p,l),t.setSelection(t.createRangeIn(l));var v=e.editor.plugins.get("TableUtils");_m(d.findAncestor("table"),v)})}},{key:"_getMergeableCell",value:function(){var e=nm(this.editor.model.document.selection)[0];if(e){var t=this.editor.plugins.get("TableUtils"),n=this.isHorizontal?function(e,t,n){var i="right"==t?e.nextSibling:e.previousSibling,r=(e.parent.parent.getAttribute("headingColumns")||0)>0;if(i){var o="right"==t?e:i,a="right"==t?i:e,s=n.getCellLocation(o).column,c=n.getCellLocation(a).column,l=parseInt(o.getAttribute("colspan")||1),u=Zg(n,o),d=Zg(n,a);return r&&u!=d?void 0:s+l===c?i:void 0}}(e,this.direction,t):function(e,t){var n=e.parent,i=n.parent,r=i.getChildIndex(n);if(!("down"==t&&r===i.childCount-1||"up"==t&&0===r)){var o=parseInt(e.getAttribute("rowspan")||1),s=i.getAttribute("headingRows")||0;if(!s||!("down"==t&&r+o===s||"up"==t&&r===s)){var c=parseInt(e.getAttribute("rowspan")||1),l="down"==t?r+c:r,u=a(new qg(i,{endRow:l})),d=u.find(function(t){return t.cell===e}).column,h=u.find(function(e){var n=e.row,i=e.cellHeight;return e.column===d&&("down"==t?n===l:l===n+i)});return h&&h.cell}}}(e,this.direction);if(n){var i=this.isHorizontal?"rowspan":"colspan",r=parseInt(e.getAttribute(i)||1);return parseInt(n.getAttribute(i)||1)===r?n:void 0}}}}]),t}(nt);function Sm(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}var Cm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection),t=e[0];if(t){var n=t.findAncestor("table"),i=this.editor.plugins.get("TableUtils").getRows(n)-1,r=rm(e);this.isEnabled=!(0===r.first&&r.last===i)}else this.isEnabled=!1}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=im(t.document.selection),i=rm(n),r=n[0],a=r.findAncestor("table"),s=this.editor.plugins.get("TableUtils").getCellLocation(r).column;t.change(function(t){var n=i.last-i.first+1;e.editor.plugins.get("TableUtils").removeRows(a,{at:i.first,rows:n});var r=function(e,t,n){var i,r=e.getChild(t)||e.getChild(e.childCount-1),a=r.getChild(0),s=0,c=o(r.getChildren());try{for(c.s();!(i=c.n()).done;){var l=i.value;if(s>n)return a;a=l,s+=parseInt(l.getAttribute("colspan")||1)}}catch(u){c.e(u)}finally{c.f()}return a}(a,i.first,s);t.setSelection(t.createPositionAt(r,0))})}}]),t}(nt),Om=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection),t=e[0];if(t){var n=t.findAncestor("table"),i=this.editor.plugins.get("TableUtils").getColumns(n),r=om(e),o=r.first,a=r.last;this.isEnabled=a-o<i-1}else this.isEnabled=!1}},{key:"execute",value:function(){var e,t,n,i,o=this,s=function(e){var t=im(e),n=t[0],i=t.pop(),r=[n,i];return n.isBefore(i)?r:r.reverse()}(this.editor.model.document.selection),c=r(s,2),l=c[0],u=c[1],d=l.parent.parent,h=a(new qg(d)),f={first:h.find(function(e){return e.cell===l}).column,last:h.find(function(e){return e.cell===u}).column},p=(e=h,t=l,n=u,i=f,parseInt(n.getAttribute("colspan")||1)>1?n:t.previousSibling||n.nextSibling?n.nextSibling||t.previousSibling:i.first?e.reverse().find(function(e){return e.column<i.first}).cell:e.reverse().find(function(e){return e.column>i.last}).cell);this.editor.model.change(function(e){var t=f.last-f.first+1;o.editor.plugins.get("TableUtils").removeColumns(d,{at:f.first,columns:t}),e.setSelection(e.createPositionAt(p,0))})}}]),t}(nt),Em=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=this,t=im(this.editor.model.document.selection),n=t.length>0;this.isEnabled=n,this.value=n&&t.every(function(t){return e._isInHeading(t,t.parent.parent)})}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.forceValue!==this.value){var t=this.editor.model,n=im(t.document.selection),i=n[0].findAncestor("table"),r=rm(n),a=r.first,s=r.last,c=this.value?a:s+1,l=i.getAttribute("headingRows")||0;t.change(function(e){if(c){var t,n=o(vm(i,c,c>l?l:0));try{for(n.s();!(t=n.n()).done;){gm(t.value.cell,c,e)}}catch(r){n.e(r)}finally{n.f()}}Dg("headingRows",c,i,e,0)})}}},{key:"_isInHeading",value:function(e,t){var n=parseInt(t.getAttribute("headingRows")||0);return!!n&&e.parent.index<n}}]),t}(nt),Pm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),n=e.length>0;this.isEnabled=n,this.value=n&&e.every(function(e){return Zg(t,e)})}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.forceValue!==this.value){var t=this.editor.model,n=im(t.document.selection),i=n[0].findAncestor("table"),r=om(n),a=r.first,s=r.last,c=this.value?a:s+1;t.change(function(e){if(c){var t,n=o(mm(i,c));try{for(n.s();!(t=n.n()).done;){var r=t.value;bm(r.cell,r.column,c,e)}}catch(a){n.e(a)}finally{n.f()}}Dg("headingColumns",c,i,e,0)})}}}]),t}(nt),Im=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){this.decorate("insertColumns"),this.decorate("insertRows")}},{key:"getCellLocation",value:function(e){var t,n=e.parent,i=n.parent,r=i.getChildIndex(n),a=o(new qg(i,{row:r}));try{for(a.s();!(t=a.n()).done;){var s=t.value,c=s.cell,l=s.row,u=s.column;if(c===e)return{row:l,column:u}}}catch(d){a.e(d)}finally{a.f()}}},{key:"createTable",value:function(e,t){var n=e.createElement("table");return Mm(e,n,0,parseInt(t.rows)||2,parseInt(t.columns)||2),t.headingRows&&Dg("headingRows",t.headingRows,n,e,0),t.headingColumns&&Dg("headingColumns",t.headingColumns,n,e,0),n}},{key:"insertRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.editor.model,i=t.at||0,r=t.rows||1,a=void 0!==t.copyStructureFromAbove,s=t.copyStructureFromAbove?i-1:i,c=this.getRows(e),l=this.getColumns(e);n.change(function(t){var n=e.getAttribute("headingRows")||0;if(n>i&&Dg("headingRows",n+r,e,t,0),a||0!==i&&i!==c){var u,d=a?Math.max(i,s):i,h=new qg(e,{endRow:d}),f=new Array(l).fill(1),p=o(h);try{for(p.s();!(u=p.n()).done;){var v=u.value,g=v.row,m=v.column,b=v.cellHeight,y=v.cellWidth,k=v.cell,w=g+b-1,_=g<=s&&s<=w;g<i&&i<=w?(t.setAttribute("rowspan",b+r,k),f[m]=-y):a&&_&&(f[m]=y)}}catch(O){p.e(O)}finally{p.f()}for(var x=0;x<r;x++){var T=t.createElement("tableRow");t.insert(T,e,i);for(var A=0;A<f.length;A++){var S=f[A],C=t.createPositionAt(T,"end");S>0&&Vg(t,C,S>1?{colspan:S}:null),A+=Math.abs(S)-1}}}else Mm(t,e,i,r,l)})}},{key:"insertColumns",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.at||0,r=n.columns||1;this.editor.model.change(function(n){var a=e.getAttribute("headingColumns");i<a&&n.setAttribute("headingColumns",a+r,e);var s=t.getColumns(e);if(0!==i&&s!==i){var c,l=new qg(e,{column:i,includeAllSlots:!0}),u=o(l);try{for(u.s();!(c=u.n()).done;){var d=c.value,h=d.row,f=d.cell,p=d.cellAnchorColumn,v=d.cellAnchorRow,g=d.cellWidth,m=d.cellHeight;if(p<i){n.setAttribute("colspan",g+r,f);for(var b=v+m-1,y=h;y<=b;y++)l.skipRow(y)}else Nm(r,n,d.getPositionBefore())}}catch(x){u.e(x)}finally{u.f()}}else{var k,w=o(e.getChildren());try{for(w.s();!(k=w.n()).done;){var _=k.value;Nm(r,n,n.createPositionAt(_,i?"end":0))}}catch(x){w.e(x)}finally{w.f()}}})}},{key:"removeRows",value:function(e,t){var n=this,i=t.at,r=i+(t.rows||1)-1;this.editor.model.change(function(t){var s=function(e,t,n){var i,r=new Map,a=[],s=o(new qg(e,{endRow:n}));try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.row,u=c.column,d=c.cellHeight,h=c.cell,f=l+d-1;if(l>=t&&l<=n&&f>n&&r.set(u,{cell:h,rowspan:d-(n-l+1)}),l<t&&f>=t){var p;p=f>=n?n-t+1:f-t+1,a.push({cell:h,rowspan:d-p})}}}catch(v){s.e(v)}finally{s.f()}return{cellsToMove:r,cellsToTrim:a}}(e,i,r),c=s.cellsToMove,l=s.cellsToTrim;c.size&&function(e,t,n,i){var r,s,c=a(new qg(e,{includeAllSlots:!0,row:t})),l=e.getChild(t),u=o(c);try{for(u.s();!(s=u.n()).done;){var d=s.value,h=d.column,f=d.cell,p=d.isAnchor;if(n.has(h)){var v=n.get(h),g=v.cell,m=v.rowspan,b=r?i.createPositionAfter(r):i.createPositionAt(l,0);i.move(i.createRangeOn(g),b),Dg("rowspan",m,g,i),r=g}else p&&(r=f)}}catch(y){u.e(y)}finally{u.f()}}(e,r+1,c,t);for(var u=r;u>=i;u--)t.remove(e.getChild(u));var d,h=o(l);try{for(h.s();!(d=h.n()).done;){var f=d.value;Dg("rowspan",f.rowspan,f.cell,t)}}catch(p){h.e(p)}finally{h.f()}(function(e,t,n,i){var r=e.getAttribute("headingRows")||0;t<r&&Dg("headingRows",n<r?r-(n-t+1):t,e,i,0)})(e,i,r,t),km(e,n)||wm(e,n)})}},{key:"removeColumns",value:function(e,t){var n=this,i=t.at,r=t.at+(t.columns||1)-1;this.editor.model.change(function(t){!function(e,t,n){var i=e.getAttribute("headingColumns")||0;if(i&&t.first<i){var r=Math.min(i-1,t.last)-t.first+1;n.setAttribute("headingColumns",i-r,e)}}(e,{first:i,last:r},t);for(var o=r;o>=i;o--)for(var s=0,c=a(new qg(e));s<c.length;s++){var l=c[s],u=l.cell,d=l.column,h=l.cellWidth;d<=o&&h>1&&d+h>o?Dg("colspan",h-1,u,t):d===o&&t.remove(u)}wm(e,n)||km(e,n)})}},{key:"splitCellVertically",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=this.editor.model,i=e.parent.parent,r=parseInt(e.getAttribute("rowspan")||1),s=parseInt(e.getAttribute("colspan")||1);n.change(function(n){if(s>1){var c=Lm(s,t),l=c.newCellsSpan;Dg("colspan",c.updatedSpan,e,n);var u={};l>1&&(u.colspan=l),r>1&&(u.rowspan=r),Nm(s>t?t-1:s-1,n,n.createPositionAfter(e),u)}if(s<t){var d,h=t-s,f=a(new qg(i)),p=f.find(function(t){return t.cell===e}).column,v=f.filter(function(t){var n=t.cell,i=t.cellWidth,r=t.column;return n!==e&&r===p||r<p&&r+i>p}),g=o(v);try{for(g.s();!(d=g.n()).done;){var m=d.value,b=m.cell,y=m.cellWidth;n.setAttribute("colspan",y+h,b)}}catch(_){g.e(_)}finally{g.f()}var k={};r>1&&(k.rowspan=r),Nm(h,n,n.createPositionAfter(e),k);var w=i.getAttribute("headingColumns")||0;w>p&&Dg("headingColumns",w+h,i,n)}})}},{key:"splitCellHorizontally",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=this.editor.model,i=e.parent,r=i.parent,s=r.getChildIndex(i),c=parseInt(e.getAttribute("rowspan")||1),l=parseInt(e.getAttribute("colspan")||1);n.change(function(n){if(c>1){var i=a(new qg(r,{startRow:s,endRow:s+c-1,includeAllSlots:!0})),u=Lm(c,t),d=u.newCellsSpan,h=u.updatedSpan;Dg("rowspan",h,e,n);var f=i.find(function(t){return t.cell===e}).column,p={};d>1&&(p.rowspan=d),l>1&&(p.colspan=l);var v,g=o(i);try{for(g.s();!(v=g.n()).done;){var m=v.value,b=m.column,y=m.row;y>=s+h&&b===f&&(y+s+h)%d==0&&Nm(1,n,m.getPositionBefore(),p)}}catch(E){g.e(E)}finally{g.f()}}if(c<t){var k,w=t-c,_=o(a(new qg(r,{startRow:0,endRow:s})));try{for(_.s();!(k=_.n()).done;){var x=k.value,T=x.cell,A=x.cellHeight,S=x.row;T!==e&&S+A>s&&n.setAttribute("rowspan",A+w,T)}}catch(E){_.e(E)}finally{_.f()}var C={};l>1&&(C.colspan=l),Mm(n,r,s+1,w,1,C);var O=r.getAttribute("headingRows")||0;O>s&&Dg("headingRows",O+w,r,n)}})}},{key:"getColumns",value:function(e){return a(e.getChild(0).getChildren()).reduce(function(e,t){return e+parseInt(t.getAttribute("colspan")||1)},0)}},{key:"getRows",value:function(e){return e.childCount}}],[{key:"pluginName",get:function(){return"TableUtils"}}]),t}(et);function Mm(e,t,n,i,r){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=0;a<i;a++){var s=e.createElement("tableRow");e.insert(s,t,n),Nm(r,e,e.createPositionAt(s,"end"),o)}}function Nm(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=0;r<e;r++)Vg(t,n,i)}function Lm(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var n=Math.floor(e/t);return{newCellsSpan:n,updatedSpan:e-n*t+n}}var Rm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=tm(this.editor.model.document.selection);this.isEnabled=am(e,this.editor.plugins.get(Im))}},{key:"execute",value:function(){var e=this.editor.model,t=this.editor.plugins.get(Im);e.change(function(n){var i=tm(e.document.selection),r=i.shift(),a=function(e,t,n){var i,r=0,a=0,s=o(t);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=n.getCellLocation(c),u=l.row;r=Vm(c,l.column,r,"colspan"),a=Vm(c,u,a,"rowspan")}}catch(f){s.e(f)}finally{s.f()}var d=n.getCellLocation(e),h=d.row;return{mergeWidth:r-d.column,mergeHeight:a-h}}(r,i,t),s=a.mergeWidth,c=a.mergeHeight;Dg("colspan",s,r,n),Dg("rowspan",c,r,n);var l,u=o(i);try{for(u.s();!(l=u.n()).done;){jm(l.value,r,n)}}catch(d){u.e(d)}finally{u.f()}_m(r.findAncestor("table"),t),n.setSelection(r,"in")})}}]),t}(nt);function jm(e,t,n){Dm(e)||(Dm(t)&&n.remove(n.createRangeIn(t)),n.move(n.createRangeIn(e),n.createPositionAt(t,"end"))),n.remove(e)}function Dm(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}function Vm(e,t,n,i){var r=parseInt(e.getAttribute(i)||1);return Math.max(n,t+r)}var Zm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection);this.isEnabled=e.length>0}},{key:"execute",value:function(){for(var e=this.editor.model,t=im(e.document.selection),n=rm(t),i=t[0].findAncestor("table"),r=[],a=n.first;a<=n.last;a++){var s,c=o(i.getChild(a).getChildren());try{for(c.s();!(s=c.n()).done;){var l=s.value;r.push(e.createRangeOn(l))}}catch(u){c.e(u)}finally{c.f()}}e.change(function(e){e.setSelection(r)})}}]),t}(nt),zm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"refresh",value:function(){var e=im(this.editor.model.document.selection);this.isEnabled=e.length>0}},{key:"execute",value:function(){var e,t=this.editor.model,n=im(t.document.selection),i=n[0],r=n.pop(),a=i.findAncestor("table"),s=this.editor.plugins.get("TableUtils"),c=s.getCellLocation(i),l=s.getCellLocation(r),u=Math.min(c.column,l.column),d=Math.max(c.column,l.column),h=[],f=o(new qg(a,{startColumn:u,endColumn:d}));try{for(f.s();!(e=f.n()).done;){var p=e.value;h.push(t.createRangeOn(p.cell))}}catch(v){f.e(v)}finally{f.f()}t.change(function(e){e.setSelection(h)})}}]),t}(nt);function Fm(e,t){var n=!1,i=function(e){var t,n=parseInt(e.getAttribute("headingRows")||0),i=e.childCount,r=[],a=o(new qg(e));try{for(a.s();!(t=a.n()).done;){var s=t.value,c=s.row,l=s.cell,u=s.cellHeight;if(!(u<2)){var d=c<n?n:i;c+u>d&&r.push({cell:l,rowspan:d-c})}}}catch(h){a.e(h)}finally{a.f()}return r}(e);if(i.length){n=!0;var r,a=o(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;Dg("rowspan",s.rowspan,s.cell,t,1)}}catch(c){a.e(c)}finally{a.f()}}return n}function qm(e,t){var n,i=!1,a=function(e){var t,n=new Array(e.childCount).fill(0),i=o(new qg(e,{includeAllSlots:!0}));try{for(i.s();!(t=i.n()).done;){n[t.value.row]++}}catch(r){i.e(r)}finally{i.f()}return n}(e),s=[],c=o(a.entries());try{for(c.s();!(n=c.n()).done;){var l=r(n.value,2),u=l[0];l[1]||s.push(u)}}catch(_){c.e(_)}finally{c.f()}if(s.length){i=!0;var d,h=o(s.reverse());try{for(h.s();!(d=h.n()).done;){var f=d.value;t.remove(e.getChild(f)),a.splice(f,1)}}catch(_){h.e(_)}finally{h.f()}}var p=a[0];if(!a.every(function(e){return e===p})){var v,g=a.reduce(function(e,t){return t>e?t:e},0),m=o(a.entries());try{for(m.s();!(v=m.n()).done;){var b=r(v.value,2),y=b[0],k=g-b[1];if(k){for(var w=0;w<k;w++)Vg(t,t.createPositionAt(e.getChild(y),"end"));i=!0}}}catch(_){m.e(_)}finally{m.f()}}return i}function Bm(e){var t=e.attributeKey;return"attribute"===e.type&&("headingRows"===t||"colspan"===t||"rowspan"===t)}function Um(e,t){var n,i=!1,r=o(e.getChildren());try{for(r.s();!(n=r.n()).done;){i=Hm(n.value,t)||i}}catch(a){r.e(a)}finally{r.f()}return i}function Hm(e,t){var n,i=!1,r=o(e.getChildren());try{for(r.s();!(n=r.n()).done;){i=Wm(n.value,t)||i}}catch(a){r.e(a)}finally{r.f()}return i}function Wm(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;var n,i=Array.from(e.getChildren()).filter(function(e){return e.is("$text")}),r=o(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.wrap(t.createRangeOn(a),"paragraph")}}catch(s){r.e(s)}finally{r.f()}return!!i.length}function Ym(e){return!(!e.position||!e.position.parent.is("element","tableCell"))&&("insert"==e.type&&"$text"==e.name||"remove"==e.type)}function Jm(e,t){if(!e.is("element","paragraph"))return!1;var n=t.toViewElement(e);return!!n&&Wg(e)!==n.is("element","span")}c(104);var Qm=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.model,n=t.schema,i=e.conversion;n.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n.extend("$block",{allowIn:"tableCell"}),i.for("upcast").add(function(e){e.on("element:table",function(e,t,n){var i=t.viewItem;if(n.consumable.test(i,{name:!0})){var r=function(e){for(var t,n={headingRows:0,headingColumns:0},i=[],r=[],a=0,s=Array.from(e.getChildren());a<s.length;a++){var c=s[a];if("tbody"===c.name||"thead"===c.name||"tfoot"===c.name){"thead"!==c.name||t||(t=c);var l,u=Array.from(c.getChildren()).filter(function(e){return e.is("element","tr")}),d=o(u);try{for(d.s();!(l=d.n()).done;){var h=l.value;if("thead"===h.parent.name&&h.parent===t)n.headingRows++,i.push(h);else{r.push(h);var f=Fg(h);f>n.headingColumns&&(n.headingColumns=f)}}}catch(p){d.e(p)}finally{d.f()}}}return n.rows=[].concat(i,r),n}(i),a=r.rows,s=r.headingRows,c=r.headingColumns,l={};c&&(l.headingColumns=c),s&&(l.headingRows=s);var u=n.writer.createElement("table",l);if(n.safeInsert(u,t.modelCursor)){if(n.consumable.consume(i,{name:!0}),a.forEach(function(e){return n.convertItem(e,n.writer.createPositionAt(u,"end"))}),u.isEmpty){var d=n.writer.createElement("tableRow");n.writer.insert(d,n.writer.createPositionAt(u,"end")),Vg(n.writer,n.writer.createPositionAt(d,"end"))}n.updateConversionResult(u,t)}}})}),i.for("editingDowncast").add(Ug({asWidget:!0})),i.for("dataDowncast").add(Ug()),i.for("upcast").elementToElement({model:"tableRow",view:"tr"}),i.for("upcast").add(function(e){e.on("element:tr",function(e,t){t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop()},{priority:"high"})}),i.for("editingDowncast").add(function(e){return e.on("insert:tableRow",function(e,t,n){var i=t.item;if(n.consumable.consume(i,"insert")){var r,a=i.parent,s=function(e){var t,n=o(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("table"===i.name)return i}}catch(r){n.e(r)}finally{n.f()}}(n.mapper.toViewElement(a)),c=a.getChildIndex(i),l=new qg(a,{row:c}),u={headingRows:a.getAttribute("headingRows")||0,headingColumns:a.getAttribute("headingColumns")||0},d=new Map,h=o(l);try{for(h.s();!(r=h.n()).done;){var f=r.value,p=d.get(c)||Qg(s,i,c,u,n);d.set(c,p),n.consumable.consume(f.cell,"insert"),Jg(f,u,n.writer.createPositionAt(p,"end"),n,{asWidget:!0})}}catch(v){h.e(v)}finally{h.f()}}})}),i.for("editingDowncast").add(function(e){return e.on("remove:tableRow",function(e,t,n){e.stop();var i,r=n.writer,a=n.mapper,s=a.toViewPosition(t.position).getLastMatchingPosition(function(e){return!e.item.is("element","tr")}).nodeAfter,c=s.parent.parent,l=r.createRangeOn(s),u=r.remove(l),d=o(r.createRangeIn(u).getItems());try{for(d.s();!(i=d.n()).done;){var h=i.value;a.unbindViewElement(h)}}catch(f){d.e(f)}finally{d.f()}Kg("thead",c,n),Kg("tbody",c,n)},{priority:"higher"})}),i.for("upcast").elementToElement({model:"tableCell",view:"td"}),i.for("upcast").elementToElement({model:"tableCell",view:"th"}),i.for("upcast").add(zg("td")),i.for("upcast").add(zg("th")),i.for("editingDowncast").add(function(e){return e.on("insert:tableCell",function(e,t,n){var i=t.item;if(n.consumable.consume(i,"insert")){var r,a=i.parent,s=a.parent,c=s.getChildIndex(a),l=new qg(s,{row:c}),u={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0},d=o(l);try{for(d.s();!(r=d.n()).done;){var h=r.value;if(h.cell===i){var f=n.mapper.toViewElement(a);return void Jg(h,u,n.writer.createPositionAt(f,a.getChildIndex(i)),n,{asWidget:!0})}}}catch(p){d.e(p)}finally{d.f()}}})}),e.conversion.for("editingDowncast").elementToElement({model:"paragraph",view:Hg,converterPriority:"high"}),i.attributeToAttribute({model:"colspan",view:"colspan"}),i.attributeToAttribute({model:"rowspan",view:"rowspan"}),i.for("editingDowncast").add(function(e){return e.on("attribute:headingColumns:table",function(e,t,n){var i=t.item;if(n.consumable.consume(t.item,e.name)){var r,a={headingRows:i.getAttribute("headingRows")||0,headingColumns:i.getAttribute("headingColumns")||0},s=t.attributeOldValue,c=t.attributeNewValue,l=o(new qg(i,{endColumn:(s>c?s:c)-1}));try{for(l.s();!(r=l.n()).done;){Yg(r.value,a,n)}}catch(u){l.e(u)}finally{l.f()}}})}),e.commands.add("insertTable",new em(e)),e.commands.add("insertTableRowAbove",new dm(e,{order:"above"})),e.commands.add("insertTableRowBelow",new dm(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new hm(e,{order:"left"})),e.commands.add("insertTableColumnRight",new hm(e,{order:"right"})),e.commands.add("removeTableRow",new Cm(e)),e.commands.add("removeTableColumn",new Om(e)),e.commands.add("splitTableCellVertically",new fm(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new fm(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Rm(e)),e.commands.add("mergeTableCellRight",new Am(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Am(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Am(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Am(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Pm(e)),e.commands.add("setTableRowHeader",new Em(e)),e.commands.add("selectTableRow",new Zm(e)),e.commands.add("selectTableColumn",new zm(e)),function(e){e.document.registerPostFixer(function(){return function(e){var t,n=e.document.differ,i=new Set,r=o(n.getChanges());try{for(r.s();!(t=r.n()).done;){var a=t.value;if("attribute"==a.type){var s=a.range.start.nodeAfter;s&&s.is("element","table")&&"headingRows"==a.attributeKey&&i.add(s)}}}catch(d){r.e(d)}finally{r.f()}if(i.size){var c,l=o(i.values());try{for(l.s();!(c=l.n()).done;){var u=c.value;n.refreshItem(u)}}catch(d){l.e(d)}finally{l.f()}return!0}return!1}(e)})}(t),function(e){e.document.registerPostFixer(function(t){return function(e,t){var n,i=t.document.differ.getChanges(),r=!1,a=new Set,s=o(i);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=void 0;"table"==c.name&&"insert"==c.type&&(l=c.position.nodeAfter),"tableRow"!=c.name&&"tableCell"!=c.name||(l=c.position.findAncestor("table")),Bm(c)&&(l=c.range.start.findAncestor("table")),l&&!a.has(l)&&(r=Fm(l,e)||r,r=qm(l,e)||r,a.add(l))}}catch(u){s.e(u)}finally{s.f()}return r}(t,e)})}(t),function(e,t){e.document.registerPostFixer(function(){return function(e,t){var n,i=new Set,r=o(e.getChanges());try{for(r.s();!(n=r.n()).done;){var s=n.value,c="attribute"==s.type?s.range.start.parent:s.position.parent;c.is("element","tableCell")&&i.add(c)}}catch(p){r.e(p)}finally{r.f()}var l,u=o(i.values());try{for(u.s();!(l=u.n()).done;){var d,h=o(a(l.value.getChildren()).filter(function(e){return Jm(e,t)}));try{for(h.s();!(d=h.n()).done;){var f=d.value;e.refreshItem(f)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){u.e(p)}finally{u.f()}return!1}(e.document.differ,t)})}(t,e.editing.mapper),function(e){e.document.registerPostFixer(function(t){return function(e,t){var n,i=!1,r=o(t.document.differ.getChanges());try{for(r.s();!(n=r.n()).done;){var a=n.value;"insert"==a.type&&"table"==a.name&&(i=Um(a.position.nodeAfter,e)||i),"insert"==a.type&&"tableRow"==a.name&&(i=Hm(a.position.nodeAfter,e)||i),"insert"==a.type&&"tableCell"==a.name&&(i=Wm(a.position.nodeAfter,e)||i),Ym(a)&&(i=Wm(a.position.parent,e)||i)}}catch(s){r.e(s)}finally{r.f()}return i}(t,e)})}(t)}}],[{key:"pluginName",get:function(){return"TableEditing"}},{key:"requires",get:function(){return[Im]}}]),t}(et);c(106);var Gm=function(e){function t(e){var n;l(this,t);var i=(n=f(this,t,[e])).bindTemplate;return n.items=n._createGridCollection(),n.set("rows",0),n.set("columns",0),n.bind("label").to(v(n),"columns",v(n),"rows",function(e,t){return"".concat(t," \xd7 ").concat(e)}),n.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":i.to("boxover")},children:n.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:i.to("label")}]}],on:{mousedown:i.to(function(e){e.preventDefault()}),click:i.to(function(){n.fire("execute")})}}),n.on("boxover",function(e,t){var i=t.target.dataset,r=i.row,o=i.column;n.set({rows:parseInt(r),columns:parseInt(o)})}),n.on("change:columns",function(){n._highlightGridBoxes()}),n.on("change:rows",function(){n._highlightGridBoxes()}),n}return g(t,e),d(t,[{key:"focus",value:function(){}},{key:"focusLast",value:function(){}},{key:"_highlightGridBoxes",value:function(){var e=this.rows,t=this.columns;this.items.map(function(n,i){var r=Math.floor(i/10)<e&&i%10<t;n.set("isOn",r)})}},{key:"_createGridCollection",value:function(){for(var e=[],t=0;t<100;t++){var n=Math.floor(t/10);e.push(new $m(this.locale,n+1,t%10+1))}return this.createCollection(e)}}]),t}(Nc),$m=function(e){function t(e,n,i){var r;l(this,t);var o=(r=f(this,t,[e])).bindTemplate;return r.set("isOn",!1),r.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",o.if("isOn","ck-on")],"data-row":n,"data-column":i}}),r}return g(t,e),d(t)}(Nc),Km=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=this.editor.t,i="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",function(e){var i,r=t.commands.get("insertTable"),o=Cl(e);return o.bind("isEnabled").to(r),o.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:n("Insert table"),tooltip:!0}),o.on("change:isOpen",function(){i||(i=new Gm(e),o.panelView.children.add(i),i.delegate("execute").to(o),o.buttonView.on("open",function(){i.rows=0,i.columns=0}),o.on("execute",function(){t.execute("insertTable",{rows:i.rows,columns:i.columns}),t.editing.view.focus()}))}),o}),t.ui.componentFactory.add("tableColumn",function(t){var r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:n("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:n("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:n("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:n("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:n("Select column")}}];return e._prepareDropdown(n("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',r,t)}),t.ui.componentFactory.add("tableRow",function(t){var i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:n("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:n("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:n("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:n("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:n("Select row")}}];return e._prepareDropdown(n("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',i,t)}),t.ui.componentFactory.add("mergeTableCells",function(t){var r=[{type:"button",model:{commandName:"mergeTableCellUp",label:n("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:n("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:n("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:n("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:n("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:n("Split cell horizontally")}}];return e._prepareMergeSplitButtonDropdown(n("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',r,t)})}},{key:"_prepareDropdown",value:function(e,t,n,i){var r=this.editor,o=Cl(i),a=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:e,icon:t,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return e})}),this.listenTo(o,"execute",function(e){r.execute(e.source.commandName),r.editing.view.focus()}),o}},{key:"_prepareMergeSplitButtonDropdown",value:function(e,t,n,i){var r=this.editor,o=Cl(i,dl);return this._fillDropdownWithListOptions(o,n),o.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),this.listenTo(o.buttonView,"execute",function(){r.execute("mergeTableCells"),r.editing.view.focus()}),this.listenTo(o,"execute",function(e){r.execute(e.source.commandName),r.editing.view.focus()}),o}},{key:"_fillDropdownWithListOptions",value:function(e,t){var n,i=this.editor,r=[],a=new kn,s=o(t);try{for(s.s();!(n=s.n()).done;){Xm(n.value,i,r,a)}}catch(c){s.e(c)}finally{s.f()}return El(e,a),r}}],[{key:"pluginName",get:function(){return"TableUI"}}]),t}(et);function Xm(e,t,n,i){var r=e.model=new Vl(e.model),o=e.model,a=o.commandName,s=o.bindIsOn;if("button"===e.type||"switchbutton"===e.type){var c=t.commands.get(a);n.push(c),r.set({commandName:a}),r.bind("isEnabled").to(c),s&&r.bind("isOn").to(c,"value")}r.set({withText:!0}),i.add(e)}c(108);var eb=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this;this.listenTo(this.editor.model,"deleteContent",function(t,n){return e._handleDeleteContent(t,n)},{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}},{key:"getSelectedTableCells",value:function(){var e=tm(this.editor.model.document.selection);return 0==e.length?null:e}},{key:"getSelectionAsFragment",value:function(){var e=this,t=this.getSelectedTableCells();return t?this.editor.model.change(function(n){var i=n.createDocumentFragment(),r=e.editor.plugins.get("TableUtils"),o=om(t),a=o.first,s=o.last,c=rm(t),l=c.first,u=c.last,d=t[0].findAncestor("table"),h=u,f=s;if(am(t,r)){var p={firstColumn:a,lastColumn:s,firstRow:l,lastRow:u};h=xm(d,p),f=Tm(d,p)}var v=pm(d,{startRow:l,startColumn:a,endRow:h,endColumn:f},n);return n.insert(v,i,0),i}):null}},{key:"setCellSelection",value:function(e,t){var n=this._getCellsToSelect(e,t);this.editor.model.change(function(e){e.setSelection(n.cells.map(function(t){return e.createRangeOn(t)}),{backward:n.backward})})}},{key:"getFocusCell",value:function(){var e=a(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}},{key:"getAnchorCell",value:function(){var e=Ro(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null}},{key:"_defineSelectionConverter",value:function(){var e=this,t=this.editor,n=new Set;t.conversion.for("editingDowncast").add(function(t){return t.on("selection",function(t,i,r){var a=r.writer;!function(e){var t,i=o(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;e.removeClass("ck-editor__editable_selected",r)}}catch(a){i.e(a)}finally{i.f()}n.clear()}(a);var s=e.getSelectedTableCells();if(s){var c,l=o(s);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=r.mapper.toViewElement(u);a.addClass("ck-editor__editable_selected",d),n.add(d)}}catch(f){l.e(f)}finally{l.f()}var h=r.mapper.toViewElement(s[s.length-1]);a.setSelection(h,0)}},{priority:"lowest"})})}},{key:"_enablePluginDisabling",value:function(){var e=this,t=this.editor;this.on("change:isEnabled",function(){if(!e.isEnabled){var n=e.getSelectedTableCells();if(!n)return;t.model.change(function(e){var i=e.createPositionAt(n[0],0),r=t.model.schema.getNearestSelectionRange(i);e.setSelection(r)})}})}},{key:"_handleDeleteContent",value:function(e,t){var n=r(t,2),i=n[0],a=n[1],s=this.editor.model,c=!a||"backward"==a.direction,l=tm(i);l.length&&(e.stop(),s.change(function(e){var t=l[c?l.length-1:0];s.change(function(e){var t,n=o(l);try{for(n.s();!(t=n.n()).done;){var i=t.value;s.deleteContent(e.createSelection(i,"in"))}}catch(r){n.e(r)}finally{n.f()}});var n=s.schema.getNearestSelectionRange(e.createPositionAt(t,0));i.is("documentSelection")?e.setSelection(n):i.setTo(n)}))}},{key:"_getCellsToSelect",value:function(e,t){var n,i=this.editor.plugins.get("TableUtils"),r=i.getCellLocation(e),a=i.getCellLocation(t),s=Math.min(r.row,a.row),c=Math.max(r.row,a.row),l=Math.min(r.column,a.column),u=Math.max(r.column,a.column),d=new Array(c-s+1).fill(null).map(function(){return[]}),h={startRow:s,endRow:c,startColumn:l,endColumn:u},f=o(new qg(e.findAncestor("table"),h));try{for(f.s();!(n=f.n()).done;){var p=n.value,v=p.row,g=p.cell;d[v-s].push(g)}}catch(y){f.e(y)}finally{f.f()}var m=a.row<r.row,b=a.column<r.column;return m&&d.reverse(),b&&d.forEach(function(e){return e.reverse()}),{cells:d.flat(),backward:m||b}}}],[{key:"pluginName",get:function(){return"TableSelection"}},{key:"requires",get:function(){return[Im]}}]),t}(et),tb=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view.document;this.listenTo(n,"copy",function(t,n){return e._onCopyCut(t,n)}),this.listenTo(n,"cut",function(t,n){return e._onCopyCut(t,n)}),this.listenTo(t.model,"insertContent",function(t,n){return e._onInsertContent.apply(e,[t].concat(a(n)))},{priority:"high"}),this.decorate("_replaceTableSlotCell")}},{key:"_onCopyCut",value:function(e,t){var n=this.editor.plugins.get(eb);if(n.getSelectedTableCells()&&("cut"!=e.name||!this.editor.isReadOnly)){t.preventDefault(),e.stop();var i=this.editor.editing.view.document,r=this.editor.data.toView(n.getSelectionAsFragment());i.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name})}}},{key:"_onInsertContent",value:function(e,t,n){var i=this;if(!n||n.is("documentSelection")){var r=this.editor.model,a=this.editor.plugins.get(Im),s=function(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);var n,i=t.createRangeIn(e),r=o(i.getItems());try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is("element","table")){var s=t.createRange(i.start,t.createPositionBefore(a));if(t.hasContent(s,{ignoreWhitespaces:!0}))return null;var c=t.createRange(t.createPositionAfter(a),i.end);return t.hasContent(c,{ignoreWhitespaces:!0})?null:a}}}catch(l){r.e(l)}finally{r.f()}return null}(t,r);if(s){var c=im(r.document.selection);c.length?(e.stop(),r.change(function(e){var t={width:a.getColumns(s),height:a.getRows(s)},n=function(e,t,n,i){var r,o,a,s,c,l,u=e[0].findAncestor("table"),d=om(e),h=rm(e),f={firstColumn:d.first,lastColumn:d.last,firstRow:h.first,lastRow:h.last},p=1===e.length;return p&&(f.lastRow+=t.height-1,f.lastColumn+=t.width-1,r=u,o=f.lastRow+1,a=f.lastColumn+1,c=(s=i).getColumns(r),l=s.getRows(r),a>c&&s.insertColumns(r,{at:c,columns:a-c}),o>l&&s.insertRows(r,{at:l,rows:o-l})),p||!am(e,i)?function(e,t,n){var i=t.firstRow,r=t.lastRow,o=t.firstColumn,a=t.lastColumn,s={first:i,last:r},c={first:o,last:a};ib(e,o,s,n),ib(e,a+1,s,n),nb(e,i,c,n),nb(e,r+1,c,n,i)}(u,f,n):(f.lastRow=xm(u,f),f.lastColumn=Tm(u,f)),f}(c,t,e,a),r=n.lastColumn-n.firstColumn+1,o={startRow:0,startColumn:0,endRow:Math.min(n.lastRow-n.firstRow+1,t.height)-1,endColumn:Math.min(r,t.width)-1};s=pm(s,o,e);var l=c[0].findAncestor("table"),u=i._replaceSelectedCellsWithPasted(s,t,l,n,e);if(i.editor.plugins.get("TableSelection").isEnabled){var d=sm(u.map(function(t){return e.createRangeOn(t)}));e.setSelection(d)}else e.setSelection(u[0],0)})):_m(s,a)}}}},{key:"_replaceSelectedCellsWithPasted",value:function(e,t,n,i,r){var s,c,l=t.width,u=t.height,d=function(e,t,n){var i,r=new Array(n).fill(null).map(function(){return new Array(t).fill(null)}),a=o(new qg(e));try{for(a.s();!(i=a.n()).done;){var s=i.value,c=s.column,l=s.row,u=s.cell;r[l][c]=u}}catch(d){a.e(d)}finally{a.f()}return r}(e,l,u),h=[],f=o(a(new qg(n,{startRow:i.firstRow,endRow:i.lastRow,startColumn:i.firstColumn,endColumn:i.lastColumn,includeAllSlots:!0})));try{for(f.s();!(c=f.n()).done;){var p=c.value,v=p.row,g=p.column;g===i.firstColumn&&(s=p.getPositionBefore());var m=d[(v-i.firstRow)%u][(g-i.firstColumn)%l],b=m?r.cloneElement(m):null,y=this._replaceTableSlotCell(p,b,s,r);y&&(ym(y,v,g,i.lastRow,i.lastColumn,r),h.push(y),s=r.createPositionAfter(y))}}catch(A){f.e(A)}finally{f.f()}var k=parseInt(n.getAttribute("headingRows")||0),w=parseInt(n.getAttribute("headingColumns")||0),_=i.firstColumn<w&&w<=i.lastColumn;if(i.firstRow<k&&k<=i.lastRow){var x=nb(n,k,{first:i.firstColumn,last:i.lastColumn},r,i.firstRow);h.push.apply(h,a(x))}if(_){var T=ib(n,w,{first:i.firstRow,last:i.lastRow},r);h.push.apply(h,a(T))}return h}},{key:"_replaceTableSlotCell",value:function(e,t,n,i){var r=e.cell;return e.isAnchor&&i.remove(r),t?(i.insert(t,n),t):null}}],[{key:"pluginName",get:function(){return"TableClipboard"}},{key:"requires",get:function(){return[eb,Im]}}]),t}(et);function nb(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!(t<1))return vm(e,t,r).filter(function(e){return rb(e.column,e.cellWidth,n)}).map(function(e){return gm(e.cell,t,i)})}function ib(e,t,n,i){if(!(t<1))return mm(e,t).filter(function(e){return rb(e.row,e.cellHeight,n)}).map(function(e){return bm(e.cell,e.column,t,i)})}function rb(e,t,n){var i=e+t-1,r=n.first,o=n.last;return e>=r&&e<=o||e<r&&i>=r}var ob=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",function(){return e._handleTabOnSelectedTable.apply(e,arguments)},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(t,"arrowKey",function(){return e._onArrowKey.apply(e,arguments)},{context:"table"})}},{key:"_handleTabOnSelectedTable",value:function(e,t){var n=this.editor,i=n.model.document.selection.getSelectedElement();i&&i.is("element","table")&&(t(),n.model.change(function(e){e.setSelection(e.createRangeIn(i.getChild(0).getChild(0)))}))}},{key:"_getTabHandler",value:function(e){var t=this,n=this.editor;return function(i,r){var o=nm(n.model.document.selection)[0];if(o||(o=t.editor.plugins.get("TableSelection").getFocusCell()),o){r();var a=o.parent,s=a.parent,c=s.getChildIndex(a),l=a.getChildIndex(o),u=0===l;if(e||!u||0!==c){var d=l===a.childCount-1;if(e&&c===s.childCount-1&&d&&(n.execute("insertTableRowBelow"),c===s.childCount-1))n.model.change(function(e){e.setSelection(e.createRangeOn(s))});else{var h;if(e&&d)h=s.getChild(c+1).getChild(0);else if(!e&&u){var f=s.getChild(c-1);h=f.getChild(f.childCount-1)}else h=a.getChild(l+(e?1:-1));n.model.change(function(e){e.setSelection(e.createRangeIn(h))})}}else n.model.change(function(e){e.setSelection(e.createRangeOn(s))})}}}},{key:"_onArrowKey",value:function(e,t){var n=Yi(t.keyCode,this.editor.locale.contentLanguageDirection);this._handleArrowKeys(n,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}},{key:"_handleArrowKeys",value:function(e,t){var n,i=this.editor.model.document.selection,r=["right","down"].includes(e),o=tm(i);if(o.length)return n=t?this.editor.plugins.get("TableSelection").getFocusCell():r?o[o.length-1]:o[0],this._navigateFromCellInDirection(n,e,t),!0;var a=i.focus.findAncestor("tableCell");return!(!a||t&&!i.isCollapsed&&i.isBackward==r||!this._isSelectionAtCellEdge(i,a,r)||(this._navigateFromCellInDirection(a,e,t),0))}},{key:"_isSelectionAtCellEdge",value:function(e,t,n){var i=this.editor.model,r=this.editor.model.schema,o=n?e.getLastPosition():e.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return i.createPositionAt(t,n?"end":0).isTouching(o);var a=i.createSelection(o);return i.modifySelection(a,{direction:n?"forward":"backward"}),o.isEqual(a.focus)}},{key:"_navigateFromCellInDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.editor.model,r=e.findAncestor("table"),o=a(new qg(r,{includeAllSlots:!0})),s=o[o.length-1],c=s.row,l=s.column,u=o.find(function(t){return t.cell==e}),d=u.row,h=u.column;switch(t){case"left":h--;break;case"up":d--;break;case"right":h+=u.cellWidth;break;case"down":d+=u.cellHeight}if(d<0||d>c||h<0&&d<=0||h>l&&d>=c)i.change(function(e){e.setSelection(e.createRangeOn(r))});else{h<0?(h=n?0:l,d--):h>l&&(h=n?l:0,d++);var f=o.find(function(e){return e.row==d&&e.column==h}).cell,p=["right","down"].includes(t),v=this.editor.plugins.get("TableSelection");if(n&&v.isEnabled){var g=v.getAnchorCell()||e;v.setCellSelection(g,f)}else{var m=i.createPositionAt(f,p?0:"end");i.change(function(e){e.setSelection(m)})}}}}],[{key:"pluginName",get:function(){return"TableKeyboard"}},{key:"requires",get:function(){return[eb]}}]),t}(et),ab=function(e){function t(e){var n;return l(this,t),(n=f(this,t,[e])).domEventType=["mousemove","mouseleave"],n}return g(t,e),d(t,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),t}(ao),sb=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){this.editor.editing.view.addObserver(ab),this._enableShiftClickSelection(),this._enableMouseDragSelection()}},{key:"_enableShiftClickSelection",value:function(){var e=this,t=this.editor,n=!1,i=t.plugins.get(eb);this.listenTo(t.editing.view.document,"mousedown",function(r,o){if(e.isEnabled&&i.isEnabled&&o.domEvent.shiftKey){var a=i.getAnchorCell()||nm(t.model.document.selection)[0];if(a){var s=e._getModelTableCellFromDomEvent(o);s&&cb(a,s)&&(n=!0,i.setCellSelection(a,s),o.preventDefault())}}}),this.listenTo(t.editing.view.document,"mouseup",function(){n=!1}),this.listenTo(t.editing.view.document,"selectionChange",function(e){n&&e.stop()},{priority:"highest"})}},{key:"_enableMouseDragSelection",value:function(){var e,t,n=this,i=this.editor,r=!1,o=!1,a=i.plugins.get(eb);this.listenTo(i.editing.view.document,"mousedown",function(t,i){n.isEnabled&&a.isEnabled&&(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey||(e=n._getModelTableCellFromDomEvent(i)))}),this.listenTo(i.editing.view.document,"mousemove",function(i,s){if(s.domEvent.buttons&&e){var c=n._getModelTableCellFromDomEvent(s);c&&cb(e,c)&&(t=c,r||t==e||(r=!0)),r&&(o=!0,a.setCellSelection(e,t),s.preventDefault())}}),this.listenTo(i.editing.view.document,"mouseup",function(){r=!1,o=!1,e=null,t=null}),this.listenTo(i.editing.view.document,"selectionChange",function(e){o&&e.stop()},{priority:"highest"})}},{key:"_getModelTableCellFromDomEvent",value:function(e){var t=this.editor.editing.view.createPositionAt(e.target,0);return this.editor.editing.mapper.toModelPosition(t).parent.findAncestor("tableCell",{includeSelf:!0})}}],[{key:"pluginName",get:function(){return"TableMouse"}},{key:"requires",get:function(){return[eb]}}]),t}(et);function cb(e,t){return e.parent.parent==t.parent.parent}function lb(e){var t=e.getSelectedElement();return t&&db(t)?t:null}function ub(e){var t=function(e,t){for(var n=t.parent;n;){if("table"===n.name)return n;n=n.parent}}(0,e.getFirstPosition());return t&&db(t.parent)?t.parent:null}function db(e){return!!e.getCustomProperty("table")&&nd(e)}c(110);var hb={autoRefresh:!0},fb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hb;if(l(this,e),!t)throw new A.a("token-missing-token-url",this);n.initValue&&this._validateTokenValue(n.initValue),this.set("value",n.initValue),this._refresh="function"==typeof t?t:function(){return e=t,new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.addEventListener("load",function(){var e=i.status,r=i.response;return e<200||e>299?n(new A.a("token-cannot-download-new-token",null)):t(r)}),i.addEventListener("error",function(){return n(new Error("Network Error"))}),i.addEventListener("abort",function(){return n(new Error("Abort"))}),i.send()});var e},this._options=Object.assign({},hb,n)}return d(e,[{key:"init",value:function(){var e=this;return new Promise(function(t,n){e.value?(e._options.autoRefresh&&e._registerRefreshTokenTimeout(),t(e)):e.refreshToken().then(t).catch(n)})}},{key:"refreshToken",value:function(){var e=this;return this._refresh().then(function(t){e._validateTokenValue(t),e.set("value",t),e._options.autoRefresh&&e._registerRefreshTokenTimeout()}).then(function(){return e})}},{key:"destroy",value:function(){clearTimeout(this._tokenRefreshTimeout)}},{key:"_validateTokenValue",value:function(e){var t="string"==typeof e,n=!/^".*"$/.test(e),i=t&&3===e.split(".").length;if(!n||!i)throw new A.a("token-not-in-jwt-format",this)}},{key:"_registerRefreshTokenTimeout",value:function(){var e=this,t=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(function(){e.refreshToken()},t)}},{key:"_getTokenRefreshTimeoutTime",value:function(){try{var e=r(this.value.split("."),2)[1],t=JSON.parse(atob(e)).exp;return t?Math.floor((1e3*t-Date.now())/2):36e5}catch(D){return 36e5}}}],[{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hb;return new e(t,n).init()}}]),e}();Xe(fb,Ye);var pb=fb,vb=/^data:(\S*?);base64,/,gb=function(){function e(t,n,i){if(l(this,e),!t)throw new A.a("fileuploader-missing-file",null);if(!n)throw new A.a("fileuploader-missing-token",null);if(!i)throw new A.a("fileuploader-missing-api-address",null);this.file=function(e){if("string"!=typeof e)return!1;var t=e.match(vb);return!(!t||!t.length)}(t)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;try{for(var n=e.match(vb)[1],i=atob(e.replace(vb,"")),r=[],o=0;o<i.length;o+=t){for(var a=i.slice(o,o+t),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);r.push(new Uint8Array(s))}return new Blob(r,{type:n})}catch(n){throw new A.a("fileuploader-decoding-image-data-error",null)}}(t):t,this._token=n,this._apiAddress=i}return d(e,[{key:"onProgress",value:function(e){return this.on("progress",function(t,n){return e(n)}),this}},{key:"onError",value:function(e){return this.once("error",function(t,n){return e(n)}),this}},{key:"abort",value:function(){this.xhr.abort()}},{key:"send",value:function(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}},{key:"_prepareRequest",value:function(){var e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}},{key:"_attachXHRListeners",value:function(){var e=this,t=this,n=this.xhr;function i(e){return function(){return t.fire("error",e)}}n.addEventListener("error",i("Network Error")),n.addEventListener("abort",i("Abort")),n.upload&&n.upload.addEventListener("progress",function(t){t.lengthComputable&&e.fire("progress",{total:t.total,uploaded:t.loaded})}),n.addEventListener("load",function(){var t=n.status,i=n.response;if(t<200||t>299)return e.fire("error",i.message||i.error)})}},{key:"_sendRequest",value:function(){var e=this,t=new FormData,n=this.xhr;return t.append("file",this.file),new Promise(function(i,r){n.addEventListener("load",function(){var t=n.status,o=n.response;return t<200||t>299?r(o.message?new A.a("fileuploader-uploading-data-failed",e,{message:o.message}):o.error):i(o)}),n.addEventListener("error",function(){return r(new Error("Network Error"))}),n.addEventListener("abort",function(){return r(new Error("Abort"))}),n.send(t)})}}]),e}();Xe(gb,O);var mb=function(){function e(t,n){if(l(this,e),!t)throw new A.a("uploadgateway-missing-token",null);if(!n)throw new A.a("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=n}return d(e,[{key:"upload",value:function(e){return new gb(e,this._token,this._apiAddress)}}]),e}(),bb=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"createToken",value:function(e,t){return new pb(e,t)}},{key:"createUploadGateway",value:function(e,t){return new mb(e,t)}}],[{key:"pluginName",get:function(){return"CloudServicesCore"}}]),t}(Cn),yb=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t)}(Vu);yb.builtinPlugins=[function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Md,Yu,qd,jd,Gd,Th]}},{key:"pluginName",get:function(){return"Essentials"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Ph,Mh]}},{key:"pluginName",get:function(){return"Alignment"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Uh,Hh]}},{key:"pluginName",get:function(){return"FontSize"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Gh,$h]}},{key:"pluginName",get:function(){return"FontFamily"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Xh,tf]}},{key:"pluginName",get:function(){return"FontColor"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[rf,of]}},{key:"pluginName",get:function(){return"FontBackgroundColor"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(sf).createUploadAdapter=function(n){return new df(n,t,e.editor.t)})}}],[{key:"requires",get:function(){return[sf]}},{key:"pluginName",get:function(){return"CKFinderUploadAdapter"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"afterInit",value:function(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}},{key:"_addListAutoformats",value:function(){var e=this,t=this.editor.commands;t.get("bulletedList")&&hf(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&hf(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&hf(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&hf(this.editor,this,/^\[\s?x\s?\]\s$/,function(){e.editor.execute("todoList"),e.editor.execute("checkTodoList")})}},{key:"_addBasicStylesAutoformats",value:function(){var e=this.editor.commands;if(e.get("bold")){var t=vf(this.editor,"bold");ff(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),ff(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){var n=vf(this.editor,"italic");ff(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,n),ff(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,n)}if(e.get("code")){var i=vf(this.editor,"code");ff(this.editor,this,/(`)([^`]+)(`)$/g,i)}if(e.get("strikethrough")){var r=vf(this.editor,"strikethrough");ff(this.editor,this,/(~~)([^~]+)(~~)$/g,r)}}},{key:"_addHeadingAutoformats",value:function(){var e=this,t=this.editor.commands.get("heading");t&&t.modelElements.filter(function(e){return e.match(/^heading[1-6]$/)}).forEach(function(n){var i=new RegExp("^(#{".concat(n[7],"})\\s$"));hf(e.editor,e,i,function(){if(!t.isEnabled||t.value===n)return!1;e.editor.execute("heading",{value:n})})})}},{key:"_addBlockQuoteAutoformats",value:function(){this.editor.commands.get("blockQuote")&&hf(this.editor,this,/^>\s$/,"blockQuote")}},{key:"_addCodeBlockAutoformats",value:function(){this.editor.commands.get("codeBlock")&&hf(this.editor,this,/^```$/,"codeBlock")}},{key:"_addHorizontalLineAutoformats",value:function(){this.editor.commands.get("horizontalLine")&&hf(this.editor,this,/^---$/,"horizontalLine")}}],[{key:"pluginName",get:function(){return"Autoformat"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[mf,bf]}},{key:"pluginName",get:function(){return"Bold"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[yf,kf]}},{key:"pluginName",get:function(){return"Italic"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[wf,_f]}},{key:"pluginName",get:function(){return"Strikethrough"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[xf,Tf]}},{key:"pluginName",get:function(){return"Underline"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Ef,Pf]}},{key:"pluginName",get:function(){return"BlockQuote"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"CKFinder"}},{key:"requires",get:function(){return["Image","Link","CKFinderUploadAdapter",Lf,If]}}]),t}(et),function(e){function n(){return l(this,n),f(this,n,arguments)}return g(n,e),d(n,[{key:"init",value:function(){var e=this.context.config.get("cloudServices")||{};for(var t in e)this[t]=e[t];if(this._tokens=new Map,this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null}},{key:"registerTokenUrl",value:function(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));var t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}},{key:"getTokenFor",value:function(e){var t=this._tokens.get(e);if(!t)throw new A.a("cloudservices-token-not-registered",this);return t}},{key:"destroy",value:function(){t(w(n.prototype),"destroy",this).call(this);var e,i=o(this._tokens.values());try{for(i.s();!(e=i.n()).done;){e.value.destroy()}}catch(r){i.e(r)}finally{i.f()}}}],[{key:"pluginName",get:function(){return"CloudServices"}},{key:"requires",get:function(){return[bb]}}]),n}(Cn),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Rf,"Image","ImageUpload"]}},{key:"pluginName",get:function(){return"EasyImage"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Bf,Uf]}},{key:"pluginName",get:function(){return"Heading"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"isImageWidget",value:function(e){return Kf(e)}}],[{key:"requires",get:function(){return[ap,xd,fp]}},{key:"pluginName",get:function(){return"Image"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[gp]}},{key:"pluginName",get:function(){return"ImageCaption"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Cp,Op]}},{key:"pluginName",get:function(){return"ImageStyle"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"afterInit",value:function(){var e=this.editor,t=e.t;e.plugins.get(Hf).register("image",{ariaLabel:t("Image toolbar"),items:e.config.get("image.toolbar")||[],getRelatedElement:Xf})}}],[{key:"requires",get:function(){return[Hf]}},{key:"pluginName",get:function(){return"ImageToolbar"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"ImageUpload"}},{key:"requires",get:function(){return[Fp,Mp,Np]}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"pluginName",get:function(){return"Indent"}},{key:"requires",get:function(){return[Bp,Wp]}}]),t}(et),function(t){function n(e){var t;return l(this,n),t=f(this,n,[e]),e.config.define("indentBlock",{offset:40,unit:"px"}),t}return g(n,t),d(n,[{key:"init",value:function(){var e=this.editor,t=e.config.get("indentBlock"),n=!t.classes||!t.classes.length,i=Object.assign({direction:"forward"},t),r=Object.assign({direction:"backward"},t);n?(e.data.addStyleProcessorRules(Ru),this._setupConversionUsingOffset(e.conversion),e.commands.add("indentBlock",new Yp(e,new Jp(i))),e.commands.add("outdentBlock",new Yp(e,new Jp(r)))):(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Yp(e,new Qp(i))),e.commands.add("outdentBlock",new Yp(e,new Qp(r))))}},{key:"afterInit",value:function(){var e=this.editor,t=e.model.schema,n=e.commands.get("indent"),i=e.commands.get("outdent"),r=e.config.get("heading.options");(r&&r.map(function(e){return e.model})||Gp).forEach(function(e){t.isRegistered(e)&&t.extend(e,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(e.commands.get("indentBlock")),i.registerChildCommand(e.commands.get("outdentBlock"))}},{key:"_setupConversionUsingOffset",value:function(){var t=this.editor.conversion,n="rtl"===this.editor.locale.contentLanguageDirection?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:e({},n,/[\s\S]+/)},model:{key:"blockIndent",value:function(e){return e.getStyle(n)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:function(t){return{key:"style",value:e({},n,t)}}})}},{key:"_setupConversionUsingClasses",value:function(e){var t,n={model:{key:"blockIndent",values:[]},view:{}},i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.model.values.push(r),n.view[r]={key:"class",value:[r]}}}catch(a){i.e(a)}finally{i.f()}this.editor.conversion.attributeToAttribute(n)}}],[{key:"pluginName",get:function(){return"IndentBlock"}}]),n}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[_v,Cv,Pv]}},{key:"pluginName",get:function(){return"Link"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[ng,ag]}},{key:"pluginName",get:function(){return"List"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[cg,pg]}},{key:"pluginName",get:function(){return"ListStyle"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[xg,Cg,Ag,xd]}},{key:"pluginName",get:function(){return"MediaEmbed"}}]),t}(et),zf,function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"init",value:function(){var e=this.editor,t=e.editing.view.document,n=[];n.push(new jg(t)),n.push(new Mg(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",function(e,t){if(!t.isTransformedWithPasteFromOffice){var i=t.dataTransfer.getData("text/html"),r=n.find(function(e){return e.isActive(i)});r&&(r.execute(t),t.isTransformedWithPasteFromOffice=!0)}},{priority:"high"})}}],[{key:"pluginName",get:function(){return"PasteFromOffice"}},{key:"requires",get:function(){return[qu]}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"requires",get:function(){return[Qm,Km,eb,sb,ob,tb,xd]}},{key:"pluginName",get:function(){return"Table"}}]),t}(et),function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"afterInit",value:function(){var e=this.editor,t=e.t,n=e.plugins.get(Hf),i=e.config.get("table.contentToolbar"),r=e.config.get("table.tableToolbar");i&&n.register("tableContent",{ariaLabel:t("Table toolbar"),items:i,getRelatedElement:ub}),r&&n.register("table",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:lb})}}],[{key:"requires",get:function(){return[Hf]}},{key:"pluginName",get:function(){return"TableToolbar"}}]),t}(et),function(e){function t(e){var n;return l(this,t),n=f(this,t,[e]),e.config.define("typing",{transformations:{include:ch}}),n}return g(t,e),d(t,[{key:"init",value:function(){var e=this,t=this.editor.model.document.selection;t.on("change:range",function(){e.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}},{key:"_enableTransformationWatchers",value:function(){var e,t,n,i=this.editor,r=i.model,a=i.plugins.get("Input"),s=(e=i.config.get("typing.transformations"),t=e.remove||[],n=function(e){return!t.includes(e)},function(e){var t,n=new Set,i=o(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(sh[r]){var a,s=o(sh[r]);try{for(s.s();!(a=s.n()).done;){var c=a.value;n.add(c)}}catch(l){s.e(l)}finally{s.f()}}else n.add(r)}}catch(l){i.e(l)}finally{i.f()}return Array.from(n)}(e.include.concat(e.extra||[]).filter(n)).filter(n).map(function(e){return ah[e]||e}).map(function(e){return{from:lh(e.from),to:uh(e.to)}})),c=new Kd(i.model,function(e){var t,n=o(s);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.from.test(e))return{normalizedTransformation:i}}}catch(r){n.e(r)}finally{n.f()}});c.on("matched:data",function(e,t){if(a.isInput(t.batch)){var n=t.normalizedTransformation,i=n.from,o=n.to,s=i.exec(t.text),c=o(s.slice(1)),l=t.range,u=s.index;r.enqueueChange(function(e){for(var t=1;t<s.length;t++){var n=s[t],i=c[t-1];if(null!=i){var o=l.start.getShiftedBy(u),a=r.createRange(o,o.getShiftedBy(n.length)),d=dh(o);r.insertContent(e.createText(i,d),a),u+=i.length}else u+=n.length}})}}),c.bind("isEnabled").to(this)}}],[{key:"pluginName",get:function(){return"TextTransformation"}}]),t}(et)],yb.defaultConfig={toolbar:{items:["heading","|","fontfamily","fontsize","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","|","alignment","|","numberedList","bulletedList","|","outdent","indent","|","link","blockquote","uploadImage","insertTable","mediaEmbed","|","undo","redo"]},image:{styles:["full","alignLeft","alignRight"],toolbar:["imageStyle:alignLeft","imageStyle:full","imageStyle:alignRight","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}]).default},26202:function(e,t){"use strict";var n={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),i=function(){};window.addEventListener("testPassiveEventSupport",i,t),window.removeEventListener("testPassiveEventSupport",i,t),n.hasSupport=e}}};n.update(),t.Z=n},13544:function(e,t,n){var i;!function(r,o,a){if(r){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)c[111+h]="f"+h;for(h=0;h<=9;++h)c[h+96]=h.toString();k.prototype.bind=function(e,t,n){return this._bindMultiple.call(this,e=e instanceof Array?e:[e],t,n),this},k.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},k.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},k.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},k.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1||y(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},k.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},k.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);s=null},k.init=function(){var e=k(o);for(var t in e)"_"!==t.charAt(0)&&(k[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},k.init(),r.Mousetrap=k,e.exports&&(e.exports=k),void 0!==(i=(function(){return k}).call(t,n,t,e))&&(e.exports=i)}function f(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function v(e,t){return e.sort().join(",")===t.sort().join(",")}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(e,t,n){return n||(n=function(){if(!s)for(var e in s={},c)e>95&&e<112||c.hasOwnProperty(e)&&(s[c[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function b(e,t){var n,i,r,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),r=0;r<n.length;++r)d[i=n[r]]&&(i=d[i]),t&&"keypress"!=t&&u[i]&&(i=u[i],o.push("shift")),g(i)&&o.push(i);return{key:i,modifiers:o,action:t=m(i,o,t)}}function y(e,t){return null!==e&&e!==o&&(e===t||y(e.parentNode,t))}function k(e){var t=this;if(e=e||o,!(t instanceof k))return new k(e);t.target=e,t._callbacks={},t._directMap={};var n,i={},r=!1,a=!1,s=!1;function c(e){e=e||{};var t,n=!1;for(t in i)e[t]?n=!0:i[t]=0;n||(s=!1)}function l(e,n,r,o,a,s){var c,l,u=[],d=r.type;if(!t._callbacks[e])return[];for("keyup"==d&&g(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)l=t._callbacks[e][c],!o&&l.seq&&i[l.seq]!=l.level||d!=l.action||("keypress"!=d||r.metaKey||r.ctrlKey)&&!v(n,l.modifiers)||((!o&&l.combo==a||o&&l.seq==o&&l.level==s)&&t._callbacks[e].splice(c,1),u.push(l));return u}function u(e,n,i,r){t.stopCallback(n,n.target||n.srcElement,i,r)||!1===e(n,i)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=p(e);if(n){if("keyup"==e.type&&r===n)return void(r=!1);t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e)}}function h(e,o,a,d,f){t._directMap[e+":"+a]=o;var v,g=(e=e.replace(/\s+/g," ")).split(" ");g.length>1?function(e,t,o,a){function l(t){return function(){s=t,++i[e],clearTimeout(n),n=setTimeout(c,1e3)}}function d(t){u(o,t,e),"keyup"!==a&&(r=p(t)),setTimeout(c,10)}i[e]=0;for(var f=0;f<t.length;++f){var v=f+1===t.length?d:l(a||b(t[f+1]).action);h(t[f],v,a,e,f)}}(e,g,o,a):(v=b(e,a),t._callbacks[v.key]=t._callbacks[v.key]||[],l(v.key,v.modifiers,{type:v.action},d,e,f),t._callbacks[v.key][d?"unshift":"push"]({callback:o,modifiers:v.modifiers,action:v.action,seq:d,level:f,combo:e}))}t._handleKey=function(e,t,n){var i,r=l(e,t,n),o={},d=0,h=!1;for(i=0;i<r.length;++i)r[i].seq&&(d=Math.max(d,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=d)continue;h=!0,o[r[i].seq]=1,u(r[i].callback,n,r[i].combo,r[i].seq)}else h||u(r[i].callback,n,r[i].combo);var f="keypress"==n.type&&a;n.type==s&&!g(e)&&!f&&c(o),a=h&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)h(e[i],t,n)},f(e,"keypress",d),f(e,"keydown",d),f(e,"keyup",d)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},65593:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(72293),a=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(r.Subject);t.AsyncSubject=a},73907:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(6594),a=function(e){function t(t){e.call(this),this._value=t}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r.Subject);t.BehaviorSubject=a},36888:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n,i){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=i,this.index=0}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(42109).Subscriber);t.InnerSubscriber=r},94429:function(e,t,n){"use strict";var i=n(18705),r=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return i.Observable.of(this.value);case"E":return i.Observable.throw(this.error);case"C":return i.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=r},18705:function(e,t,n){"use strict";var i=n(80019),r=n(18154),o=n(45783),a=n(10142),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,o=r.toSubscriber(e,t,n);if(i?i.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,i){var r;r=n.subscribe(function(t){if(r)try{e(t)}catch(n){i(n),r.unsubscribe()}else e(t)},i,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?e=i.root.Rx.config.Promise:i.root.Promise&&(e=i.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var i;t.subscribe(function(e){return i=e},function(e){return n(e)},function(){return e(i)})})},e.create=function(t){return new e(t)},e}();t.Observable=s},78731:function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},84308:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(42109).Subscriber);t.OuterSubscriber=r},81959:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(97088),a=n(72293),s=n(39459),c=n(6594),l=n(9060),u=function(e){function t(t,n,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=i,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return i(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new d(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),i=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new l.SubjectSubscription(this,e)),i&&e.add(e=new s.ObserveOnSubscriber(e,i));for(var r=n.length,o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i},t}(r.Subject);t.ReplaySubject=u;var d=function(e,t){this.time=e,this.value=t}},25430:function(e,t,n){"use strict";var i=n(2369);t.xQ=i.Subject,n(18705),n(24769),n(95914),n(88007),n(3194),n(61898),n(16301),n(23276),n(66593),n(13745),n(57362),n(24518),n(68789),n(30520),n(67370),n(86866),n(11505),n(5031),n(36780),n(17038),n(15718),n(27915),n(90763),n(6846),n(65662),n(6799),n(81854),n(612),n(10838),n(6725),n(8827),n(43511),n(38922),n(25178),n(56937),n(22947),n(82894),n(11206),n(94183),n(16653),n(17930),n(81118),n(50317),n(90674),n(66460),n(79232),n(3945),n(44674),n(73505),n(38749),n(16479),n(22744),n(44475),n(97384),n(8237),n(24937),n(99013),n(84042),n(44436),n(7099),n(6217),n(57476),n(72646),n(91573),n(27387),n(27366),n(88859),n(65425),n(16733),n(23381),n(80404),n(63770),n(53626),n(98851),n(84878),n(26544),n(53582),n(61749),n(34838),n(49681),n(46227),n(56455),n(40881),n(94315),n(92910),n(52442),n(84664),n(61250),n(28310),n(43027),n(18252),n(49571),n(31782),n(9800),n(41854),n(74839),n(1305),n(99144),n(89952),n(85863),n(2865),n(92667),n(22185),n(72919),n(88630),n(75458),n(40780),n(35099),n(57502),n(81676),n(20579),n(71323),n(84950),n(57113),n(95073),n(75654),n(59889),n(96611),n(81845),n(7828),n(4881),n(74568),n(32352),n(50169),n(93543),n(61690),n(15914),n(68583),n(44808),n(49088),n(72293),n(42109),n(65593),n(81959),n(73907),n(51493),n(94429),n(44640),n(11758),n(6594),n(13815),n(84536),n(73390),n(62688),n(24482),n(18353),n(55298),n(10142),n(85522),n(90680),n(97088),n(12948),n(28592),n(72121),n(45783),n(39053)},11965:function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},2369:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(42109),a=n(72293),s=n(6594),c=n(9060),l=n(28592),u=function(e){function t(t){e.call(this,t),this.destination=t}return i(t,e),t}(o.Subscriber);t.SubjectSubscriber=u;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return i(t,e),t.prototype[l.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new r.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(r.Observable);t.Subject=d;var h=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},9060:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(72293).Subscription);t.SubjectSubscription=r},42109:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(7633),o=n(72293),a=n(78731),s=n(28592),c=function(e){function t(t,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!t){this.destination=a.empty;break}if("object"==typeof t){if(u(t)){var r=t[s.rxSubscriber]();this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,r.add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,n,i)}}return i(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.Subscription);t.Subscriber=c;var l=function(e){function t(t,n,i,o){e.call(this),this._parentSubscriber=t;var s,c=this;r.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==a.empty&&(c=Object.create(n),r.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=s,this._error=i,this._complete=o}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){throw this.unsubscribe(),n}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(i){return e.syncErrorValue=i,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c);function u(e){return e instanceof c||"syncErrorThrowable"in e&&e[s.rxSubscriber]}},72293:function(e,t,n){"use strict";var i=n(48242),r=n(1856),o=n(7633),a=n(33463),s=n(85814),c=n(84536),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,d=n._parents,h=n._unsubscribe,f=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=d?d.length:0;l;)l.remove(this),l=++p<v&&d[p]||null;if(o.isFunction(h)&&a.tryCatch(h).call(this)===s.errorObject&&(t=!0,e=e||(s.errorObject.e instanceof c.UnsubscriptionError?u(s.errorObject.e.errors):[s.errorObject.e])),i.isArray(f))for(p=-1,v=f.length;++p<v;){var g=f[p];if(r.isObject(g)&&a.tryCatch(g.unsubscribe).call(g)===s.errorObject){t=!0,e=e||[];var m=s.errorObject.e;m instanceof c.UnsubscriptionError?e=e.concat(u(m.errors)):e.push(m)}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e;var t}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}t.Subscription=l},24769:function(e,t,n){"use strict";var i=n(18705),r=n(59246);i.Observable.bindCallback=r.bindCallback},95914:function(e,t,n){"use strict";var i=n(18705),r=n(65571);i.Observable.bindNodeCallback=r.bindNodeCallback},88007:function(e,t,n){"use strict";var i=n(18705),r=n(24669);i.Observable.combineLatest=r.combineLatest},3194:function(e,t,n){"use strict";var i=n(18705),r=n(92197);i.Observable.concat=r.concat},61898:function(e,t,n){"use strict";var i=n(18705),r=n(18929);i.Observable.defer=r.defer},81854:function(e,t,n){"use strict";var i=n(18705),r=n(52880);i.Observable.ajax=r.ajax},612:function(e,t,n){"use strict";var i=n(18705),r=n(18362);i.Observable.webSocket=r.webSocket},16301:function(e,t,n){"use strict";var i=n(18705),r=n(88090);i.Observable.empty=r.empty},23276:function(e,t,n){"use strict";var i=n(18705),r=n(8045);i.Observable.forkJoin=r.forkJoin},66593:function(e,t,n){"use strict";var i=n(18705),r=n(46908);i.Observable.from=r.from},13745:function(e,t,n){"use strict";var i=n(18705),r=n(80250);i.Observable.fromEvent=r.fromEvent},57362:function(e,t,n){"use strict";var i=n(18705),r=n(6836);i.Observable.fromEventPattern=r.fromEventPattern},24518:function(e,t,n){"use strict";var i=n(18705),r=n(37256);i.Observable.fromPromise=r.fromPromise},68789:function(e,t,n){"use strict";var i=n(18705),r=n(59554);i.Observable.generate=r.generate},30520:function(e,t,n){"use strict";var i=n(18705),r=n(6915);i.Observable.if=r._if},67370:function(e,t,n){"use strict";var i=n(18705),r=n(56008);i.Observable.interval=r.interval},86866:function(e,t,n){"use strict";var i=n(18705),r=n(38781);i.Observable.merge=r.merge},5031:function(e,t,n){"use strict";var i=n(18705),r=n(94503);i.Observable.never=r.never},36780:function(e,t,n){"use strict";var i=n(18705),r=n(69657);i.Observable.of=r.of},17038:function(e,t,n){"use strict";var i=n(18705),r=n(61395);i.Observable.onErrorResumeNext=r.onErrorResumeNext},15718:function(e,t,n){"use strict";var i=n(18705),r=n(95425);i.Observable.pairs=r.pairs},11505:function(e,t,n){"use strict";var i=n(18705),r=n(24330);i.Observable.race=r.race},27915:function(e,t,n){"use strict";var i=n(18705),r=n(99047);i.Observable.range=r.range},6846:function(e,t,n){"use strict";var i=n(18705),r=n(818);i.Observable.throw=r._throw},65662:function(e,t,n){"use strict";var i=n(18705),r=n(15112);i.Observable.timer=r.timer},90763:function(e,t,n){"use strict";var i=n(18705),r=n(47513);i.Observable.using=r.using},6799:function(e,t,n){"use strict";var i=n(18705),r=n(78092);i.Observable.zip=r.zip},91573:function(e,t,n){"use strict";var i=n(18705),r=n(74722);i.Observable.prototype.audit=r.audit},27387:function(e,t,n){"use strict";var i=n(18705),r=n(50517);i.Observable.prototype.auditTime=r.auditTime},10838:function(e,t,n){"use strict";var i=n(18705),r=n(95777);i.Observable.prototype.buffer=r.buffer},6725:function(e,t,n){"use strict";var i=n(18705),r=n(62669);i.Observable.prototype.bufferCount=r.bufferCount},8827:function(e,t,n){"use strict";var i=n(18705),r=n(31463);i.Observable.prototype.bufferTime=r.bufferTime},43511:function(e,t,n){"use strict";var i=n(18705),r=n(92523);i.Observable.prototype.bufferToggle=r.bufferToggle},38922:function(e,t,n){"use strict";var i=n(18705),r=n(49436);i.Observable.prototype.bufferWhen=r.bufferWhen},25178:function(e,t,n){"use strict";var i=n(18705),r=n(64731);i.Observable.prototype.catch=r._catch,i.Observable.prototype._catch=r._catch},56937:function(e,t,n){"use strict";var i=n(18705),r=n(92273);i.Observable.prototype.combineAll=r.combineAll},22947:function(e,t,n){"use strict";var i=n(18705),r=n(8709);i.Observable.prototype.combineLatest=r.combineLatest},82894:function(e,t,n){"use strict";var i=n(18705),r=n(70267);i.Observable.prototype.concat=r.concat},11206:function(e,t,n){"use strict";var i=n(18705),r=n(16948);i.Observable.prototype.concatAll=r.concatAll},94183:function(e,t,n){"use strict";var i=n(18705),r=n(14314);i.Observable.prototype.concatMap=r.concatMap},16653:function(e,t,n){"use strict";var i=n(18705),r=n(48659);i.Observable.prototype.concatMapTo=r.concatMapTo},17930:function(e,t,n){"use strict";var i=n(18705),r=n(43773);i.Observable.prototype.count=r.count},50317:function(e,t,n){"use strict";var i=n(18705),r=n(14973);i.Observable.prototype.debounce=r.debounce},90674:function(e,t,n){"use strict";var i=n(18705),r=n(23198);i.Observable.prototype.debounceTime=r.debounceTime},66460:function(e,t,n){"use strict";var i=n(18705),r=n(1395);i.Observable.prototype.defaultIfEmpty=r.defaultIfEmpty},79232:function(e,t,n){"use strict";var i=n(18705),r=n(55490);i.Observable.prototype.delay=r.delay},3945:function(e,t,n){"use strict";var i=n(18705),r=n(86914);i.Observable.prototype.delayWhen=r.delayWhen},81118:function(e,t,n){"use strict";var i=n(18705),r=n(66335);i.Observable.prototype.dematerialize=r.dematerialize},44674:function(e,t,n){"use strict";var i=n(18705),r=n(14512);i.Observable.prototype.distinct=r.distinct},73505:function(e,t,n){"use strict";var i=n(18705),r=n(88417);i.Observable.prototype.distinctUntilChanged=r.distinctUntilChanged},38749:function(e,t,n){"use strict";var i=n(18705),r=n(40578);i.Observable.prototype.distinctUntilKeyChanged=r.distinctUntilKeyChanged},16479:function(e,t,n){"use strict";var i=n(18705),r=n(42882);i.Observable.prototype.do=r._do,i.Observable.prototype._do=r._do},8237:function(e,t,n){"use strict";var i=n(18705),r=n(43555);i.Observable.prototype.elementAt=r.elementAt},65425:function(e,t,n){"use strict";var i=n(18705),r=n(22638);i.Observable.prototype.every=r.every},22744:function(e,t,n){"use strict";var i=n(18705),r=n(8886);i.Observable.prototype.exhaust=r.exhaust},44475:function(e,t,n){"use strict";var i=n(18705),r=n(96042);i.Observable.prototype.exhaustMap=r.exhaustMap},97384:function(e,t,n){"use strict";var i=n(18705),r=n(80956);i.Observable.prototype.expand=r.expand},24937:function(e,t,n){"use strict";var i=n(18705),r=n(40950);i.Observable.prototype.filter=r.filter},99013:function(e,t,n){"use strict";var i=n(18705),r=n(50381);i.Observable.prototype.finally=r._finally,i.Observable.prototype._finally=r._finally},84042:function(e,t,n){"use strict";var i=n(18705),r=n(57881);i.Observable.prototype.find=r.find},44436:function(e,t,n){"use strict";var i=n(18705),r=n(81112);i.Observable.prototype.findIndex=r.findIndex},7099:function(e,t,n){"use strict";var i=n(18705),r=n(9479);i.Observable.prototype.first=r.first},6217:function(e,t,n){"use strict";var i=n(18705),r=n(49859);i.Observable.prototype.groupBy=r.groupBy},57476:function(e,t,n){"use strict";var i=n(18705),r=n(43300);i.Observable.prototype.ignoreElements=r.ignoreElements},72646:function(e,t,n){"use strict";var i=n(18705),r=n(20770);i.Observable.prototype.isEmpty=r.isEmpty},27366:function(e,t,n){"use strict";var i=n(18705),r=n(57966);i.Observable.prototype.last=r.last},88859:function(e,t,n){"use strict";var i=n(18705),r=n(7372);i.Observable.prototype.let=r.letProto,i.Observable.prototype.letBind=r.letProto},16733:function(e,t,n){"use strict";var i=n(18705),r=n(30015);i.Observable.prototype.map=r.map},23381:function(e,t,n){"use strict";var i=n(18705),r=n(22454);i.Observable.prototype.mapTo=r.mapTo},80404:function(e,t,n){"use strict";var i=n(18705),r=n(94829);i.Observable.prototype.materialize=r.materialize},63770:function(e,t,n){"use strict";var i=n(18705),r=n(99249);i.Observable.prototype.max=r.max},53626:function(e,t,n){"use strict";var i=n(18705),r=n(77426);i.Observable.prototype.merge=r.merge},98851:function(e,t,n){"use strict";var i=n(18705),r=n(442);i.Observable.prototype.mergeAll=r.mergeAll},84878:function(e,t,n){"use strict";var i=n(18705),r=n(30502);i.Observable.prototype.mergeMap=r.mergeMap,i.Observable.prototype.flatMap=r.mergeMap},26544:function(e,t,n){"use strict";var i=n(18705),r=n(12139);i.Observable.prototype.flatMapTo=r.mergeMapTo,i.Observable.prototype.mergeMapTo=r.mergeMapTo},53582:function(e,t,n){"use strict";var i=n(18705),r=n(7264);i.Observable.prototype.mergeScan=r.mergeScan},61749:function(e,t,n){"use strict";var i=n(18705),r=n(7141);i.Observable.prototype.min=r.min},34838:function(e,t,n){"use strict";var i=n(18705),r=n(10378);i.Observable.prototype.multicast=r.multicast},49681:function(e,t,n){"use strict";var i=n(18705),r=n(29305);i.Observable.prototype.observeOn=r.observeOn},46227:function(e,t,n){"use strict";var i=n(18705),r=n(73547);i.Observable.prototype.onErrorResumeNext=r.onErrorResumeNext},56455:function(e,t,n){"use strict";var i=n(18705),r=n(69933);i.Observable.prototype.pairwise=r.pairwise},40881:function(e,t,n){"use strict";var i=n(18705),r=n(49819);i.Observable.prototype.partition=r.partition},94315:function(e,t,n){"use strict";var i=n(18705),r=n(94467);i.Observable.prototype.pluck=r.pluck},92910:function(e,t,n){"use strict";var i=n(18705),r=n(58576);i.Observable.prototype.publish=r.publish},52442:function(e,t,n){"use strict";var i=n(18705),r=n(86054);i.Observable.prototype.publishBehavior=r.publishBehavior},61250:function(e,t,n){"use strict";var i=n(18705),r=n(5138);i.Observable.prototype.publishLast=r.publishLast},84664:function(e,t,n){"use strict";var i=n(18705),r=n(90008);i.Observable.prototype.publishReplay=r.publishReplay},28310:function(e,t,n){"use strict";var i=n(18705),r=n(21814);i.Observable.prototype.race=r.race},43027:function(e,t,n){"use strict";var i=n(18705),r=n(50511);i.Observable.prototype.reduce=r.reduce},18252:function(e,t,n){"use strict";var i=n(18705),r=n(12931);i.Observable.prototype.repeat=r.repeat},49571:function(e,t,n){"use strict";var i=n(18705),r=n(68816);i.Observable.prototype.repeatWhen=r.repeatWhen},31782:function(e,t,n){"use strict";var i=n(18705),r=n(17144);i.Observable.prototype.retry=r.retry},9800:function(e,t,n){"use strict";var i=n(18705),r=n(82766);i.Observable.prototype.retryWhen=r.retryWhen},41854:function(e,t,n){"use strict";var i=n(18705),r=n(62068);i.Observable.prototype.sample=r.sample},74839:function(e,t,n){"use strict";var i=n(18705),r=n(97013);i.Observable.prototype.sampleTime=r.sampleTime},1305:function(e,t,n){"use strict";var i=n(18705),r=n(98996);i.Observable.prototype.scan=r.scan},99144:function(e,t,n){"use strict";var i=n(18705),r=n(77033);i.Observable.prototype.sequenceEqual=r.sequenceEqual},89952:function(e,t,n){"use strict";var i=n(18705),r=n(10377);i.Observable.prototype.share=r.share},85863:function(e,t,n){"use strict";var i=n(18705),r=n(71623);i.Observable.prototype.shareReplay=r.shareReplay},2865:function(e,t,n){"use strict";var i=n(18705),r=n(91956);i.Observable.prototype.single=r.single},92667:function(e,t,n){"use strict";var i=n(18705),r=n(72355);i.Observable.prototype.skip=r.skip},22185:function(e,t,n){"use strict";var i=n(18705),r=n(69329);i.Observable.prototype.skipLast=r.skipLast},72919:function(e,t,n){"use strict";var i=n(18705),r=n(68481);i.Observable.prototype.skipUntil=r.skipUntil},88630:function(e,t,n){"use strict";var i=n(18705),r=n(587);i.Observable.prototype.skipWhile=r.skipWhile},75458:function(e,t,n){"use strict";var i=n(18705),r=n(49292);i.Observable.prototype.startWith=r.startWith},40780:function(e,t,n){"use strict";var i=n(18705),r=n(94379);i.Observable.prototype.subscribeOn=r.subscribeOn},35099:function(e,t,n){"use strict";var i=n(18705),r=n(45904);i.Observable.prototype.switch=r._switch,i.Observable.prototype._switch=r._switch},57502:function(e,t,n){"use strict";var i=n(18705),r=n(3668);i.Observable.prototype.switchMap=r.switchMap},81676:function(e,t,n){"use strict";var i=n(18705),r=n(54865);i.Observable.prototype.switchMapTo=r.switchMapTo},20579:function(e,t,n){"use strict";var i=n(18705),r=n(23089);i.Observable.prototype.take=r.take},71323:function(e,t,n){"use strict";var i=n(18705),r=n(92925);i.Observable.prototype.takeLast=r.takeLast},84950:function(e,t,n){"use strict";var i=n(18705),r=n(11487);i.Observable.prototype.takeUntil=r.takeUntil},57113:function(e,t,n){"use strict";var i=n(18705),r=n(26344);i.Observable.prototype.takeWhile=r.takeWhile},95073:function(e,t,n){"use strict";var i=n(18705),r=n(71139);i.Observable.prototype.throttle=r.throttle},75654:function(e,t,n){"use strict";var i=n(18705),r=n(17777);i.Observable.prototype.throttleTime=r.throttleTime},59889:function(e,t,n){"use strict";var i=n(18705),r=n(73390);i.Observable.prototype.timeInterval=r.timeInterval},96611:function(e,t,n){"use strict";var i=n(18705),r=n(26950);i.Observable.prototype.timeout=r.timeout},81845:function(e,t,n){"use strict";var i=n(18705),r=n(73452);i.Observable.prototype.timeoutWith=r.timeoutWith},7828:function(e,t,n){"use strict";var i=n(18705),r=n(82139);i.Observable.prototype.timestamp=r.timestamp},4881:function(e,t,n){"use strict";var i=n(18705),r=n(5488);i.Observable.prototype.toArray=r.toArray},74568:function(){},32352:function(e,t,n){"use strict";var i=n(18705),r=n(70328);i.Observable.prototype.window=r.window},50169:function(e,t,n){"use strict";var i=n(18705),r=n(35994);i.Observable.prototype.windowCount=r.windowCount},93543:function(e,t,n){"use strict";var i=n(18705),r=n(98263);i.Observable.prototype.windowTime=r.windowTime},61690:function(e,t,n){"use strict";var i=n(18705),r=n(46413);i.Observable.prototype.windowToggle=r.windowToggle},15914:function(e,t,n){"use strict";var i=n(18705),r=n(62512);i.Observable.prototype.windowWhen=r.windowWhen},68583:function(e,t,n){"use strict";var i=n(18705),r=n(67739);i.Observable.prototype.withLatestFrom=r.withLatestFrom},44808:function(e,t,n){"use strict";var i=n(18705),r=n(81680);i.Observable.prototype.zip=r.zipProto},49088:function(e,t,n){"use strict";var i=n(18705),r=n(9796);i.Observable.prototype.zipAll=r.zipAll},89131:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(80478),a=n(70481),s=function(e){function t(t,n){e.call(this),this.arrayLike=t,this.scheduler=n,!n&&1===t.length&&(this._isScalar=!0,this.value=t[0])}return i(t,e),t.create=function(e,n){var i=e.length;return 0===i?new a.EmptyObservable:1===i?new o.ScalarObservable(e[0],n):new t(e,n)},t.dispatch=function(e){var t=e.arrayLike,n=e.index,i=e.subscriber;if(!i.closed){if(n>=e.length)return void i.complete();i.next(t[n]),e.index=n+1,this.schedule(e)}},t.prototype._subscribe=function(e){var n=this.arrayLike,i=this.scheduler,r=n.length;if(i)return i.schedule(t.dispatch,0,{arrayLike:n,index:0,length:r,subscriber:e});for(var o=0;o<r&&!e.closed;o++)e.next(n[o]);e.complete()},t}(r.Observable);t.ArrayLikeObservable=s},96177:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(80478),a=n(70481),s=n(41503),c=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,!n&&1===t.length&&(this._isScalar=!0,this.value=t[0])}return i(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=e[e.length-1];s.isScheduler(i)?e.pop():i=null;var r=e.length;return r>1?new t(e,i):1===r?new o.ScalarObservable(e[0],i):new a.EmptyObservable(i)},t.dispatch=function(e){var t=e.array,n=e.index,i=e.subscriber;n>=e.count?i.complete():(i.next(t[n]),!i.closed&&(e.index=n+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.array,i=n.length,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{array:n,index:0,count:i,subscriber:e});for(var o=0;o<i&&!e.closed;o++)e.next(n[o]);e.complete()},t}(r.Observable);t.ArrayObservable=c},19183:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(33463),a=n(85814),s=n(65593),c=function(e){function t(t,n,i,r,o){e.call(this),this.callbackFunc=t,this.selector=n,this.args=i,this.context=r,this.scheduler=o}return i(t,e),t.create=function(e,n,i){return void 0===n&&(n=void 0),function(){for(var r=[],o=0;o<arguments.length;o++)r[o-0]=arguments[o];return new t(e,n,r,this,i)}},t.prototype._subscribe=function(e){var n=this.callbackFunc,i=this.args,r=this.scheduler,c=this.subject;if(r)return r.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context});if(!c){c=this.subject=new s.AsyncSubject;var l=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=e.source,r=i.selector,s=i.subject;if(r){var c=o.tryCatch(r).apply(this,t);c===a.errorObject?s.error(a.errorObject.e):(s.next(c),s.complete())}else s.next(t.length<=1?t[0]:t),s.complete()};l.source=this,o.tryCatch(n).apply(this.context,i.concat(l))===a.errorObject&&c.error(a.errorObject.e)}return c.subscribe(e)},t.dispatch=function(e){var t=this,n=e.source,i=e.subscriber,r=e.context,c=n.callbackFunc,d=n.args,h=n.scheduler,f=n.subject;if(!f){f=n.subject=new s.AsyncSubject;var p=function e(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];var r=e.source,s=r.selector,c=r.subject;if(s){var d=o.tryCatch(s).apply(this,n);t.add(d===a.errorObject?h.schedule(u,0,{err:a.errorObject.e,subject:c}):h.schedule(l,0,{value:d,subject:c}))}else{var f=n.length<=1?n[0]:n;t.add(h.schedule(l,0,{value:f,subject:c}))}};p.source=n,o.tryCatch(c).apply(r,d.concat(p))===a.errorObject&&f.error(a.errorObject.e)}t.add(f.subscribe(i))},t}(r.Observable);function l(e){var t=e.subject;t.next(e.value),t.complete()}function u(e){e.subject.error(e.err)}t.BoundCallbackObservable=c},78655:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(33463),a=n(85814),s=n(65593),c=function(e){function t(t,n,i,r,o){e.call(this),this.callbackFunc=t,this.selector=n,this.args=i,this.context=r,this.scheduler=o}return i(t,e),t.create=function(e,n,i){return void 0===n&&(n=void 0),function(){for(var r=[],o=0;o<arguments.length;o++)r[o-0]=arguments[o];return new t(e,n,r,this,i)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,n=this.args,i=this.scheduler,r=this.subject;if(i)return i.schedule(l,0,{source:this,subscriber:e,context:this.context});if(!r){r=this.subject=new s.AsyncSubject;var c=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=e.source,r=i.selector,s=i.subject,c=t.shift();if(c)s.error(c);else if(r){var l=o.tryCatch(r).apply(this,t);l===a.errorObject?s.error(a.errorObject.e):(s.next(l),s.complete())}else s.next(t.length<=1?t[0]:t),s.complete()};c.source=this,o.tryCatch(t).apply(this.context,n.concat(c))===a.errorObject&&r.error(a.errorObject.e)}return r.subscribe(e)},t}(r.Observable);function l(e){var t=this,n=e.source,i=e.subscriber,r=e.context,c=n.callbackFunc,l=n.args,h=n.scheduler,f=n.subject;if(!f){f=n.subject=new s.AsyncSubject;var p=function e(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];var r=e.source,s=r.selector,c=r.subject,l=n.shift();if(l)t.add(h.schedule(d,0,{err:l,subject:c}));else if(s){var f=o.tryCatch(s).apply(this,n);t.add(f===a.errorObject?h.schedule(d,0,{err:a.errorObject.e,subject:c}):h.schedule(u,0,{value:f,subject:c}))}else{var p=n.length<=1?n[0]:n;t.add(h.schedule(u,0,{value:p,subject:c}))}};p.source=n,o.tryCatch(c).apply(r,l.concat(p))===a.errorObject&&t.add(h.schedule(d,0,{err:a.errorObject.e,subject:f}))}t.add(f.subscribe(i))}function u(e){var t=e.subject;t.next(e.value),t.complete()}function d(e){e.subject.error(e.err)}t.BoundNodeCallbackObservable=c},51493:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(18705),a=n(42109),s=n(72293),c=n(1694),l=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return c.refCount()(this)},t}(o.Observable);t.ConnectableObservable=l;var u=l.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(r.SubjectSubscriber);!function(e){function t(t,n){e.call(this,t),this.connectable=n}i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,i&&(!n||i===n)&&i.unsubscribe()}}else this.connection=null}}(a.Subscriber)},34078:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(93658),a=n(84308),s=function(e){function t(t){e.call(this),this.observableFactory=t}return i(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new c(e,this.observableFactory)},t}(r.Observable);t.DeferObservable=s;var c=function(e){function t(t,n){e.call(this,t),this.factory=n,this.tryDefer()}return i(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},t}(a.OuterSubscriber)},70481:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t){e.call(this),this.scheduler=t}return i(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(n(18705).Observable);t.EmptyObservable=r},72210:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this),this.error=t,this.scheduler=n}return i(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){e.subscriber.error(e.error)},t.prototype._subscribe=function(e){var n=this.error,i=this.scheduler;if(e.syncErrorThrowable=!0,i)return i.schedule(t.dispatch,0,{error:n,subscriber:e});e.error(n)},t}(n(18705).Observable);t.ErrorObservable=r},56064:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(70481),a=n(48242),s=n(93658),c=n(84308),l=function(e){function t(t,n){e.call(this),this.sources=t,this.resultSelector=n}return i(t,e),t.create=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(null===e||0===arguments.length)return new o.EmptyObservable;var i=null;return"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),0===e.length?new o.EmptyObservable:new t(e,i)},t.prototype._subscribe=function(e){return new u(e,this.sources,this.resultSelector)},t}(r.Observable);t.ForkJoinObservable=l;var u=function(e){function t(t,n,i){e.call(this,t),this.sources=n,this.resultSelector=i,this.completed=0,this.haveValues=0;var r=n.length;this.total=r,this.values=new Array(r);for(var o=0;o<r;o++){var a=s.subscribeToResult(this,n[o],null,o);a&&(a.outerIndex=o,this.add(a))}}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.values[n]=t,r._hasValue||(r._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this,i=n.haveValues,r=n.resultSelector,o=n.values,a=o.length;if(e._hasValue){if(this.completed++,this.completed===a){if(i===a){var s=r?r.apply(this,o):o;t.next(s)}t.complete()}}else t.complete()},t}(c.OuterSubscriber)},26303:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(33463),a=n(7633),s=n(85814),c=n(72293),l=Object.prototype.toString,u=function(e){function t(t,n,i,r){e.call(this),this.sourceObj=t,this.eventName=n,this.selector=i,this.options=r}return i(t,e),t.create=function(e,n,i,r){return a.isFunction(i)&&(r=i,i=void 0),new t(e,n,r,i)},t.setupSubscription=function(e,n,i,r,o){var a;if(function(e){return!!e&&"[object NodeList]"===l.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===l.call(e)}(e))for(var s=0,u=e.length;s<u;s++)t.setupSubscription(e[s],n,i,r,o);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var d=e;e.addEventListener(n,i,o),a=function(){return d.removeEventListener(n,i,o)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var h=e;e.on(n,i),a=function(){return h.off(n,i)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var f=e;e.addListener(n,i),a=function(){return f.removeListener(n,i)}}r.add(new c.Subscription(a))},t.prototype._subscribe=function(e){var n=this.selector,i=n?function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var r=o.tryCatch(n).apply(void 0,t);r===s.errorObject?e.error(s.errorObject.e):e.next(r)}:function(t){return e.next(t)};t.setupSubscription(this.sourceObj,this.eventName,i,e,this.options)},t}(r.Observable);t.FromEventObservable=u},54944:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(7633),o=n(18705),a=n(72293),s=function(e){function t(t,n,i){e.call(this),this.addHandler=t,this.removeHandler=n,this.selector=i}return i(t,e),t.create=function(e,n,i){return new t(e,n,i)},t.prototype._subscribe=function(e){var t=this,n=this.removeHandler,i=this.selector?function(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];t._callSelector(e,n)}:function(t){e.next(t)},o=this._callAddHandler(i,e);!r.isFunction(n)||e.add(new a.Subscription(function(){n(i,o)}))},t.prototype._callSelector=function(e,t){try{var n=this.selector.apply(this,t);e.next(n)}catch(i){e.error(i)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(n){t.error(n)}},t}(o.Observable);t.FromEventPatternObservable=s},49288:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(48242),o=n(26676),a=n(35130),s=n(85271),c=n(90142),l=n(96177),u=n(89131),d=n(72121),h=n(18705),f=n(39459),p=n(45783),v=function(e){function t(t,n){e.call(this,null),this.ish=t,this.scheduler=n}return i(t,e),t.create=function(e,n){if(null!=e){if("function"==typeof e[p.observable])return e instanceof h.Observable&&!n?e:new t(e,n);if(r.isArray(e))return new l.ArrayObservable(e,n);if(a.isPromise(e))return new s.PromiseObservable(e,n);if("function"==typeof e[d.iterator]||"string"==typeof e)return new c.IteratorObservable(e,n);if(o.isArrayLike(e))return new u.ArrayLikeObservable(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,n=this.scheduler;return null==n?t[p.observable]().subscribe(e):t[p.observable]().subscribe(new f.ObserveOnSubscriber(e,n,0))},t}(h.Observable);t.FromObservable=v},93684:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(41503),a=function(e){return e},s=function(e){function t(t,n,i,r,o){e.call(this),this.initialState=t,this.condition=n,this.iterate=i,this.resultSelector=r,this.scheduler=o}return i(t,e),t.create=function(e,n,i,r,s){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||a,e.scheduler):void 0===r||o.isScheduler(r)?new t(e,n,i,a,r):new t(e,n,i,r,s)},t.prototype._subscribe=function(e){var n=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:n});for(var i=this,r=i.condition,o=i.resultSelector,a=i.iterate;;){if(r){var s=void 0;try{s=r(n)}catch(l){return void e.error(l)}if(!s){e.complete();break}}var c=void 0;try{c=o(n)}catch(l){return void e.error(l)}if(e.next(c),e.closed)break;try{n=a(n)}catch(l){return void e.error(l)}}},t.dispatch=function(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var i=void 0;try{i=n(e.state)}catch(o){return void t.error(o)}if(!i)return void t.complete();if(t.closed)return}var r;try{r=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(r),!t.closed))return this.schedule(e)}},t}(r.Observable);t.GenerateObservable=s},4992:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(93658),a=n(84308),s=function(e){function t(t,n,i){e.call(this),this.condition=t,this.thenSource=n,this.elseSource=i}return i(t,e),t.create=function(e,n,i){return new t(e,n,i)},t.prototype._subscribe=function(e){var t=this;return new c(e,t.condition,t.thenSource,t.elseSource)},t}(r.Observable);t.IfObservable=s;var c=function(e){function t(t,n,i,r){e.call(this,t),this.condition=n,this.thenSource=i,this.elseSource=r,this.tryIf()}return i(t,e),t.prototype.tryIf=function(){var e=this,t=e.condition,n=e.thenSource,i=e.elseSource;try{var r=t()?n:i;r?this.add(o.subscribeToResult(this,r)):this._complete()}catch(a){this._error(a)}},t}(a.OuterSubscriber)},60617:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(39479),o=n(18705),a=n(90680),s=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=a.async),e.call(this),this.period=t,this.scheduler=n,(!r.isNumeric(t)||t<0)&&(this.period=0),(!n||"function"!=typeof n.schedule)&&(this.scheduler=a.async)}return i(t,e),t.create=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=a.async),new t(e,n)},t.dispatch=function(e){var t=e.subscriber,n=e.period;t.next(e.index),!t.closed&&(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var n=this.period;e.add(this.scheduler.schedule(t.dispatch,n,{index:0,subscriber:e,period:n}))},t}(o.Observable);t.IntervalObservable=s},90142:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(80019),o=n(18705),a=n(72121),s=function(e){function t(t,n){if(e.call(this),this.scheduler=n,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[a.iterator];if(!t&&"string"==typeof e)return new c(e);if(!t&&void 0!==e.length)return new l(e);if(!t)throw new TypeError("object is not iterable");return e[a.iterator]()}(t)}return i(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.iterator,i=e.subscriber;if(e.hasError)i.error(e.error);else{var r=n.next();r.done?i.complete():(i.next(r.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var n=this.iterator,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{index:0,iterator:n,subscriber:e});for(;;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed){"function"==typeof n.return&&n.return();break}}},t}(o.Observable);t.IteratorObservable=s;var c=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.str=e,this.idx=t,this.len=n}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),l=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=function(e){var t=+e.length;return isNaN(t)?0:0!==t&&function(e){return"number"==typeof e&&r.root.isFinite(e)}(t)?(t=function(e){var t=+e;return 0===t||isNaN(t)?t:t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0?0:t>u?u:t:t}(e)),this.arr=e,this.idx=t,this.len=n}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),u=Math.pow(2,53)-1},20143:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(68668),a=function(e){function t(){e.call(this)}return i(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){o.noop()},t}(r.Observable);t.NeverObservable=a},19770:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};function r(e){var t=e.index,n=e.subscriber;if(t!==e.length){var i=e.keys[t];n.next([i,e.obj[i]]),e.index=t+1,this.schedule(e)}else n.complete()}var o=function(e){function t(t,n){e.call(this),this.obj=t,this.scheduler=n,this.keys=Object.keys(t)}return i(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this.keys,n=this.scheduler,i=t.length;if(n)return n.schedule(r,0,{obj:this.obj,keys:t,length:i,index:0,subscriber:e});for(var o=0;o<i;o++){var a=t[o];e.next([a,this.obj[a]])}e.complete()},t}(n(18705).Observable);t.PairsObservable=o},85271:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(80019),o=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return i(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,i=this.scheduler;if(null==i)this._isScalar?e.closed||(e.next(this.value),e.complete()):n.then(function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){r.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return i.schedule(a,0,{value:this.value,subscriber:e})}else n.then(function(n){t.value=n,t._isScalar=!0,e.closed||e.add(i.schedule(a,0,{value:n,subscriber:e}))},function(t){e.closed||e.add(i.schedule(s,0,{err:t,subscriber:e}))}).then(null,function(e){r.root.setTimeout(function(){throw e})})},t}(n(18705).Observable);function a(e){var t=e.subscriber;t.closed||(t.next(e.value),t.complete())}function s(e){var t=e.subscriber;t.closed||t.error(e.err)}t.PromiseObservable=o},6247:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n,i){e.call(this),this.start=t,this._count=n,this.scheduler=i}return i(t,e),t.create=function(e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),new t(e,n,i)},t.dispatch=function(e){var t=e.start,n=e.index,i=e.subscriber;n>=e.count?i.complete():(i.next(t),!i.closed&&(e.index=n+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=0,i=this.start,r=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:n,count:r,start:i,subscriber:e});for(;;){if(n++>=r){e.complete();break}if(e.next(i++),e.closed)break}},t}(n(18705).Observable);t.RangeObservable=r},80478:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return i(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.value,n=e.subscriber;e.done?n.complete():(n.next(t),!n.closed&&(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.value,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e});e.next(n),e.closed||e.complete()},t}(n(18705).Observable);t.ScalarObservable=r},82966:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(85522),a=n(39479),s=function(e){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=o.asap),e.call(this),this.source=t,this.delayTime=n,this.scheduler=i,(!a.isNumeric(n)||n<0)&&(this.delayTime=0),(!i||"function"!=typeof i.schedule)&&(this.scheduler=o.asap)}return i(t,e),t.create=function(e,n,i){return void 0===n&&(n=0),void 0===i&&(i=o.asap),new t(e,n,i)},t.dispatch=function(e){return this.add(e.source.subscribe(e.subscriber))},t.prototype._subscribe=function(e){return this.scheduler.schedule(t.dispatch,this.delayTime,{source:this.source,subscriber:e})},t}(r.Observable);t.SubscribeOnObservable=s},92870:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(39479),o=n(18705),a=n(90680),s=n(41503),c=n(783),l=function(e){function t(t,n,i){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,r.isNumeric(n)?this.period=Number(n)<1?1:Number(n):s.isScheduler(n)&&(i=n),s.isScheduler(i)||(i=a.async),this.scheduler=i,this.dueTime=c.isDate(t)?+t-this.scheduler.now():t}return i(t,e),t.create=function(e,n,i){return void 0===e&&(e=0),new t(e,n,i)},t.dispatch=function(e){var t=e.index,n=e.period,i=e.subscriber;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}},t.prototype._subscribe=function(e){var n=this;return n.scheduler.schedule(t.dispatch,n.dueTime,{index:0,period:n.period,subscriber:e})},t}(o.Observable);t.TimerObservable=l},16196:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(93658),a=n(84308),s=function(e){function t(t,n){e.call(this),this.resourceFactory=t,this.observableFactory=n}return i(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t,n=this.resourceFactory,i=this.observableFactory;try{return t=n(),new c(e,t,i)}catch(r){e.error(r)}},t}(r.Observable);t.UsingObservable=s;var c=function(e){function t(t,n,i){e.call(this,t),this.resource=n,this.observableFactory=i,t.add(n),this.tryUse()}return i(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(o.subscribeToResult(this,e))}catch(t){this._error(t)}},t}(a.OuterSubscriber)},59246:function(e,t,n){"use strict";var i=n(19183);t.bindCallback=i.BoundCallbackObservable.create},65571:function(e,t,n){"use strict";var i=n(78655);t.bindNodeCallback=i.BoundNodeCallbackObservable.create},24669:function(e,t,n){"use strict";var i=n(41503),r=n(48242),o=n(96177),a=n(49134);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,s=null;return i.isScheduler(e[e.length-1])&&(s=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&r.isArray(e[0])&&(e=e[0]),new o.ArrayObservable(e,s).lift(new a.CombineLatestOperator(n))}},92197:function(e,t,n){"use strict";var i=n(41503),r=n(69657),o=n(46908),a=n(6157);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&i.isScheduler(e[1])?o.from(e[0]):a.concatAll()(r.of.apply(void 0,e))}},18929:function(e,t,n){"use strict";var i=n(34078);t.defer=i.DeferObservable.create},55298:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(80019),o=n(33463),a=n(85814),s=n(18705),c=n(42109),l=n(40119);function u(){if(r.root.XMLHttpRequest)return new r.root.XMLHttpRequest;if(r.root.XDomainRequest)return new r.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function d(e,t){return void 0===t&&(t=null),new b({method:"GET",url:e,headers:t})}function h(e,t,n){return new b({method:"POST",url:e,body:t,headers:n})}function f(e,t){return new b({method:"DELETE",url:e,headers:t})}function p(e,t,n){return new b({method:"PUT",url:e,body:t,headers:n})}function v(e,t,n){return new b({method:"PATCH",url:e,body:t,headers:n})}t.ajaxGet=d,t.ajaxPost=h,t.ajaxDelete=f,t.ajaxPut=p,t.ajaxPatch=v;var g=l.map(function(e,t){return e.response});function m(e,t){return g(new b({method:"GET",url:e,responseType:"json",headers:t}))}t.ajaxGetJSON=m;var b=function(e){function t(t){e.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?u.call(this):function(){if(r.root.XMLHttpRequest)return new r.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=0;i<3;i++)try{if(new r.root.ActiveXObject(e=t[i]))break}catch(n){}return new r.root.ActiveXObject(e)}catch(n){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)n.url=t;else for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);this.request=n}return i(t,e),t.prototype._subscribe=function(e){return new y(e,this.request)},t.create=((n=function(e){return new t(e)}).get=d,n.post=h,n.delete=f,n.put=p,n.patch=v,n.getJSON=m,n),t;var n}(s.Observable);t.AjaxObservable=b;var y=function(e){function t(t,n){e.call(this,t),this.request=n,this.done=!1;var i=n.headers=n.headers||{};!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest"),!("Content-Type"in i)&&!(r.root.FormData&&n.body instanceof r.root.FormData)&&void 0!==n.body&&(i["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return i(t,e),t.prototype.next=function(e){this.done=!0;var t=this.destination,n=new k(e,this.xhr,this.request);t.next(n)},t.prototype.send=function(){var e=this.request,t=this.request,n=t.user,i=t.method,r=t.url,s=t.async,c=t.password,l=t.headers,u=t.body,d=o.tryCatch(e.createXHR).call(e);if(d===a.errorObject)this.error(a.errorObject.e);else{if(this.xhr=d,this.setupEvents(d,e),(n?o.tryCatch(d.open).call(d,i,r,s,n,c):o.tryCatch(d.open).call(d,i,r,s))===a.errorObject)return this.error(a.errorObject.e),null;if(s&&(d.timeout=e.timeout,d.responseType=e.responseType),"withCredentials"in d&&(d.withCredentials=!!e.withCredentials),this.setHeaders(d,l),(u?o.tryCatch(d.send).call(d,u):o.tryCatch(d.send).call(d))===a.errorObject)return this.error(a.errorObject.e),null}return d},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(r.root.FormData&&e instanceof r.root.FormData)return e;if(t){var n=t.indexOf(";");-1!==n&&(t=t.substring(0,n))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.setupEvents=function(e,t){var n,i,o=t.progressSubscriber;function a(e){var t=a.subscriber,n=a.progressSubscriber,i=a.request;n&&n.error(e),t.error(new x(this,i))}function s(e){var t=s.subscriber,n=s.progressSubscriber,i=s.request;if(4===this.readyState){var r=1223===this.status?204:this.status;0===r&&(r=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),200<=r&&r<300?(n&&n.complete(),t.next(e),t.complete()):(n&&n.error(e),t.error(new w("ajax error "+r,this,i)))}}e.ontimeout=a,a.request=t,a.subscriber=this,a.progressSubscriber=o,e.upload&&"withCredentials"in e&&(o&&(n=function(e){n.progressSubscriber.next(e)},r.root.XDomainRequest?e.onprogress=n:e.upload.onprogress=n,n.progressSubscriber=o),e.onerror=i=function(e){var t=i.progressSubscriber,n=i.subscriber,r=i.request;t&&t.error(e),n.error(new w("ajax error",this,r))},i.request=t,i.subscriber=this,i.progressSubscriber=o),e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=o,s.request=t},t.prototype.unsubscribe=function(){var t=this.xhr;!this.done&&t&&4!==t.readyState&&"function"==typeof t.abort&&t.abort(),e.prototype.unsubscribe.call(this)},t}(c.Subscriber);t.AjaxSubscriber=y;var k=function(e,t,n){this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=_(this.responseType,t)};t.AjaxResponse=k;var w=function(e){function t(t,n,i){e.call(this,t),this.message=t,this.xhr=n,this.request=i,this.status=n.status,this.responseType=n.responseType||i.responseType,this.response=_(this.responseType,n)}return i(t,e),t}(Error);function _(e,t){switch(e){case"json":return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");case"xml":return t.responseXML;default:return"response"in t?t.response:t.responseText}}t.AjaxError=w;var x=function(e){function t(t,n){e.call(this,"ajax timeout",t,n)}return i(t,e),t}(w);t.AjaxTimeoutError=x},20850:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(42109),a=n(18705),s=n(72293),c=n(80019),l=n(81959),u=n(33463),d=n(85814),h=n(37333),f=function(e){function t(t,n){if(t instanceof a.Observable)e.call(this,n,t);else{if(e.call(this),this.WebSocketCtor=c.root.WebSocket,this._output=new r.Subject,"string"==typeof t?this.url=t:h.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new l.ReplaySubject}}return i(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var n=new t(this,this.destination);return n.operator=e,n},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new l.ReplaySubject),this._output=new r.Subject},t.prototype.multiplex=function(e,t,n){var i=this;return new a.Observable(function(r){var o=u.tryCatch(e)();o===d.errorObject?r.error(d.errorObject.e):i.next(o);var a=i.subscribe(function(e){var t=u.tryCatch(n)(e);t===d.errorObject?r.error(d.errorObject.e):t&&r.next(e)},function(e){return r.error(e)},function(){return r.complete()});return function(){var e=u.tryCatch(t)();e===d.errorObject?r.error(d.errorObject.e):i.next(e),a.unsubscribe()}})},t.prototype._connectSocket=function(){var e=this,t=this.WebSocketCtor,n=this._output,i=null;try{i=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=i,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(a){return void n.error(a)}var r=new s.Subscription(function(){e.socket=null,i&&1===i.readyState&&i.close()});i.onopen=function(t){var a=e.openObserver;a&&a.next(t);var s=e.destination;e.destination=o.Subscriber.create(function(e){return 1===i.readyState&&i.send(e)},function(t){var r=e.closingObserver;r&&r.next(void 0),t&&t.code?i.close(t.code,t.reason):n.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()},function(){var t=e.closingObserver;t&&t.next(void 0),i.close(),e._resetState()}),s&&s instanceof l.ReplaySubject&&r.add(s.subscribe(e.destination))},i.onerror=function(t){e._resetState(),n.error(t)},i.onclose=function(t){e._resetState();var i=e.closeObserver;i&&i.next(t),t.wasClean?n.complete():n.error(t)},i.onmessage=function(t){var i=u.tryCatch(e.resultSelector)(t);i===d.errorObject?n.error(d.errorObject.e):n.next(i)}},t.prototype._subscribe=function(e){var t=this,n=this.source;if(n)return n.subscribe(e);this.socket||this._connectSocket();var i=new s.Subscription;return i.add(this._output.subscribe(e)),i.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),i},t.prototype.unsubscribe=function(){var t=this.source,n=this.socket;n&&1===n.readyState&&(n.close(),this._resetState()),e.prototype.unsubscribe.call(this),t||(this.destination=new l.ReplaySubject)},t}(r.AnonymousSubject);t.WebSocketSubject=f},52880:function(e,t,n){"use strict";var i=n(55298);t.ajax=i.AjaxObservable.create},18362:function(e,t,n){"use strict";var i=n(20850);t.webSocket=i.WebSocketSubject.create},88090:function(e,t,n){"use strict";var i=n(70481);t.empty=i.EmptyObservable.create},8045:function(e,t,n){"use strict";var i=n(56064);t.forkJoin=i.ForkJoinObservable.create},46908:function(e,t,n){"use strict";var i=n(49288);t.from=i.FromObservable.create},80250:function(e,t,n){"use strict";var i=n(26303);t.fromEvent=i.FromEventObservable.create},6836:function(e,t,n){"use strict";var i=n(54944);t.fromEventPattern=i.FromEventPatternObservable.create},37256:function(e,t,n){"use strict";var i=n(85271);t.fromPromise=i.PromiseObservable.create},59554:function(e,t,n){"use strict";var i=n(93684);t.generate=i.GenerateObservable.create},6915:function(e,t,n){"use strict";var i=n(4992);t._if=i.IfObservable.create},56008:function(e,t,n){"use strict";var i=n(60617);t.interval=i.IntervalObservable.create},38781:function(e,t,n){"use strict";var i=n(18705),r=n(96177),o=n(41503),a=n(33451);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,s=null,c=e[e.length-1];return o.isScheduler(c)?(s=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof c&&(n=e.pop()),null===s&&1===e.length&&e[0]instanceof i.Observable?e[0]:a.mergeAll(n)(new r.ArrayObservable(e,s))}},94503:function(e,t,n){"use strict";var i=n(20143);t.never=i.NeverObservable.create},69657:function(e,t,n){"use strict";var i=n(96177);t.of=i.ArrayObservable.of},61395:function(e,t,n){"use strict";var i=n(46243);t.onErrorResumeNext=i.onErrorResumeNextStatic},95425:function(e,t,n){"use strict";var i=n(19770);t.pairs=i.PairsObservable.create},24330:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(48242),o=n(96177),a=n(84308),s=n(93658);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!r.isArray(e[0]))return e[0];e=e[0]}return new o.ArrayObservable(e).lift(new c)};var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}();t.RaceOperator=c;var l=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var i=e[n],r=s.subscribeToResult(this,i,i,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,i,r){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(a.OuterSubscriber);t.RaceSubscriber=l},99047:function(e,t,n){"use strict";var i=n(6247);t.range=i.RangeObservable.create},818:function(e,t,n){"use strict";var i=n(72210);t._throw=i.ErrorObservable.create},15112:function(e,t,n){"use strict";var i=n(92870);t.timer=i.TimerObservable.create},47513:function(e,t,n){"use strict";var i=n(16196);t.using=i.UsingObservable.create},78092:function(e,t,n){"use strict";var i=n(9477);t.zip=i.zipStatic},74722:function(e,t,n){"use strict";var i=n(3595);t.audit=function(e){return i.audit(e)(this)}},50517:function(e,t,n){"use strict";var i=n(90680),r=n(99274);t.auditTime=function(e,t){return void 0===t&&(t=i.async),r.auditTime(e,t)(this)}},95777:function(e,t,n){"use strict";var i=n(71395);t.buffer=function(e){return i.buffer(e)(this)}},62669:function(e,t,n){"use strict";var i=n(82223);t.bufferCount=function(e,t){return void 0===t&&(t=null),i.bufferCount(e,t)(this)}},31463:function(e,t,n){"use strict";var i=n(90680),r=n(41503),o=n(6489);t.bufferTime=function(e){var t=arguments.length,n=i.async;r.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var a=null;t>=2&&(a=arguments[1]);var s=Number.POSITIVE_INFINITY;return t>=3&&(s=arguments[2]),o.bufferTime(e,a,s,n)(this)}},92523:function(e,t,n){"use strict";var i=n(15440);t.bufferToggle=function(e,t){return i.bufferToggle(e,t)(this)}},49436:function(e,t,n){"use strict";var i=n(51786);t.bufferWhen=function(e){return i.bufferWhen(e)(this)}},64731:function(e,t,n){"use strict";var i=n(93017);t._catch=function(e){return i.catchError(e)(this)}},92273:function(e,t,n){"use strict";var i=n(17054);t.combineAll=function(e){return i.combineAll(e)(this)}},8709:function(e,t,n){"use strict";var i=n(49134);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.combineLatest.apply(void 0,e)(this)}},70267:function(e,t,n){"use strict";var i=n(42664),r=n(92197);t.concatStatic=r.concat,t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.concat.apply(void 0,e)(this)}},16948:function(e,t,n){"use strict";var i=n(6157);t.concatAll=function(){return i.concatAll()(this)}},14314:function(e,t,n){"use strict";var i=n(96211);t.concatMap=function(e,t){return i.concatMap(e,t)(this)}},48659:function(e,t,n){"use strict";var i=n(99180);t.concatMapTo=function(e,t){return i.concatMapTo(e,t)(this)}},43773:function(e,t,n){"use strict";var i=n(28759);t.count=function(e){return i.count(e)(this)}},14973:function(e,t,n){"use strict";var i=n(17356);t.debounce=function(e){return i.debounce(e)(this)}},23198:function(e,t,n){"use strict";var i=n(90680),r=n(95160);t.debounceTime=function(e,t){return void 0===t&&(t=i.async),r.debounceTime(e,t)(this)}},1395:function(e,t,n){"use strict";var i=n(27924);t.defaultIfEmpty=function(e){return void 0===e&&(e=null),i.defaultIfEmpty(e)(this)}},55490:function(e,t,n){"use strict";var i=n(90680),r=n(22975);t.delay=function(e,t){return void 0===t&&(t=i.async),r.delay(e,t)(this)}},86914:function(e,t,n){"use strict";var i=n(22944);t.delayWhen=function(e,t){return i.delayWhen(e,t)(this)}},66335:function(e,t,n){"use strict";var i=n(95591);t.dematerialize=function(){return i.dematerialize()(this)}},14512:function(e,t,n){"use strict";var i=n(25753);t.distinct=function(e,t){return i.distinct(e,t)(this)}},88417:function(e,t,n){"use strict";var i=n(65608);t.distinctUntilChanged=function(e,t){return i.distinctUntilChanged(e,t)(this)}},40578:function(e,t,n){"use strict";var i=n(8330);t.distinctUntilKeyChanged=function(e,t){return i.distinctUntilKeyChanged(e,t)(this)}},42882:function(e,t,n){"use strict";var i=n(97171);t._do=function(e,t,n){return i.tap(e,t,n)(this)}},43555:function(e,t,n){"use strict";var i=n(29264);t.elementAt=function(e,t){return i.elementAt(e,t)(this)}},22638:function(e,t,n){"use strict";var i=n(26285);t.every=function(e,t){return i.every(e,t)(this)}},8886:function(e,t,n){"use strict";var i=n(93229);t.exhaust=function(){return i.exhaust()(this)}},96042:function(e,t,n){"use strict";var i=n(15758);t.exhaustMap=function(e,t){return i.exhaustMap(e,t)(this)}},80956:function(e,t,n){"use strict";var i=n(55364);t.expand=function(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),i.expand(e,t=(t||0)<1?Number.POSITIVE_INFINITY:t,n)(this)}},40950:function(e,t,n){"use strict";var i=n(27015);t.filter=function(e,t){return i.filter(e,t)(this)}},50381:function(e,t,n){"use strict";var i=n(94367);t._finally=function(e){return i.finalize(e)(this)}},57881:function(e,t,n){"use strict";var i=n(16700);t.find=function(e,t){return i.find(e,t)(this)}},81112:function(e,t,n){"use strict";var i=n(86452);t.findIndex=function(e,t){return i.findIndex(e,t)(this)}},9479:function(e,t,n){"use strict";var i=n(12309);t.first=function(e,t,n){return i.first(e,t,n)(this)}},49859:function(e,t,n){"use strict";var i=n(92577);t.GroupedObservable=i.GroupedObservable,t.groupBy=function(e,t,n,r){return i.groupBy(e,t,n,r)(this)}},43300:function(e,t,n){"use strict";var i=n(86898);t.ignoreElements=function(){return i.ignoreElements()(this)}},20770:function(e,t,n){"use strict";var i=n(89121);t.isEmpty=function(){return i.isEmpty()(this)}},57966:function(e,t,n){"use strict";var i=n(4636);t.last=function(e,t,n){return i.last(e,t,n)(this)}},7372:function(e,t){"use strict";t.letProto=function(e){return e(this)}},30015:function(e,t,n){"use strict";var i=n(40119);t.map=function(e,t){return i.map(e,t)(this)}},22454:function(e,t,n){"use strict";var i=n(23491);t.mapTo=function(e){return i.mapTo(e)(this)}},94829:function(e,t,n){"use strict";var i=n(71177);t.materialize=function(){return i.materialize()(this)}},99249:function(e,t,n){"use strict";var i=n(33499);t.max=function(e){return i.max(e)(this)}},77426:function(e,t,n){"use strict";var i=n(56098),r=n(38781);t.mergeStatic=r.merge,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.merge.apply(void 0,e)(this)}},442:function(e,t,n){"use strict";var i=n(33451);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),i.mergeAll(e)(this)}},30502:function(e,t,n){"use strict";var i=n(71151);t.mergeMap=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),i.mergeMap(e,t,n)(this)}},12139:function(e,t,n){"use strict";var i=n(6693);t.mergeMapTo=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),i.mergeMapTo(e,t,n)(this)}},7264:function(e,t,n){"use strict";var i=n(7550);t.mergeScan=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),i.mergeScan(e,t,n)(this)}},7141:function(e,t,n){"use strict";var i=n(51213);t.min=function(e){return i.min(e)(this)}},10378:function(e,t,n){"use strict";var i=n(27372);t.multicast=function(e,t){return i.multicast(e,t)(this)}},29305:function(e,t,n){"use strict";var i=n(39459);t.observeOn=function(e,t){return void 0===t&&(t=0),i.observeOn(e,t)(this)}},73547:function(e,t,n){"use strict";var i=n(46243);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.onErrorResumeNext.apply(void 0,e)(this)}},69933:function(e,t,n){"use strict";var i=n(92514);t.pairwise=function(){return i.pairwise()(this)}},49819:function(e,t,n){"use strict";var i=n(64985);t.partition=function(e,t){return i.partition(e,t)(this)}},94467:function(e,t,n){"use strict";var i=n(9125);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.pluck.apply(void 0,e)(this)}},58576:function(e,t,n){"use strict";var i=n(30268);t.publish=function(e){return i.publish(e)(this)}},86054:function(e,t,n){"use strict";var i=n(57909);t.publishBehavior=function(e){return i.publishBehavior(e)(this)}},5138:function(e,t,n){"use strict";var i=n(61066);t.publishLast=function(){return i.publishLast()(this)}},90008:function(e,t,n){"use strict";var i=n(43296);t.publishReplay=function(e,t,n,r){return i.publishReplay(e,t,n,r)(this)}},21814:function(e,t,n){"use strict";var i=n(96278),r=n(24330);t.raceStatic=r.race,t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.race.apply(void 0,e)(this)}},50511:function(e,t,n){"use strict";var i=n(97369);t.reduce=function(e,t){return arguments.length>=2?i.reduce(e,t)(this):i.reduce(e)(this)}},12931:function(e,t,n){"use strict";var i=n(15329);t.repeat=function(e){return void 0===e&&(e=-1),i.repeat(e)(this)}},68816:function(e,t,n){"use strict";var i=n(63964);t.repeatWhen=function(e){return i.repeatWhen(e)(this)}},17144:function(e,t,n){"use strict";var i=n(40241);t.retry=function(e){return void 0===e&&(e=-1),i.retry(e)(this)}},82766:function(e,t,n){"use strict";var i=n(23896);t.retryWhen=function(e){return i.retryWhen(e)(this)}},62068:function(e,t,n){"use strict";var i=n(92043);t.sample=function(e){return i.sample(e)(this)}},97013:function(e,t,n){"use strict";var i=n(90680),r=n(71239);t.sampleTime=function(e,t){return void 0===t&&(t=i.async),r.sampleTime(e,t)(this)}},98996:function(e,t,n){"use strict";var i=n(64949);t.scan=function(e,t){return arguments.length>=2?i.scan(e,t)(this):i.scan(e)(this)}},77033:function(e,t,n){"use strict";var i=n(88948);t.sequenceEqual=function(e,t){return i.sequenceEqual(e,t)(this)}},10377:function(e,t,n){"use strict";var i=n(35473);t.share=function(){return i.share()(this)}},71623:function(e,t,n){"use strict";var i=n(62704);t.shareReplay=function(e,t,n){return i.shareReplay(e,t,n)(this)}},91956:function(e,t,n){"use strict";var i=n(92223);t.single=function(e){return i.single(e)(this)}},72355:function(e,t,n){"use strict";var i=n(11189);t.skip=function(e){return i.skip(e)(this)}},69329:function(e,t,n){"use strict";var i=n(73346);t.skipLast=function(e){return i.skipLast(e)(this)}},68481:function(e,t,n){"use strict";var i=n(12928);t.skipUntil=function(e){return i.skipUntil(e)(this)}},587:function(e,t,n){"use strict";var i=n(69415);t.skipWhile=function(e){return i.skipWhile(e)(this)}},49292:function(e,t,n){"use strict";var i=n(30673);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.startWith.apply(void 0,e)(this)}},94379:function(e,t,n){"use strict";var i=n(10118);t.subscribeOn=function(e,t){return void 0===t&&(t=0),i.subscribeOn(e,t)(this)}},45904:function(e,t,n){"use strict";var i=n(77243);t._switch=function(){return i.switchAll()(this)}},3668:function(e,t,n){"use strict";var i=n(18483);t.switchMap=function(e,t){return i.switchMap(e,t)(this)}},54865:function(e,t,n){"use strict";var i=n(10684);t.switchMapTo=function(e,t){return i.switchMapTo(e,t)(this)}},23089:function(e,t,n){"use strict";var i=n(44396);t.take=function(e){return i.take(e)(this)}},92925:function(e,t,n){"use strict";var i=n(73935);t.takeLast=function(e){return i.takeLast(e)(this)}},11487:function(e,t,n){"use strict";var i=n(77842);t.takeUntil=function(e){return i.takeUntil(e)(this)}},26344:function(e,t,n){"use strict";var i=n(4629);t.takeWhile=function(e){return i.takeWhile(e)(this)}},71139:function(e,t,n){"use strict";var i=n(5144);t.throttle=function(e,t){return void 0===t&&(t=i.defaultThrottleConfig),i.throttle(e,t)(this)}},17777:function(e,t,n){"use strict";var i=n(90680),r=n(5144),o=n(45949);t.throttleTime=function(e,t,n){return void 0===t&&(t=i.async),void 0===n&&(n=r.defaultThrottleConfig),o.throttleTime(e,t,n)(this)}},73390:function(e,t,n){"use strict";var i=n(90680),r=n(37848);t.TimeInterval=r.TimeInterval,t.timeInterval=function(e){return void 0===e&&(e=i.async),r.timeInterval(e)(this)}},26950:function(e,t,n){"use strict";var i=n(90680),r=n(99507);t.timeout=function(e,t){return void 0===t&&(t=i.async),r.timeout(e,t)(this)}},73452:function(e,t,n){"use strict";var i=n(90680),r=n(92341);t.timeoutWith=function(e,t,n){return void 0===n&&(n=i.async),r.timeoutWith(e,t,n)(this)}},82139:function(e,t,n){"use strict";var i=n(90680),r=n(62688);t.timestamp=function(e){return void 0===e&&(e=i.async),r.timestamp(e)(this)}},5488:function(e,t,n){"use strict";var i=n(17117);t.toArray=function(){return i.toArray()(this)}},70328:function(e,t,n){"use strict";var i=n(30459);t.window=function(e){return i.window(e)(this)}},35994:function(e,t,n){"use strict";var i=n(24974);t.windowCount=function(e,t){return void 0===t&&(t=0),i.windowCount(e,t)(this)}},98263:function(e,t,n){"use strict";var i=n(90680),r=n(39479),o=n(41503),a=n(42603);t.windowTime=function(e){var t=i.async,n=null,s=Number.POSITIVE_INFINITY;return o.isScheduler(arguments[3])&&(t=arguments[3]),o.isScheduler(arguments[2])?t=arguments[2]:r.isNumeric(arguments[2])&&(s=arguments[2]),o.isScheduler(arguments[1])?t=arguments[1]:r.isNumeric(arguments[1])&&(n=arguments[1]),a.windowTime(e,n,s,t)(this)}},46413:function(e,t,n){"use strict";var i=n(59048);t.windowToggle=function(e,t){return i.windowToggle(e,t)(this)}},62512:function(e,t,n){"use strict";var i=n(4750);t.windowWhen=function(e){return i.windowWhen(e)(this)}},67739:function(e,t,n){"use strict";var i=n(91698);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.withLatestFrom.apply(void 0,e)(this)}},81680:function(e,t,n){"use strict";var i=n(9477);t.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.zip.apply(void 0,e)(this)}},9796:function(e,t,n){"use strict";var i=n(33310);t.zipAll=function(e){return i.zipAll(e)(this)}},39053:function(e,t,n){"use strict";var i=n(3595);t.audit=i.audit;var r=n(99274);t.auditTime=r.auditTime;var o=n(71395);t.buffer=o.buffer;var a=n(82223);t.bufferCount=a.bufferCount;var s=n(6489);t.bufferTime=s.bufferTime;var c=n(15440);t.bufferToggle=c.bufferToggle;var l=n(51786);t.bufferWhen=l.bufferWhen;var u=n(93017);t.catchError=u.catchError;var d=n(17054);t.combineAll=d.combineAll;var h=n(49134);t.combineLatest=h.combineLatest;var f=n(42664);t.concat=f.concat;var p=n(6157);t.concatAll=p.concatAll;var v=n(96211);t.concatMap=v.concatMap;var g=n(99180);t.concatMapTo=g.concatMapTo;var m=n(28759);t.count=m.count;var b=n(17356);t.debounce=b.debounce;var y=n(95160);t.debounceTime=y.debounceTime;var k=n(27924);t.defaultIfEmpty=k.defaultIfEmpty;var w=n(22975);t.delay=w.delay;var _=n(22944);t.delayWhen=_.delayWhen;var x=n(95591);t.dematerialize=x.dematerialize;var T=n(25753);t.distinct=T.distinct;var A=n(65608);t.distinctUntilChanged=A.distinctUntilChanged;var S=n(8330);t.distinctUntilKeyChanged=S.distinctUntilKeyChanged;var C=n(29264);t.elementAt=C.elementAt;var O=n(26285);t.every=O.every;var E=n(93229);t.exhaust=E.exhaust;var P=n(15758);t.exhaustMap=P.exhaustMap;var I=n(55364);t.expand=I.expand;var M=n(27015);t.filter=M.filter;var N=n(94367);t.finalize=N.finalize;var L=n(16700);t.find=L.find;var R=n(86452);t.findIndex=R.findIndex;var j=n(12309);t.first=j.first;var D=n(92577);t.groupBy=D.groupBy;var V=n(86898);t.ignoreElements=V.ignoreElements;var Z=n(89121);t.isEmpty=Z.isEmpty;var z=n(4636);t.last=z.last;var F=n(40119);t.map=F.map;var q=n(23491);t.mapTo=q.mapTo;var B=n(71177);t.materialize=B.materialize;var U=n(33499);t.max=U.max;var H=n(56098);t.merge=H.merge;var W=n(33451);t.mergeAll=W.mergeAll;var Y=n(71151);t.mergeMap=Y.mergeMap;var J=n(71151);t.flatMap=J.mergeMap;var Q=n(6693);t.mergeMapTo=Q.mergeMapTo;var G=n(7550);t.mergeScan=G.mergeScan;var $=n(51213);t.min=$.min;var K=n(27372);t.multicast=K.multicast;var X=n(39459);t.observeOn=X.observeOn;var ee=n(46243);t.onErrorResumeNext=ee.onErrorResumeNext;var te=n(92514);t.pairwise=te.pairwise;var ne=n(64985);t.partition=ne.partition;var ie=n(9125);t.pluck=ie.pluck;var re=n(30268);t.publish=re.publish;var oe=n(57909);t.publishBehavior=oe.publishBehavior;var ae=n(61066);t.publishLast=ae.publishLast;var se=n(43296);t.publishReplay=se.publishReplay;var ce=n(96278);t.race=ce.race;var le=n(97369);t.reduce=le.reduce;var ue=n(15329);t.repeat=ue.repeat;var de=n(63964);t.repeatWhen=de.repeatWhen;var he=n(40241);t.retry=he.retry;var fe=n(23896);t.retryWhen=fe.retryWhen;var pe=n(1694);t.refCount=pe.refCount;var ve=n(92043);t.sample=ve.sample;var ge=n(71239);t.sampleTime=ge.sampleTime;var me=n(64949);t.scan=me.scan;var be=n(88948);t.sequenceEqual=be.sequenceEqual;var ye=n(35473);t.share=ye.share;var ke=n(62704);t.shareReplay=ke.shareReplay;var we=n(92223);t.single=we.single;var _e=n(11189);t.skip=_e.skip;var xe=n(73346);t.skipLast=xe.skipLast;var Te=n(12928);t.skipUntil=Te.skipUntil;var Ae=n(69415);t.skipWhile=Ae.skipWhile;var Se=n(30673);t.startWith=Se.startWith;var Ce=n(77243);t.switchAll=Ce.switchAll;var Oe=n(18483);t.switchMap=Oe.switchMap;var Ee=n(10684);t.switchMapTo=Ee.switchMapTo;var Pe=n(44396);t.take=Pe.take;var Ie=n(73935);t.takeLast=Ie.takeLast;var Me=n(77842);t.takeUntil=Me.takeUntil;var Ne=n(4629);t.takeWhile=Ne.takeWhile;var Le=n(97171);t.tap=Le.tap;var Re=n(5144);t.throttle=Re.throttle;var je=n(45949);t.throttleTime=je.throttleTime;var De=n(37848);t.timeInterval=De.timeInterval;var Ve=n(99507);t.timeout=Ve.timeout;var Ze=n(92341);t.timeoutWith=Ze.timeoutWith;var ze=n(62688);t.timestamp=ze.timestamp;var Fe=n(17117);t.toArray=Fe.toArray;var qe=n(30459);t.window=qe.window;var Be=n(24974);t.windowCount=Be.windowCount;var Ue=n(42603);t.windowTime=Ue.windowTime;var He=n(59048);t.windowToggle=He.windowToggle;var We=n(4750);t.windowWhen=We.windowWhen;var Ye=n(91698);t.withLatestFrom=Ye.withLatestFrom;var Je=n(9477);t.zip=Je.zip;var Qe=n(33310);t.zipAll=Qe.zipAll},3595:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(33463),o=n(85814),a=n(84308),s=n(93658);t.audit=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.durationSelector))},e}(),l=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1}return i(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=r.tryCatch(this.durationSelector)(e);if(t===o.errorObject)this.destination.error(o.errorObject.e);else{var n=s.subscribeToResult(this,t);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,i=e.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(e,t,n,i){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(a.OuterSubscriber)},99274:function(e,t,n){"use strict";var i=n(90680),r=n(3595),o=n(15112);t.auditTime=function(e,t){return void 0===t&&(t=i.async),r.audit(function(){return o.timer(e,t)})}},71395:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.buffer=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.closingNotifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.buffer=[],this.add(o.subscribeToResult(this,n))}return i(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(r.OuterSubscriber)},82223:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.bufferCount=function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){e.call(this,t),this.bufferSize=n,this.buffer=[]}return i(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(r.Subscriber),s=function(e){function t(t,n,i){e.call(this,t),this.bufferSize=n,this.startBufferEvery=i,this.buffers=[],this.count=0}return i(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,i=t.startBufferEvery,r=t.buffers,o=t.count;this.count++,o%i==0&&r.push([]);for(var a=r.length;a--;){var s=r[a];s.push(e),s.length===n&&(r.splice(a,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var i=t.shift();i.length>0&&n.next(i)}e.prototype._complete.call(this)},t}(r.Subscriber)},6489:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(90680),o=n(42109),a=n(41503);t.bufferTime=function(e){var t=arguments.length,n=r.async;a.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var i=null;t>=2&&(i=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new s(e,i,o,n))}};var s=function(){function e(e,t,n,i){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=i}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),c=function(){this.buffer=[]},l=function(e){function t(t,n,i,r,o){e.call(this,t),this.bufferTimeSpan=n,this.bufferCreationInterval=i,this.maxBufferSize=r,this.scheduler=o,this.contexts=[];var a=this.openContext();if(this.timespanOnly=null==i||i<0,this.timespanOnly)this.add(a.closeAction=o.schedule(u,n,{subscriber:this,context:a,bufferTimeSpan:n}));else{var s={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:this,scheduler:o};this.add(a.closeAction=o.schedule(h,n,{subscriber:this,context:a})),this.add(o.schedule(d,i,s))}}return i(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,i=n.length,r=0;r<i;r++){var o=n[r],a=o.buffer;a.push(e),a.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var i=t.shift();n.next(i.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(u,n,{subscriber:this,context:e,bufferTimeSpan:n}))}},t.prototype.openContext=function(){var e=new c;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(o.Subscriber);function u(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function d(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,i=e.subscriber,r=e.scheduler,o=i.openContext();i.closed||(i.add(o.closeAction=r.schedule(h,n,{subscriber:i,context:o})),this.schedule(e,t))}function h(e){e.subscriber.closeContext(e.context)}},15440:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(72293),o=n(93658),a=n(84308);t.bufferToggle=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.openings,this.closingSelector))},e}(),c=function(e){function t(t,n,i){e.call(this,t),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(o.subscribeToResult(this,n))}return i(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,i=0;i<n;i++)t[i].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,i,r){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(n){this._error(n)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.subscription;this.destination.next(e.buffer),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new r.Subscription,i={buffer:[],subscription:n};t.push(i);var a=o.subscribeToResult(this,e,i);!a||a.closed?this.closeBuffer(i):(a.context=i,this.add(a),n.add(a))},t}(a.OuterSubscriber)},51786:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(72293),o=n(33463),a=n(85814),s=n(84308),c=n(93658);t.bufferWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){e.call(this,t),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return i(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,n,i,r){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];var t=o.tryCatch(this.closingSelector)();t===a.errorObject?this.error(a.errorObject.e):(e=new r.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(c.subscribeToResult(this,t)),this.subscribing=!1)},t}(s.OuterSubscriber)},93017:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.catchError=function(e){return function(t){var n=new a(e),i=t.lift(n);return n.caught=i}};var a=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.selector,this.caught))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.selector=n,this.caught=i}return i(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(i){return void e.prototype.error.call(this,i)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,n))}},t}(r.OuterSubscriber)},17054:function(e,t,n){"use strict";var i=n(49134);t.combineAll=function(e){return function(t){return t.lift(new i.CombineLatestOperator(e))}}},49134:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(96177),o=n(48242),a=n(84308),s=n(93658),c={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new r.ArrayObservable([t].concat(e)),new l(n))}};var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project))},e}();t.CombineLatestOperator=l;var u=function(e){function t(t,n){e.call(this,t),this.project=n,this.active=0,this.values=[],this.observables=[]}return i(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(s.subscribeToResult(this,i,i,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.values,a=this.toRespond?o[n]===c?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(a.OuterSubscriber);t.CombineLatestSubscriber=u},42664:function(e,t,n){"use strict";var i=n(92197),r=n(92197);t.concatStatic=r.concat,t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(i.concat.apply(void 0,[t].concat(e)))}}},6157:function(e,t,n){"use strict";var i=n(33451);t.concatAll=function(){return i.mergeAll(1)}},96211:function(e,t,n){"use strict";var i=n(71151);t.concatMap=function(e,t){return i.mergeMap(e,t,1)}},99180:function(e,t,n){"use strict";var i=n(96211);t.concatMapTo=function(e,t){return i.concatMap(function(){return e},t)}},28759:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.count=function(e){return function(t){return t.lift(new o(e,t))}};var o=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,n,i){e.call(this,t),this.predicate=n,this.source=i,this.count=0,this.index=0}return i(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(r.Subscriber)},17356:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.debounce=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector))},e}(),s=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return i(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=o.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(e,t,n,i,r){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(r.OuterSubscriber)},95160:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(90680);t.debounceTime=function(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.dueTime,this.scheduler))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(r.Subscriber);function c(e){e.debouncedNext()}},27924:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,n){e.call(this,t),this.defaultValue=n,this.isEmpty=!0}return i(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(r.Subscriber)},22975:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(90680),o=n(783),a=n(42109),s=n(94429);t.delay=function(e,t){void 0===t&&(t=r.async);var n=o.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new c(n,t))}};var c=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))},e}(),l=function(e){function t(t,n,i){e.call(this,t),this.delay=n,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}return i(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,i=e.scheduler,r=e.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var o=Math.max(0,n[0].time-i.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new u(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(s.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},t}(a.Subscriber),u=function(e,t){this.time=e,this.notification=t}},22944:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(18705),a=n(84308),s=n(93658);t.delayWhen=function(e,t){return t?function(n){return new u(n,t).lift(new c(e))}:function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delayDurationSelector))},e}(),l=function(e){function t(t,n){e.call(this,t),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(e),this.removeSubscription(r),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),n=null;return-1!==t&&(n=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),n},t.prototype.tryDelay=function(e,t){var n=s.subscribeToResult(this,e,t);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(a.OuterSubscriber),u=function(e){function t(t,n){e.call(this),this.source=t,this.subscriptionDelay=n}return i(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new d(e,this.source))},t}(o.Observable),d=function(e){function t(t,n){e.call(this),this.parent=t,this.source=n,this.sourceSubscribed=!1}return i(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(r.Subscriber)},95591:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.dematerialize=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(r.Subscriber)},25753:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658),a=n(40317);t.distinct=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,n,i){e.call(this,t),this.keySelector=n,this.values=new a.Set,i&&this.add(o.subscribeToResult(this,i))}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(i){return void n.error(i)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(r.OuterSubscriber);t.DistinctSubscriber=c},65608:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(33463),a=n(85814);t.distinctUntilChanged=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,n,i){e.call(this,t),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return i(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=o.tryCatch(this.keySelector)(e))===a.errorObject)return this.destination.error(a.errorObject.e);var n=!1;if(this.hasKey){if((n=o.tryCatch(this.compare)(this.key,t))===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},t}(r.Subscriber)},8330:function(e,t,n){"use strict";var i=n(65608);t.distinctUntilKeyChanged=function(e,t){return i.distinctUntilChanged(function(n,i){return t?t(n[e],i[e]):n[e]===i[e]})}},29264:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(11758);t.elementAt=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.index,this.defaultValue))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.index=n,this.defaultValue=i}return i(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new o.ArgumentOutOfRangeError)),e.complete()},t}(r.Subscriber)},26285:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.every=function(e,t){return function(n){return n.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(e){function t(t,n,i,r){e.call(this,t),this.predicate=n,this.thisArg=i,this.source=r,this.index=0,this.thisArg=i||this}return i(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(r.Subscriber)},93229:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.exhaust=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return i(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber)},15758:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.exhaustMap=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.project=n,this.resultSelector=i,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,n=this.destination;try{var i=this.project(e,t);this.hasSubscription=!0,this.add(o.subscribeToResult(this,i,e,t))}catch(r){n.error(r)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.destination;this.resultSelector?this.trySelectResult(e,t,n,i):o.next(t)},t.prototype.trySelectResult=function(e,t,n,i){var r=this.resultSelector,o=this.destination;try{var a=r(e,t,n,i);o.next(a)}catch(s){o.error(s)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber)},55364:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(33463),o=n(85814),a=n(84308),s=n(93658);t.expand=function(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(i){return i.lift(new c(e,t,n))}};var c=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.concurrent,this.scheduler))},e}();t.ExpandOperator=c;var l=function(e){function t(t,n,i,r){e.call(this,t),this.project=n,this.concurrent=i,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(this.buffer=[])}return i(t,e),t.dispatch=function(e){e.subscriber.subscribeToProjection(e.result,e.value,e.index)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var i=this.index++;if(this.active<this.concurrent){n.next(e);var a=r.tryCatch(this.project)(e,i);a===o.errorObject?n.error(o.errorObject.e):this.scheduler?this.add(this.scheduler.schedule(t.dispatch,0,{subscriber:this,result:a,value:e,index:i})):this.subscribeToProjection(a,e,i)}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.add(s.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(a.OuterSubscriber);t.ExpandSubscriber=l},27015:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.filter=function(e,t){return function(n){return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,n,i){e.call(this,t),this.predicate=n,this.thisArg=i,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(r.Subscriber)},94367:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(72293);t.finalize=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.callback))},e}(),s=function(e){function t(t,n){e.call(this,t),this.add(new o.Subscription(n))}return i(t,e),t}(r.Subscriber)},16700:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.find=function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new o(e,n,!1,t))}};var o=function(){function e(e,t,n,i){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=i}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();t.FindValueOperator=o;var a=function(e){function t(t,n,i,r,o){e.call(this,t),this.predicate=n,this.source=i,this.yieldIndex=r,this.thisArg=o,this.index=0}return i(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,i=this.index++;try{t.call(n||this,e,i,this.source)&&this.notifyComplete(this.yieldIndex?i:e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(r.Subscriber);t.FindValueSubscriber=a},86452:function(e,t,n){"use strict";var i=n(16700);t.findIndex=function(e,t){return function(n){return n.lift(new i.FindValueOperator(e,n,!0,t))}}},12309:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(44640);t.first=function(e,t,n){return function(i){return i.lift(new a(e,t,n,i))}};var a=function(){function e(e,t,n,i){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=i}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,n,i,r,o){e.call(this,t),this.predicate=n,this.resultSelector=i,this.defaultValue=r,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return i(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(i){return void this.destination.error(i)}n&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(i){return void this.destination.error(i)}this._emitFinal(n)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},t}(r.Subscriber)},92577:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(72293),a=n(18705),s=n(2369),c=n(49754),l=n(30764);t.groupBy=function(e,t,n,i){return function(r){return r.lift(new u(e,t,n,i))}};var u=function(){function e(e,t,n,i){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=i}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),d=function(e){function t(t,n,i,r,o){e.call(this,t),this.keySelector=n,this.elementSelector=i,this.durationSelector=r,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups="string"==typeof t?new l.FastMap:new c.Map);var i,r=n.get(t);if(this.elementSelector)try{i=this.elementSelector(e)}catch(u){this.error(u)}else i=e;if(!r){r=this.subjectSelector?this.subjectSelector():new s.Subject,n.set(t,r);var o=new f(t,r,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new f(t,r))}catch(u){return void this.error(u)}this.add(a.subscribe(new h(t,r,this)))}}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,n){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(r.Subscriber),h=function(e){function t(t,n,i){e.call(this,n),this.key=t,this.group=n,this.parent=i}return i(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(r.Subscriber),f=function(e){function t(t,n,i){e.call(this),this.key=t,this.groupSubject=n,this.refCountSubscription=i}return i(t,e),t.prototype._subscribe=function(e){var t=new o.Subscription,n=this.refCountSubscription,i=this.groupSubject;return n&&!n.closed&&t.add(new p(n)),t.add(i.subscribe(e)),t},t}(a.Observable);t.GroupedObservable=f;var p=function(e){function t(t){e.call(this),this.parent=t,t.count++}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;!t.closed&&!this.closed&&(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.Subscription)},86898:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(68668);t.ignoreElements=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype._next=function(e){o.noop()},t}(r.Subscriber)},89121:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.isEmpty=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(r.Subscriber)},4636:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(44640);t.last=function(e,t,n){return function(i){return i.lift(new a(e,t,n,i))}};var a=function(){function e(e,t,n,i){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=i}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,n,i,r,o){e.call(this,t),this.predicate=n,this.resultSelector=i,this.defaultValue=r,this.source=o,this.hasValue=!1,this.index=0,void 0!==r&&(this.lastValue=r,this.hasValue=!0)}return i(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(i){return void this.destination.error(i)}if(n){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(i){return void this.destination.error(i)}this.lastValue=n,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new o.EmptyError)},t}(r.Subscriber)},40119:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.map=function(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=o;var a=function(e){function t(t,n,i){e.call(this,t),this.project=n,this.count=0,this.thisArg=i||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(r.Subscriber)},23491:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.mapTo=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(e){function t(t,n){e.call(this,t),this.value=n}return i(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(r.Subscriber)},71177:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(94429);t.materialize=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},t}(r.Subscriber)},33499:function(e,t,n){"use strict";var i=n(97369);t.max=function(e){return i.reduce("function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}},56098:function(e,t,n){"use strict";var i=n(38781),r=n(38781);t.mergeStatic=r.merge,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(i.merge.apply(void 0,[t].concat(e)))}}},33451:function(e,t,n){"use strict";var i=n(71151),r=n(5027);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),i.mergeMap(r.identity,null,e)}},71151:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(93658),o=n(84308);t.mergeMap=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(i){return"number"==typeof t&&(n=t,t=null),i.lift(new a(e,t,n))}};var a=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=a;var s=function(e){function t(t,n,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t),this.project=n,this.resultSelector=i,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(r.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){this.resultSelector?this._notifyResultSelector(e,t,n,i):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,i){var r;try{r=this.resultSelector(e,t,n,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeMapSubscriber=s},6693:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.mergeMapTo=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof t&&(n=t,t=null),function(i){return i.lift(new a(e,t,n))}};var a=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.ish,this.resultSelector,this.concurrent))},e}();t.MergeMapToOperator=a;var s=function(e){function t(t,n,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=n,this.resultSelector=i,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,n=this.index++,i=this.ish,r=this.destination;this.active++,this._innerSub(i,r,t,e,n)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n,i,r){this.add(o.subscribeToResult(this,e,i,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.destination;this.resultSelector?this.trySelectResult(e,t,n,i):o.next(t)},t.prototype.trySelectResult=function(e,t,n,i){var r,o=this.resultSelector,a=this.destination;try{r=o(e,t,n,i)}catch(s){return void a.error(s)}a.next(r)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber);t.MergeMapToSubscriber=s},7550:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(33463),o=n(85814),a=n(93658),s=n(84308);t.mergeScan=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(i){return i.lift(new c(e,t,n))}};var c=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.accumulator,this.seed,this.concurrent))},e}();t.MergeScanOperator=c;var l=function(e){function t(t,n,i,r){e.call(this,t),this.accumulator=n,this.acc=i,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=r.tryCatch(this.accumulator)(this.acc,e);n===o.errorObject?this.destination.error(o.errorObject.e):(this.active++,this._innerSub(n,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){this.add(a.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(s.OuterSubscriber);t.MergeScanSubscriber=l},51213:function(e,t,n){"use strict";var i=n(97369);t.min=function(e){return i.reduce("function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}},27372:function(e,t,n){"use strict";var i=n(51493);t.multicast=function(e,t){return function(n){var o;if(o="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new r(o,t));var a=Object.create(n,i.connectableObservableDescriptor);return a.source=n,a.subjectFactory=o,a}};var r=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,i=this.subjectFactory(),r=n(i).subscribe(e);return r.add(t.subscribe(i)),r},e}();t.MulticastOperator=r},39459:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(94429);t.observeOn=function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=a;var s=function(e){function t(t,n,i){void 0===i&&(i=0),e.call(this,t),this.scheduler=n,this.delay=i}return i(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(r.Subscriber);t.ObserveOnSubscriber=s;var c=function(e,t){this.notification=e,this.destination=t};t.ObserveOnMessage=c},46243:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(49288),o=n(48242),a=n(84308),s=n(93658);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&o.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new c(e))}},t.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return 1===e.length&&o.isArray(e[0])&&(e=e[0]),n=e.shift(),new r.FromObservable(n,null).lift(new c(e))};var c=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.nextSources))},e}(),l=function(e){function t(t,n){e.call(this,t),this.destination=t,this.nextSources=n}return i(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(s.subscribeToResult(this,e)):this.destination.complete()},t}(a.OuterSubscriber)},92514:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.pairwise=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return i(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(r.Subscriber)},64985:function(e,t,n){"use strict";var i=n(67239),r=n(27015);t.partition=function(e,t){return function(n){return[r.filter(e,t)(n),r.filter(i.not(e,t))(n)]}}},9125:function(e,t,n){"use strict";var i=n(40119);function r(e,t){return function(n){for(var i=n,r=0;r<t;r++){var o=i[e[r]];if(void 0===o)return;i=o}return i}}t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return i.map(r(e,n))(t)}}},30268:function(e,t,n){"use strict";var i=n(2369),r=n(27372);t.publish=function(e){return e?r.multicast(function(){return new i.Subject},e):r.multicast(new i.Subject)}},57909:function(e,t,n){"use strict";var i=n(73907),r=n(27372);t.publishBehavior=function(e){return function(t){return r.multicast(new i.BehaviorSubject(e))(t)}}},61066:function(e,t,n){"use strict";var i=n(65593),r=n(27372);t.publishLast=function(){return function(e){return r.multicast(new i.AsyncSubject)(e)}}},43296:function(e,t,n){"use strict";var i=n(81959),r=n(27372);t.publishReplay=function(e,t,n,o){n&&"function"!=typeof n&&(o=n);var a="function"==typeof n?n:void 0,s=new i.ReplaySubject(e,t,o);return function(e){return r.multicast(function(){return s},a)(e)}}},96278:function(e,t,n){"use strict";var i=n(48242),r=n(24330);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return 1===e.length&&i.isArray(e[0])&&(e=e[0]),t.lift.call(r.race.apply(void 0,[t].concat(e)))}}},97369:function(e,t,n){"use strict";var i=n(64949),r=n(73935),o=n(27924),a=n(10142);t.reduce=function(e,t){return arguments.length>=2?function(n){return a.pipe(i.scan(e,t),r.takeLast(1),o.defaultIfEmpty(t))(n)}:function(t){return a.pipe(i.scan(function(t,n,i){return e(t,n,i+1)}),r.takeLast(1))(t)}}},1694:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.refCount=function(){return function(e){return e.lift(new o(e))}};var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new a(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r},e}(),a=function(e){function t(t,n){e.call(this,t),this.connectable=n}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,i&&(!n||i===n)&&i.unsubscribe()}}else this.connection=null},t}(r.Subscriber)},15329:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(70481);t.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?new o.EmptyObservable:t.lift(new a(e<0?-1:e-1,t))}};var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.count=n,this.source=i}return i(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(r.Subscriber)},63964:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(33463),a=n(85814),s=n(84308),c=n(93658);t.repeatWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,t))},e}(),u=function(e){function t(t,n,i){e.call(this,t),this.notifier=n,this.source=i,this.sourceIsBeingSubscribedTo=!0}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this,n=t.notifications,i=t.retries,r=t.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=n,this.retries=i,this.retriesSubscription=r,this},t.prototype.subscribeToRetries=function(){this.notifications=new r.Subject;var t=o.tryCatch(this.notifier)(this.notifications);if(t===a.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=c.subscribeToResult(this,t)},t}(s.OuterSubscriber)},40241:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new o(e,t))}};var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,n,i){e.call(this,t),this.count=n,this.source=i}return i(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,i=this.count;if(0===i)return e.prototype.error.call(this,t);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(r.Subscriber)},23896:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(33463),a=n(85814),s=n(84308),c=n(93658);t.retryWhen=function(e){return function(t){return t.lift(new l(e,t))}};var l=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,this.source))},e}(),u=function(e){function t(t,n,i){e.call(this,t),this.notifier=n,this.source=i}return i(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{if(n=new r.Subject,(i=o.tryCatch(this.notifier)(n))===a.errorObject)return e.prototype.error.call(this,a.errorObject.e);s=c.subscribeToResult(this,i)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=s,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,n,i,r){var o=this,a=o.errors,s=o.retries,c=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=a,this.retries=s,this.retriesSubscription=c,this.source.subscribe(this)},t}(s.OuterSubscriber)},92043:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.sample=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),i=t.subscribe(n);return i.add(o.subscribeToResult(n,this.notifier)),i},e}(),s=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return i(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,n,i,r){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(r.OuterSubscriber)},71239:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(90680);t.sampleTime=function(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.period,this.scheduler))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.period=n,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(c,n,{subscriber:this,period:n}))}return i(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(r.Subscriber);function c(e){var t=e.period;e.subscriber.notifyNext(),this.schedule(e,t)}},64949:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.scan=function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,n,i,r){e.call(this,t),this.accumulator=n,this._seed=i,this.hasSeed=r,this.index=0}return i(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=t,this.destination.next(t)},t}(r.Subscriber)},88948:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(33463),a=n(85814);t.sequenceEqual=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compareTo,this.comparor))},e}();t.SequenceEqualOperator=s;var c=function(e){function t(t,n,i){e.call(this,t),this.compareTo=n,this.comparor=i,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new l(t,this)))}return i(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this,t=e._a,n=e._b,i=e.comparor;t.length>0&&n.length>0;){var r=t.shift(),s=n.shift(),c=!1;i?(c=o.tryCatch(i)(r,s))===a.errorObject&&this.destination.error(a.errorObject.e):c=r===s,c||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(r.Subscriber);t.SequenceEqualSubscriber=c;var l=function(e){function t(t,n){e.call(this,t),this.parent=n}return i(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(r.Subscriber)},35473:function(e,t,n){"use strict";var i=n(27372),r=n(1694),o=n(2369);function a(){return new o.Subject}t.share=function(){return function(e){return r.refCount()(i.multicast(a)(e))}}},62704:function(e,t,n){"use strict";var i=n(81959);t.shareReplay=function(e,t,n){return function(r){return r.lift(function(e,t,n){var r,o,a=0,s=!1,c=!1;return function(l){a++,(!r||s)&&(s=!1,r=new i.ReplaySubject(e,t,n),o=l.subscribe({next:function(e){r.next(e)},error:function(e){s=!0,r.error(e)},complete:function(){c=!0,r.complete()}}));var u=r.subscribe(this);return function(){a--,u.unsubscribe(),o&&0===a&&c&&o.unsubscribe()}}}(e,t,n))}}},92223:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(44640);t.single=function(e){return function(t){return t.lift(new a(e,t))}};var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.predicate=n,this.source=i,this.seenValue=!1,this.index=0}return i(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},t}(r.Subscriber)},11189:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.skip=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return i(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(r.Subscriber)},73346:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(11758);t.skipLast=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(0===this._skipCount?new r.Subscriber(e):new s(e,this._skipCount))},e}(),s=function(e){function t(t,n){e.call(this,t),this._skipCount=n,this._count=0,this._ring=new Array(n)}return i(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var i=n%t,r=this._ring,o=r[i];r[i]=e,this.destination.next(o)}},t}(r.Subscriber)},12928:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.skipUntil=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,n))}return i(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,i,r){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(r.OuterSubscriber)},69415:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.skipWhile=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.skipping=!0,this.index=0}return i(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(n){this.destination.error(n)}},t}(r.Subscriber)},30673:function(e,t,n){"use strict";var i=n(96177),r=n(80478),o=n(70481),a=n(92197),s=n(41503);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var n=e[e.length-1];s.isScheduler(n)?e.pop():n=null;var c=e.length;return a.concat(1===c?new r.ScalarObservable(e[0],n):c>1?new i.ArrayObservable(e,n):new o.EmptyObservable(n),t)}}},10118:function(e,t,n){"use strict";var i=n(82966);t.subscribeOn=function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new r(e,t))}};var r=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new i.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},77243:function(e,t,n){"use strict";var i=n(18483),r=n(5027);t.switchAll=function(){return i.switchMap(r.identity)}},18483:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.switchMap=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.project=n,this.resultSelector=i,this.index=0}return i(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,i,r){this.resultSelector?this._tryNotifyNext(e,t,n,i):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,n,i){var r;try{r=this.resultSelector(e,t,n,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)},t}(r.OuterSubscriber)},10684:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.switchMapTo=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observable,this.resultSelector))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.inner=n,this.resultSelector=i,this.index=0}return i(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,i,r){var o=this.destination;this.resultSelector?this.tryResultSelector(e,t,n,i):o.next(t)},t.prototype.tryResultSelector=function(e,t,n,i){var r,o=this.resultSelector,a=this.destination;try{r=o(e,t,n,i)}catch(s){return void a.error(s)}a.next(r)},t}(r.OuterSubscriber)},44396:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(11758),a=n(70481);t.take=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new s(e))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return i(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(r.Subscriber)},73935:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(11758),a=n(70481);t.takeLast=function(e){return function(t){return 0===e?new a.EmptyObservable:t.lift(new s(e))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,n){e.call(this,t),this.total=n,this.ring=new Array,this.count=0}return i(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=t++%n;e.next(i[o])}e.complete()},t}(r.Subscriber)},77842:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.takeUntil=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,n){e.call(this,t),this.notifier=n,this.add(o.subscribeToResult(this,n))}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.complete()},t.prototype.notifyComplete=function(){},t}(r.OuterSubscriber)},4629:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.takeWhile=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(r.Subscriber)},97171:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109);t.tap=function(e,t,n){return function(i){return i.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.nextOrObserver,this.error,this.complete))},e}(),a=function(e){function t(t,n,i,o){e.call(this,t);var a=new r.Subscriber(n,i,o);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return i(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),this.destination.error(t.syncErrorThrown?t.syncErrorValue:e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(r.Subscriber)},5144:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.defaultThrottleConfig={leading:!0,trailing:!1},t.throttle=function(e,n){return void 0===n&&(n=t.defaultThrottleConfig),function(t){return t.lift(new a(e,n.leading,n.trailing))}};var a=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector,this.leading,this.trailing))},e}(),s=function(e){function t(t,n,i,r){e.call(this,t),this.destination=t,this.durationSelector=n,this._leading=i,this._trailing=r,this._hasTrailingValue=!1}return i(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=o.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}},t.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype._sendTrailing=function(){var e=this;e.throttled&&e._trailing&&e._hasTrailingValue&&(e.destination.next(e._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(e,t,n,i,r){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(r.OuterSubscriber)},45949:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(90680),a=n(5144);t.throttleTime=function(e,t,n){return void 0===t&&(t=o.async),void 0===n&&(n=a.defaultThrottleConfig),function(i){return i.lift(new s(e,t,n.leading,n.trailing))}};var s=function(){function e(e,t,n,i){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=i}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),c=function(e){function t(t,n,i,r,o){e.call(this,t),this.duration=n,this.scheduler=i,this.leading=r,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}return i(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(r.Subscriber);function l(e){e.subscriber.clearThrottle()}},37848:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(90680);t.timeInterval=function(e){return void 0===e&&(e=o.async),function(t){return t.lift(new s(e))}};var a=function(e,t){this.value=e,this.interval=t};t.TimeInterval=a;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler))},e}(),c=function(e){function t(t,n){e.call(this,t),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return i(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),n=t-this.lastTime;this.lastTime=t,this.destination.next(new a(e,n))},t}(r.Subscriber)},99507:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(90680),o=n(783),a=n(42109),s=n(13815);t.timeout=function(e,t){void 0===t&&(t=r.async);var n=o.isDate(e),i=n?+e-t.now():Math.abs(e);return function(e){return e.lift(new c(i,n,t,new s.TimeoutError))}};var c=function(){function e(e,t,n,i){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=n,this.errorInstance=i}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),l=function(e){function t(t,n,i,r,o){e.call(this,t),this.absoluteTimeout=n,this.waitFor=i,this.scheduler=r,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return i(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(a.Subscriber)},92341:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(90680),o=n(783),a=n(84308),s=n(93658);t.timeoutWith=function(e,t,n){return void 0===n&&(n=r.async),function(i){var r=o.isDate(e),a=r?+e-n.now():Math.abs(e);return i.lift(new c(a,r,t,n))}};var c=function(){function e(e,t,n,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=i}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),l=function(e){function t(t,n,i,r,o){e.call(this,t),this.absoluteTimeout=n,this.waitFor=i,this.withObservable=r,this.scheduler=o,this.action=null,this.scheduleTimeout()}return i(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(s.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(a.OuterSubscriber)},62688:function(e,t,n){"use strict";var i=n(90680),r=n(40119);t.timestamp=function(e){return void 0===e&&(e=i.async),r.map(function(t){return new o(t,e.now())})};var o=function(e,t){this.value=e,this.timestamp=t};t.Timestamp=o},17117:function(e,t,n){"use strict";var i=n(97369);function r(e,t,n){return 0===n?[t]:(e.push(t),e)}t.toArray=function(){return i.reduce(r,[])}},30459:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(84308),a=n(93658);t.window=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new c(e),i=t.subscribe(n);return i.closed||n.add(a.subscribeToResult(n,this.windowBoundaries)),i},e}(),c=function(e){function t(t){e.call(this,t),this.window=new r.Subject,t.next(this.window)}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new r.Subject;t.next(n)},t}(o.OuterSubscriber)},24974:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42109),o=n(2369);t.windowCount=function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.windowSize,this.startWindowEvery))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.destination=t,this.windowSize=n,this.startWindowEvery=i,this.windows=[new o.Subject],this.count=0,t.next(this.windows[0])}return i(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,r=this.windows,a=r.length,s=0;s<a&&!this.closed;s++)r[s].next(e);var c=this.count-i+1;if(c>=0&&c%t==0&&!this.closed&&r.shift().complete(),++this.count%t==0&&!this.closed){var l=new o.Subject;r.push(l),n.next(l)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(r.Subscriber)},42603:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(90680),a=n(42109),s=n(39479),c=n(41503);t.windowTime=function(e){var t=o.async,n=null,i=Number.POSITIVE_INFINITY;return c.isScheduler(arguments[3])&&(t=arguments[3]),c.isScheduler(arguments[2])?t=arguments[2]:s.isNumeric(arguments[2])&&(i=arguments[2]),c.isScheduler(arguments[1])?t=arguments[1]:s.isNumeric(arguments[1])&&(n=arguments[1]),function(r){return r.lift(new l(e,n,i,t))}};var l=function(){function e(e,t,n,i){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=i}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),u=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return i(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(r.Subject),d=function(e){function t(t,n,i,r,o){e.call(this,t),this.destination=t,this.windowTimeSpan=n,this.windowCreationInterval=i,this.maxWindowSize=r,this.scheduler=o,this.windows=[];var a=this.openWindow();if(null!==i&&i>=0){var s={windowTimeSpan:n,windowCreationInterval:i,subscriber:this,scheduler:o};this.add(o.schedule(p,n,{subscriber:this,window:a,context:null})),this.add(o.schedule(f,i,s))}else this.add(o.schedule(h,n,{subscriber:this,window:a,windowTimeSpan:n}))}return i(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,i=0;i<n;i++){var r=t[i];r.closed||(r.next(e),r.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(r))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new u;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(a.Subscriber);function h(e){var t=e.subscriber,n=e.windowTimeSpan,i=e.window;i&&t.closeWindow(i),e.window=t.openWindow(),this.schedule(e,n)}function f(e){var t=e.windowTimeSpan,n=e.subscriber,i=e.scheduler,r=e.windowCreationInterval,o=n.openWindow(),a=this,s={action:a,subscription:null};s.subscription=i.schedule(p,t,{subscriber:n,window:o,context:s}),a.add(s.subscription),a.schedule(e,r)}function p(e){var t=e.subscriber,n=e.window,i=e.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),t.closeWindow(n)}},59048:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(72293),a=n(33463),s=n(85814),c=n(84308),l=n(93658);t.windowToggle=function(e,t){return function(n){return n.lift(new u(e,t))}};var u=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,n,i){e.call(this,t),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(this.openSubscription=l.subscribeToResult(this,n,n))}return i(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,i=0;i<n;i++)t[i].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,r=-1;++r<i;){var o=n[r];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,i=-1;++i<n;){var r=t[i];r.window.complete(),r.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var i=e[n];i.window.unsubscribe(),i.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,i,c){if(e===this.openings){var u=a.tryCatch(this.closingSelector)(t);if(u===s.errorObject)return this.error(s.errorObject.e);var d=new r.Subject,h=new o.Subscription,f={window:d,subscription:h};this.contexts.push(f);var p=l.subscribeToResult(this,u,f);p.closed?this.closeWindow(this.contexts.length-1):(p.context=f,h.add(p)),this.destination.next(d)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],i=n.window,r=n.subscription;t.splice(e,1),i.complete(),r.unsubscribe()}},t}(c.OuterSubscriber)},4750:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(33463),a=n(85814),s=n(84308),c=n(93658);t.windowWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){e.call(this,t),this.destination=t,this.closingSelector=n,this.openWindow()}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.openWindow(r)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n=this.window=new r.Subject;this.destination.next(n);var i=o.tryCatch(this.closingSelector)();if(i===a.errorObject){var s=a.errorObject.e;this.destination.error(s),this.window.error(s)}else this.add(this.closingNotification=c.subscribeToResult(this,i))},t}(s.OuterSubscriber)},91698:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(84308),o=n(93658);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new a(e,n))}};var a=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observables,this.project))},e}(),s=function(e){function t(t,n,i){e.call(this,t),this.observables=n,this.project=i,this.toRespond=[];var r=n.length;this.values=new Array(r);for(var a=0;a<r;a++)this.toRespond.push(a);for(a=0;a<r;a++){var s=n[a];this.add(o.subscribeToResult(this,s,s,a))}}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.values[n]=t;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(r.OuterSubscriber)},9477:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(96177),o=n(48242),a=n(42109),s=n(84308),c=n(93658),l=n(72121);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),new r.ArrayObservable(e).lift(new d(n))}t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(u.apply(void 0,[t].concat(e)))}},t.zipStatic=u;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},e}();t.ZipOperator=d;var h=function(e){function t(t,n,i){void 0===i&&(i=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;o.isArray(e)?t.push(new p(e)):t.push("function"==typeof e[l.iterator]?new f(e[l.iterator]()):new v(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var n=0;n<t;n++){var i=e[n];i.stillUnsubscribed?this.add(i.subscribe(i,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++)if("function"==typeof(a=e[i]).hasValue&&!a.hasValue())return;var r=!1,o=[];for(i=0;i<t;i++){var a,s=(a=e[i]).next();if(a.hasCompleted()&&(r=!0),s.done)return void n.complete();o.push(s.value)}this.project?this._tryProject(o):n.next(o),r&&n.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(a.Subscriber);t.ZipSubscriber=h;var f=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),p=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[l.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),v=function(e){function t(t,n,i){e.call(this,t),this.parent=n,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return i(t,e),t.prototype[l.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,r){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return c.subscribeToResult(this,this.observable,this,t)},t}(s.OuterSubscriber)},33310:function(e,t,n){"use strict";var i=n(9477);t.zipAll=function(e){return function(t){return t.lift(new i.ZipOperator(e))}}},28101:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this)}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(72293).Subscription);t.Action=r},67529:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(12624),o=n(95018),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return i(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=o.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(o.AnimationFrame.cancelAnimationFrame(n),t.scheduled=void 0)},t}(r.AsyncAction);t.AnimationFrameAction=a},68909:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(42704).AsyncScheduler);t.AnimationFrameScheduler=r},3496:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(42982),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return i(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=r.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(r.Immediate.clearImmediate(n),t.scheduled=void 0)},t}(n(12624).AsyncAction);t.AsapAction=o},25766:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(42704).AsyncScheduler);t.AsapScheduler=r},12624:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(80019),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.pending=!1,this.work=n}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),r.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?t:void r.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,i=void 0;try{this.work(e)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(n(28101).Action);t.AsyncAction=o},42704:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return i(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(n(11965).Scheduler);t.AsyncScheduler=r},7100:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},t}(n(12624).AsyncAction);t.QueueAction=r},77373:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(n(42704).AsyncScheduler);t.QueueScheduler=r},18353:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(12624),o=function(e){function t(t,n){var i=this;void 0===t&&(t=a),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this,t,function(){return i.frame}),this.maxFrames=n,this.frame=0,this.index=-1}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,i=this.maxFrames;(t=n.shift())&&(this.frame=t.delay)<=i&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(n(42704).AsyncScheduler);t.VirtualTimeScheduler=o;var a=function(e){function t(t,n,i){void 0===i&&(i=t.index+=1),e.call(this,t,n),this.scheduler=t,this.work=n,this.index=i,this.active=!0,this.index=t.index=i}return i(t,e),t.prototype.schedule=function(n,i){if(void 0===i&&(i=0),!this.id)return e.prototype.schedule.call(this,n,i);this.active=!1;var r=new t(this.scheduler,this.work);return this.add(r),r.schedule(n,i)},t.prototype.requestAsyncId=function(e,n,i){void 0===i&&(i=0),this.delay=e.frame+i;var r=e.actions;return r.push(this),r.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(r.AsyncAction);t.VirtualAction=a},12948:function(e,t,n){"use strict";var i=n(67529),r=n(68909);t.animationFrame=new r.AnimationFrameScheduler(i.AnimationFrameAction)},85522:function(e,t,n){"use strict";var i=n(3496),r=n(25766);t.asap=new r.AsapScheduler(i.AsapAction)},90680:function(e,t,n){"use strict";var i=n(12624),r=n(42704);t.async=new r.AsyncScheduler(i.AsyncAction)},97088:function(e,t,n){"use strict";var i=n(7100),r=n(77373);t.queue=new r.QueueScheduler(i.QueueAction)},72121:function(e,t,n){"use strict";var i=n(80019);function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var i=e.Map;if(i)for(var r=Object.getOwnPropertyNames(i.prototype),o=0;o<r.length;++o){var a=r[o];if("entries"!==a&&"size"!==a&&i.prototype[a]===i.prototype.entries)return a}return"@@iterator"}t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},45783:function(e,t,n){"use strict";var i=n(80019);function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},28592:function(e,t,n){"use strict";var i=n(80019).root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},95260:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(72293),a=n(60198),s=n(34248),c=function(e){function t(t,n){e.call(this,function(e){var t=this,n=t.logSubscribedFrame();return e.add(new o.Subscription(function(){t.logUnsubscribedFrame(n)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=n}return i(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,n=0;n<t;n++){var i=this.messages[n];e.add(this.scheduler.schedule(function(e){e.message.notification.observe(e.subscriber)},i.frame,{message:i,subscriber:e}))}},t}(r.Observable);t.ColdObservable=c,s.applyMixins(c,[a.SubscriptionLoggable])},17213:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(2369),o=n(72293),a=n(60198),s=n(34248),c=function(e){function t(t,n){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=n}return i(t,e),t.prototype._subscribe=function(t){var n=this,i=n.logSubscribedFrame();return t.add(new o.Subscription(function(){n.logUnsubscribedFrame(i)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,n=0;n<t;n++)!function(){var t=e.messages[n];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(r.Subject);t.HotObservable=c,s.applyMixins(c,[a.SubscriptionLoggable])},46893:function(e,t){"use strict";t.SubscriptionLog=function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}},60198:function(e,t,n){"use strict";var i=n(46893),r=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new i.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions;t[e]=new i.SubscriptionLog(t[e].subscribedFrame,this.scheduler.now())},e}();t.SubscriptionLoggable=r},24482:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n(18705),o=n(94429),a=n(95260),s=n(17213),c=n(46893),l=n(18353),u=function(e){function t(t){e.call(this,l.VirtualAction,750),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return i(t,e),t.prototype.createTime=function(e){var n=e.indexOf("|");if(-1===n)throw new Error('marble diagram for time should have a completion marker "|"');return n*t.frameTimeFactor},t.prototype.createColdObservable=function(e,n,i){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var r=t.parseMarbles(e,n,i),o=new a.ColdObservable(r,this);return this.coldObservables.push(o),o},t.prototype.createHotObservable=function(e,n,i){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var r=t.parseMarbles(e,n,i),o=new s.HotObservable(r,this);return this.hotObservables.push(o),o},t.prototype.materializeInnerObservable=function(e,t){var n=this,i=[];return e.subscribe(function(e){i.push({frame:n.frame-t,notification:o.Notification.createNext(e)})},function(e){i.push({frame:n.frame-t,notification:o.Notification.createError(e)})},function(){i.push({frame:n.frame-t,notification:o.Notification.createComplete()})}),i},t.prototype.expectObservable=function(e,n){var i=this;void 0===n&&(n=null);var a,s=[],c={actual:s,ready:!1},l=t.parseMarblesAsSubscriptions(n).unsubscribedFrame;return this.schedule(function(){a=e.subscribe(function(e){var t=e;e instanceof r.Observable&&(t=i.materializeInnerObservable(t,i.frame)),s.push({frame:i.frame,notification:o.Notification.createNext(t)})},function(e){s.push({frame:i.frame,notification:o.Notification.createError(e)})},function(){s.push({frame:i.frame,notification:o.Notification.createComplete()})})},0),l!==Number.POSITIVE_INFINITY&&this.schedule(function(){return a.unsubscribe()},l),this.flushTests.push(c),{toBe:function(e,n,i){c.ready=!0,c.expected=t.parseMarbles(e,n,i,!0)}}},t.prototype.expectSubscriptions=function(e){var n={actual:e,ready:!1};return this.flushTests.push(n),{toBe:function(e){var i="string"==typeof e?[e]:e;n.ready=!0,n.expected=i.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var n=this.flushTests.filter(function(e){return e.ready});n.length>0;){var i=n.shift();this.assertDeepEqual(i.actual,i.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new c.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,n=-1,i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=0;o<t;o++){var a=o*this.frameTimeFactor,s=e[o];switch(s){case"-":case" ":break;case"(":n=a;break;case")":n=-1;break;case"^":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=n>-1?n:a;break;case"!":if(r!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");r=n>-1?n:a;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+s+"'.")}}return r<0?new c.SubscriptionLog(i):new c.SubscriptionLog(i,r)},t.parseMarbles=function(e,t,n,i){if(void 0===i&&(i=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var r=e.length,s=[],c=e.indexOf("^"),l=-1===c?0:c*-this.frameTimeFactor,u="object"!=typeof t?function(e){return e}:function(e){return i&&t[e]instanceof a.ColdObservable?t[e].messages:t[e]},d=-1,h=0;h<r;h++){var f=h*this.frameTimeFactor+l,p=void 0,v=e[h];switch(v){case"-":case" ":case"^":break;case"(":d=f;break;case")":d=-1;break;case"|":p=o.Notification.createComplete();break;case"#":p=o.Notification.createError(n||"error");break;default:p=o.Notification.createNext(u(v))}p&&s.push({frame:d>-1?d:f,notification:p})}return s},t}(l.VirtualTimeScheduler);t.TestScheduler=u},95018:function(e,t,n){"use strict";var i=n(80019),r=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})};t.RequestAnimationFrameDefinition=r,t.AnimationFrame=new r(i.root)},11758:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ArgumentOutOfRangeError=i},44640:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.EmptyError=i},30764:function(e,t){"use strict";var n=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var n=this.values;for(var i in n)n.hasOwnProperty(i)&&null!==n[i]&&e.call(t,n[i],i)},e.prototype.clear=function(){this.values={}},e}();t.FastMap=n},42982:function(e,t,n){"use strict";var i=n(80019),r=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.setImmediate=this.canUseProcessNextTick()?this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.createReadyStateChangeSetImmediate():this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=function e(){var t=e.handler;"function"==typeof t?t.apply(void 0,e.args):new Function(""+t)()};return i.handler=e,i.args=t,i},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,n=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,n)),n};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",n=function n(i){var r=n.instance;i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(t)&&r.runIfPresent(+i.data.slice(t.length))};n.instance=this,e.addEventListener("message",n,!1);var i=function e(){var t=e,n=t.messagePrefix,i=t.instance,r=i.addFromSetImmediateArguments(arguments);return i.root.postMessage(n+r,"*"),r};return i.instance=this,i.messagePrefix=t,i},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){e.runIfPresent(t.data)};var n=function e(){var t=e,n=t.channel,i=t.instance,r=i.addFromSetImmediateArguments(arguments);return n.port2.postMessage(r),r};return n.channel=t,n.instance=this,n},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,n=t.root,i=n.document,r=i.documentElement,o=t.addFromSetImmediateArguments(arguments),a=i.createElement("script");return a.onreadystatechange=function(){t.runIfPresent(o),a.onreadystatechange=null,r.removeChild(a),a=null},r.appendChild(a),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,n=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,n),0),n};return e.instance=this,e},e}();t.ImmediateDefinition=r,t.Immediate=new r(i.root)},49754:function(e,t,n){"use strict";var i=n(80019),r=n(77612);t.Map=i.root.Map||r.MapPolyfill},77612:function(e,t){"use strict";var n=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var n=this._keys.indexOf(e);return-1===n?(this._keys.push(e),this._values.push(t),this.size++):this._values[n]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var n=0;n<this.size;n++)e.call(t,this._values[n],this._keys[n])},e}();t.MapPolyfill=n},6594:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=i},40317:function(e,t,n){"use strict";var i=n(80019);function r(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}t.minimalSetImpl=r,t.Set=i.root.Set||r()},13815:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.TimeoutError=i},84536:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=i},34248:function(e,t){"use strict";t.applyMixins=function(e,t){for(var n=0,i=t.length;n<i;n++)for(var r=t[n],o=Object.getOwnPropertyNames(r.prototype),a=0,s=o.length;a<s;a++){var c=o[a];e.prototype[c]=r.prototype[c]}}},37333:function(e,t,n){"use strict";var i=n(80019);function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=t.length,r=0;r<i;r++){var o=t[r];for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}function o(e){return e.Object.assign||r}t.assignImpl=r,t.getAssign=o,t.assign=o(i.root)},85814:function(e,t){"use strict";t.errorObject={e:{}}},5027:function(e,t){"use strict";t.identity=function(e){return e}},48242:function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},26676:function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},783:function(e,t){"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},7633:function(e,t){"use strict";t.isFunction=function(e){return"function"==typeof e}},39479:function(e,t,n){"use strict";var i=n(48242);t.isNumeric=function(e){return!i.isArray(e)&&e-parseFloat(e)+1>=0}},1856:function(e,t){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},35130:function(e,t){"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},41503:function(e,t){"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},68668:function(e,t){"use strict";t.noop=function(){}},67239:function(e,t){"use strict";t.not=function(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}},10142:function(e,t,n){"use strict";var i=n(68668);function r(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:i.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r(e)},t.pipeFromArray=r},80019:function(e,t){"use strict";var n="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r="undefined"!=typeof global&&global,o=n||r||i;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()},93658:function(e,t,n){"use strict";var i=n(80019),r=n(26676),o=n(35130),a=n(1856),s=n(18705),c=n(72121),l=n(36888),u=n(45783);t.subscribeToResult=function(e,t,n,d){var h=new l.InnerSubscriber(e,n,d);if(h.closed)return null;if(t instanceof s.Observable)return t._isScalar?(h.next(t.value),h.complete(),null):(h.syncErrorThrowable=!0,t.subscribe(h));if(r.isArrayLike(t)){for(var f=0,p=t.length;f<p&&!h.closed;f++)h.next(t[f]);h.closed||h.complete()}else{if(o.isPromise(t))return t.then(function(e){h.closed||(h.next(e),h.complete())},function(e){return h.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),h;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var g=v.next();if(g.done){h.complete();break}if(h.next(g.value),h.closed)break}else if(t&&"function"==typeof t[u.observable]){var m=t[u.observable]();if("function"==typeof m.subscribe)return m.subscribe(new l.InnerSubscriber(e,n,d));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=a.isObject(t)?"an invalid object":"'"+t+"'";h.error(new TypeError("You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},18154:function(e,t,n){"use strict";var i=n(42109),r=n(28592),o=n(78731);t.toSubscriber=function(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[r.rxSubscriber])return e[r.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(o.empty)}},33463:function(e,t,n){"use strict";var i,r=n(85814);function o(){try{return i.apply(this,arguments)}catch(e){return r.errorObject.e=e,r.errorObject}}t.tryCatch=function(e){return i=e,o}},30107:function(e,n,r){"use strict";r.r(n),r.d(n,{PagesModule:function(){return Rs}});var s=r(38583),c=(r(79765),r(38634),r(88002)),u=r(45435),h=(r(43190),r(46782),r(37716));r(9112),r(58071),r(18891),r(15257),r(13653),r(54395),r(39761);try{"undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Pn){!1}var p=r(39075),m={NORMAL:0,CLICK:1,KEYBOARD:2,SWIPE:3,LOAD:4,AUTOPLAY:5};m[m.NORMAL]="NORMAL",m[m.CLICK]="CLICK",m[m.KEYBOARD]="KEYBOARD",m[m.SWIPE]="SWIPE",m[m.LOAD]="LOAD",m[m.AUTOPLAY]="AUTOPLAY";var b=new h.OlP("KEYBOARD_CONFIGURATION"),y=function(){var e=function(){function e(t){l(this,e),this.config=t,this.shortcuts=this.config&&this.config.shortcuts?this.config.shortcuts:["ctrl+s","meta+s"],this.config&&!this.config.disableSsrWorkaround&&"undefined"!=typeof window&&(r(13544),this.mousetrap=new Mousetrap)}return d(e,[{key:"add",value:function(e){this.config&&!this.config.disableSsrWorkaround&&"undefined"!=typeof window&&this.mousetrap.bind(this.shortcuts,function(t,n){t.preventDefault?t.preventDefault():t.returnValue=!1,e(t,n)})}},{key:"reset",value:function(){this.config&&!this.config.disableSsrWorkaround&&"undefined"!=typeof window&&this.mousetrap.reset()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(b))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),k=function(){function e(){l(this,e),this.navigate=new h.vpe,this.close=new h.vpe,this.update=new h.vpe,this.autoPlay=new h.vpe}return d(e,[{key:"openGallery",value:function(e,t){if(void 0===e||e<0||t<0)throw new Error("Cannot open gallery via GalleryService with either index<0 or galleryId<0 or galleryId===undefined");this.navigate.emit({galleryId:e,index:t})}},{key:"navigateGallery",value:function(e,t){if(void 0===e||e<0||t<0)throw new Error("Cannot navigate via GalleryService with either index<0 or galleryId<0 or galleryId===undefined");this.navigate.emit({galleryId:e,index:t})}},{key:"closeGallery",value:function(e){if(void 0===e||e<0)throw new Error("Cannot close gallery via GalleryService with galleryId<0 or galleryId===undefined");this.close.emit(e)}},{key:"updateGallery",value:function(e,t,n){if(void 0===e||e<0||t<0)throw new Error("Cannot update gallery via GalleryService with either index<0 or galleryId<0 or galleryId===undefined");if(!n)throw new Error("Cannot update gallery via GalleryService, because image is not valid");this.update.emit({galleryId:e,index:t,image:n})}},{key:"play",value:function(e){if(void 0===e||e<0)throw new Error("Cannot play gallery via GalleryService with galleryId<0 or galleryId===undefined");this.autoPlay.emit({galleryId:e,result:!0})}},{key:"stop",value:function(e){if(void 0===e||e<0)throw new Error("Cannot stop gallery via GalleryService with galleryId<0 or galleryId===undefined");this.autoPlay.emit({galleryId:e,result:!1})}}]),e}();k.\u0275fac=function(e){return new(e||k)},k.\u0275prov=h.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k.ngInjectableDef=(0,h.Ez6)({factory:function(){return new k},token:k,providedIn:"root"});var _={ALWAYS_HIDDEN:1,ALWAYS_VISIBLE:2,HIDE_IF_EMPTY:3};_[_.ALWAYS_HIDDEN]="ALWAYS_HIDDEN",_[_.ALWAYS_VISIBLE]="ALWAYS_VISIBLE",_[_.HIDE_IF_EMPTY]="HIDE_IF_EMPTY";var x={ESC:27,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40};x[x.ESC]="ESC",x[x.LEFT_ARROW]="LEFT_ARROW",x[x.RIGHT_ARROW]="RIGHT_ARROW",x[x.UP_ARROW]="UP_ARROW",x[x.DOWN_ARROW]="DOWN_ARROW";var T={STANDARD:1,CIRCULAR:2,BARS:3,DOTS:4,CUBE_FLIPPING:5,CIRCLES:6,EXPLOSING_SQUARES:7};T[T.STANDARD]="STANDARD",T[T.CIRCULAR]="CIRCULAR",T[T.BARS]="BARS",T[T.DOTS]="DOTS",T[T.CUBE_FLIPPING]="CUBE_FLIPPING",T[T.CIRCLES]="CIRCLES",T[T.EXPLOSING_SQUARES]="EXPLOSING_SQUARES";var A={ROW:1,COLUMN:2,GRID:3,CUSTOM:4};A[A.ROW]="ROW",A[A.COLUMN]="COLUMN",A[A.GRID]="GRID",A[A.CUSTOM]="CUSTOM";var S=function(){function e(){l(this,e),this.ids=new Map}return d(e,[{key:"checkAndAdd",value:function(e){if(!Number.isInteger(e)||e<0)throw new Error('You must provide a valid [id]="unique integer > 0 here" to the gallery/carousel in your template');if(this.ids.get(e))throw new Error("Cannot create gallery with id=".concat(e," because already used in your application. This must be a unique integer >= 0"));return this.ids.set(e,e),!0}},{key:"remove",value:function(e){if(!Number.isInteger(e)||e<0)throw new Error('You must provide a valid [id]="unique integer > 0 here" to the gallery/carousel in your template');return this.ids.delete(e),!0}}]),e}();S.\u0275fac=function(e){return new(e||S)},S.\u0275prov=h.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S.ngInjectableDef=(0,h.Ez6)({factory:function(){return new S},token:S,providedIn:"root"});var C={DEFAULT:1,SIMPLE:2,ADVANCED:3,FULL:4,CUSTOM:5};C[C.DEFAULT]="DEFAULT",C[C.SIMPLE]="SIMPLE",C[C.ADVANCED]="ADVANCED",C[C.FULL]="FULL",C[C.CUSTOM]="CUSTOM";var O={DELETE:1,EXTURL:2,DOWNLOAD:3,CLOSE:4,CUSTOM:5,FULLSCREEN:6};O[O.DELETE]="DELETE",O[O.EXTURL]="EXTURL",O[O.DOWNLOAD]="DOWNLOAD",O[O.CLOSE]="CLOSE",O[O.CUSTOM]="CUSTOM",O[O.FULLSCREEN]="FULLSCREEN";var E=function(){var e,t=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,[{key:"buildHammer",value:function(e){return new Hammer(e,{touchAction:"pan-y"})}}]),t}(p.hm);return t.\u0275fac=function(n){return(e||(e=h.n5z(t)))(n||t)},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac}),t}(),P=function(){var e=function(){function e(){l(this,e)}return d(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:b,useValue:t||{}},{provide:y,useFactory:I,deps:[b]}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[{provide:p.ok,useClass:E}],imports:[[s.ez]]}),e}();function I(e){return new y(e)}var M=r(77963),N=r(8307),L=r(48685),R=function(){var e=function(){function e(t,n){l(this,e),this.router=t,this.routerHelperService=n}return d(e,[{key:"canActivate",value:function(e,t){var n;e.data={user:JSON.parse(localStorage.getItem("user")),token:localStorage.getItem("token")};var i=null===(n=e.data)||void 0===n?void 0:n.token;return i&&0!==Object.keys(i).length?(this.getStateUrl(e,t.url),!0):this.routerHelperService.redirectToLogin()}},{key:"canActivateChild",value:function(e,t){return e.data?(this.getStateUrl(e,t.url),!0):this.canActivate(e,t)}},{key:"getStateUrl",value:function(e,t){var n=e.routeConfig.path;if(!n)return n;var i=e.routeConfig.path.split("/:");if(i.length){var r=i[0],o=t.indexOf(r);return o+=r.length,t.substr(0,o)}}},{key:"canLoad",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(N.F0),h.LFG(L.b))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),j=r(98616),D=r(67329),V=r(8403),Z=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/comment"}return d(e,[{key:"getBlogComments",value:function(e){return this.httpClient.getObservable(this.url+"/blog",{params:e}).toPromise()}},{key:"getProductComments",value:function(e){return this.httpClient.getObservable(this.url+"/product",{params:e}).toPromise()}},{key:"create",value:function(e){return this.httpClient.postObservable(this.url,e).toPromise()}},{key:"update",value:function(e){return this.httpClient.putObservable(this.url,e).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),z=r(50886),F=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/blog",this.urlUser=this.url+"/user",this.top=this.url+"/topblog",this.recent=this.url+"/recentblog"}return d(e,[{key:"get",value:function(e){return this.httpClient.getObservable(this.urlUser,e).toPromise()}},{key:"getTop",value:function(e){return this.httpClient.getObservable(this.top,e).toPromise()}},{key:"getRecent",value:function(e){return this.httpClient.getObservable(this.recent,e).toPromise()}},{key:"getBlog",value:function(e){return this.httpClient.getObservable("".concat(this.url,"/").concat(e),e).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),q=r(41299),B=r(59579),U=r(3679);function H(e,t){1&e&&(h.TgZ(0,"span",11),h._uU(1,"\u2605"),h.qZA()),2&e&&h.ekj("filled",100===t.fill)}function W(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"form",4),h.NdJ("ngSubmit",function(){return h.CHM(n),h.oxw().Submit()}),h.TgZ(1,"div",5),h.TgZ(2,"div",6),h._UZ(3,"textarea",7),h.qZA(),h.TgZ(4,"div",8),h.TgZ(5,"ngb-rating",9),h.NdJ("rateChange",function(e){return h.CHM(n),h.oxw().currentRate=e}),h.YNc(6,H,2,2,"ng-template"),h.qZA(),h.qZA(),h.TgZ(7,"div",8),h.TgZ(8,"button",10),h._uU(9,"Send"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("formGroup",i.commentForm),h.xp6(5),h.Q6J("max",5)("rate",i.currentRate)}}function Y(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",12),h.TgZ(1,"span"),h._uU(2,"Please "),h.TgZ(3,"span",13),h.NdJ("click",function(){return h.CHM(n),h.oxw().returnLogin()}),h._uU(4,"Login "),h.qZA(),h._uU(5," to comment"),h.qZA(),h.qZA()}}var J=function(){var e=function(){function e(t,n,i,r,o){l(this,e),this.commentService=t,this.fb=n,this.messageService=i,this.routerHelper=r,this.authService=o,this.action=new h.vpe,this.currentRate=1}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.subDataUser=this.authService.callUserInfo.subscribe(function(t){e.isLoading=Boolean(t),e.initForm()})}},{key:"initForm",value:function(){this.commentForm=this.fb.group({entityId:[this.dataComment.entityId],entityType:[this.dataComment.entityType],content:[""],rating:[this.dataComment.rating]})}},{key:"Submit",value:function(){var e=this;this.commentService.create(this.commentForm.value).then(function(t){e.initForm(),e.action.emit()}).catch(function(t){e.messageService.alert(t.error.message)})}},{key:"returnLogin",value:function(){this.routerHelper.redirectToLogin()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Z),h.Y36(U.qu),h.Y36(D.ez),h.Y36(L.b),h.Y36(D.e8))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-comment"]],inputs:{dataComment:"dataComment"},outputs:{action:"action"},features:[h._Bn([Z,D.e8])],decls:6,vars:2,consts:[[1,"container"],[1,"review","row","text-dark"],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["checkLoginToComment",""],[3,"formGroup","ngSubmit"],[1,"row","pt-3"],[1,"form-group","col-md-12","m-0","p-0"],["rows","4","formControlName","content","placeholder","Leave your review",1,"form-control"],[1,"col-md-12","m-0","p-0"],["formControlName","rating",3,"max","rate","rateChange"],["type","submit",1,"btn","btn-solid"],[1,"star"],[1,"row","mt-3"],[2,"cursor","pointer","color","#0089ff",3,"click"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"span",1),h._uU(2,"Reviews"),h.qZA(),h.YNc(3,W,10,3,"form",2),h.YNc(4,Y,6,0,"ng-template",null,3,h.W1O),h.qZA()),2&e){var n=h.MAs(5);h.xp6(3),h.Q6J("ngIf",t.isLoading)("ngIfElse",n)}},directives:[s.O5,U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,B.OC],styles:[".star[_ngcontent-%COMP%]{font-size:2rem;color:#b0c4de}.filled[_ngcontent-%COMP%]{color:#ffa200}.checkLogin[_ngcontent-%COMP%]{font-size:1rem;margin:0}.review[_ngcontent-%COMP%]{font-size:1.4rem}"]}),e}(),Q=r(44058),G=r(97582),$=["refComment"];function K(e,t){1&e&&(h.TgZ(0,"div",5),h.TgZ(1,"p"),h._uU(2,"Not Found Comments"),h.qZA(),h.qZA())}function X(e,t){1&e&&(h.TgZ(0,"span",16),h._uU(1,"\u2605"),h.qZA()),2&e&&h.ekj("filled",100===t.fill)}function ee(e,t){if(1&e&&(h.TgZ(0,"li"),h.TgZ(1,"div",10),h.TgZ(2,"div",11),h.TgZ(3,"div",12),h.TgZ(4,"b"),h._uU(5),h.qZA(),h.qZA(),h.TgZ(6,"div",12),h.TgZ(7,"div",13),h.TgZ(8,"ngb-rating",14),h.YNc(9,X,2,2,"ng-template"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",15),h.TgZ(11,"p"),h._uU(12),h.qZA(),h.qZA(),h._UZ(13,"br"),h.TgZ(14,"div",12),h.TgZ(15,"p"),h._uU(16),h.ALo(17,"date"),h.qZA(),h.qZA(),h._UZ(18,"br"),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(5),h.hij(" ",n.fullName," "),h.xp6(3),h.Q6J("max",5)("rate",n.rating)("readonly",!0),h.xp6(4),h.Oqu(n.content),h.xp6(4),h.Oqu(h.xi3(17,6,n.createByDate,"short"))}}function te(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"ngb-pagination",17),h.NdJ("pageChange",function(e){return h.CHM(n),h.oxw(2).page=e})("pageChange",function(e){return h.CHM(n),h.oxw(2).pageChange(e)}),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("collectionSize",i.comments.totalItem)("page",i.page)("pageSize",i.comments.pageSize)("boundaryLinks",!0)}}function ne(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"ul",7),h.YNc(2,ee,19,9,"li",8),h.qZA(),h.YNc(3,te,1,4,"ngb-pagination",9),h.qZA()),2&e){var n=h.oxw();h.xp6(2),h.Q6J("ngForOf",n.comments.results),h.xp6(1),h.Q6J("ngIf",n.comments.totalPage>1)}}var ie=function(e){return["row",e]},re=function(){var e=function(){function e(){l(this,e),this.action=new h.vpe,this.page=0,this.typeDisplayImage=z.hp}return d(e,[{key:"ngOnInit",value:function(){return(0,G.mG)(this,void 0,void 0,i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.page=this.comments.pageIndex+1;case 1:case"end":return e.stop()}},e,this)}))}},{key:"getDate",value:function(e){return new Date(e).toLocaleString()}},{key:"pageChange",value:function(e){this.action.emit(e),window.scrollTo(this.refComment.nativeElement.getBoundingClientRect().left+window.scrollX,this.refComment.nativeElement.getBoundingClientRect().top+window.scrollY)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-comment-detail"]],viewQuery:function(e,t){var n;(1&e&&h.Gf($,5),2&e)&&(h.iGM(n=h.CRH())&&(t.refComment=n.first))},inputs:{comments:"comments",class:"class"},outputs:{action:"action"},decls:5,vars:5,consts:[[1,"container"],[3,"ngClass"],["refComment",""],["class","col-12 mt-3 m-0 p-0",4,"ngIf"],["class","col-md-12 m-0 p-0",4,"ngIf"],[1,"col-12","mt-3","m-0","p-0"],[1,"col-md-12","m-0","p-0"],[1,"comments"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-start mt-3 text-default","size","sm",3,"collectionSize","page","pageSize","boundaryLinks","pageChange",4,"ngIf"],[1,"media"],[1,"media-body"],[1,"row","m-0"],[1,"rating"],[3,"max","rate","readonly"],[1,"row","m-0","content"],[1,"star-detail"],["size","sm",1,"d-flex","justify-content-start","mt-3","text-default",3,"collectionSize","page","pageSize","boundaryLinks","pageChange"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1,2),h.YNc(3,K,3,0,"div",3),h.YNc(4,ne,4,2,"div",4),h.qZA(),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngClass",h.VKq(3,ie,t.class?t.class:"")),h.xp6(2),h.Q6J("ngIf",0===t.comments.results.length),h.xp6(1),h.Q6J("ngIf",t.comments.results.length>0))},directives:[s.mk,s.O5,s.sg,B.OC,B.N9],pipes:[s.uU],styles:[".comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}.media[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.09);padding:20px 20px 0 0!important}h6[_ngcontent-%COMP%]{font-weight:bold;font-size:larger}span[_ngcontent-%COMP%]{font-size:small;font-weight:lighter;font-style:italic}.media-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:break-all;white-space:pre-wrap;line-height:1.5}",".star-detail[_ngcontent-%COMP%]{font-size:1.2rem;color:#b0c4de;vertical-align:middle}.filled[_ngcontent-%COMP%]{vertical-align:middle;color:#ffa200}ul.comments[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child   .media[_ngcontent-%COMP%]{border:none}"]}),e}(),oe=function(e,t,n){return{title:e,url:t,typeClass:n}};function ae(e,t){if(1&e&&h._UZ(0,"app-image-wrapper",15),2&e){var n=h.oxw();h.Q6J("data",h.kEZ(1,oe,n.data.title,n.getImage(n.data.imageUrl),n.typeDisplayImage.BLOG_DETAIL))}}function se(e,t){if(1&e&&(h.TgZ(0,"span",16),h.TgZ(1,"span",17),h._uU(2,"\u2605"),h.qZA(),h._uU(3,"\u2605 "),h.qZA()),2&e){var n=t.fill;h.ekj("full",100===n),h.xp6(1),h.Udp("width",n,"%")}}function ce(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"app-comment-detail",18),h.NdJ("action",function(e){return h.CHM(n),h.oxw().changePageIndex(e)}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("comments",i.comments)}}var le=function(){var e=function(){function e(t,n,i,r,o){l(this,e),this.blogService=t,this.activatedRoute=n,this.commentService=i,this.authService=r,this.messageService=o,this.typeDisplayImage=z.hp}return d(e,[{key:"ngOnDestroy",value:function(){this.subDataUser.unsubscribe(),this.subDataUser=null}},{key:"ngOnInit",value:function(){var e=this;this.subDataUser=this.authService.callUserInfo.subscribe(function(t){return e.user=t}),this.initDataComment(),this.getBlog()}},{key:"getBlog",value:function(){var e=this;this.activatedRoute.paramMap.subscribe(function(t){e.id=t.get("id"),e.blogService.getBlog(e.id).then(function(t){e.data=t.data}).catch(function(t){var n,i;e.messageService.alert(null!==(i=null!==(n=t.error.message)&&void 0!==n?n:JSON.stringify(t.error.error))&&void 0!==i?i:"Server Disconnected",j.b.ERROR)}),e.createSearchModel(),e.getComments()})}},{key:"createSearchModel",value:function(){this.searchModel={"search.entityId":this.id,pageIndex:0,pageSize:10}}},{key:"changePageIndex",value:function(e){this.searchModel=Object.assign(Object.assign({},this.searchModel),{pageIndex:e-1}),this.getComments()}},{key:"getComments",value:function(){var e=this;this.commentService.getBlogComments(this.searchModel).then(function(t){e.comments=t.data}).catch(function(t){var n,i;e.messageService.alert(null!==(i=null!==(n=t.error.message)&&void 0!==n?n:JSON.stringify(t.error.error))&&void 0!==i?i:"Server Disconnected",j.b.ERROR)})}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"initDataComment",value:function(){this.dataComment={entityId:this.activatedRoute.snapshot.paramMap.get("id"),entityType:"Blog",rating:this.item?this.item.rating:5}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(F),h.Y36(N.gz),h.Y36(Z),h.Y36(D.e8),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-blog-detail"]],features:[h._Bn([Z,D.e8])],decls:27,vars:16,consts:[[3,"title","breadcrumb"],[1,"blog-detail-page","section-b-space"],[1,"container"],[1,"row"],[1,"col-sm-12","blog-detail"],[3,"data",4,"ngIf"],[1,"post-social"],[1,"fa","fa-comments"],[3,"max","rate","starTemplate","readonly"],["t",""],[3,"innerHTML"],[1,"mt-3"],["refComment",""],[3,"dataComment","action"],[3,"comments","action",4,"ngIf"],[3,"data"],[1,"star"],[1,"half"],[3,"comments","action"]],template:function(e,t){if(1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.YNc(5,ae,1,5,"app-image-wrapper",5),h.TgZ(6,"h3"),h._uU(7),h.qZA(),h.TgZ(8,"ul",6),h.TgZ(9,"li"),h._uU(10),h.ALo(11,"date"),h.qZA(),h.TgZ(12,"li"),h._uU(13,"Posted By : admin"),h.qZA(),h.TgZ(14,"li"),h._UZ(15,"i",7),h._uU(16),h.qZA(),h.TgZ(17,"li"),h._uU(18," Rating : "),h.TgZ(19,"ngb-rating",8),h.YNc(20,se,4,4,"ng-template",null,9,h.W1O),h.qZA(),h.qZA(),h.qZA(),h._UZ(22,"div",10),h.TgZ(23,"div",11,12),h.TgZ(25,"app-comment",13),h.NdJ("action",function(){return t.getBlog()}),h.qZA(),h.YNc(26,ce,1,1,"app-comment-detail",14),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.MAs(21);h.Q6J("title","Blog Details")("breadcrumb","Blog Details"),h.xp6(5),h.Q6J("ngIf",t.data),h.xp6(2),h.hij(" ",null==t.data?null:t.data.title," "),h.xp6(3),h.Oqu(h.xi3(11,13,null==t.data?null:t.data.createByDate,"mediumDate")),h.xp6(6),h.hij(" ",(null==t.comments?null:t.comments.results.length)+" Comment"," "),h.xp6(3),h.Q6J("max",5)("rate",null==t.data?null:t.data.ratingScore)("starTemplate",n)("readonly",!0),h.xp6(3),h.Q6J("innerHTML",null==t.data?null:t.data.contentHTML,h.oJD),h.xp6(3),h.Q6J("dataComment",t.dataComment),h.xp6(1),h.Q6J("ngIf",t.comments)}},directives:[q.L,s.O5,B.OC,J,Q.t,re],pipes:[s.uU],styles:[".comment-label[_ngcontent-%COMP%]{font-size:xx-large}",".star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:1.3rem;color:#d3d3d3}.full[_ngcontent-%COMP%]{color:#ffa200}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden;color:#ffa200}"]}),e}(),ue=r(59578),de=function(e){return["/blog/",e]};function he(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",11),h.TgZ(2,"div",12),h.TgZ(3,"div",13),h.TgZ(4,"a",14),h._UZ(5,"img",15),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"div",12),h.TgZ(7,"div",16),h.TgZ(8,"div"),h.TgZ(9,"h6"),h._uU(10),h.ALo(11,"date"),h.qZA(),h.TgZ(12,"a",14),h.TgZ(13,"h4"),h._uU(14),h.qZA(),h.qZA(),h.TgZ(15,"ul",17),h.TgZ(16,"li"),h._uU(17),h.qZA(),h.TgZ(18,"li"),h._UZ(19,"i",18),h._uU(20),h.qZA(),h.qZA(),h.TgZ(21,"p"),h._uU(22),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(23,"br"),h.qZA()),2&e){var n=t.$implicit;h.xp6(4),h.Q6J("routerLink",h.VKq(11,de,n.id)),h.xp6(1),h.Q6J("src",n.imageUrl,h.LSH),h.xp6(5),h.Oqu(h.xi3(11,8,n.createByDate,"mediumDate")),h.xp6(2),h.Q6J("routerLink",h.VKq(13,de,n.id)),h.xp6(2),h.hij(" ",n.title," "),h.xp6(3),h.hij("Posted By : ",n.createdByName,""),h.xp6(3),h.hij(" ",n.ratingScore," star "),h.xp6(2),h.hij(" ",n.shortDes," ")}}function fe(e,t){if(1&e&&(h.TgZ(0,"li"),h.TgZ(1,"div",19),h.TgZ(2,"a",14),h._UZ(3,"img",20),h.qZA(),h.TgZ(4,"div",21),h.TgZ(5,"a",14),h.TgZ(6,"h6"),h._uU(7),h.qZA(),h.qZA(),h.TgZ(8,"p"),h._uU(9),h.ALo(10,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.oxw();h.xp6(2),h.Q6J("routerLink",h.VKq(8,de,n.id)),h.xp6(1),h.Q6J("src",i.getImage(n.imageUrl),h.LSH),h.xp6(2),h.Q6J("routerLink",h.VKq(10,de,n.id)),h.xp6(2),h.Oqu(n.title),h.xp6(2),h.Oqu(h.xi3(10,5,n.createByDate,"mediumDate"))}}function pe(e,t){if(1&e&&(h.TgZ(0,"li"),h.TgZ(1,"div",19),h.TgZ(2,"div",22),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"date"),h.qZA(),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"date"),h.qZA(),h.qZA(),h.TgZ(9,"div",21),h.TgZ(10,"a",14),h.TgZ(11,"h6"),h._uU(12),h.qZA(),h.qZA(),h.TgZ(13,"p"),h._uU(14),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(4),h.hij("",h.xi3(5,5,n.createByDate,"dd")," "),h.xp6(3),h.Oqu(h.xi3(8,8,n.createByDate,"MMM")),h.xp6(3),h.Q6J("routerLink",h.VKq(11,de,n.id)),h.xp6(2),h.Oqu(n.title),h.xp6(2),h.hij(" ",n.shortDes," ")}}var ve=function(){var e=function(){function e(t,n,i){l(this,e),this.blogService=t,this.route=n,this.messageService=i}return d(e,[{key:"getBlogs",value:function(){var e=this;this.blogService.get(null).then(function(t){t.hasError||(e.blogs=t.data.results)}).catch(function(t){var n,i;e.messageService.alert(null!==(i=null!==(n=t.error.message)&&void 0!==n?n:JSON.stringify(t.error.error))&&void 0!==i?i:"Server Disconnected",j.b.ERROR)})}},{key:"getTopBlogs",value:function(){var e=this;this.blogService.getTop(null).then(function(t){t.hasError||(e.topBlogs=t.data)}).catch(function(t){var n,i;e.messageService.alert(null!==(i=null!==(n=t.error.message)&&void 0!==n?n:JSON.stringify(t.error.error))&&void 0!==i?i:"Server Disconnected",j.b.ERROR)})}},{key:"getRecentBlogs",value:function(){var e=this;this.blogService.getRecent(null).then(function(t){t.hasError||(e.recentBlogs=t.data)}).catch(function(t){var n,i;e.messageService.alert(null!==(i=null!==(n=t.error.message)&&void 0!==n?n:JSON.stringify(t.error.error))&&void 0!==i?i:"Server Disconnected",j.b.ERROR)})}},{key:"ngOnInit",value:function(){this.getRoute(),this.getBlogs(),this.getTopBlogs(),this.getRecentBlogs()}},{key:"getRoute",value:function(){var e=this;this.route.queryParams.subscribe(function(t){e.selectedId=t.id})}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"detail",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(F),h.Y36(N.gz),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-blog-main"]],decls:18,vars:5,consts:[[3,"title","breadcrumb"],[1,"section-b-space","blog-page"],[1,"container"],[1,"row"],[1,"col-xl-9","col-lg-8","col-md-7"],[4,"ngFor","ngForOf"],[1,"col-xl-3","col-lg-4","col-md-5"],[1,"blog-sidebar"],[1,"theme-card"],[1,"recent-blog"],[1,"popular-blog"],[1,"row","blog-media"],[1,"col-xl-6"],[1,"blog-left"],[3,"routerLink"],["appUiImageLoader","","alt","",1,"img-fluid",3,"src"],[1,"blog-right","justify-content-start","pl-5"],[1,"post-social"],[1,"fa","fa-star"],[1,"media"],["alt","Generic placeholder image",1,"img-fluid",3,"src"],[1,"media-body","align-self-center"],[1,"blog-date"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.YNc(5,he,24,15,"div",5),h.qZA(),h.TgZ(6,"div",6),h.TgZ(7,"div",7),h.TgZ(8,"div",8),h.TgZ(9,"h4"),h._uU(10,"Recent Blog"),h.qZA(),h.TgZ(11,"ul",9),h.YNc(12,fe,11,12,"li",5),h.qZA(),h.qZA(),h.TgZ(13,"div",8),h.TgZ(14,"h4"),h._uU(15,"Popular Blog"),h.qZA(),h.TgZ(16,"ul",10),h.YNc(17,pe,15,13,"li",5),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","Blog")("breadcrumb","Blog"),h.xp6(5),h.Q6J("ngForOf",t.blogs),h.xp6(7),h.Q6J("ngForOf",t.recentBlogs),h.xp6(5),h.Q6J("ngForOf",t.topBlogs))},directives:[q.L,s.sg,N.yS,ue.D],pipes:[s.uU],styles:[""]}),e}(),ge=r(11670),me=r(9575),be=r.n(me),ye=r(23992),ke=function(e,t){return{url:e,typeClass:t}},we=function(){return["/shop/product/left/sidebar/trim-dress"]};function _e(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._UZ(2,"app-image-wrapper",12),h.qZA(),h.TgZ(3,"td"),h.TgZ(4,"a"),h._uU(5),h.qZA(),h.TgZ(6,"div",13),h.TgZ(7,"div",14),h.TgZ(8,"div",15),h.TgZ(9,"div",16),h._UZ(10,"input",17),h.qZA(),h.qZA(),h.qZA(),h.TgZ(11,"div",14),h.TgZ(12,"h2",18),h.TgZ(13,"a",19),h._UZ(14,"i",20),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(15,"td"),h.TgZ(16,"h2"),h._uU(17),h.ALo(18,"vndFormat"),h.qZA(),h.qZA(),h.TgZ(19,"td"),h.TgZ(20,"div",15),h.TgZ(21,"div",16),h.TgZ(22,"span",21),h.TgZ(23,"button",22),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().adjustQuantity(e,-1)}),h._UZ(24,"i",23),h.qZA(),h.qZA(),h._UZ(25,"input",24),h.TgZ(26,"span",21),h.TgZ(27,"button",25),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().adjustQuantity(e,1)}),h._UZ(28,"i",26),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(29,"td"),h.TgZ(30,"a",27),h.TgZ(31,"i",28),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().removeItem(e)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(32,"td"),h.TgZ(33,"h2",18),h._uU(34),h.ALo(35,"vndFormat"),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,r=h.oxw();h.xp6(2),h.Q6J("data",h.WLB(11,ke,i.imageUrl.split(",")[0],r.typeDisplayImage.CART_IMAGE_PRODUCT)),h.xp6(3),h.Oqu(i.name),h.xp6(8),h.Q6J("routerLink",h.DdM(14,we)),h.xp6(4),h.Oqu(h.lcZ(18,7,(null==i?null:i.price)*(null==i?null:i.quantity))),h.xp6(8),h.s9C("value",i.quantity),h.xp6(2),h.Q6J("disabled",r.exceed),h.xp6(7),h.hij(" ",h.lcZ(35,9,i.quantity*i.price)," ")}}var xe=function(){return["/product"]};function Te(e,t){1&e&&(h.TgZ(0,"div",29),h._UZ(1,"img",30),h.TgZ(2,"h3"),h._uU(3,"You don't have any items in your cart!!! "),h.qZA(),h.TgZ(4,"p"),h._uU(5,'Please click "Continue Shopping" to explore our products'),h.qZA(),h.TgZ(6,"a",31),h._uU(7,"continue shopping"),h.qZA(),h.qZA()),2&e&&(h.xp6(6),h.Q6J("routerLink",h.DdM(1,xe)))}function Ae(e,t){if(1&e&&(h.TgZ(0,"table",32),h.TgZ(1,"tfoot"),h.TgZ(2,"tr"),h.TgZ(3,"td"),h._uU(4,"total price :"),h.qZA(),h.TgZ(5,"td"),h.TgZ(6,"h2"),h._uU(7),h.ALo(8,"vndFormat"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.oxw();h.xp6(7),h.Oqu(h.lcZ(8,1,n.cart.totalAmount))}}var Se=function(){return["../checkout"]};function Ce(e,t){1&e&&(h.TgZ(0,"a",31),h._uU(1,"check out"),h.qZA()),2&e&&h.Q6J("routerLink",h.DdM(1,Se))}function Oe(e,t){if(1&e&&(h.TgZ(0,"div",33),h.TgZ(1,"div",34),h.TgZ(2,"a",31),h._uU(3,"continue shopping"),h.qZA(),h.qZA(),h.TgZ(4,"div",34),h.YNc(5,Ce,2,2,"a",35),h.qZA(),h.qZA()),2&e){var n=h.oxw();h.xp6(2),h.Q6J("routerLink",h.DdM(2,xe)),h.xp6(3),h.Q6J("ngIf",(null==n.products?null:n.products.length)>0)}}(0,s.qS)(be(),"fr");var Ee=function(){var e=function(){function e(t,n){l(this,e),this.cartService=t,this.messageService=n,this.exceed=!1,this.products=[],this.typeDisplayImage=z.hp}return d(e,[{key:"ngOnChanges",value:function(e){}},{key:"ngOnInit",value:function(){this.loadCart()}},{key:"loadCart",value:function(){var e=this;this.cartService.cartData.subscribe(function(t){e.products=t.cartDetails,e.cart=t})}},{key:"removeItem",value:function(e){var t=this;this.messageService.confirm("Do you want to remove the item?","Yes","No",!1).then(function(n){n.isConfirmed&&t.cartService.removeCartItem(e)})}},{key:"adjustQuantity",value:function(e,t){return this.exceed=!1,1==e.quantity&&-1==t?this.removeItem(e):10==e.quantity&&1==t?(this.exceed=!0,void this.messageService.notification("Quantity can't exceed 10",j.b.WARNING)):void this.cartService.updateCartQuantity(e,t)}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(ge.N),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-cart"]],features:[h._Bn([ge.N]),h.TTD],decls:25,vars:6,consts:[[3,"title","breadcrumb"],[1,"cart-section","section-b-space"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"table","cart-table","table-responsive-xs"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],["class","col-sm-12 text-center section-b-space mt-5 no-found",4,"ngIf"],["class","table cart-table table-responsive-md",4,"ngIf"],["class","row cart-buttons",4,"ngIf"],[3,"data"],[1,"mobile-cart-content","row"],[1,"col-xs-3"],[1,"qty-box"],[1,"input-group"],["type","text","name","quantity","value","1",1,"form-control","input-number"],[1,"td-color"],[1,"icon",3,"routerLink"],[1,"ti-close"],[1,"input-group-prepend"],["type","button","data-type","minus",1,"btn","quantity-left-minus",3,"click"],[1,"ti-angle-left"],["type","text","name","quantity","disabled","",1,"form-control","input-number",3,"value"],["type","button","data-type","plus",1,"btn","quantity-right-plus",3,"disabled","click"],[1,"ti-angle-right"],[1,"icon",2,"cursor","pointer"],[1,"ti-close",3,"click"],[1,"col-sm-12","text-center","section-b-space","mt-5","no-found"],["src","assets/images/empty-search.jpg",1,"img-fluid","mb-4"],[1,"btn","btn-solid",3,"routerLink"],[1,"table","cart-table","table-responsive-md"],[1,"row","cart-buttons"],[1,"col-6"],["class","btn btn-solid",3,"routerLink",4,"ngIf"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"table",5),h.TgZ(6,"thead"),h.TgZ(7,"tr",6),h.TgZ(8,"th",7),h._uU(9,"image"),h.qZA(),h.TgZ(10,"th",7),h._uU(11,"product name"),h.qZA(),h.TgZ(12,"th",7),h._uU(13,"price"),h.qZA(),h.TgZ(14,"th",7),h._uU(15,"quantity"),h.qZA(),h.TgZ(16,"th",7),h._uU(17,"action"),h.qZA(),h.TgZ(18,"th",7),h._uU(19,"total"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"tbody"),h.YNc(21,_e,36,15,"tr",8),h.qZA(),h.qZA(),h.YNc(22,Te,8,2,"div",9),h.YNc(23,Ae,9,3,"table",10),h.qZA(),h.qZA(),h.YNc(24,Oe,6,3,"div",11),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","Cart")("breadcrumb","Cart"),h.xp6(21),h.Q6J("ngForOf",t.products),h.xp6(1),h.Q6J("ngIf",0==t.cart.cartDetails.length),h.xp6(1),h.Q6J("ngIf",0!=t.cart.cartDetails.length),h.xp6(1),h.Q6J("ngIf",0!=t.cart.cartDetails.length))},directives:[q.L,s.sg,s.O5,Q.t,N.yS],pipes:[ye.A],styles:[""]}),e}(),Pe=d(function e(){l(this,e),this.firstName="",this.lastName="",this.address="",this.phone="",this.email="",this.totalAmount=0,this.totalItem=0,this.orderDetails=[]}),Ie=d(function e(){l(this,e),this.productName="",this.productId="",this.price=0,this.quantity=0,this.totalAmount=0}),Me=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/coupon"}return d(e,[{key:"get",value:function(e){return this.httpClient.getObservable(this.url,e).toPromise()}},{key:"getByCode",value:function(e,t){return this.httpClient.getObservable(this.url+"/by-code?code="+t,e).toPromise()}},{key:"create",value:function(e){return this.httpClient.postObservable(this.url,e).toPromise()}},{key:"update",value:function(e){return this.httpClient.putObservable(this.url,e).toPromise()}},{key:"delete",value:function(e){return this.httpClient.deleteObservable("".concat(this.url,"/?id=").concat(null==e?void 0:e.id)).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Ne=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/order"}return d(e,[{key:"get",value:function(e){return this.httpClient.getObservable(this.url,e).toPromise()}},{key:"getDetails",value:function(e){return this.httpClient.getObservable(this.url+"-detail",e).toPromise()}},{key:"create",value:function(e){return this.httpClient.postObservable(this.url,e).toPromise()}},{key:"update",value:function(e){return this.httpClient.putObservable(this.url,e).toPromise()}},{key:"delete",value:function(e){return this.httpClient.deleteObservable("".concat(this.url,"?id=").concat(null==e?void 0:e.id)).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}();function Le(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," First Name is required "),h.qZA())}function Re(e,t){if(1&e&&(h.TgZ(0,"div",46),h.YNc(1,Le,2,0,"div",47),h.qZA()),2&e){h.oxw();var n=h.MAs(17);h.xp6(1),h.Q6J("ngIf",n.errors.required)}}function je(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," Last Name is required "),h.qZA())}function De(e,t){if(1&e&&(h.TgZ(0,"div",46),h.YNc(1,je,2,0,"div",47),h.qZA()),2&e){h.oxw();var n=h.MAs(23);h.xp6(1),h.Q6J("ngIf",n.errors.required)}}function Ve(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," Phone is required "),h.qZA())}function Ze(e,t){if(1&e&&(h.TgZ(0,"div",46),h.YNc(1,Ve,2,0,"div",47),h.qZA()),2&e){h.oxw();var n=h.MAs(29);h.xp6(1),h.Q6J("ngIf",n.errors.required)}}function ze(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," Email is required "),h.qZA())}function Fe(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," Invalid Email Address "),h.qZA())}function qe(e,t){if(1&e&&(h.TgZ(0,"div",46),h.YNc(1,ze,2,0,"div",47),h.YNc(2,Fe,2,0,"div",47),h.qZA()),2&e){h.oxw();var n=h.MAs(35);h.xp6(1),h.Q6J("ngIf",n.errors.required),h.xp6(1),h.Q6J("ngIf",n.errors.email)}}function Be(e,t){1&e&&(h.TgZ(0,"div",48),h._uU(1," Adress is required "),h.qZA())}function Ue(e,t){if(1&e&&(h.TgZ(0,"div",46),h.YNc(1,Be,2,0,"div",47),h.qZA()),2&e){h.oxw();var n=h.MAs(41);h.xp6(1),h.Q6J("ngIf",n.errors.required)}}function He(e,t){if(1&e&&(h.TgZ(0,"ul",49),h.TgZ(1,"li"),h._uU(2),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"vndFormat"),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.AsE(" ",n.name," x ",n.quantity," "),h.xp6(2),h.hij("",h.lcZ(5,3,n.quantity*n.price)," ")}}function We(e,t){if(1&e&&(h.TgZ(0,"ul",29),h.TgZ(1,"li"),h._uU(2," Coupon "),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"vndFormat"),h._UZ(6,"br"),h._UZ(7,"br"),h._uU(8),h.qZA(),h._UZ(9,"br"),h._uU(10),h.qZA(),h._UZ(11,"li"),h.qZA()),2&e){var n=h.oxw();h.xp6(4),h.hij("-",h.lcZ(5,3,n.couponValue)," "),h.xp6(4),h.hij(" ",n.couponPercent,""),h.xp6(2),h.hij(" (",n.couponName,") ")}}function Ye(e,t){1&e&&(h.TgZ(0,"div"),h.TgZ(1,"span",50),h.TgZ(2,"strong"),h._uU(3,"INVALID COUPON"),h.qZA(),h.qZA(),h.qZA())}function Je(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"button",51),h.NdJ("click",function(){return h.CHM(n),h.oxw().removeCoupon()}),h._uU(1," Remove "),h.qZA()}}var Qe=function(){var e=function(){function e(t,n,i,r,o){l(this,e),this.cartService=t,this.orderService=n,this.couponService=i,this.routerService=r,this.authService=o,this.products=[],this.couponValue=0,this.couponDisplay=!1,this.order=new Pe}return d(e,[{key:"ngOnDestroy",value:function(){this.subDataUser.unsubscribe(),this.subDataUser=null}},{key:"ngOnInit",value:function(){var e=this;this.loadCartItems(),this.subDataUser=this.authService.callUserInfo.subscribe(function(t){e.order.firstName=null==t?void 0:t.firstName,e.order.lastName=null==t?void 0:t.lastName,e.order.email=null==t?void 0:t.email,e.order.phone=null==t?void 0:t.phone,e.order.address=null==t?void 0:t.address})}},{key:"loadCartItems",value:function(){var e=this;this.cartService.cartData.subscribe(function(t){e.products=t.cartDetails,e.cart=t,e.subTotal=t.totalAmount})}},{key:"onSubmit",value:function(){var e=this;0!=this.products.length&&(this.loadModel(),this.orderService.create(this.order).then(function(t){e.cartService.removeAll(),e.routerService.navigate(["checkout/success"],{state:t})}).catch(function(e){}))}},{key:"loadModel",value:function(){var e=this;this.order.orderDetails=[],this.order.fullName="".concat(this.order.firstName," ").concat(this.order.lastName),this.order.totalAmount=this.totalAmount,this.order.totalItem=this.totalItem,this.products.forEach(function(t){var n=new Ie;n.productId=t.id,n.productName=t.name,n.price=t.price,n.quantity=t.quantity,n.totalAmount=n.price*n.quantity,e.order.orderDetails.push(n)})}},{key:"applyCoupon",value:function(){var e=this;this.order.couponCode=this.couponCode,this.couponService.getByCode(null,this.order.couponCode).then(function(t){if(e.couponInvalid=!1,e.couponDisplay=!0,e.order.couponId=t.data.id,e.order.couponName=t.data.name,e.couponName=e.order.couponName,t.data.hasPercent)return e.order.couponPercent=t.data.value,e.couponPercent="-".concat(e.order.couponPercent,"%"),e.order.couponValue=e.subTotal*t.data.value/100,e.couponValue=e.order.couponValue,e.totalAmount=e.subTotal-e.couponValue,e.order.totalAmount=e.totalAmount;e.order.couponValue=t.data.value,e.couponValue=e.order.couponValue,e.order.couponPercent=parseFloat((e.order.couponValue/e.subTotal*100).toFixed(2)),e.couponPercent="-".concat(e.order.couponPercent,"%"),t.data.value>e.subTotal&&(e.couponValue=e.subTotal,e.couponPercent="-100%"),e.totalAmount=e.cart.totalAmount-e.couponValue<0?0:e.cart.totalAmount-e.couponValue,e.order.totalAmount=e.totalAmount}).catch(function(t){e.couponInvalid=!0,e.removeCoupon(),e.couponInvalid=!0})}},{key:"removeCoupon",value:function(){this.couponValue=0,this.couponPercent="0",this.couponName=null,this.couponCode="",delete this.order.couponValue,delete this.order.couponPercent,delete this.order.couponName,delete this.order.couponCode,delete this.order.couponId,this.couponDisplay=!1,this.couponInvalid=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(ge.N),h.Y36(Ne),h.Y36(Me),h.Y36(N.F0),h.Y36(D.e8))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-checkout"]],features:[h._Bn([ge.N,Ne,Me,D.e8])],decls:89,vars:24,consts:[[3,"title","breadcrumb"],[1,"section-b-space"],[1,"container","padding-cls"],[1,"checkout-page"],[1,"checkout-form"],[3,"ngSubmit"],["checkoutForm","ngForm"],[1,"row"],[1,"col-lg-6","col-sm-12","col-xs-12"],[1,"checkout-title"],[1,"form-group","col-md-6","col-sm-6","col-xs-12"],["for","firstName",1,"field-label"],["type","text","id","firstName","required","","name","firstName","placeholder","First Name",3,"ngModel","ngModelChange"],["firstName","ngModel"],["class","error",4,"ngIf"],[1,"field-label"],["type","text","id","lastName","required","","name","lastName","placeholder","Last Name",3,"ngModel","ngModelChange"],["lastName","ngModel"],["type","text","id","phone","required","","name","phone","placeholder","Phone",3,"ngModel","ngModelChange"],["phone","ngModel"],["type","text","id","email","required","","email","","name","email","placeholder","Email",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"form-group","col-md-12","col-sm-12","col-xs-12"],["type","text","id","address","required","","name","address","placeholder","Street address",3,"ngModel","ngModelChange"],["address","ngModel"],[1,"checkout-details"],[1,"order-box"],[1,"title-box"],["class","qty",4,"ngFor","ngForOf"],[1,"qty","sub-total"],[1,"count","text-body"],["class","qty sub-total",4,"ngIf"],[1,"total"],[1,"count","text-success"],[1,"payment-box"],[1,"col-lg-12","col-sm-6","col-xs-12"],[1,"col-lg-7","col-sm-12","col-xs-12"],["placeholder","Coupon Code","type","text","id","couponCode","name","couponCode",3,"ngModel","ngModelChange"],["ctrl","ngModel"],[4,"ngIf"],[1,"col-lg-5","col-sm-12","col-xs-12"],[1,"btn-group","col-lg-6"],["type","button",1,"btn-solid","btn","btn-sm",3,"click"],["type","button","class","ml-1 btn-solid btn btn-sm",3,"click",4,"ngIf"],[1,"btn-group","col-lg-12"],["type","submit",1,"btn-solid","btn",3,"disabled"],[1,"error"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"qty"],[1,"text-danger"],["type","button",1,"ml-1","btn-solid","btn","btn-sm",3,"click"]],template:function(e,t){if(1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"form",5,6),h.NdJ("ngSubmit",function(){return t.onSubmit()}),h.TgZ(7,"div",7),h.TgZ(8,"div",8),h.TgZ(9,"div",9),h.TgZ(10,"h3"),h._uU(11,"Billing Details"),h.qZA(),h.qZA(),h.TgZ(12,"div",7),h.TgZ(13,"div",10),h.TgZ(14,"div",11),h._uU(15,"First Name"),h.qZA(),h.TgZ(16,"input",12,13),h.NdJ("ngModelChange",function(e){return t.order.firstName=e}),h.qZA(),h.YNc(18,Re,2,1,"div",14),h.qZA(),h.TgZ(19,"div",10),h.TgZ(20,"div",15),h._uU(21,"Last Name"),h.qZA(),h.TgZ(22,"input",16,17),h.NdJ("ngModelChange",function(e){return t.order.lastName=e}),h.qZA(),h.YNc(24,De,2,1,"div",14),h.qZA(),h.TgZ(25,"div",10),h.TgZ(26,"div",15),h._uU(27,"Phone"),h.qZA(),h.TgZ(28,"input",18,19),h.NdJ("ngModelChange",function(e){return t.order.phone=e}),h.qZA(),h.YNc(30,Ze,2,1,"div",14),h.qZA(),h.TgZ(31,"div",10),h.TgZ(32,"div",15),h._uU(33,"Email Address"),h.qZA(),h.TgZ(34,"input",20,21),h.NdJ("ngModelChange",function(e){return t.order.email=e}),h.qZA(),h.YNc(36,qe,3,2,"div",14),h.qZA(),h.TgZ(37,"div",22),h.TgZ(38,"div",15),h._uU(39,"Address"),h.qZA(),h.TgZ(40,"input",23,24),h.NdJ("ngModelChange",function(e){return t.order.address=e}),h.qZA(),h.YNc(42,Ue,2,1,"div",14),h.qZA(),h.qZA(),h.qZA(),h.TgZ(43,"div",8),h.TgZ(44,"div",25),h.TgZ(45,"div",26),h.TgZ(46,"div",27),h.TgZ(47,"div"),h._uU(48,"Product "),h.TgZ(49,"span"),h._uU(50," Total"),h.qZA(),h.qZA(),h.qZA(),h.YNc(51,He,6,5,"ul",28),h.TgZ(52,"ul",29),h.TgZ(53,"li"),h._uU(54," Subtotal "),h.TgZ(55,"span",30),h._uU(56),h.ALo(57,"vndFormat"),h.qZA(),h.qZA(),h.qZA(),h.YNc(58,We,12,5,"ul",31),h.TgZ(59,"ul",32),h.TgZ(60,"li"),h._uU(61," Total "),h.TgZ(62,"span",33),h._uU(63),h.ALo(64,"vndFormat"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(65,"div",34),h.TgZ(66,"div",7),h.TgZ(67,"div",35),h.TgZ(68,"div",7),h.TgZ(69,"div",36),h.TgZ(70,"input",37,38),h.NdJ("ngModelChange",function(e){return t.couponCode=e}),h.qZA(),h.YNc(72,Ye,4,0,"div",39),h.qZA(),h.TgZ(73,"div",40),h.TgZ(74,"div",7),h.TgZ(75,"div",41),h.TgZ(76,"button",42),h.NdJ("click",function(){return t.applyCoupon()}),h._uU(77," Apply "),h.qZA(),h.YNc(78,Je,2,0,"button",43),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(79,"br"),h.TgZ(80,"div",7),h.TgZ(81,"div",35),h.TgZ(82,"div",7),h._UZ(83,"div",36),h.TgZ(84,"div",40),h.TgZ(85,"div",7),h.TgZ(86,"div",44),h.TgZ(87,"button",45),h._uU(88," Place Order "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.MAs(6),i=h.MAs(17),r=h.MAs(23),o=h.MAs(29),a=h.MAs(35),s=h.MAs(41);h.Q6J("title","Checkout")("breadcrumb","Checkout"),h.xp6(16),h.Q6J("ngModel",t.order.firstName),h.xp6(2),h.Q6J("ngIf",!(null!=i&&i.valid)&&((null==i?null:i.dirty)||(null==i?null:i.touched))),h.xp6(4),h.Q6J("ngModel",t.order.lastName),h.xp6(2),h.Q6J("ngIf",!(null!=r&&r.valid)&&((null==r?null:r.dirty)||(null==r?null:r.touched))),h.xp6(4),h.Q6J("ngModel",t.order.phone),h.xp6(2),h.Q6J("ngIf",!(null!=o&&o.valid)&&((null==o?null:o.dirty)||(null==o?null:o.touched))),h.xp6(4),h.Q6J("ngModel",t.order.email),h.xp6(2),h.Q6J("ngIf",!(null!=a&&a.valid)&&((null==a?null:a.dirty)||(null==a?null:a.touched))),h.xp6(4),h.Q6J("ngModel",t.order.address),h.xp6(2),h.Q6J("ngIf",!(null!=s&&s.valid)&&((null==s?null:s.dirty)||(null==s?null:s.touched))),h.xp6(9),h.Q6J("ngForOf",t.products),h.xp6(5),h.Oqu(h.lcZ(57,20,t.cart.totalAmount)),h.xp6(2),h.Q6J("ngIf",t.couponDisplay),h.xp6(5),h.Oqu(h.lcZ(64,22,t.cart.totalAmount-t.couponValue)),h.xp6(7),h.Q6J("ngModel",t.couponCode),h.xp6(2),h.Q6J("ngIf",t.couponInvalid),h.xp6(6),h.Q6J("ngIf",t.couponDisplay||t.couponInvalid),h.xp6(9),h.Q6J("disabled",!n.valid)}},directives:[q.L,U._Y,U.JL,U.F,U.Fj,U.Q7,U.JJ,U.On,s.O5,U.on,s.sg],pipes:[ye.A],styles:[".btn-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e}(),Ge=function(){var e=function(){function e(){l(this,e)}return d(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-error"]],decls:12,vars:3,consts:[[3,"title","breadcrumb"],[1,"p-0"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"error-section"],[1,"btn","btn-solid",3,"routerLink"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"h1"),h._uU(7,"404"),h.qZA(),h.TgZ(8,"h2"),h._uU(9,"page not found"),h.qZA(),h.TgZ(10,"a",6),h._uU(11,"back to home"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","404")("breadcrumb","404"),h.xp6(10),h.Q6J("routerLink","/home"))},directives:[q.L,N.yS],styles:[""]}),e}(),$e=r(67701),Ke={loop:!0,nav:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],navText:['<i class="ti-angle-left"></i>','<i class="ti-angle-right"></i>'],responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}}},Xe={loop:!0,dots:!1,navSpeed:300,responsive:{0:{items:1},400:{items:2},740:{items:2},940:{items:3},1200:{items:3}}},et={loop:!1,dots:!1,navSpeed:300,responsive:{991:{items:4},767:{items:3},420:{items:2},0:{items:1}}},tt={items:1,loop:!0,nav:!0,dots:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],navText:['<i class="ti-angle-left"></i>','<i class="ti-angle-right"></i>']},nt={items:1,nav:!1,dots:!1,autoplay:!1,slideSpeed:300,loop:!0},it={items:3,loop:!0,margin:10,dots:!1},rt=r(66989),ot=function(e){return{"background-image":e,cursor:"pointer"}};function at(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",3),h.TgZ(1,"div",4),h.TgZ(2,"div",5),h.TgZ(3,"div",6),h.TgZ(4,"div",7),h.TgZ(5,"div"),h.TgZ(6,"h3",8),h._uU(7),h.qZA(),h.TgZ(8,"h4",9),h._uU(9),h.qZA(),h.TgZ(10,"a",10),h.NdJ("click",function(){h.CHM(n);var e=h.oxw().$implicit;return h.oxw().BannerClick(e)}),h._uU(11),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw().$implicit,r=h.oxw();h.Q6J("ngClass",r.textClass)("ngStyle",h.VKq(6,ot,"url("+i.imageUrl.split(",")[0]+")")),h.xp6(7),h.Oqu(i.title),h.xp6(2),h.Oqu(i.description),h.xp6(1),h.Q6J("ngClass",r.buttonClass),h.xp6(1),h.hij(" ",r.buttonText," ")}}function st(e,t){1&e&&(h.ynx(0),h.YNc(1,at,12,8,"ng-template",2),h.BQk())}var ct=function(){var e=function(){function e(t){l(this,e),this.route=t,this.HomeSliderConfig=Ke}return d(e,[{key:"ngOnInit",value:function(){}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"BannerClick",value:function(e){(null==e?void 0:e.link)&&(null==e?void 0:e.link.search("http"))>-1?window.open(e.link,"_blank").focus():this.route.navigateByUrl((null==e?void 0:e.link)?e.link:"/product")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(N.F0))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-slider"]],inputs:{sliders:"sliders",class:"class",textClass:"textClass",category:"category",buttonText:"buttonText",buttonClass:"buttonClass"},decls:2,vars:3,consts:[[1,"home-slider",3,"options","ngClass"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,"home",3,"ngClass","ngStyle"],[1,"container"],[1,"row"],[1,"col"],[1,"slider-contain"],[1,"title-banner"],[1,"description-banner"],[1,"btn","btn-solid",3,"ngClass","click"]],template:function(e,t){1&e&&(h.TgZ(0,"owl-carousel-o",0),h.YNc(1,st,2,0,"ng-container",1),h.qZA()),2&e&&(h.Q6J("options",t.HomeSliderConfig)("ngClass",t.class),h.xp6(1),h.Q6J("ngForOf",t.sliders))},directives:[rt.Fy,s.mk,s.sg,rt.Mp,s.PC],styles:[".slider-contain[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-basis:50%}.title-banner[_ngcontent-%COMP%]{color:#000;font-size:2.3rem;text-shadow:-5px -2px 10px #fff}.description-banner[_ngcontent-%COMP%]{text-shadow:-5px -2px 10px #fff}"]}),e}(),lt=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/user/page-content"}return d(e,[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.httpClient.getObservable(this.url,e).toPromise()}},{key:"getById",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return this.httpClient.getObservable(this.url+"/".concat(t),e).toPromise()}},{key:"getInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.httpClient.getObservable("/api/user/info-website",e).toPromise()}},{key:"postContact",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.httpClient.postObservable(this.url+"/contact",e).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),ut=function(e){return["/page-info",e]},dt=function(e,t){return{url:e,typeClass:t}};function ht(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",2),h.TgZ(2,"a",3),h._UZ(3,"app-image-wrapper",4),h.qZA(),h.TgZ(4,"div",5),h.TgZ(5,"h4"),h.TgZ(6,"a",3),h._uU(7),h.qZA(),h.qZA(),h.TgZ(8,"p"),h._uU(9),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.oxw();h.Tol(3==i.pageContents.length?"col-md-4 service-block":"col-md-6 service-block"),h.xp6(2),h.Q6J("routerLink",h.VKq(7,ut,n.id)),h.xp6(1),h.Q6J("data",h.WLB(9,dt,null==n.imageUrl?null:n.imageUrl.split(",")[0],i.typeDisplayImage.LOGO_PAGE_CONTENT)),h.xp6(3),h.Q6J("routerLink",h.VKq(12,ut,n.id)),h.xp6(1),h.Oqu(n.title),h.xp6(2),h.Oqu(n.shortDes)}}var ft=function(){var e=function(){function e(t){l(this,e),this.pageContentService=t,this.pageContents=[],this.typeDisplayImage=z.hp}return d(e,[{key:"ngOnInit",value:function(){this.getPageContents()}},{key:"getPageContents",value:function(){var e=this;this.pageContentService.getList().then(function(t){e.pageContents=t.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(lt))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-services"]],features:[h._Bn([lt])],decls:2,vars:1,consts:[[1,"row"],[3,"class",4,"ngFor","ngForOf"],[1,"media"],[1,"link-page-content",3,"routerLink"],[3,"data"],[1,"media-body"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,ht,10,14,"div",1),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngForOf",t.pageContents))},directives:[s.sg,N.yS,Q.t],styles:[".link-page-content[_ngcontent-%COMP%]{color:#000!important}.link-page-content[_ngcontent-%COMP%]:hover{color:var(--theme-deafult)!important}.media[_ngcontent-%COMP%]:hover   .link-page-content[_ngcontent-%COMP%]{cursor:pointer;transform:scale(1.1);transition:.5s}"]}),e}(),pt=r(76535),vt=function(e){return["/blog/",e]},gt=function(e,t,n){return{title:e,url:t,typeClass:n}};function mt(e,t){if(1&e&&(h.TgZ(0,"div",3),h.TgZ(1,"a",4),h.TgZ(2,"div",5),h._UZ(3,"app-image-wrapper",6),h._UZ(4,"span"),h.qZA(),h.qZA(),h.TgZ(5,"div",7),h.TgZ(6,"h4"),h._uU(7),h.qZA(),h.TgZ(8,"a",4),h.TgZ(9,"p"),h._uU(10),h.qZA(),h.qZA(),h._UZ(11,"hr",8),h.TgZ(12,"h6",9),h._uU(13),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.oxw().$implicit,i=h.oxw();h.xp6(1),h.Q6J("routerLink",h.VKq(6,vt,n.id)),h.xp6(2),h.Q6J("data",h.kEZ(8,gt,n.title,i.getImage(n.imageUrl),i.typeDisplayImage.BLOG_IMAGE)),h.xp6(4),h.Oqu(i.getDate(n.createByDate)),h.xp6(1),h.Q6J("routerLink",h.VKq(12,vt,n.id)),h.xp6(2),h.Oqu(n.title),h.xp6(3),h.Oqu(n.shortDes)}}function bt(e,t){1&e&&(h.ynx(0),h.YNc(1,mt,14,14,"ng-template",2),h.BQk())}var yt=function(){var e=function(){function e(){l(this,e),this.blogs=[],this.typeDisplayImage=pt.hp,this.BlogSliderConfig=Xe}return d(e,[{key:"ngOnInit",value:function(){}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"getDate",value:function(e){return new Date(e).toDateString()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-blog"]],inputs:{blogs:"blogs"},decls:2,vars:2,consts:[[1,"no-arrow",3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,""],[3,"routerLink"],[1,"classic-effect"],[3,"data"],[1,"blog-details"],[1,"style1"],[2,"word-wrap","break-word"]],template:function(e,t){1&e&&(h.TgZ(0,"owl-carousel-o",0),h.YNc(1,bt,2,0,"ng-container",1),h.qZA()),2&e&&(h.Q6J("options",t.BlogSliderConfig),h.xp6(1),h.Q6J("ngForOf",t.blogs))},directives:[rt.Fy,s.sg,rt.Mp,N.yS,Q.t],styles:[""]}),e}(),kt=r(41476);function wt(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",23),h.TgZ(1,"app-product-box",24),h.NdJ("action",function(){return h.CHM(n),h.oxw(2).callProducts()}),h.qZA(),h.qZA()}if(2&e){var i=h.oxw().$implicit;h.xp6(1),h.Q6J("product",i)("thumbnail",!0)("cartModal",!0)}}function _t(e,t){1&e&&(h.ynx(0),h.YNc(1,wt,2,3,"ng-template",22),h.BQk())}function xt(e,t){1&e&&h._uU(0,"New Products")}function Tt(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",23),h._UZ(2,"app-product-box",26),h.qZA(),h.BQk()),2&e){var n=t.$implicit;h.xp6(2),h.Q6J("product",n)("thumbnail",!0)("cartModal",!0)}}function At(e,t){if(1&e&&(h.TgZ(0,"div",25),h.YNc(1,Tt,3,3,"ng-container",11),h.ALo(2,"slice"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngForOf",h.Dn7(2,1,n.productKeeper.newProduct,0,8))}}function St(e,t){1&e&&h._uU(0,"Best Seller")}function Ct(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",23),h._UZ(2,"app-product-box",26),h.qZA(),h.BQk()),2&e){var n=t.$implicit;h.xp6(2),h.Q6J("product",n)("thumbnail",!0)("cartModal",!0)}}function Ot(e,t){if(1&e&&(h.TgZ(0,"div",25),h.YNc(1,Ct,3,3,"ng-container",11),h.ALo(2,"slice"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngForOf",h.Dn7(2,1,n.productKeeper.bestSeller,0,8))}}function Et(e,t){1&e&&h._uU(0,"Featured Products")}function Pt(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",23),h._UZ(2,"app-product-box",26),h.qZA(),h.BQk()),2&e){var n=t.$implicit;h.xp6(2),h.Q6J("product",n)("thumbnail",!0)("cartModal",!0)}}function It(e,t){if(1&e&&(h.TgZ(0,"div",25),h.YNc(1,Pt,3,3,"ng-container",11),h.ALo(2,"slice"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngForOf",h.Dn7(2,1,n.productKeeper.featuredProduct,0,8))}}var Mt=function(){var e=function(){function e(t){l(this,e),this.homeService=t,this.productKeeper={topProduct:[],newProduct:[],bestSeller:[],featuredProduct:[]},this.blogs=[],this.banners=[],this.ProductSliderConfig=et}return d(e,[{key:"ngOnInit",value:function(){this.callProducts(),this.getBlogs(),this.getBanners()}},{key:"callProducts",value:function(){this.getProducts(),this.getNewProducts(),this.getBestSeller(),this.getFeaturedProducts()}},{key:"getProducts",value:function(){var e=this;this.homeService.getTopCollectionProducts().then(function(t){e.productKeeper.topProduct=t.data}).catch(function(e){})}},{key:"getNewProducts",value:function(){var e=this;this.homeService.getNewProducts().then(function(t){e.productKeeper.newProduct=t.data}).catch(function(e){})}},{key:"getBestSeller",value:function(){var e=this;this.homeService.getBestSellerProducts().then(function(t){e.productKeeper.bestSeller=t.data}).catch(function(e){})}},{key:"getFeaturedProducts",value:function(){var e=this;this.homeService.getFeaturedProducts().then(function(t){e.productKeeper.featuredProduct=t.data}).catch(function(e){})}},{key:"getBlogs",value:function(){var e=this;this.homeService.getBlogs().then(function(t){e.blogs=t.data}).catch(function(e){})}},{key:"getBanners",value:function(){var e=this;this.homeService.getBanners().then(function(t){e.banners=t.data}).catch(function(e){})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36($e.Y))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-home"]],features:[h._Bn([$e.Y])],decls:52,vars:13,consts:[[1,"p-0"],[3,"sliders","textClass","category","buttonText"],["bs-affix","","data-offset-top","500",1,"title1","section-t-space"],[1,"title-inner1"],[1,"container"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"product-para"],[1,"section-b-space","p-t-0"],[1,"col"],[1,"product-m","no-arrow",3,"options"],[4,"ngFor","ngForOf"],[1,"title1","section-t-space"],[1,"col","theme-tab"],[1,"tabs","tab-title",3,"justify","type"],["ngbTabTitle",""],["ngbTabContent",""],[1,"service","border-section","small-section"],[1,"blog","p-t-0"],[1,"row","mb-5"],[1,"col-md-12"],[3,"blogs"],["carouselSlide",""],[1,"product-box"],[3,"product","thumbnail","cartModal","action"],[1,"no-slider","row"],[3,"product","thumbnail","cartModal"]],template:function(e,t){1&e&&(h.TgZ(0,"section",0),h._UZ(1,"app-slider",1),h.qZA(),h.TgZ(2,"div",2),h.TgZ(3,"h4"),h._uU(4,"special offer"),h.qZA(),h.TgZ(5,"h2",3),h._uU(6,"top collection"),h.qZA(),h.qZA(),h.TgZ(7,"div",4),h.TgZ(8,"div",5),h.TgZ(9,"div",6),h._UZ(10,"div",7),h.qZA(),h.qZA(),h.qZA(),h.TgZ(11,"section",8),h.TgZ(12,"div",4),h.TgZ(13,"div",5),h.TgZ(14,"div",9),h.TgZ(15,"owl-carousel-o",10),h.YNc(16,_t,2,0,"ng-container",11),h.ALo(17,"slice"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(18,"div",12),h.TgZ(19,"h4"),h._uU(20,"exclusive products"),h.qZA(),h.TgZ(21,"h2",3),h._uU(22,"special products"),h.qZA(),h.qZA(),h.TgZ(23,"section",8),h.TgZ(24,"div",4),h.TgZ(25,"div",5),h.TgZ(26,"div",13),h.TgZ(27,"ngb-tabset",14),h.TgZ(28,"ngb-tab"),h.YNc(29,xt,1,0,"ng-template",15),h.YNc(30,At,3,5,"ng-template",16),h.qZA(),h.TgZ(31,"ngb-tab"),h.YNc(32,St,1,0,"ng-template",15),h.YNc(33,Ot,3,5,"ng-template",16),h.qZA(),h.TgZ(34,"ngb-tab"),h.YNc(35,Et,1,0,"ng-template",15),h.YNc(36,It,3,5,"ng-template",16),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(37,"div",4),h.TgZ(38,"section",17),h._UZ(39,"app-services"),h.qZA(),h.qZA(),h.TgZ(40,"section",18),h.TgZ(41,"div",4),h.TgZ(42,"div",5),h.TgZ(43,"div",9),h.TgZ(44,"div",12),h.TgZ(45,"h4"),h._uU(46,"Recent Story"),h.qZA(),h.TgZ(47,"h2",3),h._uU(48,"from the blog"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(49,"div",19),h.TgZ(50,"div",20),h._UZ(51,"app-blog",21),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(1),h.Q6J("sliders",t.banners)("textClass","text-center")("category","fashion")("buttonText","shop now"),h.xp6(14),h.Q6J("options",t.ProductSliderConfig),h.xp6(1),h.Q6J("ngForOf",h.Dn7(17,9,t.productKeeper.topProduct,0,12)),h.xp6(11),h.Q6J("justify","center")("type","pills"),h.xp6(24),h.Q6J("blogs",t.blogs))},directives:[ct,rt.Fy,s.sg,B.T3,B.N_,B.o,B.EU,ft,yt,rt.Mp,kt.B],pipes:[s.OU],styles:["affix-top[_ngcontent-%COMP%]{top:30px}.affix-bottom[_ngcontent-%COMP%]{bottom:0}"]}),e}();function Nt(e,t){if(1&e&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._UZ(2,"img",20),h.qZA(),h.TgZ(3,"td"),h.TgZ(4,"h5"),h._uU(5),h.qZA(),h.qZA(),h.TgZ(6,"td"),h.TgZ(7,"h5"),h._uU(8),h.qZA(),h.qZA(),h.TgZ(9,"td"),h.TgZ(10,"h5"),h._uU(11),h.ALo(12,"vndFormat"),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.Q6J("src",n.productImgUrl.split(",")[0],h.LSH),h.xp6(3),h.Oqu(n.productName),h.xp6(3),h.Oqu(n.quantity),h.xp6(3),h.Oqu(h.lcZ(12,4,n.totalAmount))}}var Lt=function(e,t,n){return{position:"fixed",width:e,top:t,bottom:n}},Rt=function(){var e=function(){function e(t,n){var i,r;l(this,e),this.route=t,this.dataRoute=n,this.offsetHeightHeader=0,this.offsetHeightFixedElement=0,this.offsetTopFooter=0,this.offsetTopFlagElement=0,this.breakPoint=0,this.blockTop=!1,this.blockBottom=!1,this.bottomMargin=0,this.widthElementFixed=0,this.checkOutOrders=null===(r=null===(i=this.route.getCurrentNavigation().extras)||void 0===i?void 0:i.state)||void 0===r?void 0:r.data,this.checkOutOrderDetails=this.checkOutOrders.orderDetails}return d(e,[{key:"ngOnInit",value:function(){this.offsetHeightHeader=document.getElementById("header-one").offsetHeight+10,this.widthElementFixed=document.getElementById("ElementFixed").offsetParent.clientWidth,console.log(this.widthElementFixed)}},{key:"scrolling",value:function(){return this.offsetTopFlagElement=document.getElementById("FlagElementToFixed").offsetTop,this.offsetHeightFixedElement=document.getElementById("ElementFixed").offsetHeight,this.offsetTopFooter=+document.getElementById("footer-one").offsetTop,window.scrollY+this.offsetHeightHeader>this.offsetTopFlagElement&&window.scrollY+this.offsetHeightHeader+this.offsetHeightFixedElement<=this.offsetTopFooter?(this.blockTop=!0,void(this.blockBottom=!1)):window.scrollY+this.offsetHeightHeader+this.offsetHeightFixedElement+10>this.offsetTopFooter?(this.bottomMargin=window.innerHeight-document.getElementById("footer-one").getBoundingClientRect().top+10,this.blockBottom=!0,void(this.blockTop=!1)):(this.blockBottom=!1,void(this.blockTop=!1))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(N.F0),h.Y36(N.gz))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-order-success"]],hostBindings:function(e,t){1&e&&h.NdJ("scroll",function(){return t.scrolling()},!1,h.evT)},features:[h._Bn([])],decls:63,vars:20,consts:[[1,"section-b-space"],[1,"section-b-space","light-layout"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"success-text"],["aria-hidden","true",1,"fa","fa-check-circle"],["id","FlagElementToFixed",1,"col-lg-6"],[1,"product-order"],[1,"row","product-order-detail"],[1,"table","cart-table","table-responsive-xs"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"final-total"],[1,"col-lg-6"],["id","ElementFixed",1,"row","order-success-sec",3,"ngStyle"],[1,"col-sm-6"],[1,"order-detail"],[1,"delivery-sec"],["appUiImageLoader","","alt","",1,"img-fluid",3,"src"]],template:function(e,t){1&e&&(h.TgZ(0,"section",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h._UZ(6,"i",6),h.TgZ(7,"h2"),h._uU(8,"thank you"),h.qZA(),h.TgZ(9,"p"),h._uU(10," Payment is successfully processsed and your order is on the way "),h.qZA(),h.TgZ(11,"p"),h._uU(12),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"section",0),h.TgZ(14,"div",2),h.TgZ(15,"div",3),h.TgZ(16,"div",7),h.TgZ(17,"div",8),h.TgZ(18,"h3"),h._uU(19,"your order details"),h.qZA(),h.TgZ(20,"div",9),h.TgZ(21,"table",10),h.TgZ(22,"thead"),h.TgZ(23,"tr",11),h.TgZ(24,"th",12),h._uU(25,"Image"),h.qZA(),h.TgZ(26,"th",12),h._uU(27,"Product Name"),h.qZA(),h.TgZ(28,"th",12),h._uU(29,"Quantity"),h.qZA(),h.TgZ(30,"th",12),h._uU(31,"Price"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(32,"tbody"),h.YNc(33,Nt,13,6,"tr",13),h.qZA(),h.qZA(),h.qZA(),h.TgZ(34,"div",14),h.TgZ(35,"h3"),h._uU(36," total "),h.TgZ(37,"span"),h._uU(38),h.ALo(39,"vndFormat"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(40,"div",15),h.TgZ(41,"div",16),h.TgZ(42,"div",17),h.TgZ(43,"h4"),h._uU(44,"summary"),h.qZA(),h.TgZ(45,"ul",18),h.TgZ(46,"li"),h._uU(47),h.qZA(),h.TgZ(48,"li"),h._uU(49),h.ALo(50,"slice"),h.qZA(),h.TgZ(51,"li"),h._uU(52),h.ALo(53,"vndFormat"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(54,"div",17),h.TgZ(55,"h4"),h._uU(56,"shipping address"),h.qZA(),h.TgZ(57,"div",18),h._uU(58),h.qZA(),h.qZA(),h.TgZ(59,"div",4),h.TgZ(60,"div",19),h.TgZ(61,"h2"),h._uU(62,"Your order will arrive soon!"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(12),h.hij("Order Code : ",t.checkOutOrders.code,""),h.xp6(21),h.Q6J("ngForOf",t.checkOutOrderDetails),h.xp6(5),h.Oqu(h.lcZ(39,8,t.checkOutOrders.totalAmount)),h.xp6(3),h.Q6J("ngStyle",t.blockBottom||t.blockTop?h.kEZ(16,Lt,t.widthElementFixed+"px",t.blockTop?t.offsetHeightHeader+"px":"",t.blockBottom?t.bottomMargin+"px":""):""),h.xp6(6),h.hij("order Code: ",t.checkOutOrders.code,""),h.xp6(2),h.hij(" Order Date: ",h.Dn7(50,10,t.checkOutOrders.createByDate,0,10)," "),h.xp6(3),h.hij(" Order Total: ",h.lcZ(53,14,t.checkOutOrders.totalAmount)," "),h.xp6(6),h.hij(" ",t.checkOutOrders.address," "))},directives:[s.sg,s.PC,ue.D],pipes:[ye.A,s.OU],styles:[""]}),e}(),jt=r(29726),Dt=r(91841),Vt=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/user/contact"}return d(e,[{key:"create",value:function(e){return this.httpClient.postObservable(this.url,e).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}();function Zt(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Required "),h.qZA())}function zt(e,t){if(1&e&&(h.TgZ(0,"div",26),h.YNc(1,Zt,2,0,"div",27),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.firstName.errors?null:n.contactForm.controls.firstName.errors.required)}}function Ft(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Required "),h.qZA())}function qt(e,t){if(1&e&&(h.TgZ(0,"div",26),h.YNc(1,Ft,2,0,"div",27),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.lastName.errors?null:n.contactForm.controls.lastName.errors.required)}}function Bt(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Required "),h.qZA())}function Ut(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Fail type phone "),h.qZA())}function Ht(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Phone is exsist "),h.qZA())}function Wt(e,t){if(1&e&&(h.TgZ(0,"div",26),h.YNc(1,Bt,2,0,"div",27),h.YNc(2,Ut,2,0,"div",27),h.YNc(3,Ht,2,0,"div",27),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.phoneNumber.errors?null:n.contactForm.controls.phoneNumber.errors.required),h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.phoneNumber.errors?null:n.contactForm.controls.phoneNumber.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.phoneNumber.errors?null:n.contactForm.controls.phoneNumber.errors.isPhoneUnique)}}function Yt(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1,"Required"),h.qZA())}function Jt(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Fail type email "),h.qZA())}function Qt(e,t){if(1&e&&(h.TgZ(0,"div",26),h.YNc(1,Yt,2,0,"div",27),h.YNc(2,Jt,2,0,"div",27),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.email.errors?null:n.contactForm.controls.email.errors.required),h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.email.errors?null:n.contactForm.controls.email.errors.email)}}function Gt(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Required "),h.qZA())}function $t(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Max length is 500 "),h.qZA())}function Kt(e,t){if(1&e&&(h.TgZ(0,"div",28),h.YNc(1,Gt,2,0,"div",27),h.YNc(2,$t,2,0,"div",27),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.message.errors?null:n.contactForm.controls.message.errors.required),h.xp6(1),h.Q6J("ngIf",null==n.contactForm.controls.message.errors?null:n.contactForm.controls.message.errors.maxlength)}}var Xt=function(e){return{"is-invalid":e}},en=function(){var e=function(){function e(t,n,i,r,o,a){l(this,e),this.pageContentService=t,this.contactService=n,this.messageService=i,this.authservice=r,this.fb=o,this.sanitizer=a,this.submitted=!1,this.src=this.sanitizer.bypassSecurityTrustResourceUrl("")}return d(e,[{key:"ngOnDestroy",value:function(){this.subDataUser.unsubscribe(),this.subDataUser=null}},{key:"ngOnInit",value:function(){var e=this;this.subDataUser=this.authservice.callUserInfo.subscribe(function(t){e.userInfo=t,e.initForm()}),this.getInfo()}},{key:"initForm",value:function(){this.submitted=!1,this.contactForm=this.fb.group({firstName:[this.userInfo?this.userInfo.firstName:"",[U.kI.required]],lastName:[this.userInfo?this.userInfo.lastName:"",[U.kI.required]],phoneNumber:[this.userInfo?this.userInfo.phone:"",[U.kI.pattern("[0-9]{10,11}"),U.kI.required]],email:[this.userInfo?this.userInfo.email:"",[U.kI.required,U.kI.email]],message:["",[U.kI.required,U.kI.maxLength(500)]]})}},{key:"getInfo",value:function(){var e=this;this.pageContentService.getInfo().then(function(t){e.pageContentInfo=t.data;var n=new Dt.LE;n=n.set("q",t.data.address),e.src=e.sanitizer.bypassSecurityTrustResourceUrl("https://maps.google.com/maps?".concat(n.toString(),"&t=&z=20&ie=UTF8&iwloc=&output=embed"))})}},{key:"Submit",value:function(){var e=this;if(this.submitted=!0,!this.contactForm.invalid)return this.contactService.create(this.contactForm.value).then(function(){e.initForm(),e.messageService.notification("Feedback sent success",j.b.SUCCESS)}).catch(function(t){e.messageService.alert(t.error?t.error.message:"Error Server",j.b.ERROR)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(lt),h.Y36(Vt),h.Y36(D.ez),h.Y36(D.e8),h.Y36(U.qu),h.Y36(p.H7))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-page-info"]],features:[h._Bn([lt,Vt,D.e8])],decls:73,vars:27,consts:[[1,"row","section-b-space"],[1,"col-lg-7"],["width","600","height","450","allowfullscreen","","loading","lazy",1,"e2e-iframe-trusted-src",2,"border","0",3,"src"],[1,"col-lg-5"],[1,"contact-right"],[1,"contact-icon"],["src","../assets/images/icon/phone.png","alt","Generic placeholder image"],[1,"media-body"],["aria-hidden","true",1,"fa","fa-map-marker"],["src","../assets/images/icon/email.png","alt","Generic placeholder image"],["aria-hidden","true",1,"fa","fa-fax"],[1,"theme-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","col-md-6"],["type","text","formControlName","firstName","placeholder","Ex: Vu Duc",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName","placeholder","Ex: Vi",1,"form-control",3,"ngClass"],["type","text","formControlName","phoneNumber","placeholder","Ex: 012 345 6789",1,"form-control",3,"ngClass"],["type","text","formControlName","email","placeholder","Ex: vuducvi@gmail.com",1,"form-control",3,"ngClass"],[1,"form-group","col-md-12"],["rows","4","formControlName","message","placeholder","Great service... [Maxlength: 500]",1,"form-control",3,"ngClass"],[2,"display","flex","justify-content","space-between"],["class","invalid-feedback","style","display: block",4,"ngIf"],[1,"count-length-textarea"],[1,"col-md-12"],["type","submit",1,"btn","btn-solid"],[1,"invalid-feedback"],[4,"ngIf"],[1,"invalid-feedback",2,"display","block"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h._UZ(2,"iframe",2),h.qZA(),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"ul"),h.TgZ(6,"li"),h.TgZ(7,"div",5),h._UZ(8,"img",6),h.TgZ(9,"h6"),h._uU(10,"Contact Us"),h.qZA(),h.qZA(),h.TgZ(11,"div",7),h.TgZ(12,"p"),h._uU(13),h.qZA(),h.qZA(),h.qZA(),h.TgZ(14,"li"),h.TgZ(15,"div",5),h._UZ(16,"i",8),h.TgZ(17,"h6"),h._uU(18,"Address"),h.qZA(),h.qZA(),h.TgZ(19,"div",7),h.TgZ(20,"p"),h._uU(21),h.qZA(),h.qZA(),h.qZA(),h.TgZ(22,"li"),h.TgZ(23,"div",5),h._UZ(24,"img",9),h.TgZ(25,"h6"),h._uU(26,"Address"),h.qZA(),h.qZA(),h.TgZ(27,"div",7),h.TgZ(28,"p"),h._uU(29),h.qZA(),h.qZA(),h.qZA(),h.TgZ(30,"li"),h.TgZ(31,"div",5),h._UZ(32,"i",10),h.TgZ(33,"h6"),h._uU(34,"Fax"),h.qZA(),h.qZA(),h.TgZ(35,"div",7),h.TgZ(36,"p"),h._uU(37),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(38,"form",11),h.NdJ("ngSubmit",function(){return t.Submit()}),h.TgZ(39,"div",12),h.TgZ(40,"div",13),h.TgZ(41,"label"),h._uU(42," First Name"),h.qZA(),h._UZ(43,"input",14),h.YNc(44,zt,2,1,"div",15),h.qZA(),h.TgZ(45,"div",13),h.TgZ(46,"label"),h._uU(47," Last Name"),h.qZA(),h._UZ(48,"input",16),h.YNc(49,qt,2,1,"div",15),h.qZA(),h.TgZ(50,"div",13),h.TgZ(51,"label"),h._uU(52," Phone Number"),h.qZA(),h._UZ(53,"input",17),h.YNc(54,Wt,4,3,"div",15),h.qZA(),h.TgZ(55,"div",13),h.TgZ(56,"label"),h._uU(57," Email"),h.qZA(),h._UZ(58,"input",18),h.YNc(59,Qt,3,2,"div",15),h.qZA(),h.TgZ(60,"div",19),h.TgZ(61,"label"),h._uU(62," Write Your Message"),h.qZA(),h._UZ(63,"textarea",20),h.TgZ(64,"div",21),h.TgZ(65,"div"),h.YNc(66,Kt,3,2,"div",22),h.qZA(),h.TgZ(67,"div"),h.TgZ(68,"span",23),h._uU(69),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(70,"div",24),h.TgZ(71,"button",25),h._uU(72,"Send Your Message"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("src",t.src,h.uOi),h.xp6(11),h.Oqu(null==t.pageContentInfo?null:t.pageContentInfo.phone),h.xp6(8),h.Oqu(null==t.pageContentInfo?null:t.pageContentInfo.address),h.xp6(8),h.Oqu(null==t.pageContentInfo?null:t.pageContentInfo.email),h.xp6(8),h.Oqu(null==t.pageContentInfo?null:t.pageContentInfo.fax),h.xp6(1),h.Q6J("formGroup",t.contactForm),h.xp6(5),h.Q6J("ngClass",h.VKq(17,Xt,t.contactForm.controls.firstName.errors&&(t.contactForm.controls.firstName.dirty||t.submitted))),h.xp6(1),h.Q6J("ngIf",t.contactForm.controls.firstName.errors&&(t.contactForm.controls.firstName.dirty||t.submitted)),h.xp6(4),h.Q6J("ngClass",h.VKq(19,Xt,t.contactForm.controls.lastName.errors&&(t.contactForm.controls.lastName.dirty||t.submitted))),h.xp6(1),h.Q6J("ngIf",t.contactForm.controls.lastName.errors&&(t.contactForm.controls.lastName.dirty||t.submitted)),h.xp6(4),h.Q6J("ngClass",h.VKq(21,Xt,t.contactForm.controls.phoneNumber.errors&&(t.contactForm.controls.phoneNumber.dirty||t.submitted))),h.xp6(1),h.Q6J("ngIf",t.contactForm.controls.phoneNumber.errors&&(t.contactForm.controls.phoneNumber.dirty||t.submitted)),h.xp6(4),h.Q6J("ngClass",h.VKq(23,Xt,t.contactForm.controls.email.errors&&(t.contactForm.controls.email.dirty||t.submitted))),h.xp6(1),h.Q6J("ngIf",t.contactForm.controls.email.errors&&(t.contactForm.controls.email.dirty||t.submitted)),h.xp6(4),h.Q6J("ngClass",h.VKq(25,Xt,t.contactForm.controls.message.errors&&(t.contactForm.controls.message.dirty||t.submitted))),h.xp6(3),h.Q6J("ngIf",t.contactForm.controls.message.errors&&(t.contactForm.controls.message.dirty||t.submitted)),h.xp6(3),h.Oqu(t.contactForm.controls.message.value.length+"/500"))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,s.mk,s.O5],styles:["iframe[_ngcontent-%COMP%]{width:100%}li[_ngcontent-%COMP%]:first-child{margin-top:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:150px;margin-top:45px;display:block}.contact-icon[_ngcontent-%COMP%]{position:absolute;left:0;text-align:center;width:130px;border-right:1px solid #dddddd}.contact-icon[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-transform:uppercase;padding-top:5px;font-weight:600;color:#ff4c3b}.contact-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#ff4c3b}.contact-icon[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600;margin-bottom:0;line-height:30px;font-size:14px;color:#777}label[_ngcontent-%COMP%]{text-transform:capitalize;color:#333;font-size:14px;font-weight:600}.count-length-textarea[_ngcontent-%COMP%]{font-size:.7rem}"]}),e}(),tn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},nn="object"==typeof global&&global&&global.Object===Object&&global,rn="object"==typeof self&&self&&self.Object===Object&&self,on=nn||rn||Function("return this")(),an=function(){return on.Date.now()},sn=/\s/,cn=/^\s+/,ln=on.Symbol,un=Object.prototype,dn=un.hasOwnProperty,hn=un.toString,fn=ln?ln.toStringTag:void 0,pn=Object.prototype.toString,vn=ln?ln.toStringTag:void 0,gn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":vn&&vn in Object(e)?function(e){var t=dn.call(e,fn),n=e[fn];try{e[fn]=void 0;var i=!0}catch(o){}var r=hn.call(e);return i&&(t?e[fn]=n:delete e[fn]),r}(e):function(e){return pn.call(e)}(e)},mn=function(e){return null!=e&&"object"==typeof e},bn=/^[-+]0x[0-9a-f]+$/i,yn=/^0b[01]+$/i,kn=/^0o[0-7]+$/i,wn=parseInt,_n=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||mn(e)&&"[object Symbol]"==gn(e)}(e))return NaN;if(tn(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=tn(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&sn.test(e.charAt(t)););return t}(e)+1).replace(cn,"")}(e);var n=yn.test(e);return n||kn.test(e)?wn(e.slice(2),n?2:8):bn.test(e)?NaN:+e},xn=Math.max,Tn=Math.min,An=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return tn(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),function(e,t,n){var i,r,o,a,s,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,o=r;return i=r=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(g,t),u?f(e):a}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function g(){var e=an();if(v(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-c);return d?Tn(n,o-(e-l)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,a)}function b(){var e=an(),n=v(e);if(i=arguments,r=this,c=e,n){if(void 0===s)return p(c);if(d)return clearTimeout(s),s=setTimeout(g,t),f(c)}return void 0===s&&(s=setTimeout(g,t)),a}return t=_n(t)||0,tn(n)&&(u=!!n.leading,o=(d="maxWait"in n)?xn(_n(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=r=s=void 0},b.flush=function(){return void 0===s?a:m(an())},b}(e,t,{leading:i,maxWait:t,trailing:r})},Sn=function(e,t){return e===t||e!=e&&t!=t},Cn=function(e,t){for(var n=e.length;n--;)if(Sn(e[n][0],t))return n;return-1},On=Array.prototype.splice;function En(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}En.prototype.clear=function(){this.__data__=[],this.size=0},En.prototype.delete=function(e){var t=this.__data__,n=Cn(t,e);return!(n<0||(n==t.length-1?t.pop():On.call(t,n,1),--this.size,0))},En.prototype.get=function(e){var t=this.__data__,n=Cn(t,e);return n<0?void 0:t[n][1]},En.prototype.has=function(e){return Cn(this.__data__,e)>-1},En.prototype.set=function(e,t){var n=this.__data__,i=Cn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var Pn,In=En,Mn=function(e){if(!tn(e))return!1;var t=gn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Nn=on["__core-js_shared__"],Ln=(Pn=/[^.]+$/.exec(Nn&&Nn.keys&&Nn.keys.IE_PROTO||""))?"Symbol(src)_1."+Pn:"",Rn=Function.prototype.toString,jn=function(e){if(null!=e){try{return Rn.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Dn=/^\[object .+?Constructor\]$/,Vn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zn=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!tn(e)||function(e){return!!Ln&&Ln in e}(e))&&(Mn(e)?Vn:Dn).test(jn(e))}(n)?n:void 0},zn=Zn(on,"Map"),Fn=Zn(Object,"create"),qn=Object.prototype.hasOwnProperty,Bn=Object.prototype.hasOwnProperty;function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Un.prototype.clear=function(){this.__data__=Fn?Fn(null):{},this.size=0},Un.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Un.prototype.get=function(e){var t=this.__data__;if(Fn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return qn.call(t,e)?t[e]:void 0},Un.prototype.has=function(e){var t=this.__data__;return Fn?void 0!==t[e]:Bn.call(t,e)},Un.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fn&&void 0===t?"__lodash_hash_undefined__":t,this};var Hn=Un,Wn=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(zn||In),string:new Hn}},Yn.prototype.delete=function(e){var t=Wn(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return Wn(this,e).get(e)},Yn.prototype.has=function(e){return Wn(this,e).has(e)},Yn.prototype.set=function(e,t){var n=Wn(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var Jn=Yn;function Qn(e){var t=this.__data__=new In(e);this.size=t.size}Qn.prototype.clear=function(){this.__data__=new In,this.size=0},Qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Qn.prototype.get=function(e){return this.__data__.get(e)},Qn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof In){var i=n.__data__;if(!zn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jn(i)}return n.set(e,t),this.size=n.size,this};var Gn=Qn,$n=function(){try{var e=Zn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Kn=$n,Xn=function(e,t,n){"__proto__"==t&&Kn?Kn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ei=Object.prototype.hasOwnProperty,ti=function(e,t,n){var i=e[t];(!ei.call(e,t)||!Sn(i,n)||void 0===n&&!(t in e))&&Xn(e,t,n)},ni=function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=i?i(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),r?Xn(n,s,c):ti(n,s,c)}return n},ii=function(e){return mn(e)&&"[object Arguments]"==gn(e)},ri=Object.prototype,oi=ri.hasOwnProperty,ai=ri.propertyIsEnumerable,si=ii(function(){return arguments}())?ii:function(e){return mn(e)&&oi.call(e,"callee")&&!ai.call(e,"callee")},ci=si,li=Array.isArray,ui="object"==typeof exports&&exports&&!exports.nodeType&&exports,di=ui&&"object"==typeof module&&module&&!module.nodeType&&module,hi=di&&di.exports===ui?on.Buffer:void 0,fi=(hi?hi.isBuffer:void 0)||function(){return!1},pi=/^(?:0|[1-9]\d*)$/,vi=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&pi.test(e))&&e>-1&&e%1==0&&e<t},gi=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},mi={};mi["[object Float32Array]"]=mi["[object Float64Array]"]=mi["[object Int8Array]"]=mi["[object Int16Array]"]=mi["[object Int32Array]"]=mi["[object Uint8Array]"]=mi["[object Uint8ClampedArray]"]=mi["[object Uint16Array]"]=mi["[object Uint32Array]"]=!0,mi["[object Arguments]"]=mi["[object Array]"]=mi["[object ArrayBuffer]"]=mi["[object Boolean]"]=mi["[object DataView]"]=mi["[object Date]"]=mi["[object Error]"]=mi["[object Function]"]=mi["[object Map]"]=mi["[object Number]"]=mi["[object Object]"]=mi["[object RegExp]"]=mi["[object Set]"]=mi["[object String]"]=mi["[object WeakMap]"]=!1;var bi=function(e){return function(t){return e(t)}},yi="object"==typeof exports&&exports&&!exports.nodeType&&exports,ki=yi&&"object"==typeof module&&module&&!module.nodeType&&module,wi=ki&&ki.exports===yi&&nn.process,_i=function(){try{return ki&&ki.require&&ki.require("util").types||wi&&wi.binding&&wi.binding("util")}catch(e){}}(),xi=_i&&_i.isTypedArray,Ti=xi?bi(xi):function(e){return mn(e)&&gi(e.length)&&!!mi[gn(e)]},Ai=Object.prototype.hasOwnProperty,Si=function(e,t){var n=li(e),i=!n&&ci(e),r=!n&&!i&&fi(e),o=!n&&!i&&!r&&Ti(e),a=n||i||r||o,s=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=s.length;for(var l in e)(t||Ai.call(e,l))&&(!a||!("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vi(l,c)))&&s.push(l);return s},Ci=Object.prototype,Oi=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ci)},Ei=function(e,t){return function(n){return e(t(n))}},Pi=Ei(Object.keys,Object),Ii=Object.prototype.hasOwnProperty,Mi=function(e){return null!=e&&gi(e.length)&&!Mn(e)},Ni=function(e){return Mi(e)?Si(e):function(e){if(!Oi(e))return Pi(e);var t=[];for(var n in Object(e))Ii.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Li=Object.prototype.hasOwnProperty,Ri=function(e){return Mi(e)?Si(e,!0):function(e){if(!tn(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Oi(e),n=[];for(var i in e)"constructor"==i&&(t||!Li.call(e,i))||n.push(i);return n}(e)},ji="object"==typeof exports&&exports&&!exports.nodeType&&exports,Di=ji&&"object"==typeof module&&module&&!module.nodeType&&module,Vi=Di&&Di.exports===ji?on.Buffer:void 0,Zi=Vi?Vi.allocUnsafe:void 0,zi=function(){return[]},Fi=Object.prototype.propertyIsEnumerable,qi=Object.getOwnPropertySymbols,Bi=qi?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a)&&(o[r++]=a)}return o}(qi(e),function(t){return Fi.call(e,t)}))}:zi,Ui=Bi,Hi=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},Wi=Ei(Object.getPrototypeOf,Object),Yi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Hi(t,Ui(e)),e=Wi(e);return t}:zi,Ji=Yi,Qi=function(e,t,n){var i=t(e);return li(e)?i:Hi(i,n(e))},Gi=function(e){return Qi(e,Ni,Ui)},$i=function(e){return Qi(e,Ri,Ji)},Ki=Zn(on,"DataView"),Xi=Zn(on,"Promise"),er=Zn(on,"Set"),tr=Zn(on,"WeakMap"),nr="[object Map]",ir="[object Promise]",rr="[object Set]",or="[object WeakMap]",ar="[object DataView]",sr=jn(Ki),cr=jn(zn),lr=jn(Xi),ur=jn(er),dr=jn(tr),hr=gn;(Ki&&hr(new Ki(new ArrayBuffer(1)))!=ar||zn&&hr(new zn)!=nr||Xi&&hr(Xi.resolve())!=ir||er&&hr(new er)!=rr||tr&&hr(new tr)!=or)&&(hr=function(e){var t=gn(e),n="[object Object]"==t?e.constructor:void 0,i=n?jn(n):"";if(i)switch(i){case sr:return ar;case cr:return nr;case lr:return ir;case ur:return rr;case dr:return or}return t});var fr=hr,pr=Object.prototype.hasOwnProperty,vr=on.Uint8Array,gr=function(e){var t=new e.constructor(e.byteLength);return new vr(t).set(new vr(e)),t},mr=/\w*$/,br=ln?ln.prototype:void 0,yr=br?br.valueOf:void 0,kr=Object.create,wr=function(){function e(){}return function(t){if(!tn(t))return{};if(kr)return kr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),_r=wr,xr=_i&&_i.isMap,Tr=xr?bi(xr):function(e){return mn(e)&&"[object Map]"==fr(e)},Ar=_i&&_i.isSet,Sr=Ar?bi(Ar):function(e){return mn(e)&&"[object Set]"==fr(e)},Cr="[object Arguments]",Or="[object Function]",Er="[object Object]",Pr={};Pr[Cr]=Pr["[object Array]"]=Pr["[object ArrayBuffer]"]=Pr["[object DataView]"]=Pr["[object Boolean]"]=Pr["[object Date]"]=Pr["[object Float32Array]"]=Pr["[object Float64Array]"]=Pr["[object Int8Array]"]=Pr["[object Int16Array]"]=Pr["[object Int32Array]"]=Pr["[object Map]"]=Pr["[object Number]"]=Pr[Er]=Pr["[object RegExp]"]=Pr["[object Set]"]=Pr["[object String]"]=Pr["[object Symbol]"]=Pr["[object Uint8Array]"]=Pr["[object Uint8ClampedArray]"]=Pr["[object Uint16Array]"]=Pr["[object Uint32Array]"]=!0,Pr["[object Error]"]=Pr[Or]=Pr["[object WeakMap]"]=!1;var Ir=function e(t,n,i,r,o,a){var s,c=1&n,l=2&n,u=4&n;if(i&&(s=o?i(t,r,o,a):i(t)),void 0!==s)return s;if(!tn(t))return t;var d=li(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&pr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!c)return function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(t,s)}else{var h=fr(t),f=h==Or||"[object GeneratorFunction]"==h;if(fi(t))return function(e,t){if(t)return e.slice();var n=e.length,i=Zi?Zi(n):new e.constructor(n);return e.copy(i),i}(t,c);if(h==Er||h==Cr||f&&!o){if(s=l||f?{}:function(e){return"function"!=typeof e.constructor||Oi(e)?{}:_r(Wi(e))}(t),!c)return l?function(e,t){return ni(e,Ji(e),t)}(t,function(e,t){return e&&ni(t,Ri(t),e)}(s,t)):function(e,t){return ni(e,Ui(e),t)}(t,function(e,t){return e&&ni(t,Ni(t),e)}(s,t))}else{if(!Pr[h])return o?t:{};s=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return gr(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?gr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?gr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,mr.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return yr?Object(yr.call(e)):{}}(e)}}(t,h,c)}}a||(a=new Gn);var p=a.get(t);if(p)return p;a.set(t,s),Sr(t)?t.forEach(function(r){s.add(e(r,n,i,r,t,a))}):Tr(t)&&t.forEach(function(r,o){s.set(o,e(r,n,i,o,t,a))});var v=d?void 0:(u?l?$i:Gi:l?Ri:Ni)(t);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n););}(v||t,function(r,o){v&&(r=t[o=r]),ti(s,o,e(r,n,i,o,t,a))}),s},Mr=Function.prototype.toString,Nr=Object.prototype.hasOwnProperty,Lr=Mr.call(Object);function Rr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=[e],i=new Set;n.length>0;){var r=n.shift();if(!(i.has(r)||jr(r)||t.has(r)))if(i.add(r),r[Symbol.iterator])try{var a,s=o(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;n.push(c)}}catch(u){s.e(u)}finally{s.f()}}catch(c){}else for(var l in r)"defaultValue"!==l&&n.push(r[l])}return i}function jr(e){var t=Object.prototype.toString.call(e),n=typeof e;return"number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===t||"[object RegExp]"===t||"[object Module]"===t||null==e||e instanceof EventTarget||e instanceof Event}var Dr=function(e){function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,n),(t=f(this,n,[i]))._editor=null,t._throttledSave=An(t._save.bind(v(t)),"number"==typeof i.saveInterval?i.saveInterval:5e3),t._creator=function(t,n){return e.create(t,n)},t._destructor=function(e){return e.destroy()},t}return g(n,e),d(n,[{key:"editor",get:function(){return this._editor}},{key:"_item",get:function(){return this._editor}},{key:"_restart",value:function(){var e=this;return Promise.resolve().then(function(){return e.state="initializing",e._fire("stateChange"),e._destroy()}).catch(function(e){console.error("An error happened during the editor destroying.",e)}).then(function(){if("string"==typeof e._elementOrData)return e.create(e._data,e._config,e._config.context);var t=Object.assign({},e._config,{initialData:e._data});return e.create(e._elementOrData,t,t.context)}).then(function(){e._fire("restart")})}},{key:"create",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,o=arguments.length>2?arguments[2]:void 0;return Promise.resolve().then(function(){return t(w(n.prototype),"_startErrorHandling",e).call(e),e._elementOrData=i,e._config=e._cloneEditorConfiguration(r)||{},e._config.context=o,e._creator(i,e._config)}).then(function(t){e._editor=t,t.model.document.on("change:data",e._throttledSave),e._lastDocumentVersion=t.model.document.version,e._data=e._getData(),e.state="ready",e._fire("stateChange")})}},{key:"destroy",value:function(){var e=this;return Promise.resolve().then(function(){return e.state="destroyed",e._fire("stateChange"),t(w(n.prototype),"destroy",e).call(e),e._destroy()})}},{key:"_destroy",value:function(){var e=this;return Promise.resolve().then(function(){e._stopErrorHandling(),e._throttledSave.flush();var t=e._editor;return e._editor=null,e._destructor(t)})}},{key:"_save",value:function(){var e=this._editor.model.document.version;if(e!==this._lastDocumentVersion)try{this._data=this._getData(),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}},{key:"_setExcludedProperties",value:function(e){this._excludedProps=e}},{key:"_getData",value:function(){var e,t={},n=o(this._editor.model.document.getRootNames());try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i]=this._editor.data.get({rootName:i})}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"_isErrorComingFromThisItem",value:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(e===t&&function(e){return"object"==typeof e&&null!==e}(e))return!0;var i,r=Rr(e,n),a=Rr(t,n),s=o(r);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(a.has(c))return!0}}catch(l){s.e(l)}finally{s.f()}return!1}(this._editor,e.context,this._excludedProps)}},{key:"_cloneEditorConfiguration",value:function(e){return function(e,t){return Ir(e,5,t="function"==typeof t?t:void 0)}(e,function(e,t){if(function(e){return mn(e)&&1===e.nodeType&&!function(e){if(!mn(e)||"[object Object]"!=gn(e))return!1;var t=Wi(e);if(null===t)return!0;var n=Nr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Mr.call(n)==Lr}(e)}(e)||"context"===t)return e})}}]),n}(function(){function e(t){var n=this;if(l(this,e),this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=function(e){var t=e.error||e.reason;t instanceof Error&&n._handleError(t,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}return d(e,[{key:"setCreator",value:function(e){this._creator=e}},{key:"setDestructor",value:function(e){this._destructor=e}},{key:"destroy",value:function(){this._stopErrorHandling(),this._listeners={}}},{key:"on",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}},{key:"off",value:function(e,t){this._listeners[e]=this._listeners[e].filter(function(e){return e!==t})}},{key:"_fire",value:function(e){for(var t=this._listeners[e]||[],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a,s=o(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.apply(this,[null].concat(i))}}catch(l){s.e(l)}finally{s.f()}}},{key:"_startErrorHandling",value:function(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_stopErrorHandling",value:function(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_handleError",value:function(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t.filename,lineno:t.lineno,colno:t.colno,date:this._now()});var n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}},{key:"_shouldReactToError",value:function(e){return e.is&&e.is("CKEditorError")&&null!=e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}},{key:"_shouldRestart",value:function(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}]),e}());function Vr(e,t){}var Zr=new Array(256).fill(0).map(function(e,t){return("0"+t.toString(16)).slice(-2)}),zr=function(){var e=function(){function e(t,n){l(this,e),this.config={},this.data="",this.tagName="div",this.ready=new h.vpe,this.change=new h.vpe,this.blur=new h.vpe,this.focus=new h.vpe,this.error=new h.vpe,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0;return"e"+Zr[e>>0&255]+Zr[e>>8&255]+Zr[e>>16&255]+Zr[e>>24&255]+Zr[t>>0&255]+Zr[t>>8&255]+Zr[t>>16&255]+Zr[t>>24&255]+Zr[n>>0&255]+Zr[n>>8&255]+Zr[n>>16&255]+Zr[n>>24&255]+Zr[i>>0&255]+Zr[i>>8&255]+Zr[i>>16&255]+Zr[i>>24&255]}(),this.ngZone=n,this.elementRef=t}return d(e,[{key:"disabled",get:function(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled},set:function(e){this.setDisabledState(e)}},{key:"editorInstance",get:function(){var e=this.editorWatchdog;return this.watchdog&&(e=this.watchdog._watchdogs.get(this.id)),e?e.editor:null}},{key:"ngAfterViewInit",value:function(){this.attachToWatchdog()}},{key:"ngOnDestroy",value:function(){return(0,G.mG)(this,void 0,void 0,i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.watchdog){e.next=5;break}return e.next=3,this.watchdog.remove(this.id);case 3:e.next=10;break;case 5:if(e.t0=this.editorWatchdog&&this.editorWatchdog.editor,!e.t0){e.next=10;break}return e.next=9,this.editorWatchdog.destroy();case 9:this.editorWatchdog=void 0;case 10:case"end":return e.stop()}},e,this)}))}},{key:"writeValue",value:function(e){null===e&&(e=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.setData(e),this.isEditorSettingData=!1):(this.data=e,this.editorElement&&(this.editorElement.innerHTML=this.data))}},{key:"registerOnChange",value:function(e){this.cvaOnChange=e}},{key:"registerOnTouched",value:function(e){this.cvaOnTouched=e}},{key:"setDisabledState",value:function(e){this.editorInstance&&(this.editorInstance.isReadOnly=e),this.initiallyDisabled=e}},{key:"attachToWatchdog",value:function(){var e=this,t=function(t,n){return(0,G.mG)(e,void 0,void 0,i().mark(function e(){var r=this;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ngZone.runOutsideAngular(function(){return(0,G.mG)(r,void 0,void 0,i().mark(function e(){var r,o=this;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.elementRef.nativeElement.appendChild(t),e.next=3,this.editor.create(t,n);case 3:return r=e.sent,e.abrupt("return",(this.initiallyDisabled&&(r.isReadOnly=this.initiallyDisabled),this.ngZone.run(function(){o.ready.emit(r)}),this.setUpEditorEvents(r),r));case 5:case"end":return e.stop()}},e,this)}))}));case 1:case"end":return e.stop()}},e,this)}))},n=function(t){return(0,G.mG)(e,void 0,void 0,i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.destroy();case 2:this.elementRef.nativeElement.removeChild(this.editorElement);case 3:case"end":return e.stop()}},e,this)}))},r=function(){e.ngZone.run(function(){e.error.emit()})},o=document.createElement(this.tagName),a=this.getConfig();if(this.editorElement=o,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:n,sourceElementOrData:o,config:a}),this.watchdog.on("itemError",function(t,n){n.itemId===e.id&&r()});else{var s=new Dr(this.editor);s.setCreator(t),s.setDestructor(n),s.on("error",r),this.editorWatchdog=s,this.editorWatchdog.create(o,a)}}},{key:"getConfig",value:function(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");return Object.assign(Object.assign({},this.config),{initialData:this.config.initialData||this.data||""})}},{key:"setUpEditorEvents",value:function(e){var t=this,n=e.editing.view.document;e.model.document.on("change:data",function(n){t.ngZone.run(function(){if(t.cvaOnChange&&!t.isEditorSettingData){var i=e.getData();t.cvaOnChange(i)}t.change.emit({event:n,editor:e})})}),n.on("focus",function(n){t.ngZone.run(function(){t.focus.emit({event:n,editor:e})})}),n.on("blur",function(n){t.ngZone.run(function(){t.cvaOnTouched&&t.cvaOnTouched(),t.blur.emit({event:n,editor:e})})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.R0b))},e.\u0275cmp=h.Xpm({type:e,selectors:[["ckeditor"]],inputs:{config:"config",data:"data",tagName:"tagName",disabled:"disabled",editor:"editor",watchdog:"watchdog"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[h._Bn([{provide:U.JU,useExisting:(0,h.Gpc)(function(){return e}),multi:!0}])],decls:1,vars:0,template:function(e,t){1&e&&h.YNc(0,Vr,0,0,"ng-template")},encapsulation:2}),e}(),Fr=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[U.u5,s.ez]]}),e}();function qr(e,t){1&e&&(h.ynx(0),h._UZ(1,"app-page-info"),h.BQk())}function Br(e,t){if(1&e&&h._UZ(0,"ckeditor",8),2&e){var n=h.oxw(2);h.Q6J("editor",n.editor)("data",n.pageContent.description)("config",n.config)}}function Ur(e,t){if(1&e&&(h.TgZ(0,"div",5),h.TgZ(1,"div",6),h.YNc(2,Br,1,3,"ckeditor",7),h.qZA(),h.qZA()),2&e){var n=h.oxw();h.xp6(2),h.Q6J("ngIf",null==n.pageContent?null:n.pageContent.description)}}var Hr=function(){var e=function(){function e(t,n){l(this,e),this.pageContentService=t,this.activeRoute=n,this.editor=jt,this.config={isReadOnly:!0}}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.activeRoute.params.subscribe(function(){e.getCurrentPageContent()})}},{key:"getCurrentPageContent",value:function(){var e=this,t=this.activeRoute.snapshot.paramMap.get("id");this.isContactUs="00000000-0000-0000-0000-000000000002"===t,this.pageContentService.getById(null,t).then(function(t){e.pageContent=t.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(lt),h.Y36(N.gz))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-page-content"]],features:[h._Bn([lt])],decls:5,vars:4,consts:[[3,"title","breadcrumb"],[1,"about-page","section-b-space"],[1,"container"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","col-12 p-0","type","text","disabled","true",3,"editor","data","config",4,"ngIf"],["type","text","disabled","true",1,"col-12","p-0",3,"editor","data","config"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.YNc(3,qr,2,0,"ng-container",3),h.YNc(4,Ur,3,1,"div",4),h.qZA(),h.qZA()),2&e&&(h.Q6J("title",null==t.pageContent?null:t.pageContent.title)("breadcrumb",null==t.pageContent?null:t.pageContent.title),h.xp6(3),h.Q6J("ngIf",t.isContactUs),h.xp6(1),h.Q6J("ngIf",!t.isContactUs))},directives:[q.L,s.O5,en,zr],styles:["img{vertical-align:middle;border-style:none;max-width:100%}\n"],encapsulation:2}),e}(),Wr=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/user/product-details"}return d(e,[{key:"get",value:function(e){return this.httpClient.getObservable("".concat(this.url,"?id=").concat(e)).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Yr=r(62625),Jr=r(76509),Qr=["sizeChart"];function Gr(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",2),h.TgZ(1,"div",3),h.TgZ(2,"h5",4),h._uU(3),h.qZA(),h.TgZ(4,"button",5),h.NdJ("click",function(){return h.CHM(n).$implicit.dismiss("Cross click")}),h.TgZ(5,"span",6),h._uU(6,"\xd7"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"div",7),h._UZ(8,"img",8),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(3),h.Oqu(null==i.product?null:i.product.title)}}var $r=function(){var e=function(){function e(t,n){l(this,e),this.platformId=t,this.modalService=n,this.modalOpen=!1}return d(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(){var e=this;this.modalOpen=!0,(0,s.NF)(this.platformId)&&this.modalService.open(this.SizeChart,{size:"md",ariaLabelledBy:"size-modal",centered:!0,windowClass:"SizeChart"}).result.then(function(e){},function(t){e.closeResult="Dismissed ".concat(e.getDismissReason(t))})}},{key:"getDismissReason",value:function(e){return e===B.If.ESC?"by pressing ESC":e===B.If.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"ngOnDestroy",value:function(){this.modalOpen&&this.modalService.dismissAll()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.Lbi),h.Y36(B.FF))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-size-modal"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(Qr,5),2&e)&&(h.iGM(n=h.CRH())&&(t.SizeChart=n.first))},inputs:{product:"product"},decls:2,vars:0,consts:[["class","theme-modal"],["sizeChart",""],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["src","assets/images/size-chart.jpg","alt","",1,"img-fluid"]],template:function(e,t){1&e&&h.YNc(0,Gr,9,1,"ng-template",0,1,h.W1O)},styles:[""]}),e}(),Kr=["sizeChart"],Xr=function(e,t,n){return{url:e,typeClass:t,style:n}};function eo(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"app-image-wrapper",33),h.NdJ("click",function(){h.CHM(n);var e=h.oxw().index,t=h.oxw();return h.MAs(7).to(t.activeSlide=e.toString())}),h.qZA(),h.qZA()}if(2&e){var i=h.oxw().$implicit,r=h.oxw();h.xp6(1),h.Q6J("data",h.kEZ(1,Xr,i,r.typeDisplayImage.PRODUCT_DETAIL_MAIN_IMAGE,r.typeSizeImage.LARGE))}}function to(e,t){if(1&e&&(h.ynx(0),h.YNc(1,eo,2,5,"ng-template",32),h.BQk()),2&e){var n=t.index;h.xp6(1),h.Q6J("id",n)}}function no(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",34),h.TgZ(1,"app-image-wrapper",35),h.NdJ("click",function(){h.CHM(n);var e=h.oxw().index,t=h.oxw(2);return h.MAs(7).to(t.activeSlide=e.toString())}),h.qZA(),h.qZA()}if(2&e){var i=h.oxw(),r=i.index,o=i.$implicit,a=h.oxw(2);h.ekj("active",r==a.activeSlide),h.xp6(1),h.Q6J("data",h.kEZ(3,Xr,o,a.typeDisplayImage.PRODUCT_DETAIL_IMAGE,a.typeSizeImage.SMALL))}}function io(e,t){if(1&e&&(h.ynx(0),h.YNc(1,no,2,7,"ng-template",32),h.BQk()),2&e){var n=t.index;h.xp6(1),h.Q6J("id",n)}}function ro(e,t){if(1&e&&(h.TgZ(0,"owl-carousel-o",6),h.YNc(1,io,2,1,"ng-container",8),h.qZA()),2&e){var n=h.oxw();h.Q6J("options",n.ProductDetailsThumbConfig),h.xp6(1),h.Q6J("ngForOf",null==n.product?null:n.product.imageUrl.split(","))}}var oo=function(e){return["lead mr-2",e]};function ao(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"a",36),h.NdJ("click",function(){h.CHM(n);var e=h.oxw();return e.addToWishList(e.product)}),h._UZ(1,"i",37),h.qZA()}if(2&e){var i=h.oxw();h.xp6(1),h.Q6J("ngClass",h.VKq(1,oo,null!=i.product&&i.product.isInWishList?"fa fa-heart text-danger":"ti-heart"))}}function so(e,t){if(1&e&&(h.TgZ(0,"span",38),h.TgZ(1,"span",39),h._uU(2,"\u2605"),h.qZA(),h._uU(3,"\u2605 "),h.qZA()),2&e){var n=t.fill;h.ekj("full",100===n),h.xp6(1),h.Udp("width",n,"%")}}function co(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"h3",40),h._uU(2,"Description"),h.qZA(),h._UZ(3,"div",41),h.qZA()),2&e){var n=h.oxw();h.xp6(3),h.Q6J("innerHTML",null==n.product?null:n.product.contentHTML,h.oJD)}}var lo=function(){return["/auth/login"]};function uo(e,t){1&e&&(h.TgZ(0,"button",42),h._uU(1," You need to login to rate this product "),h.qZA()),2&e&&h.Q6J("routerLink",h.DdM(1,lo))}function ho(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"app-comment-detail",43),h.NdJ("action",function(e){return h.CHM(n),h.oxw().changePageIndex(e)}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("comments",i.comments)}}var fo=function(){var e=function(){function e(t,n,i,r,o,a,s,c){l(this,e),this.productDetailsService=t,this.activatedRoute=n,this.commentService=i,this.cartService=r,this.toastrService=o,this.authService=a,this.wishListService=s,this.sweetService=c,this.counter=1,this.activeSlide=0,this.typeDisplayImage=z.hp,this.typeSizeImage=z.mb,this.ProductDetailsMainSliderConfig=nt,this.ProductDetailsThumbConfig=it}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.token=localStorage.getItem("token"),this.subDataUser=this.authService.callUserInfo.subscribe(function(t){return e.user=t}),this.initDataComment(),this.getProduct()}},{key:"getProduct",value:function(){var e=this;this.activatedRoute.queryParams.subscribe(function(t){e.productDetailsService.get(t.id).then(function(t){e.product=t.data}),e.createSearchModel(),e.getComments()})}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"initDataComment",value:function(){this.dataComment={entityId:this.activatedRoute.snapshot.queryParamMap.get("id"),entityType:"Product",rating:5}}},{key:"createSearchModel",value:function(){var e=this.activatedRoute.snapshot.queryParamMap.get("id");this.searchModel={"search.entityId":e,pageIndex:0,pageSize:10}}},{key:"changePageIndex",value:function(e){this.searchModel=Object.assign(Object.assign({},this.searchModel),{pageIndex:e-1}),this.getComments()}},{key:"getComments",value:function(){var e=this;this.commentService.getProductComments(this.searchModel).then(function(t){e.comments=t.data}).catch(function(e){})}},{key:"addToCart",value:function(e){this.cartService.addToCart(e),this.sweetService.notification("Product has been added to cart","success")}},{key:"addToWishList",value:function(e){var t=this,n={productId:e.id};if(this.product.isInWishList)return this.sweetService.confirm("Remove in wish list?").then(function(i){i.isConfirmed&&t.wishListService.createOrDelete(n).then(function(){t.product.isInWishList=!1,t.cartService.removeWishlistItem(e)})});this.wishListService.createOrDelete(n).then(function(){t.product.isInWishList=!0,t.cartService.addToWishlist(e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Wr),h.Y36(N.gz),h.Y36(Z),h.Y36(ge.N),h.Y36(Jr._W),h.Y36(D.e8),h.Y36(Yr.W),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-product-details"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(Kr,5),2&e)&&(h.iGM(n=h.CRH())&&(t.SizeChart=n.first))},features:[h._Bn([Wr,Z,ge.N,Yr.W])],decls:52,vars:19,consts:[[3,"title","breadcrumb"],[1,"section-b-space"],[1,"collection-wrapper"],[1,"container"],[1,"row"],[1,"col-lg-4"],[1,"product-slick",3,"options"],["owlCar",""],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],[1,"slider-nav"],["class","product-slick",3,"options",4,"ngIf"],[1,"product-right","product-description-box"],[1,"d-flex","align-items-baseline"],["href","javascript:void(0)","title","Add to Wishlist","style","color: red;",3,"click",4,"ngIf"],[1,"border-product"],[1,"product-title"],[1,"m-0"],["t",""],[3,"rate","starTemplate","readonly","max"],[1,"d-flex"],[1,"addeffect-section","product-description","border-product","mr-2"],[1,"btn","btn-solid",3,"click"],[1,"addeffect-section","product-description","border-product"],[4,"ngIf"],["loading",""],[1,"tab-product","m-0"],[1,"col-sm-12","col-lg-12"],[3,"dataComment","action"],[3,"comments","action",4,"ngIf"],[3,"product"],["sizeChart",""],["carouselSlide","",3,"id"],[1,"img-fluid",3,"data","click"],[1,"owl-thumb"],[3,"data","click"],["href","javascript:void(0)","title","Add to Wishlist",2,"color","red",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"star"],[1,"half"],[2,"color","black"],[3,"innerHTML"],[1,"btn","btn-primary",3,"routerLink"],[3,"comments","action"]],template:function(e,t){if(1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"owl-carousel-o",6,7),h.YNc(8,to,2,1,"ng-container",8),h.qZA(),h.TgZ(9,"div",4),h.TgZ(10,"div",9),h.TgZ(11,"div",10),h.YNc(12,ro,2,2,"owl-carousel-o",11),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"div",5),h.TgZ(14,"div",12),h.TgZ(15,"div",13),h.TgZ(16,"h2"),h._uU(17),h.YNc(18,ao,2,3,"a",14),h.qZA(),h.qZA(),h.TgZ(19,"div",15),h.TgZ(20,"h4",16),h._uU(21,"product code"),h.qZA(),h.TgZ(22,"p"),h._uU(23),h.qZA(),h.qZA(),h.TgZ(24,"div"),h.TgZ(25,"h3",17),h._uU(26),h.ALo(27,"vndFormat"),h.qZA(),h.qZA(),h.YNc(28,so,4,4,"ng-template",null,18,h.W1O),h._UZ(30,"ngb-rating",19),h._UZ(31,"hr",17),h.qZA(),h._UZ(32,"br"),h.TgZ(33,"div",20),h.TgZ(34,"div",21),h.TgZ(35,"a",22),h.NdJ("click",function(){return t.addToCart(t.product)}),h._uU(36,"add to cart "),h.qZA(),h.qZA(),h.qZA(),h._UZ(37,"br"),h.TgZ(38,"div",23),h.YNc(39,co,4,1,"div",24),h._UZ(40,"br"),h.YNc(41,uo,2,2,"ng-template",null,25,h.W1O),h.qZA(),h.qZA(),h.qZA(),h._UZ(43,"div",5),h.qZA(),h.TgZ(44,"section",26),h.TgZ(45,"div",3),h.TgZ(46,"div",4),h.TgZ(47,"div",27),h.TgZ(48,"app-comment",28),h.NdJ("action",function(){return t.getProduct()}),h.qZA(),h.YNc(49,ho,1,1,"app-comment-detail",29),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(50,"app-size-modal",30,31)),2&e){var n=h.MAs(29);h.Q6J("title",null==t.product?null:t.product.name)("breadcrumb",null==t.product?null:t.product.name),h.xp6(6),h.Q6J("options",t.ProductDetailsMainSliderConfig),h.xp6(2),h.Q6J("ngForOf",null==t.product?null:t.product.imageUrl.split(",")),h.xp6(4),h.Q6J("ngIf",(null==t.product?null:t.product.imageUrl.split(",").length)>=2),h.xp6(5),h.hij(" ",null==t.product?null:t.product.name," "),h.xp6(1),h.Q6J("ngIf",t.user),h.xp6(5),h.Oqu(null==t.product?null:t.product.description.substring(0,200)),h.xp6(3),h.hij(" ",h.lcZ(27,17,null==t.product?null:t.product.price)," "),h.xp6(4),h.Q6J("rate",null==t.product?null:t.product.ratingScore)("starTemplate",n)("readonly",!0)("max",5),h.xp6(9),h.Q6J("ngIf",""!=(null==t.product?null:t.product.contentHTML)),h.xp6(9),h.Q6J("dataComment",t.dataComment),h.xp6(1),h.Q6J("ngIf",t.comments),h.xp6(1),h.Q6J("product",t.product)}},directives:[q.L,rt.Fy,s.sg,s.O5,B.OC,J,$r,rt.Mp,Q.t,s.mk,N.rH,re],pipes:[ye.A],styles:[".ti-heart[_ngcontent-%COMP%]:hover{color:var(--theme-deafult);transition:all .2s ease}",".star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:2.5rem;color:#d3d3d3}.full[_ngcontent-%COMP%]{color:#ffa200}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden;color:#ffa200}"]}),e}(),po=(function(e){e[e.NULL=0]="NULL",e[e.AZ=1]="AZ",e[e.ZA=2]="ZA",e[e.PRICELOW=3]="PRICELOW",e[e.PRICEHIGH=4]="PRICEHIGH"}(po||(po={})),po),vo=r(24743);function go(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"li"),h.TgZ(1,"a",7),h.NdJ("mouseenter",function(e){return h.CHM(n),h.oxw().bigImg(e.target.style)})("mouseleave",function(e){return h.CHM(n),h.oxw().normalImg(e.target.style)})("click",function(e){var t=h.CHM(n).$implicit;return h.oxw().onSelect(e.target.style,t.name)}),h._uU(2),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit;h.xp6(2),h.hij(" ",i.name," ")}}var mo=function(){var e=function(){function e(t,n){var i=this;l(this,e),this.productListService=t,this.elRef=n,this.products=[],this.collapse=!0,this.categories=[],this.event={},this.categoryName=[],this.styleFont="color: black; font-weight: bold",this.styleFontNormal="color: #77777777; font-weight: normal",this.onChangeTypeCate=new h.vpe,this.productListService.getCategory().then(function(e){i.categories=e.data})}return d(e,[{key:"ngOnInit",value:function(){}},{key:"filterbyCategory",get:function(){return this.categories}},{key:"onSelect",value:function(e,t){this.onChangeTypeCate.emit(t)}},{key:"bigImg",value:function(e){this.event.color=e.color,this.event["font-weight"]=e["font-weight"],e.color="black",e["font-weight"]="bold"}},{key:"normalImg",value:function(e){this.event&&(e.color=this.event.color,e["font-weight"]=this.event["font-weight"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(D.Nl),h.Y36(h.SBq))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-categories"]],inputs:{categoryName:"categoryName",styleFont:"styleFont"},outputs:{onChangeTypeCate:"onChangeTypeCate"},features:[h._Bn([D.Nl])],decls:10,vars:3,consts:[[1,"collection-collapse-block","border-0"],[1,"collapse-block-title",3,"click"],[1,"collection-collapse-block-content"],[1,"collection-brand-filter"],[1,"category-list"],[1,"ALL",2,"cursor","pointer",3,"mouseenter","mouseleave","click"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"mouseenter","mouseleave","click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"h3",1),h.NdJ("click",function(){return t.collapse=!t.collapse}),h._uU(2,"Category"),h.qZA(),h.TgZ(3,"div",2),h.TgZ(4,"div",3),h.TgZ(5,"ul",4),h.TgZ(6,"li"),h.TgZ(7,"a",5),h.NdJ("mouseenter",function(e){return t.bigImg(e.target.style)})("mouseleave",function(e){return t.normalImg(e.target.style)})("click",function(e){return t.onSelect(e.target.style,"ALL")}),h._uU(8," ALL "),h.qZA(),h.qZA(),h.YNc(9,go,3,1,"li",6),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.ekj("open",t.collapse),h.xp6(9),h.Q6J("ngForOf",t.filterbyCategory))},directives:[s.sg],styles:[""]}),e}(),bo=r(25430),yo=r(39053),ko=r(26202),wo=["tooltipTemplate"],_o=["leftOuterSelectionBar"],xo=["rightOuterSelectionBar"],To=["fullBar"],Ao=["selectionBar"],So=["minHandle"],Co=["maxHandle"],Oo=["floorLabel"],Eo=["ceilLabel"],Po=["minHandleLabel"],Io=["maxHandleLabel"],Mo=["combinedLabel"],No=["ticksElement"];function Lo(e,t){if(1&e&&h._UZ(0,"ng5-slider-tooltip-wrapper",31),2&e){var n=h.oxw().$implicit,i=h.oxw();h.Q6J("template",i.tooltipTemplate)("tooltip",n.valueTooltip)("placement",n.valueTooltipPlacement)("content",n.value)}}function Ro(e,t){if(1&e&&h._UZ(0,"span",32),2&e){var n=h.oxw().$implicit;h.Q6J("innerHTML",n.legend,h.oJD)}}var jo=function(e){return{"ng5-slider-selected":e}};function Do(e,t){if(1&e&&(h.TgZ(0,"span",27),h._UZ(1,"ng5-slider-tooltip-wrapper",28),h.YNc(2,Lo,1,4,"ng5-slider-tooltip-wrapper",29),h.YNc(3,Ro,1,1,"span",30),h.qZA()),2&e){var n=t.$implicit,i=h.oxw();h.Q6J("ngClass",h.VKq(7,jo,n.selected))("ngStyle",n.style),h.xp6(1),h.Q6J("template",i.tooltipTemplate)("tooltip",n.tooltip)("placement",n.tooltipPlacement),h.xp6(1),h.Q6J("ngIf",null!=n.value),h.xp6(1),h.Q6J("ngIf",null!=n.legend)}}function Vo(e,t){}function Zo(e,t){1&e&&h.YNc(0,Vo,0,0,"ng-template")}var zo=function(e,t,n){return{tooltip:e,placement:t,content:n}};function Fo(e,t){if(1&e&&(h.ynx(0),h.YNc(1,Zo,1,0,void 0,1),h.BQk()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngTemplateOutlet",n.template)("ngTemplateOutletContext",h.kEZ(2,zo,n.tooltip,n.placement,n.content))}}function qo(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",2),h._uU(2),h.qZA(),h.BQk()),2&e){var n=h.oxw();h.xp6(1),h.uIk("title",n.tooltip)("data-tooltip-placement",n.placement),h.xp6(1),h.hij(" ",n.content," ")}}var Bo={Min:0,Max:1};Bo[Bo.Min]="Min",Bo[Bo.Max]="Max";var Uo={Low:0,High:1,Floor:2,Ceil:3,TickValue:4};Uo[Uo.Low]="Low",Uo[Uo.High]="High",Uo[Uo.Floor]="Floor",Uo[Uo.Ceil]="Ceil",Uo[Uo.TickValue]="TickValue";var Ho=d(function e(){l(this,e),this.floor=0,this.ceil=null,this.step=1,this.minRange=null,this.maxRange=null,this.pushRange=!1,this.minLimit=null,this.maxLimit=null,this.translate=null,this.combineLabels=null,this.getLegend=null,this.stepsArray=null,this.bindIndexForStepsArray=!1,this.draggableRange=!1,this.draggableRangeOnly=!1,this.showSelectionBar=!1,this.showSelectionBarEnd=!1,this.showSelectionBarFromValue=null,this.showOuterSelectionBars=!1,this.hidePointerLabels=!1,this.hideLimitLabels=!1,this.autoHideLimitLabels=!0,this.readOnly=!1,this.disabled=!1,this.mouseEventsInterval=50,this.touchEventsInterval=50,this.inputEventsInterval=100,this.outputEventsInterval=100,this.showTicks=!1,this.showTicksValues=!1,this.tickStep=null,this.tickValueStep=1,this.ticksArray=null,this.ticksTooltip=null,this.ticksValuesTooltip=null,this.vertical=!1,this.getSelectionBarColor=null,this.getTickColor=null,this.getPointerColor=null,this.keyboardSupport=!0,this.scale=1,this.enforceStep=!0,this.enforceRange=!0,this.noSwitching=!1,this.onlyBindHandles=!1,this.rightToLeft=!1,this.reversedControls=!1,this.boundPointerLabels=!0,this.logScale=!1,this.customValueToPosition=null,this.customPositionToValue=null,this.precisionLimit=12,this.selectionBarGradient=null,this.ariaLabel=null,this.ariaLabelledBy=null,this.ariaLabelHigh=null,this.ariaLabelledByHigh=null,this.handleDimension=null,this.barDimension=null,this.animate=!0}),Wo=d(function e(){l(this,e)}),Yo=function(){function e(){l(this,e)}return d(e,null,[{key:"isNullOrUndefined",value:function(e){return null==e}},{key:"linearValueToPosition",value:function(e,t,n){return(e-t)/(n-t)}},{key:"logValueToPosition",value:function(e,t,n){return((e=Math.log(e))-(t=Math.log(t)))/((n=Math.log(n))-t)}},{key:"linearPositionToValue",value:function(e,t,n){return e*(n-t)+t}},{key:"logPositionToValue",value:function(e,t,n){return t=Math.log(t),n=Math.log(n),Math.exp(e*(n-t)+t)}},{key:"findStepIndex",value:function(e,t){for(var n=t.map(function(t){return Math.abs(e-t.value)}),i=0,r=0;r<t.length;r++)n[r]!==n[i]&&n[r]<n[i]&&(i=r);return i}}]),e}(),Jo=function(){function e(){l(this,e)}return d(e,null,[{key:"isTouchEvent",value:function(e){return void 0!==window.TouchEvent?e instanceof TouchEvent:void 0!==e.touches}},{key:"isResizeObserverAvailable",value:function(){return void 0!==window.ResizeObserver}}]),e}(),Qo=function(){function e(){l(this,e)}return d(e,null,[{key:"roundToPrecisionLimit",value:function(e,t){return+e.toPrecision(t)}},{key:"clampToRange",value:function(e,t,n){return Math.min(Math.max(e,t),n)}}]),e}(),Go=d(function e(){l(this,e),this.eventName=null,this.events=null,this.eventsSubscription=null,this.teardownCallback=null}),$o=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"attachPassiveEventListener",value:function(e,t,n,i){if(!0!==ko.Z.hasSupport)return this.attachEventListener(e,t,n,i);var r=new Go;r.eventName=t,r.events=new bo.xQ;var o=function(e){r.events.next(e)};return e.addEventListener(t,o,{passive:!0,capture:!1}),r.teardownCallback=function(){e.removeEventListener(t,o,{passive:!0,capture:!1})},r.eventsSubscription=r.events.pipe(Yo.isNullOrUndefined(i)?(0,yo.tap)(function(){}):(0,yo.throttleTime)(i,void 0,{leading:!0,trailing:!0})).subscribe(function(e){n(e)}),r}},{key:"detachEventListener",value:function(e){Yo.isNullOrUndefined(e.eventsSubscription)||(e.eventsSubscription.unsubscribe(),e.eventsSubscription=null),Yo.isNullOrUndefined(e.events)||(e.events.complete(),e.events=null),Yo.isNullOrUndefined(e.teardownCallback)||(e.teardownCallback(),e.teardownCallback=null)}},{key:"attachEventListener",value:function(e,t,n,i){var r=new Go;return r.eventName=t,r.events=new bo.xQ,r.teardownCallback=this.renderer.listen(e,t,function(e){r.events.next(e)}),r.eventsSubscription=r.events.pipe(Yo.isNullOrUndefined(i)?(0,yo.tap)(function(){}):(0,yo.throttleTime)(i,void 0,{leading:!0,trailing:!0})).subscribe(function(e){n(e)}),r}}]),e}(),Ko=function(){var e=function(){function e(t,n,i){l(this,e),this.elemRef=t,this.renderer=n,this.changeDetectionRef=i,this._position=0,this._dimension=0,this._alwaysHide=!1,this._vertical=!1,this._scale=1,this.opacity=1,this.visibility="visible",this.left="",this.bottom="",this.height="",this.width="",this.eventListeners=[],this.eventListenerHelper=new $o(this.renderer)}return d(e,[{key:"position",get:function(){return this._position}},{key:"dimension",get:function(){return this._dimension}},{key:"alwaysHide",get:function(){return this._alwaysHide}},{key:"vertical",get:function(){return this._vertical}},{key:"scale",get:function(){return this._scale}},{key:"setAlwaysHide",value:function(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}},{key:"hide",value:function(){this.opacity=0}},{key:"show",value:function(){this.alwaysHide||(this.opacity=1)}},{key:"isVisible",value:function(){return!this.alwaysHide&&0!==this.opacity}},{key:"setVertical",value:function(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}},{key:"setScale",value:function(e){this._scale=e}},{key:"setPosition",value:function(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}},{key:"calculateDimension",value:function(){var e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}},{key:"setDimension",value:function(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}},{key:"getBoundingClientRect",value:function(){return this.elemRef.nativeElement.getBoundingClientRect()}},{key:"on",value:function(e,t,n){var i=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,t,n);this.eventListeners.push(i)}},{key:"onPassive",value:function(e,t,n){var i=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,t,n);this.eventListeners.push(i)}},{key:"off",value:function(e){var t,n;Yo.isNullOrUndefined(e)?(t=[],n=this.eventListeners):(t=this.eventListeners.filter(function(t){return t.eventName!==e}),n=this.eventListeners.filter(function(t){return t.eventName===e}));var i,r=o(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.eventListenerHelper.detachEventListener(a)}}catch(s){r.e(s)}finally{r.f()}this.eventListeners=t}},{key:"isRefDestroyed",value:function(){return Yo.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO))},e.\u0275dir=h.lG2({type:e,selectors:[["","ng5SliderElement",""]],hostVars:12,hostBindings:function(e,t){2&e&&h.Udp("opacity",t.opacity)("visibility",t.visibility)("left",t.left)("bottom",t.bottom)("height",t.height)("width",t.width)}}),e}(),Xo=function(){var e=function(e){function t(e,n,i){var r;return l(this,t),(r=f(this,t,[e,n,i])).active=!1,r.role="",r.tabindex="",r.ariaOrientation="",r.ariaLabel="",r.ariaLabelledBy="",r.ariaValueNow="",r.ariaValueText="",r.ariaValueMin="",r.ariaValueMax="",r}return g(t,e),d(t,[{key:"focus",value:function(){this.elemRef.nativeElement.focus()}}]),t}(Ko);return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO))},e.\u0275dir=h.lG2({type:e,selectors:[["","ng5SliderHandle",""]],hostVars:11,hostBindings:function(e,t){2&e&&(h.uIk("role",t.role)("tabindex",t.tabindex)("aria-orientation",t.ariaOrientation)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-valuenow",t.ariaValueNow)("aria-valuetext",t.ariaValueText)("aria-valuemin",t.ariaValueMin)("aria-valuemax",t.ariaValueMax),h.ekj("ng5-slider-active",t.active))},features:[h.qOj]}),e}(),ea=function(){var e=function(e){function t(e,n,i){var r;return l(this,t),(r=f(this,t,[e,n,i]))._value=null,r}return g(t,e),d(t,[{key:"value",get:function(){return this._value}},{key:"setValue",value:function(e){var t=!1;!this.alwaysHide&&(Yo.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(t=!0),this._value=e,this.elemRef.nativeElement.innerHTML=e,t&&this.calculateDimension()}}]),t}(Ko);return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO))},e.\u0275dir=h.lG2({type:e,selectors:[["","ng5SliderLabel",""]],features:[h.qOj]}),e}(),ta=d(function e(){l(this,e),this.selected=!1,this.style={},this.tooltip=null,this.tooltipPlacement=null,this.value=null,this.valueTooltip=null,this.valueTooltipPlacement=null,this.legend=null}),na=d(function e(){l(this,e),this.active=!1,this.value=0,this.difference=0,this.position=0,this.lowLimit=0,this.highLimit=0}),ia=function(){function e(){l(this,e)}return d(e,null,[{key:"compare",value:function(e,t){return!(Yo.isNullOrUndefined(e)&&Yo.isNullOrUndefined(t)||Yo.isNullOrUndefined(e)!==Yo.isNullOrUndefined(t))&&e.value===t.value&&e.highValue===t.highValue}}]),e}(),ra=function(e){function t(){return l(this,t),f(this,t,arguments)}return g(t,e),d(t,null,[{key:"compare",value:function(e,t){return!(Yo.isNullOrUndefined(e)&&Yo.isNullOrUndefined(t)||Yo.isNullOrUndefined(e)!==Yo.isNullOrUndefined(t))&&e.value===t.value&&e.highValue===t.highValue&&e.forceChange===t.forceChange}}]),t}(ia),oa={provide:U.JU,useExisting:(0,h.Gpc)(function(){return aa}),multi:!0},aa=function(){var e=function(){function e(t,n,i,r){l(this,e),this.renderer=t,this.elementRef=n,this.changeDetectionRef=i,this.zone=r,this.value=null,this.valueChange=new h.vpe,this.highValue=null,this.highValueChange=new h.vpe,this.options=new Ho,this.userChangeStart=new h.vpe,this.userChange=new h.vpe,this.userChangeEnd=new h.vpe,this.initHasRun=!1,this.inputModelChangeSubject=new bo.xQ,this.inputModelChangeSubscription=null,this.outputModelChangeSubject=new bo.xQ,this.outputModelChangeSubscription=null,this.viewLowValue=null,this.viewHighValue=null,this.viewOptions=new Ho,this.handleHalfDimension=0,this.maxHandlePosition=0,this.currentTrackingPointer=null,this.currentFocusPointer=null,this.firstKeyDown=!1,this.touchId=null,this.dragging=new na,this.sliderElementVerticalClass=!1,this.sliderElementAnimateClass=!1,this.sliderElementDisabledAttr=null,this.barStyle={},this.minPointerStyle={},this.maxPointerStyle={},this.fullBarTransparentClass=!1,this.selectionBarDraggableClass=!1,this.ticksUnderValuesClass=!1,this.intermediateTicks=!1,this.ticks=[],this.eventListenerHelper=null,this.onMoveEventListener=null,this.onEndEventListener=null,this.resizeObserver=null,this.onTouchedCallback=null,this.onChangeCallback=null,this.eventListenerHelper=new $o(this.renderer)}return d(e,[{key:"manualRefresh",set:function(e){var t=this;this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(function(){setTimeout(function(){return t.calculateViewDimensionsAndDetectChanges()})})}},{key:"triggerFocus",set:function(e){var t=this;this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(function(e){t.focusPointer(e)})}},{key:"range",get:function(){return!Yo.isNullOrUndefined(this.value)&&!Yo.isNullOrUndefined(this.highValue)}},{key:"showTicks",get:function(){return this.viewOptions.showTicks}},{key:"ngOnInit",value:function(){this.viewOptions=new Ho,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState()}},{key:"ngAfterViewInit",value:function(){this.applyOptions(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval),this.subscribeOutputModelChangeSubject(this.viewOptions.outputEventsInterval),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}},{key:"ngOnChanges",value:function(e){Yo.isNullOrUndefined(e.options)||this.onChangeOptions(),(!Yo.isNullOrUndefined(e.value)||!Yo.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}},{key:"ngOnDestroy",value:function(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}},{key:"writeValue",value:function(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}},{key:"registerOnChange",value:function(e){this.onChangeCallback=e}},{key:"registerOnTouched",value:function(e){this.onTouchedCallback=e}},{key:"setDisabledState",value:function(e){this.viewOptions.disabled=e,this.updateDisabledState()}},{key:"onResize",value:function(e){this.calculateViewDimensionsAndDetectChanges()}},{key:"subscribeInputModelChangeSubject",value:function(e){var t=this;this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,yo.distinctUntilChanged)(ra.compare),(0,yo.filter)(function(e){return!e.forceChange&&!e.internalChange}),Yo.isNullOrUndefined(e)?(0,yo.tap)(function(){}):(0,yo.throttleTime)(e,void 0,{leading:!0,trailing:!0})).subscribe(function(e){return t.applyInputModelChange(e)})}},{key:"subscribeOutputModelChangeSubject",value:function(e){var t=this;this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,yo.distinctUntilChanged)(ra.compare),Yo.isNullOrUndefined(e)?(0,yo.tap)(function(){}):(0,yo.throttleTime)(e,void 0,{leading:!0,trailing:!0})).subscribe(function(e){return t.publishOutputModelChange(e)})}},{key:"subscribeResizeObserver",value:function(){var e=this;Jo.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(function(){return e.calculateViewDimensionsAndDetectChanges()}),this.resizeObserver.observe(this.elementRef.nativeElement))}},{key:"unsubscribeResizeObserver",value:function(){Jo.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"unsubscribeOnMove",value:function(){Yo.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}},{key:"unsubscribeOnEnd",value:function(){Yo.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}},{key:"unsubscribeInputModelChangeSubject",value:function(){Yo.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}},{key:"unsubscribeOutputModelChangeSubject",value:function(){Yo.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}},{key:"unsubscribeManualRefresh",value:function(){Yo.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}},{key:"unsubscribeTriggerFocus",value:function(){Yo.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}},{key:"getPointerElement",value:function(e){return e===Bo.Min?this.minHandleElement:e===Bo.Max?this.maxHandleElement:null}},{key:"getCurrentTrackingValue",value:function(){return this.currentTrackingPointer===Bo.Min?this.viewLowValue:this.currentTrackingPointer===Bo.Max?this.viewHighValue:null}},{key:"modelValueToViewValue",value:function(e){return Yo.isNullOrUndefined(e)?NaN:Yo.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:Yo.findStepIndex(+e,this.viewOptions.stepsArray)}},{key:"viewValueToModelValue",value:function(e){return Yo.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}},{key:"getStepValue",value:function(e){var t=this.viewOptions.stepsArray[e];return Yo.isNullOrUndefined(t)?NaN:t.value}},{key:"applyViewChange",value:function(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}},{key:"applyInputModelChange",value:function(e){var t=this.normaliseModelValues(e),n=!ia.compare(e,t);n&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.viewHighValue=this.range?this.modelValueToViewValue(t.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:n,userEventInitiated:!1})}},{key:"publishOutputModelChange",value:function(e){var t=this,n=function(){t.valueChange.emit(e.value),t.range&&t.highValueChange.emit(e.highValue),Yo.isNullOrUndefined(t.onChangeCallback)||t.onChangeCallback(t.range?[e.value,e.highValue]:e.value),Yo.isNullOrUndefined(t.onTouchedCallback)||t.onTouchedCallback(t.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(n(),this.userChange.emit(this.getChangeContext())):setTimeout(function(){n()})}},{key:"normaliseModelValues",value:function(e){var t=new ia;if(t.value=e.value,t.highValue=e.highValue,this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),!Yo.isNullOrUndefined(this.viewOptions.stepsArray)||!this.viewOptions.enforceRange)return t;if(t.value=Qo.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=Qo.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue)if(this.viewOptions.noSwitching)t.value=t.highValue;else{var n=e.value;t.value=e.highValue,t.highValue=n}return t}},{key:"renormaliseModelValues",value:function(){var e={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(e);ia.compare(t,e)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}},{key:"onChangeOptions",value:function(){if(this.initHasRun){var e=this.viewOptions.inputEventsInterval,t=this.viewOptions.outputEventsInterval;this.applyOptions(),e!==this.viewOptions.inputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval)),t!==this.viewOptions.outputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.outputEventsInterval)),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider()}}},{key:"applyOptions",value:function(){if(this.viewOptions=new Ho,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!Yo.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!Yo.isNullOrUndefined(this.viewOptions.tickStep)||!Yo.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!Yo.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),Yo.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),Yo.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=function(e,t){return e+" - "+t}),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}},{key:"applyStepsArrayOptions",value:function(){var e=this;this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,Yo.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=function(t){return String(e.viewOptions.bindIndexForStepsArray?e.getStepValue(t):t)}),this.viewOptions.getLegend=function(t){return e.viewOptions.stepsArray[t].legend}}},{key:"applyFloorCeilOptions",value:function(){if(Yo.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),Yo.isNullOrUndefined(this.viewOptions.ceil)||Yo.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,Yo.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=function(e){return String(e)})}},{key:"resetSlider",value:function(){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.unbindEvents(),this.manageEventsBindings(),this.updateDisabledState(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}},{key:"focusPointer",value:function(e){e!==Bo.Min&&e!==Bo.Max&&(e=Bo.Min),e===Bo.Min?this.minHandleElement.focus():this.range&&e===Bo.Max&&this.maxHandleElement.focus()}},{key:"refocusPointerIfNeeded",value:function(){Yo.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}},{key:"manageElementsStyle",value:function(){var e=this;this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);var t=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(t||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(function(){e.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(function(){e.sliderElementAnimateClass=e.viewOptions.animate})}},{key:"manageEventsBindings",value:function(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}},{key:"updateDisabledState",value:function(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}},{key:"updateVerticalState",value:function(){this.sliderElementVerticalClass=this.viewOptions.vertical;var e,t=o(this.getAllSliderElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;Yo.isNullOrUndefined(n)||n.setVertical(this.viewOptions.vertical)}}catch(i){t.e(i)}finally{t.f()}}},{key:"updateScale",value:function(){var e,t=o(this.getAllSliderElements());try{for(t.s();!(e=t.n()).done;){e.value.setScale(this.viewOptions.scale)}}catch(n){t.e(n)}finally{t.f()}}},{key:"getAllSliderElements",value:function(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}},{key:"initHandles",value:function(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}},{key:"addAccessibility",value:function(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.viewOptions.vertical&&(this.minHandleElement.ariaOrientation="vertical"),Yo.isNullOrUndefined(this.viewOptions.ariaLabel)?Yo.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical?"vertical":"horizontal",Yo.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?Yo.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}},{key:"updateAriaAttributes",value:function(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Uo.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Uo.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}},{key:"calculateViewDimensions",value:function(){Yo.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);var e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,Yo.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}},{key:"calculateViewDimensionsAndDetectChanges",value:function(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}},{key:"isRefDestroyed",value:function(){return this.changeDetectionRef.destroyed}},{key:"updateTicksScale",value:function(){var e=this;if(this.viewOptions.showTicks){var t=Yo.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,n=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&t.reverse();var i=t.map(function(t){var i=e.valueToPosition(t);e.viewOptions.vertical&&(i=e.maxHandlePosition-i);var r=n+"("+Math.round(i)+"px)",o=new ta;if(o.selected=e.isTickSelected(t),o.style={"-webkit-transform":r,"-moz-transform":r,"-o-transform":r,"-ms-transform":r,transform:r},o.selected&&!Yo.isNullOrUndefined(e.viewOptions.getSelectionBarColor)&&(o.style["background-color"]=e.getSelectionBarColor()),!o.selected&&!Yo.isNullOrUndefined(e.viewOptions.getTickColor)&&(o.style["background-color"]=e.getTickColor(t)),Yo.isNullOrUndefined(e.viewOptions.ticksTooltip)||(o.tooltip=e.viewOptions.ticksTooltip(t),o.tooltipPlacement=e.viewOptions.vertical?"right":"top"),e.viewOptions.showTicksValues&&t%e.viewOptions.tickValueStep==0&&(o.value=e.getDisplayValue(t,Uo.TickValue),Yo.isNullOrUndefined(e.viewOptions.ticksValuesTooltip)||(o.valueTooltip=e.viewOptions.ticksValuesTooltip(t),o.valueTooltipPlacement=e.viewOptions.vertical?"right":"top")),!Yo.isNullOrUndefined(e.viewOptions.getLegend)){var a=e.viewOptions.getLegend(t);Yo.isNullOrUndefined(a)||(o.legend=a)}return o});if(Yo.isNullOrUndefined(this.ticks)||this.ticks.length!==i.length)this.ticks=i;else for(var r=0;r<i.length;++r)Object.assign(this.ticks[r],i[r]);this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}}},{key:"getTicksArray",value:function(){for(var e=Yo.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],n=this.viewOptions.floor;n<=this.viewOptions.ceil;n+=e)t.push(n);return t}},{key:"isTickSelected",value:function(e){if(!this.range)if(Yo.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{var t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&e>=t&&e<=this.viewLowValue)return!0;if(this.viewLowValue<t&&e<=t&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}},{key:"updateFloorLabel",value:function(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Uo.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}},{key:"updateCeilLabel",value:function(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Uo.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}},{key:"updateHandles",value:function(e,t){e===Bo.Min?this.updateLowHandle(t):e===Bo.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}},{key:"getHandleLabelPos",value:function(e,t){var n=e===Bo.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,i=t-n/2+this.handleHalfDimension,r=this.fullBarElement.dimension-n;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===Bo.Min||!this.viewOptions.rightToLeft&&e===Bo.Max?Math.min(i,r):Math.min(Math.max(i,0),r):i}},{key:"updateLowHandle",value:function(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Uo.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(Bo.Min,e)),Yo.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(Bo.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}},{key:"updateHighHandle",value:function(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Uo.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(Bo.Max,e)),Yo.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(Bo.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}},{key:"updateFloorAndCeilLabelsVisibility",value:function(){if(!this.viewOptions.hidePointerLabels){var e=!1,t=!1,n=this.isLabelBelowFloorLabel(this.minHandleLabelElement),i=this.isLabelAboveCeilLabel(this.minHandleLabelElement),r=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),o=this.isLabelBelowFloorLabel(this.combinedLabelElement),a=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(n?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),i?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){var s=this.combinedLabelElement.isVisible()?a:r,c=this.combinedLabelElement.isVisible()?o:n;s?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),c?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}}},{key:"isLabelBelowFloorLabel",value:function(e){var t=e.position,n=this.floorLabelElement.position;return this.viewOptions.rightToLeft?t+e.dimension>=n-2:t<=n+this.floorLabelElement.dimension+2}},{key:"isLabelAboveCeilLabel",value:function(e){var t=e.position,n=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?t<=n+this.ceilLabelElement.dimension+2:t+e.dimension>=n-2}},{key:"updateSelectionBar",value:function(){var e=0,t=0,n=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,i=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=i;else if(Yo.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))n?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,e=0);else{var r=this.viewOptions.showSelectionBarFromValue,o=this.valueToPosition(r);(this.viewOptions.rightToLeft?this.viewLowValue<=r:this.viewLowValue>r)?(t=this.minHandleElement.position-o,e=o+this.handleHalfDimension):(t=o-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.leftOuterSelectionBarElement.setPosition(e+t)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.rightOuterSelectionBarElement.setPosition(e+t))),Yo.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!Yo.isNullOrUndefined(this.viewOptions.selectionBarGradient)){var a=Yo.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),s=a-e>0&&!n||a-e<=0&&n;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?s?"bottom":"top":s?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(a+t+e+(s?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=a-e+(s?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{var c=this.getSelectionBarColor();this.barStyle={backgroundColor:c}}}},{key:"getSelectionBarColor",value:function(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}},{key:"getPointerColor",value:function(e){return this.viewOptions.getPointerColor(e===Bo.Max?this.highValue:this.value,e)}},{key:"getTickColor",value:function(e){return this.viewOptions.getTickColor(e)}},{key:"updateCombinedLabel",value:function(){if(this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position){var e=this.getDisplayValue(this.viewLowValue,Uo.Low),t=this.getDisplayValue(this.viewHighValue,Uo.High),n=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(t,e):this.viewOptions.combineLabels(e,t);this.combinedLabelElement.setValue(n);var i=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(i),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}},{key:"getDisplayValue",value:function(e,t){return!Yo.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,t)}},{key:"roundStep",value:function(e,t){var n=Yo.isNullOrUndefined(t)?this.viewOptions.step:t,i=Qo.roundToPrecisionLimit((e-this.viewOptions.floor)/n,this.viewOptions.precisionLimit);return i=Math.round(i)*n,Qo.roundToPrecisionLimit(this.viewOptions.floor+i,this.viewOptions.precisionLimit)}},{key:"valueToPosition",value:function(e){var t=Yo.linearValueToPosition;Yo.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=Yo.logValueToPosition):t=this.viewOptions.customValueToPosition;var n=t(e=Qo.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return Yo.isNullOrUndefined(n)&&(n=0),this.viewOptions.rightToLeft&&(n=1-n),n*this.maxHandlePosition}},{key:"positionToValue",value:function(e){var t=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);var n=Yo.linearPositionToValue;Yo.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(n=Yo.logPositionToValue):n=this.viewOptions.customPositionToValue;var i=n(t,this.viewOptions.floor,this.viewOptions.ceil);return Yo.isNullOrUndefined(i)?0:i}},{key:"getEventXY",value:function(e,t){if(e instanceof MouseEvent)return this.viewOptions.vertical?e.clientY:e.clientX;var n=0,i=e.touches;if(!Yo.isNullOrUndefined(t))for(var r=0;r<i.length;r++)if(i[r].identifier===t){n=r;break}return this.viewOptions.vertical?i[n].clientY:i[n].clientX}},{key:"getEventPosition",value:function(e,t){var n=this.elementRef.nativeElement.getBoundingClientRect(),i=this.viewOptions.vertical?n.bottom:n.left;return(this.viewOptions.vertical?-this.getEventXY(e,t)+i:this.getEventXY(e,t)-i)*this.viewOptions.scale-this.handleHalfDimension}},{key:"getNearestHandle",value:function(e){if(!this.range)return Bo.Min;var t=this.getEventPosition(e),n=Math.abs(t-this.minHandleElement.position),i=Math.abs(t-this.maxHandleElement.position);return n<i?Bo.Min:n>i?Bo.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?Bo.Min:Bo.Max:t<this.minHandleElement.position?Bo.Min:Bo.Max}},{key:"bindEvents",value:function(){var e=this,t=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",function(n){return e.onBarStart(null,t,n,!0,!0,!0)}),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",function(n){return e.onBarStart(Bo.Min,t,n,!0,!0)}),this.maxHandleElement.on("mousedown",function(n){return e.onBarStart(Bo.Max,t,n,!0,!0)})):(this.minHandleElement.on("mousedown",function(t){return e.onStart(Bo.Min,t,!0,!0)}),this.range&&this.maxHandleElement.on("mousedown",function(t){return e.onStart(Bo.Max,t,!0,!0)}),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",function(t){return e.onStart(null,t,!0,!0,!0)}),this.ticksElement.on("mousedown",function(t){return e.onStart(null,t,!0,!0,!0,!0)}))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",function(n){return e.onBarStart(null,t,n,!0,!0,!0)}),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",function(n){return e.onBarStart(Bo.Min,t,n,!0,!0)}),this.maxHandleElement.onPassive("touchstart",function(n){return e.onBarStart(Bo.Max,t,n,!0,!0)})):(this.minHandleElement.onPassive("touchstart",function(t){return e.onStart(Bo.Min,t,!0,!0)}),this.range&&this.maxHandleElement.onPassive("touchstart",function(t){return e.onStart(Bo.Max,t,!0,!0)}),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",function(t){return e.onStart(null,t,!0,!0,!0)}),this.ticksElement.onPassive("touchstart",function(t){return e.onStart(null,t,!1,!1,!0,!0)}))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",function(){return e.onPointerFocus(Bo.Min)}),this.range&&this.maxHandleElement.on("focus",function(){return e.onPointerFocus(Bo.Max)}))}},{key:"unbindEvents",value:function(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();var e,t=o(this.getAllSliderElements());try{for(t.s();!(e=t.n()).done;){var n=e.value;Yo.isNullOrUndefined(n)||n.off()}}catch(i){t.e(i)}finally{t.f()}}},{key:"onBarStart",value:function(e,t,n,i,r,o,a){t?this.onDragStart(e,n,i,r):this.onStart(e,n,i,r,o,a)}},{key:"onStart",value:function(e,t,n,i,r,o){var a=this;t.stopPropagation(),(!Jo.isTouchEvent(t)||!ko.Z.hasSupport)&&t.preventDefault(),this.calculateViewDimensions(),Yo.isNullOrUndefined(e)&&(e=this.getNearestHandle(t)),this.currentTrackingPointer=e;var s=this.getPointerElement(e);if(s.active=!0,this.viewOptions.keyboardSupport&&s.focus(),n){this.unsubscribeOnMove();var c=function(e){return a.dragging.active?a.onDragMove(e):a.onMove(e)};this.onMoveEventListener=Jo.isTouchEvent(t)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",c,this.viewOptions.touchEventsInterval):this.eventListenerHelper.attachEventListener(document,"mousemove",c,this.viewOptions.mouseEventsInterval)}if(i){this.unsubscribeOnEnd();var l=function(e){return a.onEnd(e)};this.onEndEventListener=Jo.isTouchEvent(t)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",l):this.eventListenerHelper.attachEventListener(document,"mouseup",l)}this.userChangeStart.emit(this.getChangeContext()),Jo.isTouchEvent(t)&&!Yo.isNullOrUndefined(t.changedTouches)&&Yo.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),r&&this.onMove(t,!0),o&&this.onEnd(t)}},{key:"onMove",value:function(e,t){var n=null;if(Jo.isTouchEvent(e)){for(var i=e.changedTouches,r=0;r<i.length;r++)if(i[r].identifier===this.touchId){n=i[r];break}if(Yo.isNullOrUndefined(n))return}var o,a=Yo.isNullOrUndefined(n)?this.getEventPosition(e):this.getEventPosition(e,n.identifier);a<=0?o=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:a>=this.maxHandlePosition?o=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(o=this.positionToValue(a),o=t&&!Yo.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(o,this.viewOptions.tickStep):this.roundStep(o)),this.positionTrackingHandle(o)}},{key:"onEnd",value:function(e){Jo.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}},{key:"onPointerFocus",value:function(e){var t=this,n=this.getPointerElement(e);n.on("blur",function(){return t.onPointerBlur(n)}),n.on("keydown",function(e){return t.onKeyboardEvent(e)}),n.on("keyup",function(){return t.onKeyUp()}),n.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}},{key:"onKeyUp",value:function(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}},{key:"onPointerBlur",value:function(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,Yo.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}},{key:"getKeyActions",value:function(e){var t=this.viewOptions.ceil-this.viewOptions.floor,n=e+this.viewOptions.step,i=e-this.viewOptions.step,r=e+t/10,o=e-t/10;this.viewOptions.reversedControls&&(n=e-this.viewOptions.step,i=e+this.viewOptions.step,r=e-t/10,o=e+t/10);var a={UP:n,DOWN:i,LEFT:i,RIGHT:n,PAGEUP:r,PAGEDOWN:o,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(a.LEFT=n,a.RIGHT=i,this.viewOptions.vertical&&(a.UP=i,a.DOWN=n)),a}},{key:"onKeyboardEvent",value:function(e){var t=this.getCurrentTrackingValue(),n=Yo.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,i=this.getKeyActions(t)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[n]];if(!Yo.isNullOrUndefined(i)&&!Yo.isNullOrUndefined(this.currentTrackingPointer)){e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));var r=Qo.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil),o=this.roundStep(r);if(this.viewOptions.draggableRangeOnly){var a,s,c=this.viewHighValue-this.viewLowValue;this.currentTrackingPointer===Bo.Min?(a=o,(s=o+c)>this.viewOptions.ceil&&(a=(s=this.viewOptions.ceil)-c)):this.currentTrackingPointer===Bo.Max&&(s=o,(a=o-c)<this.viewOptions.floor&&(s=(a=this.viewOptions.floor)+c)),this.positionTrackingBar(a,s)}else this.positionTrackingHandle(o)}}},{key:"onDragStart",value:function(e,t,n,i){var r=this.getEventPosition(t);this.dragging=new na,this.dragging.active=!0,this.dragging.value=this.positionToValue(r),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-r:r-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?r-this.maxHandleElement.position:this.maxHandleElement.position-r,this.onStart(e,t,n,i)}},{key:"getMinValue",value:function(e,t,n){var i,r=this.viewOptions.rightToLeft;return i=t?n?r?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:r?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(r?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(i)}},{key:"getMaxValue",value:function(e,t,n){var i,r=this.viewOptions.rightToLeft;return i=t?n?r?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:r?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:r?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(i)}},{key:"onDragMove",value:function(e){var t,n,i,r,o=this.getEventPosition(e);this.viewOptions.rightToLeft?(t=this.dragging.lowLimit,n=this.dragging.highLimit,i=this.maxHandleElement,r=this.minHandleElement):(t=this.dragging.highLimit,n=this.dragging.lowLimit,i=this.minHandleElement,r=this.maxHandleElement);var a,s,c=o>=this.maxHandlePosition-t;if(o<=n){if(0===i.position)return;a=this.getMinValue(o,!0,!1),s=this.getMaxValue(o,!0,!1)}else if(c){if(r.position===this.maxHandlePosition)return;s=this.getMaxValue(o,!0,!0),a=this.getMinValue(o,!0,!0)}else a=this.getMinValue(o,!1,!1),s=this.getMaxValue(o,!1,!1);this.positionTrackingBar(a,s)}},{key:"positionTrackingBar",value:function(e,t){!Yo.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(t=Qo.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!Yo.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(e=Qo.roundToPrecisionLimit((t=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(Bo.Min,this.valueToPosition(e)),this.updateHandles(Bo.Max,this.valueToPosition(t))}},{key:"positionTrackingHandle",value:function(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===Bo.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===Bo.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===Bo.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(Bo.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Bo.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===Bo.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(Bo.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Bo.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===Bo.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===Bo.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}},{key:"applyMinMaxLimit",value:function(e){return!Yo.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!Yo.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}},{key:"applyMinMaxRange",value:function(e){var t=Math.abs(e-(this.currentTrackingPointer===Bo.Min?this.viewHighValue:this.viewLowValue));if(!Yo.isNullOrUndefined(this.viewOptions.minRange)&&t<this.viewOptions.minRange){if(this.currentTrackingPointer===Bo.Min)return Qo.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Bo.Max)return Qo.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!Yo.isNullOrUndefined(this.viewOptions.maxRange)&&t>this.viewOptions.maxRange){if(this.currentTrackingPointer===Bo.Min)return Qo.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Bo.Max)return Qo.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}},{key:"applyPushRange",value:function(e){var t=this.currentTrackingPointer===Bo.Min?this.viewHighValue-e:e-this.viewLowValue,n=Yo.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,i=this.viewOptions.maxRange;return t<n?(this.currentTrackingPointer===Bo.Min?(this.viewHighValue=Qo.roundToPrecisionLimit(Math.min(e+n,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=Qo.roundToPrecisionLimit(this.viewHighValue-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Bo.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Bo.Max&&(this.viewLowValue=Qo.roundToPrecisionLimit(Math.max(e-n,this.viewOptions.floor),this.viewOptions.precisionLimit),e=Qo.roundToPrecisionLimit(this.viewLowValue+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Bo.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!Yo.isNullOrUndefined(i)&&t>i&&(this.currentTrackingPointer===Bo.Min?(this.viewHighValue=Qo.roundToPrecisionLimit(e+i,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Bo.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Bo.Max&&(this.viewLowValue=Qo.roundToPrecisionLimit(e-i,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Bo.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}},{key:"getChangeContext",value:function(){var e=new Wo;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(h.R0b))},e.\u0275cmp=h.Xpm({type:e,selectors:[["ng5-slider"]],contentQueries:function(e,t,n){var i;(1&e&&h.Suo(n,wo,5),2&e)&&(h.iGM(i=h.CRH())&&(t.tooltipTemplate=i.first))},viewQuery:function(e,t){var n;(1&e&&(h.Gf(_o,5,Ko),h.Gf(xo,5,Ko),h.Gf(To,5,Ko),h.Gf(Ao,5,Ko),h.Gf(So,5,Xo),h.Gf(Co,5,Xo),h.Gf(Oo,5,ea),h.Gf(Eo,5,ea),h.Gf(Po,5,ea),h.Gf(Io,5,ea),h.Gf(Mo,5,ea),h.Gf(No,5,Ko)),2&e)&&(h.iGM(n=h.CRH())&&(t.leftOuterSelectionBarElement=n.first),h.iGM(n=h.CRH())&&(t.rightOuterSelectionBarElement=n.first),h.iGM(n=h.CRH())&&(t.fullBarElement=n.first),h.iGM(n=h.CRH())&&(t.selectionBarElement=n.first),h.iGM(n=h.CRH())&&(t.minHandleElement=n.first),h.iGM(n=h.CRH())&&(t.maxHandleElement=n.first),h.iGM(n=h.CRH())&&(t.floorLabelElement=n.first),h.iGM(n=h.CRH())&&(t.ceilLabelElement=n.first),h.iGM(n=h.CRH())&&(t.minHandleLabelElement=n.first),h.iGM(n=h.CRH())&&(t.maxHandleLabelElement=n.first),h.iGM(n=h.CRH())&&(t.combinedLabelElement=n.first),h.iGM(n=h.CRH())&&(t.ticksElement=n.first))},hostAttrs:[1,"ng5-slider"],hostVars:5,hostBindings:function(e,t){1&e&&h.NdJ("resize",function(e){return t.onResize(e)},!1,h.Jf7),2&e&&(h.uIk("disabled",t.sliderElementDisabledAttr),h.ekj("vertical",t.sliderElementVerticalClass)("animate",t.sliderElementAnimateClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[h._Bn([oa]),h.TTD],decls:29,vars:13,consts:[["ng5SliderElement","",1,"ng5-slider-span","ng5-slider-bar-wrapper","ng5-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ng5-slider-span","ng5-slider-bar"],["ng5SliderElement","",1,"ng5-slider-span","ng5-slider-bar-wrapper","ng5-slider-right-out-selection"],["rightOuterSelectionBar",""],["ng5SliderElement","",1,"ng5-slider-span","ng5-slider-bar-wrapper","ng5-slider-full-bar"],["fullBar",""],["ng5SliderElement","",1,"ng5-slider-span","ng5-slider-bar-wrapper","ng5-slider-selection-bar"],["selectionBar",""],[1,"ng5-slider-span","ng5-slider-bar","ng5-slider-selection",3,"ngStyle"],["ng5SliderHandle","",1,"ng5-slider-span","ng5-slider-pointer","ng5-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ng5SliderHandle","",1,"ng5-slider-span","ng5-slider-pointer","ng5-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ng5SliderLabel","",1,"ng5-slider-span","ng5-slider-bubble","ng5-slider-limit","ng5-slider-floor"],["floorLabel",""],["ng5SliderLabel","",1,"ng5-slider-span","ng5-slider-bubble","ng5-slider-limit","ng5-slider-ceil"],["ceilLabel",""],["ng5SliderLabel","",1,"ng5-slider-span","ng5-slider-bubble","ng5-slider-model-value"],["minHandleLabel",""],["ng5SliderLabel","",1,"ng5-slider-span","ng5-slider-bubble","ng5-slider-model-high"],["maxHandleLabel",""],["ng5SliderLabel","",1,"ng5-slider-span","ng5-slider-bubble","ng5-slider-combined"],["combinedLabel",""],["ng5SliderElement","",1,"ng5-slider-ticks",3,"hidden"],["ticksElement",""],["class","ng5-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ng5-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ng5-slider-span ng5-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ng5-slider-span ng5-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ng5-slider-span","ng5-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ng5-slider-span","ng5-slider-tick-legend",3,"innerHTML"]],template:function(e,t){1&e&&(h.TgZ(0,"span",0,1),h._UZ(2,"span",2),h.qZA(),h.TgZ(3,"span",3,4),h._UZ(5,"span",2),h.qZA(),h.TgZ(6,"span",5,6),h._UZ(8,"span",2),h.qZA(),h.TgZ(9,"span",7,8),h._UZ(11,"span",9),h.qZA(),h._UZ(12,"span",10,11),h._UZ(14,"span",12,13),h._UZ(16,"span",14,15),h._UZ(18,"span",16,17),h._UZ(20,"span",18,19),h._UZ(22,"span",20,21),h._UZ(24,"span",22,23),h.TgZ(26,"span",24,25),h.YNc(28,Do,4,9,"span",26),h.qZA()),2&e&&(h.xp6(6),h.ekj("ng5-slider-transparent",t.fullBarTransparentClass),h.xp6(3),h.ekj("ng5-slider-draggable",t.selectionBarDraggableClass),h.xp6(2),h.Q6J("ngStyle",t.barStyle),h.xp6(1),h.Q6J("ngStyle",t.minPointerStyle),h.xp6(2),h.Udp("display",t.range?"inherit":"none"),h.Q6J("ngStyle",t.maxPointerStyle),h.xp6(12),h.ekj("ng5-slider-ticks-values-under",t.ticksUnderValuesClass),h.Q6J("hidden",!t.showTicks),h.xp6(2),h.Q6J("ngForOf",t.ticks))},directives:function(){return[Ko,s.PC,Xo,ea,s.sg,s.mk,sa,s.O5]},styles:[".ng5-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:pan-y;touch-action:pan-y}  .ng5-slider.with-legend{margin-bottom:40px}  .ng5-slider[disabled]{cursor:not-allowed}  .ng5-slider[disabled] .ng5-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ng5-slider[disabled] .ng5-slider-draggable{cursor:not-allowed}  .ng5-slider[disabled] .ng5-slider-selection{background:#8b91a2}  .ng5-slider[disabled] .ng5-slider-tick{cursor:not-allowed}  .ng5-slider[disabled] .ng5-slider-tick.ng5-slider-selected{background:#8b91a2}  .ng5-slider .ng5-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ng5-slider .ng5-slider-base{width:100%;height:100%;padding:0}  .ng5-slider .ng5-slider-bar-wrapper{left:0;-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ng5-slider .ng5-slider-draggable{cursor:move}  .ng5-slider .ng5-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ng5-slider .ng5-slider-bar-wrapper.ng5-slider-transparent .ng5-slider-bar{background:0 0}  .ng5-slider .ng5-slider-bar-wrapper.ng5-slider-left-out-selection .ng5-slider-bar{background:#df002d}  .ng5-slider .ng5-slider-bar-wrapper.ng5-slider-right-out-selection .ng5-slider-bar{background:#03a688}  .ng5-slider .ng5-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ng5-slider .ng5-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ng5-slider .ng5-slider-pointer:after{content:'';width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ng5-slider .ng5-slider-pointer:hover:after{background-color:#fff}  .ng5-slider .ng5-slider-pointer.ng5-slider-active{z-index:4}  .ng5-slider .ng5-slider-pointer.ng5-slider-active:after{background-color:#451aff}  .ng5-slider .ng5-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ng5-slider .ng5-slider-bubble.ng5-slider-limit{color:#55637d}  .ng5-slider .ng5-slider-ticks{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ng5-slider .ng5-slider-ticks-values-under .ng5-slider-tick-value{top:auto;bottom:-36px}  .ng5-slider .ng5-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ng5-slider .ng5-slider-tick.ng5-slider-selected{background:#0db9f0}  .ng5-slider .ng5-slider-tick-value{position:absolute;top:-34px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0)}  .ng5-slider .ng5-slider-tick-legend{position:absolute;top:24px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);max-width:50px;white-space:normal}  .ng5-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;-ms-touch-action:pan-x;touch-action:pan-x}  .ng5-slider.vertical .ng5-slider-base{width:100%;height:100%;padding:0}  .ng5-slider.vertical .ng5-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ng5-slider.vertical .ng5-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ng5-slider.vertical .ng5-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ng5-slider.vertical .ng5-slider-bubble{left:16px!important;bottom:0}  .ng5-slider.vertical .ng5-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ng5-slider.vertical .ng5-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ng5-slider.vertical .ng5-slider-tick-value{left:24px;top:auto;-webkit-transform:translate(0,-28%);transform:translate(0,-28%)}  .ng5-slider.vertical .ng5-slider-tick-legend{top:auto;right:24px;-webkit-transform:translate(0,-28%);transform:translate(0,-28%);max-width:none;white-space:nowrap}  .ng5-slider.vertical .ng5-slider-ticks-values-under .ng5-slider-tick-value{bottom:auto;left:auto;right:24px}  .ng5-slider *{-webkit-transition:none;transition:none}  .ng5-slider.animate .ng5-slider-bar-wrapper{-webkit-transition:all linear .3s;transition:all linear .3s}  .ng5-slider.animate .ng5-slider-selection{-webkit-transition:background-color linear .3s;transition:background-color linear .3s}  .ng5-slider.animate .ng5-slider-pointer{-webkit-transition:all linear .3s;transition:all linear .3s}  .ng5-slider.animate .ng5-slider-bubble{-webkit-transition:all linear .3s;transition:all linear .3s}  .ng5-slider.animate .ng5-slider-bubble.ng5-slider-limit{-webkit-transition:opacity linear .3s;transition:opacity linear .3s}  .ng5-slider.animate .ng5-slider-bubble.ng5-slider-combined{-webkit-transition:opacity linear .3s;transition:opacity linear .3s}  .ng5-slider.animate .ng5-slider-tick{-webkit-transition:background-color linear .3s;transition:background-color linear .3s}"]}),e}(),sa=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["ng5-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng5-slider-inner-tooltip"]],template:function(e,t){1&e&&(h.YNc(0,Fo,2,6,"ng-container",0),h.YNc(1,qo,3,3,"ng-container",0)),2&e&&(h.Q6J("ngIf",t.template),h.xp6(1),h.Q6J("ngIf",!t.template))},directives:[s.O5,s.tP],styles:[".ng5-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]}),e}(),ca=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[s.ez]]}),e}();function la(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"ng5-slider",6),h.NdJ("valueChange",function(e){return h.CHM(n),h.oxw().min=e})("highValueChange",function(e){return h.CHM(n),h.oxw().max=e})("userChangeEnd",function(e){return h.CHM(n),h.oxw().appliedFilter(e)}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("value",i.min)("highValue",i.max)("options",i.options)}}var ua=function(){var e=function(){function e(t){l(this,e),this.platformId=t,this.priceFilter=new h.vpe,this.collapse=!0,this.isBrowser=!1,this.options={floor:0,ceil:5e6,translate:function(e,t){return e.toLocaleString("vn")+"\u0111"}},(0,s.NF)(this.platformId)&&(this.isBrowser=!0)}return d(e,[{key:"ngOnInit",value:function(){}},{key:"appliedFilter",value:function(e){this.price={minPrice:e.value,maxPrice:e.highValue},this.priceFilter.emit(this.price)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.Lbi))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-price"]],inputs:{min:"min",max:"max"},outputs:{priceFilter:"priceFilter"},decls:7,vars:3,consts:[[1,"collection-collapse-block","border-0"],[1,"collapse-block-title",3,"click"],[1,"collection-collapse-block-content"],[1,"collection-brand-filter"],[1,"mt-2"],[3,"value","highValue","options","valueChange","highValueChange","userChangeEnd",4,"ngIf"],[3,"value","highValue","options","valueChange","highValueChange","userChangeEnd"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"h3",1),h.NdJ("click",function(){return t.collapse=!t.collapse}),h._uU(2,"price"),h.qZA(),h.TgZ(3,"div",2),h.TgZ(4,"div",3),h.TgZ(5,"div",4),h.YNc(6,la,1,3,"ng5-slider",5),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.ekj("open",t.collapse),h.xp6(6),h.Q6J("ngIf",t.isBrowser))},directives:[s.O5,aa],styles:[""]}),e}();function da(e,t){if(1&e&&(h.TgZ(0,"span",13),h.TgZ(1,"span",14),h._uU(2,"\u2605"),h.qZA(),h._uU(3,"\u2605 "),h.qZA()),2&e){var n=t.fill;h.ekj("full",100===n),h.xp6(1),h.Udp("width",n,"%")}}function ha(e,t){if(1&e&&(h.TgZ(0,"ngb-rating",11),h.YNc(1,da,4,4,"ng-template",null,12,h.W1O),h.qZA()),2&e){var n=h.MAs(2),i=h.oxw().$implicit;h.Q6J("rate",null==i?null:i.ratingScore)("starTemplate",n)("readonly",!0)("max",5)}}var fa=function(){return["/product-details"]},pa=function(e){return{id:e}};function va(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"a",7),h._UZ(2,"img",8),h.qZA(),h.TgZ(3,"div",9),h.YNc(4,ha,3,4,"ngb-rating",10),h._UZ(5,"br"),h._UZ(6,"br"),h.TgZ(7,"a",7),h.TgZ(8,"h6"),h._uU(9),h.qZA(),h.qZA(),h.TgZ(10,"h4"),h._uU(11),h.ALo(12,"vndFormat"),h.qZA(),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.oxw(3);h.xp6(1),h.Q6J("routerLink",h.DdM(12,fa))("queryParams",h.VKq(13,pa,null==n?null:n.id)),h.xp6(1),h.Akn(i.typeSizeImage),h.Q6J("src",n.imageUrl.split(",")[0],h.LSH),h.xp6(2),h.Q6J("ngIf",(null==n?null:n.ratingScore)>0),h.xp6(3),h.Q6J("routerLink",h.DdM(15,fa))("queryParams",h.VKq(16,pa,null==n?null:n.id)),h.xp6(2),h.Oqu(n.name),h.xp6(2),h.hij(" ",h.lcZ(12,10,null==n?null:n.price)," ")}}function ga(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,va,13,18,"div",5),h.qZA()),2&e){var n=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",n)}}function ma(e,t){1&e&&(h.ynx(0),h.YNc(1,ga,2,1,"ng-template",4),h.BQk())}var ba=function(){var e=function(){function e(t,n){l(this,e),this.homeService=t,this.sweetalerService=n,this.title="New Product",this.type="fashion",this.size=3,this.typeSizeImage=z.mb.SMALL,this.result=[],this.NewProductSliderConfig=tt,this.callData()}return d(e,[{key:"ngOnInit",value:function(){}},{key:"callData",value:function(){var e=this;this.homeService.getNewProducts().then(function(t){for(;0!=t.data.length;)e.result.push(t.data.splice(0,e.size))})}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36($e.Y),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-product-box-vertical-slider"]],inputs:{title:"title",type:"type",size:"size",typeSizeImage:"typeSizeImage"},features:[h._Bn([$e.Y])],decls:5,vars:3,consts:[[1,"theme-card"],[1,"title-border"],[1,"offer-slider",3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],["class","media",4,"ngFor","ngForOf"],[1,"media"],[3,"routerLink","queryParams"],["appUiImageLoader","","alt","",1,"img-fluid",3,"src"],[1,"media-body","align-self-center"],[3,"rate","starTemplate","readonly","max",4,"ngIf"],[3,"rate","starTemplate","readonly","max"],["t",""],[1,"star"],[1,"half"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"h5",1),h._uU(2),h.qZA(),h.TgZ(3,"owl-carousel-o",2),h.YNc(4,ma,2,0,"ng-container",3),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Oqu(t.title),h.xp6(1),h.Q6J("options",t.NewProductSliderConfig),h.xp6(1),h.Q6J("ngForOf",t.result))},directives:[rt.Fy,s.sg,rt.Mp,N.yS,ue.D,s.O5,B.OC],pipes:[ye.A],styles:[".star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:1rem;color:#d3d3d3}.full[_ngcontent-%COMP%]{color:#ffa200}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden;color:#ffa200}.product-name[_ngcontent-%COMP%]{text-align:center;height:30px}"]}),e}();function ya(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",14),h.TgZ(1,"ul"),h.TgZ(2,"li",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().setGridLayout("col-lg-6")}),h._UZ(3,"img",16),h.qZA(),h.TgZ(4,"li",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().setGridLayout("col-lg-4")}),h._UZ(5,"img",17),h.qZA(),h.TgZ(6,"li",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().setGridLayout("col-lg-3")}),h._UZ(7,"img",18),h.qZA(),h.TgZ(8,"li",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().setGridLayout("col-lg-2")}),h._UZ(9,"img",19),h.qZA(),h.qZA(),h.qZA()}}var ka=function(){var e=function(){function e(){l(this,e),this.products=[],this.paginate={},this.layoutView="grid-view",this.setGrid=new h.vpe,this.setLayout=new h.vpe,this.sortedBy=new h.vpe}return d(e,[{key:"ngOnInit",value:function(){}},{key:"setGridLayout",value:function(e){this.setGrid.emit(e)}},{key:"setLayoutView",value:function(e){this.layoutView=e,this.setLayout.emit(e)}},{key:"sorting",value:function(e){this.sortedBy.emit(e.target.value)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-grid"]],inputs:{products:"products",paginate:"paginate",layoutView:"layoutView",sortBy:"sortBy"},outputs:{setGrid:"setGrid",setLayout:"setLayout",sortedBy:"sortedBy"},decls:22,vars:7,consts:[[1,"product-top-filter"],[1,"row"],[1,"col-12"],[1,"product-filter-content"],[1,"search-count"],[1,"collection-view"],["class","collection-grid-view",4,"ngIf"],[1,"product-page-filter"],[1,"pl-2",3,"change"],["value","0"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"],[1,"collection-grid-view"],[3,"click"],["src","assets/images/icon/2.png",1,"product-2-layout-view"],["src","assets/images/icon/3.png",1,"product-3-layout-view"],["src","assets/images/icon/4.png",1,"product-4-layout-view"],["src","assets/images/icon/6.png",1,"product-6-layout-view"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"h5"),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"div",5),h._UZ(8,"ul"),h.qZA(),h.YNc(9,ya,10,0,"div",6),h.TgZ(10,"div",7),h.TgZ(11,"select",8),h.NdJ("change",function(e){return t.sorting(e)}),h.TgZ(12,"option",9),h._uU(13,"Sorting Items"),h.qZA(),h.TgZ(14,"option",10),h._uU(15," Alphabetically A-Z "),h.qZA(),h.TgZ(16,"option",11),h._uU(17," Alphabetically Z-A "),h.qZA(),h.TgZ(18,"option",12),h._uU(19," Price Low to High "),h.qZA(),h.TgZ(20,"option",13),h._uU(21," Price High to Low "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(6),h.AsE(" Showing Products 1-",t.products.length," of ",t.paginate.totalItems," Result "),h.xp6(3),h.Q6J("ngIf","grid-view"==t.layoutView),h.xp6(5),h.Q6J("selected","1"==t.sortBy),h.xp6(2),h.Q6J("selected","2"==t.sortBy),h.xp6(2),h.Q6J("selected","3"==t.sortBy),h.xp6(2),h.Q6J("selected","4"==t.sortBy))},directives:[s.O5,U.YN,U.Kr],styles:[""]}),e}(),wa=r(25917),_a=r(22759),xa=r(19773),Ta=r(68307),Aa=r(77393),Sa=r(33637),Ca={leading:!0,trailing:!1},Oa=function(){function e(t,n,i,r){l(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=r}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Ea(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),Ea=function(e){function t(e,n,i,r,o){var a;return l(this,t),(a=f(this,t,[e])).duration=n,a.scheduler=i,a.leading=r,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return g(t,e),d(t,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Pa,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),t}(Aa.L);function Pa(e){e.subscriber.clearThrottle()}function Ia(e,t,n,i){var r=window&&!!window.document&&window.document.documentElement,o=r&&t?window:n;if(e&&(o=e&&r&&"string"==typeof e?function(e,t,n){return(n?window.document:t).querySelector(e)}(e,n.nativeElement,i):e,!o))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return o}function Ma(e){return e&&!e.firstChange}var Na={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},La={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},Ra=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l(this,e),this.vertical=t,this.propsMap=t?Na:La}return d(e,[{key:"clientHeightKey",value:function(){return this.propsMap.clientHeight}},{key:"offsetHeightKey",value:function(){return this.propsMap.offsetHeight}},{key:"scrollHeightKey",value:function(){return this.propsMap.scrollHeight}},{key:"pageYOffsetKey",value:function(){return this.propsMap.pageYOffset}},{key:"offsetTopKey",value:function(){return this.propsMap.offsetTop}},{key:"scrollTopKey",value:function(){return this.propsMap.scrollTop}},{key:"topKey",value:function(){return this.propsMap.top}}]),e}();function ja(e){return["Window","global"].some(function(t){return Object.prototype.toString.call(e).includes(t)})}function Da(e,t){return e?t.document.documentElement:null}function Va(e,t){var n=function(e){var t=e.container,n=e.isWindow,i=Za(e.axis);return za(t,n,i.offsetHeightKey,i.clientHeightKey)}(t);return t.isWindow?function(e,t,n){var i=n.axis,r=n.container,o=n.isWindow,a=Za(i),s=a.offsetHeightKey,c=a.clientHeightKey,l=e+Fa(Da(o,r),i,o),u=za(t.nativeElement,o,s,c),d=function(e,t,n){var i=t.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[i]+Fa(e,t,n)}(t.nativeElement,i,o)+u;return{height:e,scrolled:l,totalToScroll:d,isWindow:o}}(n,e,t):function(e,t,n){var i=n.axis,r=n.container;return{height:e,scrolled:r[i.scrollTopKey()],totalToScroll:r[i.scrollHeightKey()],isWindow:!1}}(n,0,t)}function Za(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function za(e,t,n,i){if(isNaN(e[n])){var r=Da(t,e);return r?r[i]:0}return e[n]}function Fa(e,t,n){var i=t.pageYOffsetKey(),r=t.scrollTopKey(),o=t.offsetTopKey();return isNaN(window.pageYOffset)?Da(n,e)[r]:e.ownerDocument?e.ownerDocument.defaultView[i]:e[o]}function qa(e,t,n){var i,r;if(e.totalToScroll<=0)return!1;var o=e.isWindow?e.scrolled:e.height+e.scrolled;return n?(i=(e.totalToScroll-o)/e.totalToScroll,r=t.down/10):(i=e.scrolled/(e.scrolled+(e.totalToScroll-o)),r=t.up/10),i<=r}var Ba=function(){function e(t){var n=t.totalToScroll;l(this,e),this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}return d(e,[{key:"updateScrollPosition",value:function(e){return this.lastScrollPosition=e}},{key:"updateTotalToScroll",value:function(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}},{key:"updateScroll",value:function(e,t){this.updateScrollPosition(e),this.updateTotalToScroll(t)}},{key:"updateTriggeredFlag",value:function(e,t){t?this.triggered.down=e:this.triggered.up=e}},{key:"isTriggeredScroll",value:function(e,t){return t?this.triggered.down===e:this.triggered.up===e}}]),e}();function Ua(e){return{type:e.scrollDown?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:e.stats.scrolled}}}var Ha=function(){var e=function(){function e(t,n){l(this,e),this.element=t,this.zone=n,this.scrolled=new h.vpe,this.scrolledUp=new h.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}return d(e,[{key:"ngAfterViewInit",value:function(){this.infiniteScrollDisabled||this.setup()}},{key:"ngOnChanges",value:function(e){var t=e.infiniteScrollContainer,n=e.infiniteScrollDisabled,i=e.infiniteScrollDistance,r=Ma(t),o=Ma(n),a=Ma(i),s=!o&&!this.infiniteScrollDisabled||o&&!n.currentValue||a;(r||o||a)&&(this.destroyScroller(),s&&this.setup())}},{key:"setup",value:function(){var e=this;"undefined"!=typeof window&&this.zone.runOutsideAngular(function(){e.disposeScroller=function(e){var t=e.scrollContainer,n=e.scrollWindow,i=e.element,r=e.fromRoot,o=function(e){var t=e.windowElement;return function(e,t){var n=e.isWindow||t&&!t.nativeElement?t:t.nativeElement;return Object.assign(Object.assign({},e),{container:n})}({axis:e.axis,isWindow:ja(t)},t)}({axis:new Ra(!e.horizontal),windowElement:Ia(t,n,i,r)}),a=new Ba({totalToScroll:Va(i,o)}),s={up:e.upDistance,down:e.downDistance};return function(e){var t=(0,_a.R)(e.container,"scroll");return e.throttle&&(t=t.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sa.P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ca;return function(i){return i.lift(new Oa(e,t,n.leading,n.trailing))}}(e.throttle))),t}({container:o.container,throttle:e.throttle}).pipe((0,xa.zg)(function(){return(0,wa.of)(Va(i,o))}),(0,c.U)(function(e){return function(e,t,n){var i=function(e,t,n){var i=function(e,t){return e<t.scrolled}(e,t);return{fire:qa(t,n,i),scrollDown:i}}(e,t,n);return{scrollDown:i.scrollDown,fire:i.fire,stats:t}}(a.lastScrollPosition,e,s)}),(0,Ta.b)(function(e){var t=e.stats;return a.updateScroll(t.scrolled,t.totalToScroll)}),(0,u.h)(function(t){var n=t.fire,i=t.scrollDown,r=t.stats.totalToScroll;return function(e,t,n){return!!(e&&t||!n&&t)}(e.alwaysCallback,n,a.isTriggeredScroll(r,i))}),(0,Ta.b)(function(e){var t=e.scrollDown,n=e.stats.totalToScroll;a.updateTriggeredFlag(n,t)}),(0,c.U)(Ua))}({fromRoot:e.fromRoot,alwaysCallback:e.alwaysCallback,disable:e.infiniteScrollDisabled,downDistance:e.infiniteScrollDistance,element:e.element,horizontal:e.horizontal,scrollContainer:e.infiniteScrollContainer,scrollWindow:e.scrollWindow,throttle:e.infiniteScrollThrottle,upDistance:e.infiniteScrollUpDistance}).subscribe(function(t){return e.zone.run(function(){return e.handleOnScroll(t)})})})}},{key:"handleOnScroll",value:function(e){var t=e.type,n=e.payload;switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(n);case"[NGX_ISE] UP":return this.scrolledUp.emit(n);default:return}}},{key:"ngOnDestroy",value:function(){this.destroyScroller()}},{key:"destroyScroller",value:function(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.R0b))},e.\u0275dir=h.lG2({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[h.TTD]}),e}(),Wa=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[],imports:[[]]}),e}();function Ya(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"li",37),h.TgZ(1,"a",38),h._uU(2),h.TgZ(3,"i",39),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().removeTag(e)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit;h.xp6(2),h.hij(" ",i," ")}}function Ja(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"li",40),h.TgZ(1,"a",41),h.NdJ("click",function(){return h.CHM(n),h.oxw().removeAllTags()}),h._uU(2," Clear all "),h.qZA(),h.qZA()}}function Qa(e,t){if(1&e&&(h.TgZ(0,"div",42),h.TgZ(1,"div",43),h._UZ(2,"app-product-box",44),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.oxw();h.Q6J("ngClass",i.grid),h.xp6(2),h.Q6J("product",n)("thumbnail",!1)("cartModal",!0)("typeGridLayout",i.grid)}}function Ga(e,t){1&e&&(h.TgZ(0,"div",45),h._UZ(1,"img",46),h.TgZ(2,"h3"),h._uU(3," Sorry! Couldn't find the product you were looking for!!! "),h.qZA(),h.TgZ(4,"p"),h._uU(5," Please check if you have misspelt something or try searching with other words. "),h.qZA(),h.qZA())}function $a(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",47),h.NdJ("scrolled",function(){return h.CHM(n),h.oxw().onScroll()}),h.qZA()}2&e&&h.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",1299)}function Ka(e,t){1&e&&h._UZ(0,"img",48)}function Xa(e,t){1&e&&(h.TgZ(0,"div",49),h._uU(1," No More Products "),h.qZA())}var es=function(){var e=function(){function e(t,n,i,r){l(this,e),this.route=t,this.router=n,this.productListService=i,this.sweetalertService=r,this.grid=z.e3.NORMAL,this.layoutView="grid-view",this.minPrice=0,this.maxPrice=5e6,this.tags=[],this.category=[],this.paginate={},this.sortBy=po.NULL,this.mobileSidebar=!1,this.finished=!1,this.isEmptyProduct=!1}return d(e,[{key:"ngOnDestroy",value:function(){this.subscribe.unsubscribe(),this.subscribe=null}},{key:"ngOnInit",value:function(){var e=this;this.subscribe=this.route.queryParams.subscribe(function(t){e.products=[],e.params={},e.tags=[],e.finished=!1,e.isEmptyProduct=!1,e.pageModel=null,e.minPrice=t.minPrice?t.minPrice:e.minPrice,e.maxPrice=t.maxPrice?t.maxPrice:e.maxPrice,e.category=t["search.categoryName"]?t["search.categoryName"].split(","):[],e.sortBy=t.typeSort?t.typeSort:po.NULL,e.category.length>0&&(e.category.forEach(function(t){return e.tags.push(t)}),e.params["search.categoryName"]=e.category.join(",")),e.params["search.Name"]=t.search?t.search:e.params["search.Name"],null==e.params["search.Name"]&&delete e.params["search.Name"],e.minPrice>0?e.params.minPrice=e.minPrice:delete e.params.minPrice,e.maxPrice<5e6?e.params.maxPrice=e.maxPrice:delete e.params.maxPrice,e.sortBy!=po.NULL?e.params.typeSort=e.sortBy:delete e.params.typeSort,e.params.pageSize=24,e.params.loading=!0,e.addItems()})}},{key:"addItems",value:function(){var e,t=this;(null===(e=this.pageModel)||void 0===e?void 0:e.totalItem)!=this.products.length?this.productListService.getPageProduct({params:this.params}).then(function(e){t.pageModel=e.data,t.params.pageIndex=e.data.pageIndex,t.params.pageSize=e.data.pageSize,t.products=[].concat(a(t.products),a(e.data.results)),t.isEmptyProduct=0==t.products.length}).catch(function(e){var n;return t.sweetalertService.alert(null!==(n=e.error.message)&&void 0!==n?n:e.error,j.b.ERROR)}):this.finished=!0}},{key:"onScroll",value:function(){this.params.pageIndex++,this.addItems()}},{key:"updateFilter",value:function(e){this.resetPage(),this.params.minPrice=e.minPrice,this.params.maxPrice=e.maxPrice,this.addNavigate(this.params)}},{key:"sortByFilter",value:function(e){this.sortBy=e,this.resetPage(),this.params.typeSort=e,e==po.NULL&&delete this.params.typeSort,this.addNavigate(this.params)}},{key:"removeTag",value:function(e){this.resetPage(),this.tags=this.tags.filter(function(t){return t!==e}),this.category.indexOf(e)>-1&&(this.category=this.category.filter(function(t){return t!==e}),this.category.length>0?this.params["search.categoryName"]=this.category.join(","):delete this.params["search.categoryName"]),this.addNavigate(this.params)}},{key:"removeAllTags",value:function(){this.tags=[],this.resetPage(),delete this.params["search.categoryName"],this.category=[],this.addNavigate(this.params)}},{key:"updateGridLayout",value:function(e){this.grid=e}},{key:"updateLayoutView",value:function(e){this.layoutView=e,this.grid="list-view"!=e?z.e3.NORMAL:"col-lg-12"}},{key:"toggleMobileSidebar",value:function(){this.mobileSidebar=!this.mobileSidebar}},{key:"onChangeTypeCate",value:function(e){var t=this;(null==this.category||this.category.length<=0)&&(this.category=[]),!(this.category.indexOf(e)>-1)&&(0==this.category.length&&"ALL"==e||(this.category.push(e),"ALL"!=e&&(this.params["search.categoryName"]=this.category.join(","),this.tags.indexOf(e)>-1||this.tags.push(e)),"ALL"==e&&(delete this.params["search.categoryName"],this.tags=this.tags.filter(function(e){return t.category.indexOf(e)<0})),this.resetPage(),this.addNavigate(this.params)))}},{key:"resetPage",value:function(){this.pageModel=null,this.products=[],this.finished=!1,delete this.params.pageIndex,delete this.params.pageSize}},{key:"addNavigate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.router.navigate([],{relativeTo:this.route,queryParams:e,skipLocationChange:!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(N.gz),h.Y36(N.F0),h.Y36(vo.N),h.Y36(D.ez))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-product-list"]],features:[h._Bn([$e.Y,vo.N])],decls:44,vars:20,consts:[[3,"title","breadcrumb"],[1,"section-b-space"],[1,"collection-wrapper"],[1,"container"],[1,"row"],[1,"col-lg-3"],[1,"collection-filter"],[1,"collection-filter-block"],[1,"collection-mobile-back",3,"click"],[1,"filter-back"],["aria-hidden","true",1,"fa","fa-angle-left"],[3,"categoryName","onChangeTypeCate"],[3,"min","max","priceFilter"],[3,"title"],[1,"collection-content","col"],[1,"page-main-content"],[1,"col-sm-12"],[1,"col-xl-12"],[1,"filter-main-btn",3,"click"],[1,"filter-btn","btn","btn-theme"],["aria-hidden","true",1,"fa","fa-filter"],[1,"product-filter-tags"],["class","mr-1",4,"ngFor","ngForOf"],["class","clear_filter",4,"ngIf"],["id","products",1,"collection-product-wrapper"],[3,"products","paginate","layoutView","sortBy","setGrid","setLayout","sortedBy"],[1,"product-wrapper-grid",3,"ngClass"],["class","col-grid-box",3,"ngClass",4,"ngFor","ngForOf"],["class","\n                          col-sm-12\n                          text-center\n                          section-b-space\n                          mt-5\n                          no-found\n                        ",4,"ngIf"],["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],[1,"product-infinitescroll"],[1,"theme-paggination-block"],[1,"container-fluid","p-0"],[1,"text-center","col-sm-12"],[1,"infinite-scrolling","mt-3","mb-3","d-inline-block"],["src","assets/images/loader.gif",4,"ngIf"],["class","loading-more active",4,"ngIf"],[1,"mr-1"],["href","javascript:void(0)",1,"filter_tag"],[1,"ti-close",3,"click"],[1,"clear_filter"],["href","javascript:void(0)",1,"clear_filter",3,"click"],[1,"col-grid-box",3,"ngClass"],[1,"product-box"],[2,"width","100%",3,"product","thumbnail","cartModal","typeGridLayout"],[1,"col-sm-12","text-center","section-b-space","mt-5","no-found"],["src","assets/images/empty-search.jpg",1,"img-fluid","mb-4"],["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["src","assets/images/loader.gif"],[1,"loading-more","active"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"div",6),h.TgZ(7,"div",7),h.TgZ(8,"div",8),h.NdJ("click",function(){return t.toggleMobileSidebar()}),h.TgZ(9,"span",9),h._UZ(10,"i",10),h._uU(11," back "),h.qZA(),h.qZA(),h.TgZ(12,"app-categories",11),h.NdJ("onChangeTypeCate",function(e){return t.onChangeTypeCate(e)}),h.qZA(),h.qZA(),h.TgZ(13,"div",7),h.TgZ(14,"app-price",12),h.NdJ("priceFilter",function(e){return t.updateFilter(e)}),h.qZA(),h.qZA(),h._UZ(15,"app-product-box-vertical-slider",13),h.qZA(),h.qZA(),h.TgZ(16,"div",14),h.TgZ(17,"div",15),h.TgZ(18,"div",4),h.TgZ(19,"div",16),h.TgZ(20,"div",4),h.TgZ(21,"div",17),h.TgZ(22,"div",18),h.NdJ("click",function(){return t.toggleMobileSidebar()}),h.TgZ(23,"span",19),h._UZ(24,"i",20),h._uU(25," Filter "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(26,"ul",21),h.YNc(27,Ya,4,1,"li",22),h.YNc(28,Ja,3,0,"li",23),h.qZA(),h.TgZ(29,"div",24),h.TgZ(30,"app-grid",25),h.NdJ("setGrid",function(e){return t.updateGridLayout(e)})("setLayout",function(e){return t.updateLayoutView(e)})("sortedBy",function(e){return t.sortByFilter(e)}),h.qZA(),h.TgZ(31,"div",26),h.TgZ(32,"div",4),h.YNc(33,Qa,3,5,"div",27),h.YNc(34,Ga,6,0,"div",28),h.qZA(),h.qZA(),h.YNc(35,$a,1,2,"div",29),h.TgZ(36,"div",30),h.TgZ(37,"div",31),h.TgZ(38,"div",32),h.TgZ(39,"div",4),h.TgZ(40,"div",33),h.TgZ(41,"div",34),h.YNc(42,Ka,1,0,"img",35),h.YNc(43,Xa,2,0,"div",36),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","Products")("breadcrumb","Products"),h.xp6(6),h.ekj("openFilterbar",t.mobileSidebar),h.xp6(6),h.Q6J("categoryName",t.category),h.xp6(2),h.Q6J("min",t.minPrice)("max",t.maxPrice),h.xp6(1),h.Q6J("title","New Products"),h.xp6(12),h.Q6J("ngForOf",t.tags),h.xp6(1),h.Q6J("ngIf",t.tags.length>0),h.xp6(2),h.Q6J("products",t.products)("paginate",t.paginate)("layoutView",t.layoutView)("sortBy",t.sortBy),h.xp6(1),h.Q6J("ngClass",t.layoutView),h.xp6(2),h.Q6J("ngForOf",t.products),h.xp6(1),h.Q6J("ngIf",t.isEmptyProduct),h.xp6(1),h.Q6J("ngIf",t.products.length),h.xp6(7),h.Q6J("ngIf",!t.finished&&t.products.length),h.xp6(1),h.Q6J("ngIf",t.finished&&t.products.length))},directives:[q.L,mo,ua,ba,s.sg,s.O5,ka,s.mk,kt.B,Ha],styles:[""]}),e}(),ts=function(){var e=function(){function e(t){l(this,e),this.httpClient=t,this.url="/api/user/profile",this.urlChangePassword=this.url+"/password"}return d(e,[{key:"update",value:function(e){return this.httpClient.putObservable(this.url,e).toPromise()}},{key:"changePassword",value:function(e){return this.httpClient.putObservable(this.urlChangePassword,e).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(V.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}();function ns(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," First Name is required "),h.qZA())}function is(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,ns,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.fProfile.firstName.errors.required)}}function rs(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Last Name is required "),h.qZA())}function os(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,rs,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.submittedProfile&&n.fProfile.lastName.errors.required)}}function as(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Phone is required "),h.qZA())}function ss(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Fail type phone "),h.qZA())}function cs(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Phone is exsist "),h.qZA())}function ls(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,as,2,0,"div",30),h.YNc(2,ss,2,0,"div",30),h.YNc(3,cs,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.fProfile.phone.errors?null:n.fProfile.phone.errors.required),h.xp6(1),h.Q6J("ngIf",null==n.fProfile.phone.errors?null:n.fProfile.phone.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==n.fProfile.phone.errors?null:n.fProfile.phone.errors.isPhoneUnique)}}function us(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Email is required "),h.qZA())}function ds(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Fail type email "),h.qZA())}function hs(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Email is exsist "),h.qZA())}function fs(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,us,2,0,"div",30),h.YNc(2,ds,2,0,"div",30),h.YNc(3,hs,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",null==n.fProfile.email.errors?null:n.fProfile.email.errors.required),h.xp6(1),h.Q6J("ngIf",null==n.fProfile.email.errors?null:n.fProfile.email.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==n.fProfile.email.errors?null:n.fProfile.email.errors.isEmailUnique)}}function ps(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Address is required "),h.qZA())}function vs(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,ps,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.fProfile.address.errors.required)}}function gs(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Current Password is required "),h.qZA())}function ms(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,gs,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.submittedPassword&&n.fPassword.password.errors.required)}}function bs(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," New Password is required "),h.qZA())}function ys(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,bs,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.submittedPassword&&n.fPassword.newPassword.errors.required)}}function ks(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Confirm Password is required "),h.qZA())}function ws(e,t){1&e&&(h.TgZ(0,"div"),h._uU(1," Passwords must match "),h.qZA())}function _s(e,t){if(1&e&&(h.TgZ(0,"div",29),h.YNc(1,ks,2,0,"div",30),h.YNc(2,ws,2,0,"div",30),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.submittedPassword&&n.fPassword.confirmPassword.errors.required),h.xp6(1),h.Q6J("ngIf",n.fPassword.confirmPassword.errors.mustMatch)}}var xs=function(e){return{"is-invalid":e}},Ts=function(){var e=function(){function e(t,n,i,r,o){l(this,e),this.formBuilder=t,this.profileService=n,this.authService=i,this.messageService=r,this.router=o,this.updateProfile=!0,this.updatePassword=!0,this.submittedProfile=!1,this.submittedPassword=!1}return d(e,[{key:"ngOnDestroy",value:function(){this.subDataUser.unsubscribe(),this.subDataUser=null}},{key:"ngOnInit",value:function(){var e=this;this.subDataUser=this.authService.callUserInfo.subscribe(function(t){e.user=t,e.createProfileForm(),t||e.router.navigate([""])}),this.createChangePasswordForm()}},{key:"profileSwith",value:function(){this.updateProfile=!this.updateProfile,this.submittedProfile=!1,this.createProfileForm()}},{key:"passwordSwith",value:function(){this.updatePassword=!this.updatePassword,this.submittedPassword=!1,this.createChangePasswordForm()}},{key:"fProfile",get:function(){return this.profileForm.controls}},{key:"fPassword",get:function(){return this.changePasswordForm.controls}},{key:"createProfileForm",value:function(){this.profileForm=this.formBuilder.group({firstName:[this.user?this.user.firstName:"",[U.kI.required,U.kI.maxLength(35)]],lastName:[this.user?this.user.lastName:"",[U.kI.required,U.kI.maxLength(35)]],phone:[this.user?this.user.phone:"",[U.kI.pattern("[0-9]{10,11}"),U.kI.maxLength(11)]],address:[this.user?this.user.address:"",[U.kI.maxLength(90)]],email:[this.user?this.user.email:"",[U.kI.required,U.kI.pattern("[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}"),U.kI.maxLength(90)]]})}},{key:"createChangePasswordForm",value:function(){this.changePasswordForm=this.formBuilder.group({password:[null,[U.kI.required]],newPassword:[null,[U.kI.required]],confirmPassword:[null,[U.kI.required]]},{validators:this.checkValidatorsPassword})}},{key:"checkValidatorsPassword",value:function(e){var t=e.get("newPassword"),n=e.get("confirmPassword");t.value!==n.value&&n.setErrors({mustMatch:!0})}},{key:"onChangePassword",value:function(){return(0,G.mG)(this,void 0,void 0,i().mark(function e(){var t,n=this;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submittedPassword=!0,this.changePasswordForm.invalid){e.next=4;break}return t=this.changePasswordForm.value,e.next=4,this.profileService.changePassword(t).then(function(e){n.messageService.notification("Change Password Success",j.b.SUCCESS),n.passwordSwith()}).catch(function(e){var t,i;n.messageService.alert("Change Password Fail",j.b.ERROR,null!==(i=null!==(t=e.error.message)&&void 0!==t?t:e.error.error)&&void 0!==i?i:"Server Disconnected")});case 4:case"end":return e.stop()}},e,this)}))}},{key:"onUpdateProfile",value:function(){return(0,G.mG)(this,void 0,void 0,i().mark(function e(){var t,n,r=this;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submittedProfile=!0,this.profileForm.invalid){e.next=4;break}return t=this.profileForm.value,n={imageUrl:null,email:t.email,address:t.address,firstName:t.firstName,lastName:t.lastName,files:null,phone:t.phone},e.next=4,this.profileService.update(n).then(function(e){r.authService.changeUserInfo(e.data),r.messageService.notification("Update Profile Success",j.b.SUCCESS),r.profileSwith()}).catch(function(e){var t,n;r.messageService.alert("Update Profile Fail",j.b.ERROR,null!==(n=null!==(t=e.error.message)&&void 0!==t?t:JSON.stringify(e.error.error))&&void 0!==n?n:"Server Disconnected")});case 4:case"end":return e.stop()}},e,this)}))}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.qu),h.Y36(ts),h.Y36(D.e8),h.Y36(D.ez),h.Y36(N.F0))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-profile"]],features:[h._Bn([ts,D.e8])],decls:80,vars:46,consts:[[3,"title","breadcrumb"],[1,"contact-page","register-page"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"form-row"],[1,"col-md-6"],[1,"pull-right",3,"hidden"],[1,"btn","btn-sm","btn-solid",3,"click"],[1,"theme-form",3,"formGroup"],[1,"col-md-6","form-group"],["for","name"],["formControlName","firstName","type","text","id","name","placeholder","First Name",1,"form-control",3,"readonly","ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email"],["formControlName","lastName","type","text","id","last-name","placeholder","Last Name",1,"form-control",3,"readonly","ngClass"],["for","review"],["formControlName","phone","type","tel","id","review","placeholder","Enter your phone",1,"form-control",3,"readonly","ngClass"],["formControlName","email","type","email","id","email","placeholder","Email",1,"form-control",3,"readonly","ngClass"],["formControlName","address","type","text","id","address-two","placeholder","Address",1,"form-control",3,"readonly","ngClass"],[1,"col-md-12",3,"hidden"],[1,"pull-left",2,"margin-right","5px"],[1,"pull-left"],[1,"contact-page","register-page","section-b-space"],[1,"theme-form",3,"hidden","formGroup"],[1,"form-group"],["type","password","autocomplete","new-password","placeholder","Current Passwor","formControlName","password",1,"form-control",3,"ngClass"],["type","password","placeholder","New Password","formControlName","newPassword","autocomplete","new-password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password","autocomplete","new-password",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"h3",6),h._uU(7,"PERSONAL DETAIL"),h.qZA(),h.TgZ(8,"div",7),h.TgZ(9,"button",8),h.NdJ("click",function(){return t.profileSwith()}),h._uU(10," Edit "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(11,"form",9),h.TgZ(12,"div",5),h.TgZ(13,"div",10),h.TgZ(14,"label",11),h._uU(15,"First Name"),h.qZA(),h._UZ(16,"input",12),h.YNc(17,is,2,1,"div",13),h.qZA(),h.TgZ(18,"div",10),h.TgZ(19,"label",14),h._uU(20,"Last Name"),h.qZA(),h._UZ(21,"input",15),h.YNc(22,os,2,1,"div",13),h.qZA(),h.TgZ(23,"div",10),h.TgZ(24,"label",16),h._uU(25,"Phone number"),h.qZA(),h._UZ(26,"input",17),h.YNc(27,ls,4,3,"div",13),h.qZA(),h.TgZ(28,"div",10),h.TgZ(29,"label",14),h._uU(30,"Email"),h.qZA(),h._UZ(31,"input",18),h.YNc(32,fs,4,3,"div",13),h.qZA(),h.TgZ(33,"div",10),h.TgZ(34,"label",11),h._uU(35,"Address"),h.qZA(),h._UZ(36,"input",19),h.YNc(37,vs,2,1,"div",13),h.qZA(),h.TgZ(38,"div",20),h.TgZ(39,"div",21),h.TgZ(40,"button",8),h.NdJ("click",function(){return t.profileSwith()}),h._uU(41," Cancel "),h.qZA(),h.qZA(),h.TgZ(42,"div",22),h.TgZ(43,"button",8),h.NdJ("click",function(){return t.onUpdateProfile()}),h._uU(44," Save "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(45,"section",23),h.TgZ(46,"div",2),h.TgZ(47,"div",3),h.TgZ(48,"div",4),h.TgZ(49,"div",5),h.TgZ(50,"h3",6),h._uU(51,"Change Password"),h.qZA(),h.TgZ(52,"div",7),h.TgZ(53,"button",8),h.NdJ("click",function(){return t.passwordSwith()}),h._uU(54," Edit "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(55,"form",24),h.TgZ(56,"div",25),h.TgZ(57,"div",6),h.TgZ(58,"label",11),h._uU(59,"Current Password"),h.qZA(),h._UZ(60,"input",26),h.YNc(61,ms,2,1,"div",13),h.qZA(),h.TgZ(62,"div",6),h.TgZ(63,"label",11),h._uU(64,"New Password"),h.qZA(),h._UZ(65,"input",27),h.YNc(66,ys,2,1,"div",13),h.qZA(),h.TgZ(67,"div",6),h.TgZ(68,"label",11),h._uU(69,"Confirm Password"),h.qZA(),h._UZ(70,"input",28),h.YNc(71,_s,3,2,"div",13),h.qZA(),h._UZ(72,"br"),h.TgZ(73,"div",20),h.TgZ(74,"div",21),h.TgZ(75,"button",8),h.NdJ("click",function(){return t.passwordSwith()}),h._uU(76," Cancel "),h.qZA(),h.qZA(),h.TgZ(77,"div",22),h.TgZ(78,"button",8),h.NdJ("click",function(){return t.onChangePassword()}),h._uU(79," Save "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","Profile")("breadcrumb","Profile"),h.xp6(8),h.Q6J("hidden",!t.updateProfile),h.xp6(3),h.Q6J("formGroup",t.profileForm),h.xp6(5),h.Q6J("readonly",t.updateProfile)("ngClass",h.VKq(30,xs,t.submittedProfile&&t.fProfile.firstName.errors)),h.xp6(1),h.Q6J("ngIf",t.submittedProfile&&t.fProfile.firstName.errors),h.xp6(4),h.Q6J("readonly",t.updateProfile)("ngClass",h.VKq(32,xs,t.submittedProfile&&t.fProfile.lastName.errors)),h.xp6(1),h.Q6J("ngIf",t.fProfile.lastName.errors),h.xp6(4),h.Q6J("readonly",t.updateProfile)("ngClass",h.VKq(34,xs,t.submittedProfile&&t.fProfile.phone.errors)),h.xp6(1),h.Q6J("ngIf",t.submittedProfile&&t.fProfile.phone.errors),h.xp6(4),h.Q6J("readonly",t.updateProfile)("ngClass",h.VKq(36,xs,t.submittedProfile&&t.fProfile.email.errors)),h.xp6(1),h.Q6J("ngIf",t.submittedProfile&&t.fProfile.email.errors),h.xp6(4),h.Q6J("readonly",t.updateProfile)("ngClass",h.VKq(38,xs,t.submittedProfile&&t.fProfile.address.errors)),h.xp6(1),h.Q6J("ngIf",t.submittedProfile&&t.fProfile.address.errors),h.xp6(1),h.Q6J("hidden",t.updateProfile),h.xp6(14),h.Q6J("hidden",!t.updatePassword),h.xp6(3),h.Q6J("hidden",t.updatePassword)("formGroup",t.changePasswordForm),h.xp6(5),h.Q6J("ngClass",h.VKq(40,xs,t.submittedPassword&&t.fPassword.password.errors)),h.xp6(1),h.Q6J("ngIf",t.fPassword.password.errors),h.xp6(4),h.Q6J("ngClass",h.VKq(42,xs,t.submittedPassword&&t.fPassword.newPassword.errors)),h.xp6(1),h.Q6J("ngIf",t.fPassword.newPassword.errors),h.xp6(4),h.Q6J("ngClass",h.VKq(44,xs,t.submittedPassword&&t.fPassword.confirmPassword.errors)),h.xp6(1),h.Q6J("ngIf",t.fPassword.confirmPassword.errors),h.xp6(2),h.Q6J("hidden",t.updatePassword))},directives:[q.L,U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,s.mk,s.O5],styles:[".contact-page[_ngcontent-%COMP%]   .theme-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#ddd;font-size:12px;padding:17px 25px;margin-bottom:5px;height:inherit}"]}),e}();function As(e,t){1&e&&(h.TgZ(0,"div",8),h._UZ(1,"img",9),h.TgZ(2,"h3",10),h.TgZ(3,"b"),h._uU(4,"Wishlist is Empty"),h.qZA(),h.qZA(),h.TgZ(5,"h4"),h._uU(6,"Explore more shortlist some items."),h.qZA(),h.qZA())}var Ss=function(){return["/product-details"]},Cs=function(e){return{id:e}},Os=function(e,t){return{url:e,typeClass:t}};function Es(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"tbody"),h.TgZ(1,"tr"),h.TgZ(2,"td"),h.TgZ(3,"a",17),h._UZ(4,"app-image-wrapper",18),h.qZA(),h.qZA(),h.TgZ(5,"td"),h.TgZ(6,"a",17),h._uU(7),h.qZA(),h.TgZ(8,"div",19),h.TgZ(9,"div",20),h.TgZ(10,"p"),h._uU(11),h.qZA(),h.qZA(),h.TgZ(12,"div",20),h.TgZ(13,"h2",21),h._uU(14),h.ALo(15,"vndFormat"),h.qZA(),h.qZA(),h.TgZ(16,"div",20),h.TgZ(17,"h2",21),h.TgZ(18,"a",22),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw(2).removeItem(e)}),h._UZ(19,"i",23),h.qZA(),h.TgZ(20,"a",24),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw(2).addToCart(e)}),h._UZ(21,"i",25),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(22,"td"),h.TgZ(23,"h2"),h._uU(24),h.ALo(25,"vndFormat"),h.qZA(),h.qZA(),h.TgZ(26,"td"),h.TgZ(27,"a",26),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw(2).removeItem(e)}),h._UZ(28,"i",23),h.qZA(),h.TgZ(29,"a",24),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw(2).addToCart(e)}),h._UZ(30,"i",25),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,r=h.oxw(2);h.xp6(3),h.Q6J("routerLink",h.DdM(13,Ss))("queryParams",h.VKq(14,Cs,null==i?null:i.id)),h.xp6(1),h.Q6J("data",h.WLB(16,Os,r.getImage(null==i?null:i.imageUrl.split(",")[0]),r.typeDisplayImage.WISHLIST_IMAGE)),h.xp6(2),h.Q6J("routerLink",h.DdM(19,Ss))("queryParams",h.VKq(20,Cs,null==i?null:i.id)),h.xp6(1),h.Oqu(null==i?null:i.name),h.xp6(4),h.hij(" ",r.checkStock(i)?"in cart":"out cart"," "),h.xp6(3),h.hij(" ",h.lcZ(15,9,null==i?null:i.price)," "),h.xp6(10),h.hij(" ",h.lcZ(25,11,null==i?null:i.price)," ")}}function Ps(e,t){if(1&e&&(h.TgZ(0,"div",11),h.TgZ(1,"div",12),h.TgZ(2,"table",13),h.TgZ(3,"thead"),h.TgZ(4,"tr",14),h.TgZ(5,"th",15),h._uU(6,"image"),h.qZA(),h.TgZ(7,"th",15),h._uU(8,"product name"),h.qZA(),h.TgZ(9,"th",15),h._uU(10,"price"),h.qZA(),h.TgZ(11,"th",15),h._uU(12,"action"),h.qZA(),h.qZA(),h.qZA(),h.YNc(13,Es,31,22,"tbody",16),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.oxw();h.xp6(13),h.Q6J("ngForOf",n.products)}}var Is=function(){return["/product"]},Ms=function(){return["/cart"]},Ns=[{path:"home",component:Mt},{path:"blog",component:ve},{path:"product",component:es},{path:"cart",component:Ee},{path:"checkout",component:Qe},{path:"checkout/success",component:Rt},{path:"blog/:id",component:le},{path:"product-details",component:fo},{path:"page-info/:id",component:Hr},{path:"profile",component:Ts,canActivate:[R]},{path:"wishlist",component:function(){var e=function(){function e(t,n,i,r,o){l(this,e),this.wishListService=t,this.cartService=n,this.messageService=i,this.authService=r,this.router=o,this.products=[],this.typeDisplayImage=z.hp}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.getList(),this.subscription=this.authService.callUserInfo.subscribe(function(t){t||e.router.navigate([""])})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.subscription=null}},{key:"addToCart",value:function(e){this.cartService.addToCart(e)}},{key:"getList",value:function(){var e=this;this.wishListService.getByCustomer().then(function(t){e.isEmpty=!0,e.products=t.data,t.data.length>0&&(e.isEmpty=!1)})}},{key:"removeItem",value:function(e){var t=this;this.messageService.confirm("Do you want to remove?","Yes","No",!1).then(function(n){n.isConfirmed&&(t.cartService.removeWishlistItem(e),t.wishListService.createOrDelete({productId:e.id}).then(function(){return t.getList()}))})}},{key:"getImage",value:function(e){return D.Ip.getLinkFile(e)}},{key:"checkStock",value:function(e){var t,n;return(null!==(n=null===(t=JSON.parse(localStorage.getItem("cartItems")))||void 0===t?void 0:t.cartDetails)&&void 0!==n?n:[]).some(function(t){return e.id==t.id})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Yr.W),h.Y36(ge.N),h.Y36(D.ez),h.Y36(D.e8),h.Y36(N.F0))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-wishlist"]],features:[h._Bn([Yr.W,ge.N])],decls:11,vars:8,consts:[[3,"title","breadcrumb"],[1,"wishlist-section","section-b-space"],[1,"container"],["class","col-md-12 empty-cart-cls text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","wishlist-buttons"],[1,"col-12"],[1,"btn","btn-solid",3,"routerLink"],[1,"col-md-12","empty-cart-cls","text-center"],["src","assets/images/empty-wishlist.png","alt","Empty cart","title","Emprt cart"],[1,"mt-4"],[1,"row"],[1,"col-sm-12"],[1,"table","cart-table","table-responsive-xs"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink","queryParams"],[3,"data"],[1,"mobile-cart-content","row"],[1,"col-xs-3"],[1,"td-color"],["href","javascript:void(0)",1,"icon","mb-2",3,"click"],[1,"ti-close"],["href","javascript:void(0)",1,"cart",3,"click"],[1,"ti-shopping-cart"],["href","javascript:void(0)",1,"icon","mr-3",3,"click"]],template:function(e,t){1&e&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"section",1),h.TgZ(2,"div",2),h.YNc(3,As,7,0,"div",3),h.YNc(4,Ps,14,1,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"div",6),h.TgZ(7,"a",7),h._uU(8,"continue shopping"),h.qZA(),h.TgZ(9,"a",7),h._uU(10,"view cart"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title","Wishlist")("breadcrumb","Wishlist"),h.xp6(3),h.Q6J("ngIf",t.isEmpty),h.xp6(1),h.Q6J("ngIf",t.products.length),h.xp6(3),h.Q6J("routerLink",h.DdM(6,Is)),h.xp6(2),h.Q6J("routerLink",h.DdM(7,Ms)))},directives:[q.L,s.O5,N.yS,s.sg,Q.t],pipes:[ye.A],styles:[""]}),e}(),canActivate:[R]},{path:"error",component:Ge}],Ls=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[R],imports:[[N.Bz.forChild(Ns)],N.Bz]}),e}(),Rs=function(){var e=d(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[],imports:[[s.ez,P.forRoot(),M.m,Ls,Wa,ca,Fr,U.UX]]}),e}()}}])}();